(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"52xv":function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,".section[data-v-16563a27]{padding:0 16px}.modalbox[data-v-16563a27]{padding-top:env(safe-area-inset-top);overflow:hidden}.modalbox .modal-dialog[data-v-16563a27]{transform:translateY(100%)!important;min-width:100%;transition:all .5s!important;position:fixed;left:0;top:0;right:0;bottom:0;margin:env(safe-area-inset-top) 0 0}.modalbox .modal-dialog .modal-content[data-v-16563a27]{border-radius:0;border:0;margin:auto;overflow:hidden;padding-top:56px;position:absolute;left:0;right:0;bottom:0;top:0}.modalbox .modal-dialog .modal-content .modal-header[data-v-16563a27]{border:0;min-height:56px;padding:10px 16px;border-radius:0;display:flex;border-bottom:1px solid #e1e1e1;align-items:center;justify-content:space-between;margin:0;position:fixed;left:0;right:0;top:0;width:100%;z-index:100;background:#fff}.modalbox .modal-dialog .modal-content .modal-header .modal-title[data-v-16563a27]{margin:0;color:#063065;font-size:17px;font-family:Open Sans;font-weight:900}.modalbox .modal-dialog .modal-content .modal-header a[data-v-16563a27]{color:#063065}.modalbox .modal-dialog .modal-content .modal-body[data-v-16563a27]{padding:20px 16px;overflow:auto}.modalbox.show .modal-dialog[data-v-16563a27]{transform:translate(0)!important}.form-group[data-v-16563a27]{width:100%}.form-group .label[data-v-16563a27]{font-size:12px;margin:0;font-weight:900;color:#063065;display:block;line-height:1.2em;text-align:left;font-family:Open Sans}.form-group textarea[data-v-16563a27]{resize:none}.form-group .input-info[data-v-16563a27]{font-size:11px;color:#a1a1a2}.form-group .clear-input[data-v-16563a27]{display:flex;align-items:center;justify-content:center;color:#4f5050;height:38px;font-size:22px;position:absolute;right:6px;top:0;bottom:0;width:32px;opacity:.5}.form-group .clear-input[data-v-16563a27]:active,.form-group .clear-input[data-v-16563a27]:hover{opacity:.8}.form-group .input-wrapper[data-v-16563a27]{position:relative}.form-group .input-wrapper.not-empty .clear-input[data-v-16563a27]{display:flex}.form-group .input-wrapper.active .label[data-v-16563a27]{color:#f08b23!important}.form-group.basic[data-v-16563a27]{padding:8px 0;margin:0}.form-group.basic .custom-select[data-v-16563a27],.form-group.basic .form-control[data-v-16563a27]{background:transparent;border:none;border-bottom:1px solid #e1e1e1;padding:0 30px 0 0;border-radius:0;height:40px;color:#141515;font-size:15px}.form-group.basic .custom-select[data-v-16563a27]:focus,.form-group.basic .form-control[data-v-16563a27]:focus{border-bottom-color:#f08b23;box-shadow:inset 0 -1px 0 0 #f08b23}.form-group.basic textarea.form-control[data-v-16563a27]{height:auto;padding:7px 40px 7px 0}.form-group.basic.animated .label[data-v-16563a27]{margin-top:20px;opacity:0;top:-3px;transition:all .2s;position:absolute}.form-group.basic.animated .input-wrapper[data-v-16563a27]{padding-top:5px}.form-group.basic.animated .input-wrapper.not-empty .label[data-v-16563a27]{margin-top:0;opacity:1}.form-button-group[data-v-16563a27]{position:fixed;bottom:0;left:0;right:0;width:100%;padding-left:16px;padding-right:16px;background:#fff;min-height:84px;display:flex;align-items:center;justify-content:center;padding-bottom:env(safe-area-inset-bottom)}.form-button-group .btn[data-v-16563a27]{background:#f08b23;color:#fff;text-transform:uppercase;font-size:24px;font-family:Open Sans;font-weight:900;border:0;border-radius:50px;outline:none}form-button-group .btn[data-v-16563a27]:focus{outline:none!important;box-shadow:none!important}.modal-title[data-v-16563a27]{color:#062348;font-weight:900;font-family:Open Sans}",""])},YXIJ:function(t,a,e){"use strict";e("xXKX")},"q4C/":function(t,a,e){"use strict";e.r(a);var i={name:"Clients",data:function(){return{columns:[{label:"ID",field:"id"},{label:"Имя",field:"info.FullName"},{label:"Email",field:"email"},{label:"Телефон",field:"info.Phone"}],window:{width:0,height:0},manager:null,countItems:3,newClient:{email:"",role:"client",is_admin:0,is_manager:0,FullName:"",FirstName:"",MiddleName:"",LastName:"",Phone:"",ManagerId:"",City:"",Department:""},load:!0,loading:!1}},created:function(){0===this.managers.length&&this.$store.dispatch("setManagers")},mounted:function(){var t=this;this.load=!0,0===this.clients.length&&this.$store.dispatch("setClients").then((function(a){t.load=!1})),console.log(this.managers)},computed:{menu:function(){return this.$store.getters.menu},clients:function(){return this.$store.getters.clients},managers:function(){return this.$store.getters.managers},preloader:function(){return this.$store.getters.preloader}},methods:{addClient:function(){$("#newClientModalBox").modal("show")},saveClient:function(){var t=this;this.loading=!0,this.newClient.FullName=this.newClient.LastName+" "+this.newClient.FirstName+" "+this.newClient.MiddleName,this.newClient.ManagerId=this.manager.id,console.log(this.newClient),this.$store.dispatch("newClient",this.newClient).then((function(a){t.sendMessage("Клиент успешно сохранён"),t.loading=!1,$("#newClientModalBox").modal("hide")}))},editClient:function(t){this.sendMessage("Клиент успешно обнавлён")},deleteClient:function(t){var a=this;t.isLoading=!0,this.$store.dispatch("deleteClient",t.id).then((function(e){t.isLoading=!1,a.sendMessage("Клиент успешно удалён")}))},seeClientProfile:function(t){this.$router.push("/manager/client-profile/"+t)},onRowClick:function(t){this.$router.push("/manager/client-profile/"+t.id)},sendMessage:function(t){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:t})}},directives:{mask:e("OmDE").mask}},n=(e("YXIJ"),e("KHd+")),o=Object(n.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row m-auto mb-4 px-4 justify-content-center align-items-center",staticStyle:{width:"100%",height:"100%"},attrs:{id:"mobile-table"}},[e("div",{staticClass:"modal fade modalbox show",attrs:{id:"newClientModalBox","data-backdrop":"static",tabindex:"-1",role:"dialog","aria-modal":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"start-form",staticStyle:{"margin-bottom":"110px"}},[e("div",{staticClass:"section mx-auto"},[e("div",{staticClass:"row my-3"},[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var i=a.invalid;return[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row w-100 m-auto"},[e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{staticClass:"mb-0",attrs:{label:"Email",placeholder:"Email"},model:{value:t.newClient.email,callback:function(a){t.$set(t.newClient,"email",a)},expression:"newClient.email"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"lastName",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{staticClass:"mb-0",attrs:{label:"Фамилия",placeholder:"Фамилия"},model:{value:t.newClient.LastName,callback:function(a){t.$set(t.newClient,"LastName",a)},expression:"newClient.LastName"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"firstName",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{staticClass:"mb-0",attrs:{label:"Имя",placeholder:"Имя"},model:{value:t.newClient.FirstName,callback:function(a){t.$set(t.newClient,"FirstName",a)},expression:"newClient.FirstName"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("base-input",{staticClass:"mb-0",attrs:{label:"Отчество",placeholder:"Отчество"},model:{value:t.newClient.MiddleName,callback:function(a){t.$set(t.newClient,"MiddleName",a)},expression:"newClient.MiddleName"}})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"phone",rules:"required|phone"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{directives:[{name:"mask",rawName:"v-mask",value:["+# (###) ###-##-##","+## (###) ###-##-##"],expression:"['+# (###) ###-##-##','+## (###) ###-##-##']"}],staticClass:"mb-0",attrs:{label:"Телефон",placeholder:"Телефон"},model:{value:t.newClient.Phone,callback:function(a){t.$set(t.newClient,"Phone",a)},expression:"newClient.Phone"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12 pr-md-1"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"City",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("div",{staticClass:"form-group mb-0"},[e("label",{staticClass:"control-label"},[t._v("Город")]),t._v(" "),e("multiselect",{attrs:{options:t.branches,"option-height":25,placeholder:"Выберите город","show-labels":!1,maxHeight:200,loading:0===t.branches.length,disabled:0===t.branches.length,"allow-empty":!1,"track-by":"city",label:"city"},scopedSlots:t._u([{key:"singleLabel",fn:function(a){return[e("span",{staticClass:"option__desc"},[a.option.city?e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.city))]):t._e()])]}},{key:"option",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.city))])])]}}],null,!0),model:{value:t.newClient.City,callback:function(a){t.$set(t.newClient,"City",a)},expression:"newClient.City"}})],1),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12 px-md-1"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"department",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("label",{staticClass:"control-label"},[t._v("Отделение")]),t._v(" "),e("multiselect",{attrs:{options:t.newClient.City.departments,"option-height":25,placeholder:"Выберите отделение","show-labels":!1,maxHeight:200,loading:0===t.newClient.City.departments.length,disabled:0===t.newClient.City.departments.length,"allow-empty":!1,label:"address","track-by":"address"},scopedSlots:t._u([{key:"singleLabel",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.address))])])]}},{key:"option",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.address))])])]}}],null,!0),model:{value:t.newClient.Department,callback:function(a){t.$set(t.newClient,"Department",a)},expression:"newClient.Department"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("label",{staticClass:"control-label"},[t._v("\n                                                        Менеджер\n                                                    ")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"manager",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("multiselect",{attrs:{options:t.managers,"option-height":25,placeholder:"Выберите менеджера","show-labels":!1,maxHeight:200,label:"info","track-by":"id",loading:t.managers.length<=0,disabled:t.managers.length<=0,"allow-empty":!1},scopedSlots:t._u([{key:"singleLabel",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(a.option.info.FullName))])])]}},{key:"option",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(a.option.info.FullName))])])]}}],null,!0),model:{value:t.manager,callback:function(a){t.manager=a},expression:"manager"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1)])]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"row w-100 m-auto"},[e("p",[t._v("Пароль для входа в систему созданного пользователя: "),e("span",{staticStyle:{"font-weight":"700",color:"#f8a105"}},[t._v("TravelClub")])])])]),t._v(" "),e("div",{staticClass:"col-12 contact-btn form-button-group"},[e("button",{staticClass:"btn btn-block btn-lg",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:i||t.loading},on:{click:t.saveClient}},[e("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[t.loading?e("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" "),t.loading?e("span",{staticClass:"sr-only"},[t._v("Loading...")]):t._e(),t._v("\n                                                    Сохранить\n                                                ")])])])]}}])})],1)])])])])])]),t._v(" "),e("data-table",{attrs:{title:"Клиенты",columns:t.columns,rows:t.clients,clickable:!0,perPage:[5,10,25,50],expandMode:!1,addButton:!0,addButtonClick:t.addClient,loadingAnimation:t.load},scopedSlots:t._u([{key:"tbody-tr",fn:function(a){return[e("td",{attrs:{"data-title":"Действия"}},[a.row.isLoading?t._e():e("button",{staticClass:"btn waves-effect",staticStyle:{outline:"none"},on:{click:function(e){return t.deleteClient(a.row)}}},[e("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[t._v("delete")])]),t._v(" "),a.row.isLoading?e("div",{staticClass:"d-flex align-items-center float-left",staticStyle:{padding:".375rem .75rem"}},[e("div",{staticClass:"spinner-border text-center",staticStyle:{width:"24px",height:"24px"},attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])])]):t._e(),t._v(" "),a.row.isLoading?t._e():e("button",{staticClass:"btn waves-effect",on:{click:function(e){return t.seeClientProfile(a.row.id)}}},[e("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[t._v("edit")])])])]}}])},[e("th",{staticStyle:{width:"auto"},attrs:{slot:"thead-tr"},slot:"thead-tr"},[t._v("\n               Действия\n            ")])])],1)])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[this._v("Создать клиента")]),this._v(" "),a("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"javascript:;","data-dismiss":"modal"}},[this._v("Закрыть")])])}],!1,null,"16563a27",null);a.default=o.exports},xXKX:function(t,a,e){var i=e("52xv");"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(i,n);i.locals&&(t.exports=i.locals)}}]);