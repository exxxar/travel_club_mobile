/*! For license information please see 6814.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6814],{16813:(n,t,e)=>{e.d(t,{A:()=>s});var o=e(45627),i=e.n(o),r=e(76798),a=e.n(r)()(i());a.push([n.id,".modal-dialog{transform:none!important}#client .modal-dialog{max-width:900px!important}.modal-title,.travel-card-description{color:#062348;font-family:Open Sans;font-weight:900}.travel-card-description{font-size:13px}.more-text{color:#f08b23;cursor:pointer;font-family:Open Sans;font-size:16px;font-weight:600;text-transform:uppercase}.more-button{cursor:pointer;margin:0 10px;right:10px}.more-button div{background:#f08b23;border-radius:50px;color:#fff;display:block;font-size:40px;height:40px;padding:0!important;text-decoration:none;width:40px}.travel-card{background:#fff;border-radius:20px;box-shadow:0 3px 15px #0000006b;-moz-box-shadow:0 3px 15px #0000006b;-webkit-box-shadow:0 3px 15px #0000006b}.white--text{caret-color:#fff!important;color:#fff!important}.active-tour{background:#f08b23;border-radius:20px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.12),0 1px 5px 0 rgba(0,0,0,.2);font-family:Open Sans;font-weight:900;padding:3px 20px;text-transform:uppercase}.control-label{color:#344675;font-family:Open Sans!important;font-size:.7500000025rem;font-weight:900!important}.white-content .form-control::-moz-placeholder{font-family:Open Sans!important;font-weight:900!important}.white-content .form-control::placeholder{font-family:Open Sans!important;font-weight:900!important}.white-content .form-control{border-color:#f08b23;border-radius:20px;color:#062348;font-family:Open Sans!important;font-weight:900!important}.v-card>:last-child:not(.v-btn):not(.v-chip){border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.v-card>.v-card__progress+:not(.v-btn):not(.v-chip),.v-card>:first-child:not(.v-btn):not(.v-chip){border-top-left-radius:inherit;border-top-right-radius:inherit}.v-responsive{display:flex;flex:1 0 auto;max-width:100%;overflow:hidden;position:relative}.v-image{z-index:0}.v-card{overflow-wrap:break-word;white-space:normal}.v-responsive__sizer{background:#0d274b61;flex:1 0 0px;transition:padding-bottom .2s cubic-bezier(.25,.8,.5,1)}.v-image__image--cover{background-size:cover}.v-image__image{background-repeat:no-repeat}.v-image__image,.v-image__placeholder{height:100%;left:0;position:absolute;top:0;width:100%;z-index:-1}.v-responsive__sizer~.v-responsive__content{margin-left:-100%}.v-responsive__content{flex:1 0 0px;max-width:100%}.elevation-24{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.12),0 1px 5px 0 rgba(0,0,0,.2)}.v-card__title{align-items:center;display:flex;flex-wrap:wrap;font-size:1.25rem;font-weight:500;letter-spacing:.0125em;line-height:2rem;word-break:break-all}.v-card__subtitle,.v-card__text,.v-card__title{padding:16px}.v-card__subtitle{bottom:0;left:0;position:absolute}.v-card__subtitle h3{font-family:Open Sans;font-weight:900}","",{version:3,sources:["webpack://./resources/js/desktop/mobile/pages/Manager/ClientProfile.vue"],names:[],mappings:"AAqhDA,cACA,wBACA,CACA,sBACA,yBACA,CAMA,sCAJA,aAAA,CAEA,qBAAA,CADA,eAQA,CALA,yBAEA,cAGA,CACA,WAGA,aAAA,CAGA,cAAA,CALA,qBAAA,CAIA,cAAA,CADA,eAAA,CAFA,wBAKA,CACA,aACA,cAAA,CACA,aAAA,CACA,UACA,CACA,iBASA,kBAAA,CALA,kBAAA,CAIA,UAAA,CALA,aAAA,CAGA,cAAA,CAJA,WAAA,CAQA,mBAAA,CALA,oBAAA,CAJA,UAUA,CACA,aAEA,eAAA,CADA,kBAAA,CAEA,+BAAA,CACA,oCAAA,CACA,uCACA,CAEA,aAEA,0BAAA,CADA,oBAEA,CACA,aACA,kBAAA,CACA,kBAAA,CAGA,gGAAA,CAGA,qBAAA,CAFA,eAAA,CAHA,gBAAA,CAIA,wBAEA,CAMA,eAGA,aAAA,CAFA,+BAAA,CAGA,wBAAA,CAFA,yBAGA,CACA,+CACA,+BAAA,CACA,yBACA,CAHA,0CACA,+BAAA,CACA,yBACA,CACA,6BAMA,oBAAA,CACA,kBAAA,CAJA,aAAA,CAFA,+BAAA,CACA,yBAEA,CAaA,6CACA,iCAAA,CACA,kCACA,CACA,kGACA,8BAAA,CACA,+BACA,CACA,cAKA,YAAA,CAFA,aAAA,CACA,cAAA,CAFA,eAAA,CADA,iBAKA,CACA,SACA,SACA,CACA,QACA,wBAAA,CACA,kBACA,CACA,qBACA,oBAAA,CAEA,YAAA,CADA,uDAEA,CACA,uBACA,qBACA,CACA,gBACA,2BACA,CACA,sCAMA,WAAA,CAFA,MAAA,CAFA,iBAAA,CACA,KAAA,CAEA,UAAA,CAJA,UAMA,CACA,4CACA,iBACA,CACA,uBACA,YAAA,CACA,cACA,CACA,cAEA,gGACA,CACA,eACA,kBAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CACA,oBACA,CACA,+CACA,YACA,CACA,kBAEA,QAAA,CACA,MAAA,CAFA,iBAGA,CACA,qBAEA,qBAAA,CADA,eAEA",sourcesContent:["<template>\n    <div>\n        <div class=\"container m-auto\" style=\"height: 100%;\">\n            <div class=\"row mx-auto\">\n                <div class=\"col-md-12\">\n                    <div class=\"row mx-auto mt-3 mb-5 justify-content-center align-items-center\" style=\"width: 100%;border-top: 4px solid #f08b23;\">\n                        <span class=\"white--text active-tour\" style=\"background:#062348; font-size: 24px;position: absolute\">Профиль</span>\n                    </div>\n                </div>\n                <div class=\"col-md-12\">\n                    <ValidationObserver v-slot=\"{ invalid }\">\n                        <card id=\"client-profile\">\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"lastName\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Фамилия\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Фамилия\"\n                                                          v-model=\"client.info.LastName\"\n                                                          placeholder=\"Фамилия\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"firstName\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Имя\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Имя\"\n                                                          v-model=\"client.info.FirstName\"\n                                                          placeholder=\"Имя\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 ps-md-1\">\n                                    <b-form-group label=\"Отчество\" label-size=\"sm\" class=\"mb-0\">\n                                        <b-form-input label=\"Отчество\"\n                                                      v-model=\"client.info.MiddleName\"\n                                                      placeholder=\"Отчество\"\n                                                      class=\"mb-0 travel-input\"\n                                        >\n                                        </b-form-input>\n                                    </b-form-group>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                \x3c!--                            <div class=\"col-md-4 pe-md-1\">--\x3e\n                                \x3c!--                                <ValidationProvider name=\"login\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">--\x3e\n                                \x3c!--                                    <b-form-input label=\"Логин\"--\x3e\n                                \x3c!--                                                placeholder=\"Логин\"--\x3e\n                                \x3c!--                                                v-model=\"user.login\"--\x3e\n                                \x3c!--                                                disabled--\x3e\n                                \x3c!--                                                class=\"mb-0\"--\x3e\n                                \x3c!--                                    >--\x3e\n                                \x3c!--                                    </b-form-input>--\x3e\n                                \x3c!--                                    <span class=\"validate-error\">{{ errors[0] }}</span>--\x3e\n                                \x3c!--                                </ValidationProvider>--\x3e\n                                \x3c!--                            </div>--\x3e\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"email\" rules=\"required|email\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Email\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Email\"\n                                                          type=\"email\"\n                                                          placeholder=\"client@email.com\"\n                                                          v-model=\"client.email\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"phone\" rules=\"required|phone\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Телефон\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Телефон\"\n                                                          placeholder=\"Телефон\"\n                                                          v-model=\"client.info.Phone\"\n                                                          v-mask=\"['+# (###) ###-##-##','+## (###) ###-##-##']\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"City\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Город\" label-size=\"sm\" class=\"mb-0\">\n                                            <multiselect\n                                                v-model=\"client.info.City\"\n                                                :options=\"branches\"\n                                                :option-height=\"25\"\n                                                placeholder=\"Выберите город\"\n                                                :show-labels=\"false\"\n                                                :maxHeight=\"200\"\n                                                :loading=\"branches.length===0\"\n                                                :disabled=\"branches.length===0\"\n                                                :allow-empty=\"false\"\n                                                track-by=\"city\"\n                                                label=\"city\"\n                                                @input=\"selectCity(client.info)\"\n                                            >\n                                                <template slot=\"singleLabel\" slot-scope=\"props\">\n                                                <span class=\"option__desc\">\n                                                    <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\" v-if=\"props.option.city\">{{ props.option.city}}</span>\n                                                </span>\n                                                </template>\n                                                <template slot=\"option\" slot-scope=\"props\">\n                                                <span class=\"option__desc\">\n                                                    <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.city}}</span>\n                                                </span>\n                                                </template>\n                                            </multiselect>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"department\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Отделение\" label-size=\"sm\" class=\"mb-0\">\n                                            <multiselect\n                                                v-model=\"client.info.Department\"\n                                                :options=\"client.info.City.departments\"\n                                                :option-height=\"25\"\n                                                placeholder=\"Выберите отделение\"\n                                                :show-labels=\"false\"\n                                                :maxHeight=\"200\"\n                                                :disabled=\"client.info.City.departments.length===0\"\n                                                :allow-empty=\"false\"\n                                                label=\"address\"\n                                                track-by=\"address\"\n                                            >\n                                                <template slot=\"singleLabel\" slot-scope=\"props\">\n                                                    <span class=\"option__desc\">\n                                                        <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.address}}</span>\n                                                    </span>\n                                                </template>\n                                                <template slot=\"option\" slot-scope=\"props\">\n                                                    <span class=\"option__desc\">\n                                                        <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.address }}</span>\n                                                    </span>\n                                                </template>\n                                            </multiselect>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-12\">\n                                    <b-form-group label=\"Дополнительная информация\" label-size=\"sm\" class=\"mb-0\">\n                                        <b-form-textarea rows=\"4\" cols=\"80\"\n                                                         class=\"travel-input p-2\"\n                                                         placeholder=\"Дополнительная информация о клиенте\"\n                                                         v-model=\"client.info.About\"\n                                                         style=\"border-radius: 20px !important\"\n                                        >\n                                        </b-form-textarea>\n                                    </b-form-group>\n                                </div>\n                            </div>\n                            <b-button slot=\"footer\" class=\"btn btn-travel float-right\" @click=\"updateClientInfo\" :disabled=\"invalid\">Сохранить</b-button>\n                        </card>\n                    </ValidationObserver>\n                </div>\n                <div class=\"col-md-12\">\n                    <div class=\"row mx-auto mt-5 mb-5 justify-content-center align-items-center\" style=\"width: 100%;border-top: 4px solid #f08b23;\">\n                        <span class=\"white--text active-tour\" style=\"background:#062348; font-size: 24px;position: absolute\">Туры</span>\n                    </div>\n                </div>\n                <div class=\"col-md-12\" v-if=\"client != null\">\n                    <client-tours :tours=\"client.tours\" :load=\"load\"></client-tours>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import {mask} from 'vue-the-mask'\n    import moment from 'moment'\n    import ClientTours from \"./ClientTours/Index\";\n    export default {\n        components: {ClientTours},\n        data() {\n            return {\n                current_client: {},\n                clientTours:[],\n                columns: [\n                    {\n                        label: 'ID тура',\n                        field: 'id',\n                    },\n                    {\n                        label: 'Дата',\n                        field: 'created_at',\n                    },\n                    {\n                        label: 'С',\n                        field: 'TourInfo.date_range.start',\n                    },\n                    {\n                        label: 'По',\n                        field: 'TourInfo.date_range.end',\n                    },\n                    {\n                        label: 'Страна',\n                        field: 'TourInfo.country.Name',\n                    },\n                    {\n                        label: 'Курорт',\n                        field: 'TourInfo.resort.Name',\n                    },\n                    {\n                        label: 'Цена',\n                        field: 'TourInfo.price',\n                    },\n                    {\n                        label: 'Выплачено',\n                        field: 'TourInfo.paid',\n                    },\n                ],\n                city_options: [\n                    'Донецк',\n                    'Ростов-на-Дону'\n                ],\n                new_tour:{\n                    UserId:'',\n                    TourId:'',\n                    TourInfo: {\n                        country:{Id:150,Name:\"Россия\",Alias:\"Russia\",Flags:8,HasTickets:true,HotelIsNotInStop:true,IsProVisa:false,IsVisa:false,OriginalName:\"Russia\",Rank:0,TicketsIncluded:true},\n                        resort:{Name:'Любой'},\n                        hotel: {Name:'Любой'},\n                        room_type:'',\n                        meal:'',\n                        tour_operator:'',\n                        date_range:{start:'', end:''},\n                        price:'',\n                        paid:'',\n                        left:0,\n                        services:'',\n                        avia_tickets:[],\n                        passengers:[],\n                        files:[],\n                    },\n                    StartAt:'',\n                    EndAt:'',\n                    Comment:''\n                },\n                edit_tour:{\n                    UserId:'',\n                    TourId:'',\n                    TourInfo: {\n                        country:'',\n                        resort:'',\n                        hotel:'',\n                        room_type:'',\n                        meal:'',\n                        tour_operator:'',\n                        date_range:{start:'', end:''},\n                        price:'',\n                        paid:'',\n                        left:0,\n                        services:'',\n                        avia_tickets:[],\n                        passengers:[],\n                        files:[],\n                        delete_files: [],\n                        new_files: [],\n                    },\n                    StartAt:'',\n                    EndAt:'',\n                    Comment:''\n                },\n                new_mode:false,\n                meals: [\n                    { Id:'115', Name:'AI', desc:'завтраки, обеды, ужины, напитки'},\n                    { Id:'114',Name:'BB', desc:'завтраки'},\n                    { Id:'112',Name:'FB', desc:'завтраки, обеды, ужины'},\n                    { Id:'121',Name:'FB+', desc:'завтраки, обеды, ужины - расширенное меню'},\n                    { Id:'113',Name:'HB', desc:'завтраки, ужины'},\n                    { Id:'122',Name:'HB+', desc:'завтраки, ужины - расширенное меню'},\n                    { Id:'117',Name:'RO', desc:'без питания'},\n                    { Id:'116',Name:'UAI', desc:'завтраки, обеды, ужины, напитки - расширенное меню'},\n                    { Id:'129',Name:'SC', desc:'самообслуживание'},\n                ],\n                edit_loading: false,\n                new_loading: false,\n                load:true,\n                new_files:[],\n                current_manager: null,\n                start: undefined,\n                end: undefined,\n            }\n        },\n        created() {\n            if (this.countries.length===0) {\n                this.$store.dispatch('getCountries', {town_id:0});\n            }\n            if (this.clients.length>0) {\n                this.load = true;\n                this.current_client = this.clients.find((client) => client.id == this.$route.params.id);\n                // this.clientTours=this.client.tours;\n                this.load = false;\n                if (this.managers.length>0)\n                {\n                    this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n                }\n                else {\n                    this.getManagers()\n                }\n            } else {\n               this.getClient();\n            }\n            // console.log(this.client)\n        },\n        mounted() {\n            if(this.branches.length<=0){\n                this.loadBranches();\n            }\n            // this.new_tour.TourInfo.country={Id:150,Name:\"Россия\",Alias:\"Russia\",Flags:8,HasTickets:true,HotelIsNotInStop:true,IsProVisa:false,IsVisa:false,OriginalName:\"Russia\",Rank:0,TicketsIncluded:true};\n            // this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n            // this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'', star_id:''});\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            clients() {\n                return this.$store.getters.clients\n            },\n            client() {\n                return this.current_client\n            },\n            managers() {\n                return this.$store.getters.managers\n            },\n            manager() {\n                return this.current_manager\n            },\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        methods: {\n            //info\n            updateClientInfo() {\n                this.client.info.ManagerId = this.manager.id;\n                var data ={\n                    info: this.client.info,\n                    id: this.client.id\n                }\n                this.$store.dispatch('updateClientInfo', this.client.info)\n                    .then(response => {\n                        this.sendMessage('Информация клиента успешно обновлена');\n                    });\n            },\n            async getClient() {\n                // await this.$http.get(`auth/manager/clients/${this.$route.params.id}`)\n                //     .then((response) => {\n                //         this.client = response.data.client;\n                //         this.clientTours=this.client.tours;\n                //         this.clientTours.forEach( tour => {\n                //             tour.show = false;\n                //             tour.isLoading = false;\n                //             tour.expand = {\n                //                 country: tour.TourInfo.country,\n                //                 resort: tour.TourInfo.resort,\n                //                 hotel: tour.TourInfo.hotel,\n                //                 meal:tour.TourInfo.meal,\n                //                 room_type:tour.TourInfo.room_type,\n                //                 tour_operator:tour.TourInfo.tour_operator,\n                //                 date_range:{start:tour.TourInfo.date_range.start, end:tour.TourInfo.date_range.end},\n                //                 price:tour.TourInfo.price,\n                //                 paid:tour.TourInfo.paid,\n                //                 left:tour.TourInfo.left,\n                //                 services:tour.TourInfo.services,\n                //                 avia_tickets:tour.TourInfo.avia_tickets,\n                //                 passengers:tour.TourInfo.passengers,\n                //                 files:tour.TourInfo.files,\n                //             }\n                //         })\n                //         this.load = false;\n                //     });\n                // console.log(this.clientTours)\n                this.load = true;\n                await this.$store.dispatch('setClients').then(response => {\n                    this.current_client = this.clients.find((client) => client.id == this.$route.params.id);\n                    // this.clientTours=this.client.tours;\n                    this.load = false;\n                    if (this.managers.length>0)\n                    {\n                        this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n\n                    }\n                    else {\n                        this.getManagers()\n                    }\n                })\n            },\n            async getManagers() {\n                await this.$store.dispatch('setManagers').then(() => {\n                    this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n                    console.log(this.managers)\n                })\n            },\n            async loadBranches() {\n                await this.$store.dispatch('setBranches')\n            },\n            async selectCity(item) {\n                item.Department = '';\n            },\n            //edit\n            editClientTour(row) {\n                this.edit_tour = row;\n                this.start = moment(this.edit_tour.TourInfo.date_range.start, \"DD/MM/YYYY\").toDate();\n                this.end = moment(this.edit_tour.TourInfo.date_range.end, \"DD/MM/YYYY\").toDate();\n                // this.start =this.edit_tour.TourInfo.date_range.start;\n                // this.end =this.edit_tour.TourInfo.date_range.end\n                // this.edit_tour.TourInfo.date_range.start= this.start;\n                // this.edit_tour.TourInfo.date_range.end= this.end;\n\n                this.edit_tour.TourInfo.delete_files=[];\n                this.edit_tour.TourInfo.new_files=[];\n                this.edit_tour.new_files=[];\n                this.$store.dispatch('getCities', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                this.$store.dispatch('openModal', '#editUserTourModalBox')\n\n            },\n            chooseEditResortCountry(value){\n                this.edit_tour.TourInfo.resort={Name:'Любой'};\n                this.edit_tour.TourInfo.hotel={Name:'Любой'};\n                this.edit_tour.TourInfo.country = value;\n                this.$store.dispatch('getCities', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n            },\n            chooseEditResort(value) {\n                this.edit_tour.TourInfo.resort = value;\n                if(this.edit_tour.TourInfo.resort.Name != 'Любой')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:'0'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:'Любой'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                }\n            },\n            chooseEditHotel(value) {\n                this.edit_tour.TourInfo.hotel = value;\n            },\n            changeEditDateRange(date_object) {\n                this.edit_tour.TourInfo.date_range=date_object;\n            },\n            chooseEditMeal(value){\n                this.edit_tour.TourInfo.meal = value;\n            },\n            deleteClientTour(row) {\n                row.isLoading = true;\n                this.$store.dispatch('deleteClientTour', row)\n                    .then(response => {\n                        row.isLoading = false;\n                        this.sendMessage('Тур клиента успешно удалён');\n                    });\n            },\n            changeEditPrice(){\n                this.edit_tour.TourInfo.left = this.edit_tour.TourInfo.price - this.edit_tour.TourInfo.paid;\n            },\n            handleEditFiles() {\n                let uploadedFiles = this.$refs.edit_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_files.push({type:'file', name:uploadedFiles[i].name, data:uploadedFiles[i], date: date });\n                        this.getImagePreviews(this.new_files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onEditResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_files.push({\n                    type: 'audio',\n                    name: 'record-'+time+'.mp3',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date\n                })\n                this.getImagePreviews(this.new_files);\n            },\n            deleteFile(file, key) {\n                // var data = {\n                //     name: file.name,\n                //     path: file.path\n                // };\n                // try {\n                // const response = await axios.post('auth/manager/clients/tours/deleteFile',data);\n                this.edit_tour.TourInfo.delete_files.push(file);\n                this.edit_tour.TourInfo.files.splice( key, 1 );\n                // this.getImagePreviews(this.edit_tour.TourInfo.files);\n                // }\n                // catch (error) {\n                // }\n            },\n            updateClientTour(){\n                this.edit_loading = true;\n                this.edit_tour.StartAt = moment(this.edit_tour.TourInfo.date_range.start, \"DD-MM-YYYY\");\n                this.edit_tour.EndAt = moment(this.edit_tour.TourInfo.date_range.end, \"DD-MM-YYYY\");\n                console.log(this.edit_tour.EndAt)\n                this.edit_tour.new_files = this.new_files;\n                let formData = new FormData();\n                formData.append(\"UserTour\", JSON.stringify(this.edit_tour));\n\n                for (var i = 0; i < this.new_files.length; i++) {\n                    let file = this.new_files[i].data;\n\n                    formData.append('new_files[' + i + ']', file);\n                }\n\n                this.$store.dispatch('updateClientTour', formData)\n                    .then(response => {\n                        console.log('response', response)\n                        this.edit_tour.TourInfo.delete_files=[];\n                        this.edit_tour.TourInfo.new_files=[];\n                        this.edit_tour.TourInfo.files = response.TourInfo.files;\n                        this.edit_tour.expand = response.expand;\n                        this.sendMessage('Тур клиента успешно обновлён');\n                        this.edit_tour={\n                            UserId:'',\n                            TourId:'',\n                            TourInfo: {\n                                country:'',\n                                resort:'',\n                                hotel:'',\n                                meal:'',\n                                tour_operator:'',\n                                date_range:{start:'', end:''},\n                                price:0,\n                                paid:0,\n                                left:0,\n                                services:'',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            new_files:[],\n                            StartAt:'',\n                            EndAt:'',\n                            Comment:''\n                        };\n                            this.edit_loading = false;\n                        this.$store.dispatch('closeModal', '#editUserTourModalBox');\n                    });\n            },\n\n            //new\n            addClientTour: function(){\n                this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                this.$store.dispatch('openModal', '#newUserTourModalBox')\n            },\n            chooseNewResortCountry(value){\n                this.new_tour.TourInfo.resort={Name:'Любой'};\n                this.new_tour.TourInfo.hotel={Name:'Любой'};\n                this.new_tour.TourInfo.country = value;\n                this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n\n            },\n            chooseNewResorts(value){\n                this.new_tour.TourInfo.resort = value;\n                if(this.new_tour.TourInfo.resort.Name != 'Любой')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.new_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:town_id, star_id:'0'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.new_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.new_tour.TourInfo.hotel = {Name:'Любой'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                }\n            },\n            chooseNewHotel(value) {\n                this.new_tour.TourInfo.hotel = value;\n            },\n            changeNewDateRange(date_object) {\n                this.new_tour.TourInfo.date_range=date_object;\n            },\n            chooseNewMeal(value){\n                this.new_tour.TourInfo.meal = value;\n            },\n            changeNewPrice(){\n                this.new_tour.TourInfo.left = this.new_tour.TourInfo.price - this.new_tour.TourInfo.paid;\n            },\n            handleNewFiles() {\n                let uploadedFiles = this.$refs.new_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_tour.TourInfo.files.push({type:'file', name:uploadedFiles[i].name, data:uploadedFiles[i], date:date});\n                        this.getImagePreviews(this.new_tour.TourInfo.files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_tour.TourInfo.files.push({\n                    type: 'audio',\n                    name: 'record-'+time+'.mp3',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                })\n                this.getImagePreviews(this.new_tour.TourInfo.files);\n            },\n            saveClientTour(){\n                this.new_loading = true;\n                this.new_tour.UserId = this.$route.params.id;\n                this.new_tour.StartAt = moment(this.new_tour.TourInfo.date_range.start, \"DD-MM-YYYY\");\n                this.new_tour.EndAt = moment(this.new_tour.TourInfo.date_range.end, \"DD-MM-YYYY\");\n\n                let formData = new FormData();\n                formData.append(\"UserTour\", JSON.stringify(this.new_tour));\n\n                for (var i = 0; i < this.new_tour.TourInfo.files.length; i++) {\n                    let file = this.new_tour.TourInfo.files[i].data;\n\n                    formData.append('files[' + i + ']', file);\n                }\n\n                this.$store.dispatch('newClientTour', formData)\n                    .then(response => {\n                        this.sendMessage('Тур клиента успешно добавлен');\n\n                        this.new_tour= {\n                            UserId:'',\n                            TourId:'',\n                            TourInfo: {\n                                country:'',\n                                resort:'',\n                                hotel:'',\n                                meal:'',\n                                tour_operator:'',\n                                date_range:{start:'', end:''},\n                                price:0,\n                                paid:0,\n                                left:0,\n                                services:'',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            StartAt:'',\n                            EndAt:'',\n                            Comment:'',\n                            Archive:false\n                        }\n\n                        this.new_loading = false;\n                        this.$store.dispatch('closeModal', '#newUserTourModalBox');\n                    });\n\n            },\n\n            //both\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener(\"load\", function() {\n                            this.$refs['preview'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs['preview'+parseInt(i)][0].src = '/images/LOGO-1.png';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                console.log('Got a stream object:', stream);\n            },\n\n            sendMessage(message) {\n                this.$notify({\n                    group: 'info',\n                    type: 'travel',\n                    title: 'Сообщение от TravelClub',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return 'курорт'\n                }\n                if (n>1 && n<5) {\n                    return 'курорта'\n                }\n                if (n>4 && n<20) {\n                    return 'курортов'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return 'курорт'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return 'курорта'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return 'курортов'\n                    }\n                    return 'курортов'\n                }\n                return 'курортов'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return 'отель'\n                }\n                if (n>1 && n<5) {\n                    return 'отеля'\n                }\n                if (n>4 && n<20) {\n                    return 'отелей'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return 'отель'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return 'отеля'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return 'отелей'\n                    }\n                    return 'отелей'\n                }\n                return 'отелей'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return 'выбран'\n                }\n                return 'выбрано'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\x3c!--<style scoped lang=\"scss\" src=\"@/sass/desktop/black-dashboard.scss\">--\x3e\n\n\x3c!--</style>--\x3e\n<style>\n    .modal-dialog{\n        transform: none !important;\n    }\n    #client .modal-dialog{\n        max-width: 900px !important;\n    }\n    .modal-title{\n        color: #062348;\n        font-weight: 900;\n        font-family: \"Open Sans\";\n    }\n    .travel-card-description{\n        color: #062348;\n        font-size: 13px;\n        font-weight: 900;\n        font-family: \"Open Sans\";\n    }\n    .more-text {\n        font-family: \"Open Sans\";\n        text-transform: uppercase;\n        color: #f08b23;\n        font-weight: 600;\n        font-size: 16px;\n        cursor:pointer;\n    }\n    .more-button {\n        cursor:pointer;\n        margin: 0 10px;\n        right: 10px;\n    }\n    .more-button div {\n        width: 40px;\n        height: 40px;\n        display: block;\n        border-radius: 50px;\n        text-decoration: none;\n        font-size: 40px;\n        /*line-height: 50px;*/\n        color:  white;\n        background: #f08b23;\n        padding: 0px !important;\n    }\n    .travel-card {\n        border-radius: 20px;\n        background: white;\n        box-shadow: 0px 3px 15px #0000006b;\n        -moz-box-shadow: 0px 3px 15px #0000006b;\n        -webkit-box-shadow: 0px 3px 15px #0000006b;\n    }\n\n    .white--text {\n        color: #fff !important;\n        caret-color: #fff !important;\n    }\n    .active-tour {\n        background: #f08b23;\n        border-radius: 20px;\n        padding: 3px 20px;\n        -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        font-weight: 900;\n        text-transform: uppercase;\n        font-family: 'Open Sans';\n    }\n    /*.card label {*/\n    /*    font-family: \"Open Sans\" !important;*/\n    /*    font-weight: 900 !important;*/\n    /*    font-size: 0.7500000025rem;*/\n    /*}*/\n    .control-label {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n        color: #344675;\n        font-size: 0.7500000025rem;\n    }\n    .white-content .form-control::placeholder {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n    }\n    .white-content .form-control{\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n        color: #062348;\n    }\n    .white-content  .form-control {\n        border-color: #f08b23;\n        border-radius: 20px;\n    }\n    .v-card > :last-child:not(.v-btn):not(.v-chip) {\n        border-bottom-left-radius: inherit;\n        border-bottom-right-radius: inherit;\n    }\n    .v-card > :first-child:not(.v-btn):not(.v-chip), .v-card > .v-card__progress + :not(.v-btn):not(.v-chip) {\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n    }\n    .v-card > :last-child:not(.v-btn):not(.v-chip) {\n        border-bottom-left-radius: inherit;\n        border-bottom-right-radius: inherit;\n    }\n    .v-card > .v-card__progress + :not(.v-btn):not(.v-chip), .v-card > :first-child:not(.v-btn):not(.v-chip) {\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n    }\n    .v-responsive {\n        position: relative;\n        overflow: hidden;\n        flex: 1 0 auto;\n        max-width: 100%;\n        display: flex;\n    }\n    .v-image {\n        z-index: 0;\n    }\n    .v-card {\n        overflow-wrap: break-word;\n        white-space: normal;\n    }\n    .v-responsive__sizer {\n        background: #0d274b61;\n        transition: padding-bottom .2s cubic-bezier(.25,.8,.5,1);\n        flex: 1 0 0px;\n    }\n    .v-image__image--cover {\n        background-size: cover;\n    }\n    .v-image__image {\n        background-repeat: no-repeat;\n    }\n    .v-image__image, .v-image__placeholder {\n        z-index: -1;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    }\n    .v-responsive__sizer ~ .v-responsive__content {\n        margin-left: -100%;\n    }\n    .v-responsive__content {\n        flex: 1 0 0px;\n        max-width: 100%;\n    }\n    .elevation-24 {\n        -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n    }\n    .v-card__title {\n        align-items: center;\n        display: flex;\n        flex-wrap: wrap;\n        font-size: 1.25rem;\n        font-weight: 500;\n        letter-spacing: .0125em;\n        line-height: 2rem;\n        word-break: break-all;\n    }\n    .v-card__subtitle, .v-card__text, .v-card__title {\n        padding: 16px;\n    }\n    .v-card__subtitle {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n    }\n    .v-card__subtitle h3{\n        font-weight: 900;\n        font-family: 'Open Sans';\n    }\n</style>\n<style>\n    @media only screen and (max-width:767.98px) {\n        .vhd-container:not(.desktop) .vhd-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vhd-input {\n            min-width: 100% !important;\n        }\n        .vhd-container {\n            width: 100% !important;\n        }\n    }\n\n    #client .vhd-picker {\n        z-index: 3 !important;\n        min-height: 362px!important;\n        padding: 18px!important;\n    }\n    #client .vhd-container{\n        width: 100% !important;\n    }\n    #client .vhd-input {\n        min-width: 100px;\n        padding: 8px;\n        border: 1px solid #f08b23 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vhd-input::placeholder {\n        color: #062348 !important;\n    }\n    .vhd-container:not(.desktop) .vhd-picker {\n        min-height: 362px;\n    }\n    .vhd-calendar .calendar-date .week .day[data-v-0cb4ff92] {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #505050;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vhd-calendar .calendar-date .week .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vhd-calendar-header {\n        height: 20px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header {\n        height:60px !important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header>.info {\n        display:block;\n        width:100%;\n        height:60px;\n        padding-top:32px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-footer {\n        height: 36px !important;\n    }\n    .vhd-calendar-footer {\n        height: 24px!important;\n    }\n    .vhd-calendar .calendar-date .week {\n        height: 30px !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vhd-calendar-footer .confirm, .vhd-calendar-footer .reset {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900!important;\n    }\n    .vhd-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vhd-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-week-item,  .vhd-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: '';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n\n    .multiselect__option.multiselect__option--group.multiselect__option--disabled{\n        text-align: center;\n        background: white !important;\n        color:#f08b23 !important;\n    }\n\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: \"Open Sans\";\n        font-weight: 600;\n        font-size: 1rem;\n    }\n\n    #client-profile .multiselect{\n        min-height: 38px;\n    }\n    #client-profile .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 0.7500000025rem;\n        min-height: 38px;\n        line-height: 1.428571 !important;\n    }\n    #client .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--selected.multiselect__option--highlight::after {\n        background: #ff6a6a00;\n        content: attr(data-deselect);\n        color: #fff;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b2300;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect__option {\n        white-space: break-spaces !important;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    #client-profile .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n        font-size: 0.7500000025rem !important;\n        line-height: 1.428571 !important;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: \"\";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: \"Open Sans\";\n        color: #0f213d!important;\n    }\n    #client .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 20px;\n        height: 20px;\n        font: 20px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n    }\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    #client .qty input{\n        border: 0;\n        width: 50%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style scoped>\n    .section {\n        padding: 0 16px;\n    }\n    .modalbox {\n        padding-top: env(safe-area-inset-top);\n        overflow: hidden;\n    }\n\n    .modalbox .modal-dialog {\n        transform: translate(0, 100%) !important;\n        min-width: 100%;\n        margin: 0;\n        transition: 0.5s all !important;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        margin-top: env(safe-area-inset-top);\n    }\n\n    .modalbox .modal-dialog .modal-content {\n        border-radius: 0;\n        border: 0;\n        margin: auto;\n        overflow: hidden;\n        padding-top: 56px;\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header {\n        border: 0;\n        padding: 0;\n        min-height: 56px;\n        padding: 10px 16px;\n        border-radius: 0;\n        display: flex;\n        border-bottom: 1px solid #E1E1E1;\n        align-items: center;\n        justify-content: space-between;\n        margin: 0;\n        position: fixed;\n        left: 0;\n        right: 0;\n        top: 0;\n        width: 100%;\n        z-index: 100;\n        background: #FFF;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header .modal-title {\n        margin: 0;\n        color: #063065;\n        font-size: 17px;\n        font-family: \"Open Sans\";\n        font-weight: 900;\n    }\n    .modalbox .modal-dialog .modal-content .modal-header a{\n        color: #063065;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-body {\n        padding: 20px 16px;\n        overflow: auto;\n    }\n\n    .modalbox.show .modal-dialog {\n        transform: translate(0, 0) !important;\n    }\n    .form-group {\n        width: 100%;\n    }\n\n    .form-group .label {\n        font-size: 12px;\n        margin: 0;\n        font-weight: 900;\n        color: #063065;\n        display: block;\n        line-height: 1.2em;\n        text-align: left;\n        font-family: Open Sans;\n    }\n\n    .form-group textarea {\n        resize: none;\n    }\n\n    .form-group .input-info {\n        font-size: 11px;\n        color: #A1A1A2;\n    }\n\n    .form-group .clear-input {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #4F5050;\n        height: 38px;\n        font-size: 22px;\n        position: absolute;\n        right: 6px;\n        top: 0px;\n        bottom: 0;\n        width: 32px;\n        opacity: 0.5;\n    }\n\n    .form-group .clear-input:hover, .form-group .clear-input:active {\n        opacity: 0.8;\n    }\n\n    .form-group .input-wrapper {\n        position: relative;\n    }\n\n    .form-group .input-wrapper.not-empty .clear-input {\n        display: flex;\n    }\n\n    .form-group .input-wrapper.active .label {\n        color: #f08b23 !important;\n    }\n\n    .form-group.basic {\n        padding: 8px 0;\n        margin: 0;\n    }\n\n    .form-group.basic .form-control,\n    .form-group.basic .custom-select {\n        background: transparent;\n        border: none;\n        border-bottom: 1px solid #E1E1E1;\n        padding: 0 30px 0 0;\n        border-radius: 0;\n        height: 40px;\n        color: #141515;\n        font-size: 15px;\n    }\n\n    .form-group.basic .form-control:focus,\n    .form-group.basic .custom-select:focus {\n        border-bottom-color: #f08b23;\n        box-shadow: inset 0 -1px 0 0 #f08b23;\n    }\n\n    .form-group.basic textarea.form-control {\n        height: auto;\n        padding: 7px 40px 7px 0;\n    }\n\n    .form-group.basic.animated .label {\n        margin-top: 20px;\n        opacity: 0;\n        top: -3px;\n        transition: 0.2s all;\n        position: absolute;\n    }\n\n    .form-group.basic.animated .input-wrapper {\n        padding-top: 5px;\n    }\n\n    .form-group.basic.animated .input-wrapper.not-empty .label {\n        margin-top: 0;\n        opacity: 1;\n    }\n\n    .form-button-group {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        padding-left: 16px;\n        padding-right: 16px;\n        background: #FFF;\n        min-height: 84px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding-bottom: env(safe-area-inset-bottom);\n    }\n    .form-button-group .btn {\n        background: #f08b23;\n        color: white;\n        text-transform: uppercase;\n        font-size: 24px;\n        font-family: \"Open Sans\";\n        font-weight: 900;\n        border: 0;\n        border-radius: 50px;\n        outline: none;\n    }\n    form-button-group .btn:focus {\n        outline: none !important;\n        box-shadow: none !important;\n    }\n    input[type=\"file\"]{\n        opacity: 0;\n        width: 100%;\n        height: 200px;\n        position: absolute;\n        cursor: pointer;\n    }\n    .filezone {\n        outline: 2px dashed grey;\n        outline-offset: -10px;\n        background: #ccc;\n        color: dimgray;\n        padding: 10px 10px;\n        min-height: 200px;\n        position: relative;\n        cursor: pointer;\n    }\n    .filezone:hover {\n        background: #c0c0c0;\n    }\n\n    .filezone p {\n        font-size: 1.2em;\n        text-align: center;\n        padding: 50px 50px 50px 50px;\n    }\n    div.file-listing img{\n        max-width: 90%;\n    }\n\n    div.file-listing{\n        margin: auto;\n        padding: 10px;\n        border-bottom: 1px solid #ddd;\n    }\n\n    div.file-listing img{\n        height: 100px;\n    }\n    .preview{\n        height: 100px;\n        max-width: 90%;\n    }\n    div.success-container{\n        text-align: center;\n        color: green;\n    }\n\n    div.remove-container{\n        text-align: center;\n    }\n\n    div.remove-container a{\n        color: red;\n        cursor: pointer;\n    }\n\n    a.submit-button{\n        display: block;\n        margin: auto;\n        text-align: center;\n        width: 200px;\n        padding: 10px;\n        text-transform: uppercase;\n        background-color: green;\n        color: white;\n        font-weight: bold;\n        margin-top: 20px;\n    }\n</style>\n"],sourceRoot:""}]);const s=a},1268:(n,t,e)=>{e.d(t,{A:()=>s});var o=e(45627),i=e.n(o),r=e(76798),a=e.n(r)()(i());a.push([n.id,'@media only screen and (max-width:767.98px){.vhd-container:not(.desktop) .vhd-picker{padding:8px;width:100%!important}.qty input{border:0;width:50%}}@media screen and (max-width:477px){.vhd-input{min-width:100%!important}.vhd-container{width:100%!important}}#client .vhd-picker{min-height:362px!important;padding:18px!important;z-index:3!important}#client .vhd-container{width:100%!important}#client .vhd-input{border:1px solid #f08b23!important;border-radius:20px;color:#062348!important;font-family:Open Sans!important;font-size:16px;font-weight:900;height:40px!important;line-height:32px;min-height:40px;min-width:100px;outline:none;padding:8px;width:100%}.vhd-input::-moz-placeholder{color:#062348!important}.vhd-input::placeholder{color:#062348!important}.vhd-container:not(.desktop) .vhd-picker{min-height:362px}.vhd-calendar .calendar-date .week .day[data-v-0cb4ff92]{color:#505050;cursor:pointer;font-size:16px;font-weight:500;line-height:30px;text-align:center}.vhd-calendar .calendar-date .week .day{background-image:none!important;height:30px!important}.vhd-calendar-header{height:20px!important}.vhd-container:not(.desktop) .vhd-calendar-header{height:60px!important}.vhd-container:not(.desktop) .vhd-calendar-header>.info{display:block;height:60px;padding-top:32px!important;width:100%}.vhd-container:not(.desktop) .vhd-calendar-footer{height:36px!important}.vhd-calendar-footer{height:24px!important}.vhd-calendar .calendar-date .week{height:30px!important}.vhd-calendar .calendar-date .week .day.end-date:after,.vhd-calendar .calendar-date .week .day.start-date:before{background-color:orange!important}.vhd-calendar .calendar-date .week .day.end-date,.vhd-calendar .calendar-date .week .day.in-date-range,.vhd-calendar .calendar-date .week .day.start-date{background-color:#ffa50070!important}.vhd-calendar .calendar-date .week .day.today{border:1px solid orange!important}.vhd-calendar-footer .confirm,.vhd-calendar-footer .reset{font-family:Open Sans!important;font-weight:900!important}.vhd-calendar-footer .reset{color:#062348!important}.vhd-calendar-footer .confirm{color:orange!important}.vhd-calendar .calendar-month-title,.vhd-calendar .calendar-week-item{color:#062348!important;font-family:Open Sans!important;font-weight:900!important}.values__hotel-rating:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);background-position:50%;background-repeat:no-repeat;content:"";display:inline-block;height:12px;margin-left:2px;width:13px}.multiselect__option.multiselect__option--group.multiselect__option--disabled{background:#fff!important;color:#f08b23!important;text-align:center}.multiselect__tags .price{color:#062348;font-family:Open Sans!important;font-weight:900!important}.multiselect__tags .price:focus{box-shadow:none!important;outline:none!important}.multiselect-title{color:#062348!important;font-family:Open Sans;font-size:1rem;font-weight:600}#client-profile .multiselect{min-height:38px}#client-profile .multiselect__tags{border:1px solid #f08b23;border-radius:20px;font-size:.7500000025rem;line-height:1.428571!important;min-height:38px}#client .multiselect__tags{border:1px solid #f08b23;border-radius:20px;font-size:1rem;min-height:40px}.multiselect__tag{background:#062348}.multiselect__tag-icon:after{color:#fff}.multiselect__tag-icon:focus,.multiselect__tag-icon:hover{background:#f08b23}.multiselect__option--selected.multiselect__option--highlight:after{background:#ff6a6a00;color:#fff;content:attr(data-deselect)}.multiselect__option--highlight:after{background:#f08b2300}.multiselect__option--highlight{background:#f08b23}.multiselect__option{white-space:break-spaces!important}.multiselect{font-family:Open Sans!important;font-weight:900}.multiselect,.multiselect__placeholder{color:#062348}.multiselect__input:focus,.multiselect__single:focus{border-color:#062348}#client-profile .multiselect__input::-moz-placeholder{color:#062348!important;font-family:Open Sans!important;font-size:.7500000025rem!important;font-weight:700;line-height:1.428571!important}#client-profile .multiselect__input::placeholder{color:#062348!important;font-family:Open Sans!important;font-size:.7500000025rem!important;font-weight:700;line-height:1.428571!important}.multiselect--disabled{background:#fff}.multiselect--disabled .multiselect__select{background:transparent}.multiselect__spinner:after,.multiselect__spinner:before{background:transparent;border:3px solid transparent;border-radius:100%;border-top-color:orange;box-shadow:0 0 0 1px transparent;content:"";height:16px;left:50%;margin:-8px 0 0 -8px;position:absolute;top:50%;width:16px}.multiselect__spinner{border-radius:50px}.qty .count{color:#0f213d!important;font-family:Open Sans;font-size:25px;font-weight:700;line-height:30px;min-width:35px;padding:0 2px}#client .qty button,.qty .count{display:inline-block;text-align:center;vertical-align:top}#client .qty button{background:#f08b23;border-radius:50%;color:#fff;cursor:pointer;font:20px/1 Arial,sans-serif;height:20px;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;width:20px}.qty div{text-align:center}.qty .minus:hover,.qty .plus:hover{background:#0f213d!important;color:#fff}#client .qty input{border:0;width:50%}.qty input::-webkit-inner-spin-button,.qty input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.qty input:disabled{background-color:#fff}',"",{version:3,sources:["webpack://./resources/js/desktop/mobile/pages/Manager/ClientProfile.vue"],names:[],mappings:"AAqhDA,4CACA,yCAEA,WAAA,CADA,oBAEA,CAEA,WACA,QAAA,CACA,SACA,CACA,CACA,oCACA,WACA,wBACA,CACA,eACA,oBACA,CACA,CAEA,oBAEA,0BAAA,CACA,sBAAA,CAFA,mBAGA,CACA,uBACA,oBACA,CACA,mBAGA,kCAAA,CAKA,kBAAA,CAJA,uBAAA,CAOA,+BAAA,CANA,cAAA,CAOA,eAAA,CAFA,qBAAA,CAJA,gBAAA,CAGA,eAAA,CARA,eAAA,CAMA,YAAA,CALA,WAAA,CAWA,UACA,CACA,6BACA,uBACA,CAFA,wBACA,uBACA,CACA,yCACA,gBACA,CACA,yDAIA,aAAA,CAEA,cAAA,CALA,cAAA,CACA,eAAA,CACA,gBAAA,CAEA,iBAEA,CACA,wCACA,+BAAA,CACA,qBACA,CACA,qBACA,qBACA,CACA,kDACA,qBACA,CACA,wDACA,aAAA,CAEA,WAAA,CACA,0BAAA,CAFA,UAGA,CACA,kDACA,qBACA,CACA,qBACA,qBACA,CACA,mCACA,qBACA,CAIA,iHACA,iCACA,CAOA,0JACA,oCACA,CACA,8CACA,iCACA,CACA,0DACA,+BAAA,CACA,yBACA,CACA,4BACA,uBACA,CACA,8BACA,sBACA,CACA,sEACA,uBAAA,CACA,+BAAA,CACA,yBACA,CACA,4BAMA,gbAAA,CAEA,uBAAA,CADA,2BAAA,CANA,UAAA,CACA,oBAAA,CAGA,WAAA,CAFA,eAAA,CACA,UAKA,CAEA,8EAEA,yBAAA,CACA,uBAAA,CAFA,iBAGA,CAEA,0BACA,aAAA,CACA,+BAAA,CACA,yBACA,CAEA,gCAEA,yBAAA,CADA,sBAEA,CAEA,mBACA,uBAAA,CACA,qBAAA,CAEA,cAAA,CADA,eAEA,CAEA,6BACA,eACA,CACA,mCACA,wBAAA,CACA,kBAAA,CACA,wBAAA,CAEA,8BAAA,CADA,eAEA,CACA,2BACA,wBAAA,CACA,kBAAA,CACA,cAAA,CACA,eACA,CACA,kBACA,kBACA,CACA,6BACA,UACA,CACA,0DACA,kBACA,CACA,oEACA,oBAAA,CAEA,UAAA,CADA,2BAEA,CACA,sCACA,oBACA,CACA,gCACA,kBACA,CACA,qBACA,kCACA,CACA,aAEA,+BAAA,CACA,eACA,CACA,uCAJA,aAMA,CACA,qDACA,oBACA,CACA,sDACA,uBAAA,CACA,+BAAA,CAEA,kCAAA,CADA,eAAA,CAEA,8BACA,CANA,iDACA,uBAAA,CACA,+BAAA,CAEA,kCAAA,CADA,eAAA,CAEA,8BACA,CACA,uBACA,eACA,CACA,4CACA,sBACA,CACA,yDAaA,sBAAA,CAFA,4BAAA,CAHA,kBAAA,CAGA,uBAAA,CACA,gCAAA,CAVA,UAAA,CAKA,WAAA,CAHA,QAAA,CACA,oBAAA,CAJA,iBAAA,CAEA,OAAA,CAGA,UAQA,CACA,sBACA,kBACA,CAEA,YAUA,uBAAA,CADA,qBAAA,CANA,cAAA,CACA,eAAA,CACA,gBAAA,CAEA,cAAA,CADA,aAKA,CACA,gCAXA,oBAAA,CAOA,iBAAA,CANA,kBAyBA,CAfA,oBAcA,kBAAA,CAFA,iBAAA,CALA,UAAA,CAHA,cAAA,CAMA,4BAAA,CADA,WAAA,CAIA,SAAA,CAZA,wBAAA,CACA,qBAAA,CACA,oBAAA,CAKA,UAOA,CACA,SACA,iBACA,CAKA,mCACA,4BAAA,CACA,UACA,CAEA,mBACA,QAAA,CACA,SACA,CACA,4EAEA,uBAAA,CACA,QACA,CACA,oBACA,qBACA",sourcesContent:["<template>\n    <div>\n        <div class=\"container m-auto\" style=\"height: 100%;\">\n            <div class=\"row mx-auto\">\n                <div class=\"col-md-12\">\n                    <div class=\"row mx-auto mt-3 mb-5 justify-content-center align-items-center\" style=\"width: 100%;border-top: 4px solid #f08b23;\">\n                        <span class=\"white--text active-tour\" style=\"background:#062348; font-size: 24px;position: absolute\">Профиль</span>\n                    </div>\n                </div>\n                <div class=\"col-md-12\">\n                    <ValidationObserver v-slot=\"{ invalid }\">\n                        <card id=\"client-profile\">\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"lastName\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Фамилия\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Фамилия\"\n                                                          v-model=\"client.info.LastName\"\n                                                          placeholder=\"Фамилия\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"firstName\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Имя\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Имя\"\n                                                          v-model=\"client.info.FirstName\"\n                                                          placeholder=\"Имя\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 ps-md-1\">\n                                    <b-form-group label=\"Отчество\" label-size=\"sm\" class=\"mb-0\">\n                                        <b-form-input label=\"Отчество\"\n                                                      v-model=\"client.info.MiddleName\"\n                                                      placeholder=\"Отчество\"\n                                                      class=\"mb-0 travel-input\"\n                                        >\n                                        </b-form-input>\n                                    </b-form-group>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                \x3c!--                            <div class=\"col-md-4 pe-md-1\">--\x3e\n                                \x3c!--                                <ValidationProvider name=\"login\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">--\x3e\n                                \x3c!--                                    <b-form-input label=\"Логин\"--\x3e\n                                \x3c!--                                                placeholder=\"Логин\"--\x3e\n                                \x3c!--                                                v-model=\"user.login\"--\x3e\n                                \x3c!--                                                disabled--\x3e\n                                \x3c!--                                                class=\"mb-0\"--\x3e\n                                \x3c!--                                    >--\x3e\n                                \x3c!--                                    </b-form-input>--\x3e\n                                \x3c!--                                    <span class=\"validate-error\">{{ errors[0] }}</span>--\x3e\n                                \x3c!--                                </ValidationProvider>--\x3e\n                                \x3c!--                            </div>--\x3e\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"email\" rules=\"required|email\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Email\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Email\"\n                                                          type=\"email\"\n                                                          placeholder=\"client@email.com\"\n                                                          v-model=\"client.email\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"phone\" rules=\"required|phone\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Телефон\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Телефон\"\n                                                          placeholder=\"Телефон\"\n                                                          v-model=\"client.info.Phone\"\n                                                          v-mask=\"['+# (###) ###-##-##','+## (###) ###-##-##']\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"City\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Город\" label-size=\"sm\" class=\"mb-0\">\n                                            <multiselect\n                                                v-model=\"client.info.City\"\n                                                :options=\"branches\"\n                                                :option-height=\"25\"\n                                                placeholder=\"Выберите город\"\n                                                :show-labels=\"false\"\n                                                :maxHeight=\"200\"\n                                                :loading=\"branches.length===0\"\n                                                :disabled=\"branches.length===0\"\n                                                :allow-empty=\"false\"\n                                                track-by=\"city\"\n                                                label=\"city\"\n                                                @input=\"selectCity(client.info)\"\n                                            >\n                                                <template slot=\"singleLabel\" slot-scope=\"props\">\n                                                <span class=\"option__desc\">\n                                                    <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\" v-if=\"props.option.city\">{{ props.option.city}}</span>\n                                                </span>\n                                                </template>\n                                                <template slot=\"option\" slot-scope=\"props\">\n                                                <span class=\"option__desc\">\n                                                    <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.city}}</span>\n                                                </span>\n                                                </template>\n                                            </multiselect>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"department\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Отделение\" label-size=\"sm\" class=\"mb-0\">\n                                            <multiselect\n                                                v-model=\"client.info.Department\"\n                                                :options=\"client.info.City.departments\"\n                                                :option-height=\"25\"\n                                                placeholder=\"Выберите отделение\"\n                                                :show-labels=\"false\"\n                                                :maxHeight=\"200\"\n                                                :disabled=\"client.info.City.departments.length===0\"\n                                                :allow-empty=\"false\"\n                                                label=\"address\"\n                                                track-by=\"address\"\n                                            >\n                                                <template slot=\"singleLabel\" slot-scope=\"props\">\n                                                    <span class=\"option__desc\">\n                                                        <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.address}}</span>\n                                                    </span>\n                                                </template>\n                                                <template slot=\"option\" slot-scope=\"props\">\n                                                    <span class=\"option__desc\">\n                                                        <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.address }}</span>\n                                                    </span>\n                                                </template>\n                                            </multiselect>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-12\">\n                                    <b-form-group label=\"Дополнительная информация\" label-size=\"sm\" class=\"mb-0\">\n                                        <b-form-textarea rows=\"4\" cols=\"80\"\n                                                         class=\"travel-input p-2\"\n                                                         placeholder=\"Дополнительная информация о клиенте\"\n                                                         v-model=\"client.info.About\"\n                                                         style=\"border-radius: 20px !important\"\n                                        >\n                                        </b-form-textarea>\n                                    </b-form-group>\n                                </div>\n                            </div>\n                            <b-button slot=\"footer\" class=\"btn btn-travel float-right\" @click=\"updateClientInfo\" :disabled=\"invalid\">Сохранить</b-button>\n                        </card>\n                    </ValidationObserver>\n                </div>\n                <div class=\"col-md-12\">\n                    <div class=\"row mx-auto mt-5 mb-5 justify-content-center align-items-center\" style=\"width: 100%;border-top: 4px solid #f08b23;\">\n                        <span class=\"white--text active-tour\" style=\"background:#062348; font-size: 24px;position: absolute\">Туры</span>\n                    </div>\n                </div>\n                <div class=\"col-md-12\" v-if=\"client != null\">\n                    <client-tours :tours=\"client.tours\" :load=\"load\"></client-tours>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import {mask} from 'vue-the-mask'\n    import moment from 'moment'\n    import ClientTours from \"./ClientTours/Index\";\n    export default {\n        components: {ClientTours},\n        data() {\n            return {\n                current_client: {},\n                clientTours:[],\n                columns: [\n                    {\n                        label: 'ID тура',\n                        field: 'id',\n                    },\n                    {\n                        label: 'Дата',\n                        field: 'created_at',\n                    },\n                    {\n                        label: 'С',\n                        field: 'TourInfo.date_range.start',\n                    },\n                    {\n                        label: 'По',\n                        field: 'TourInfo.date_range.end',\n                    },\n                    {\n                        label: 'Страна',\n                        field: 'TourInfo.country.Name',\n                    },\n                    {\n                        label: 'Курорт',\n                        field: 'TourInfo.resort.Name',\n                    },\n                    {\n                        label: 'Цена',\n                        field: 'TourInfo.price',\n                    },\n                    {\n                        label: 'Выплачено',\n                        field: 'TourInfo.paid',\n                    },\n                ],\n                city_options: [\n                    'Донецк',\n                    'Ростов-на-Дону'\n                ],\n                new_tour:{\n                    UserId:'',\n                    TourId:'',\n                    TourInfo: {\n                        country:{Id:150,Name:\"Россия\",Alias:\"Russia\",Flags:8,HasTickets:true,HotelIsNotInStop:true,IsProVisa:false,IsVisa:false,OriginalName:\"Russia\",Rank:0,TicketsIncluded:true},\n                        resort:{Name:'Любой'},\n                        hotel: {Name:'Любой'},\n                        room_type:'',\n                        meal:'',\n                        tour_operator:'',\n                        date_range:{start:'', end:''},\n                        price:'',\n                        paid:'',\n                        left:0,\n                        services:'',\n                        avia_tickets:[],\n                        passengers:[],\n                        files:[],\n                    },\n                    StartAt:'',\n                    EndAt:'',\n                    Comment:''\n                },\n                edit_tour:{\n                    UserId:'',\n                    TourId:'',\n                    TourInfo: {\n                        country:'',\n                        resort:'',\n                        hotel:'',\n                        room_type:'',\n                        meal:'',\n                        tour_operator:'',\n                        date_range:{start:'', end:''},\n                        price:'',\n                        paid:'',\n                        left:0,\n                        services:'',\n                        avia_tickets:[],\n                        passengers:[],\n                        files:[],\n                        delete_files: [],\n                        new_files: [],\n                    },\n                    StartAt:'',\n                    EndAt:'',\n                    Comment:''\n                },\n                new_mode:false,\n                meals: [\n                    { Id:'115', Name:'AI', desc:'завтраки, обеды, ужины, напитки'},\n                    { Id:'114',Name:'BB', desc:'завтраки'},\n                    { Id:'112',Name:'FB', desc:'завтраки, обеды, ужины'},\n                    { Id:'121',Name:'FB+', desc:'завтраки, обеды, ужины - расширенное меню'},\n                    { Id:'113',Name:'HB', desc:'завтраки, ужины'},\n                    { Id:'122',Name:'HB+', desc:'завтраки, ужины - расширенное меню'},\n                    { Id:'117',Name:'RO', desc:'без питания'},\n                    { Id:'116',Name:'UAI', desc:'завтраки, обеды, ужины, напитки - расширенное меню'},\n                    { Id:'129',Name:'SC', desc:'самообслуживание'},\n                ],\n                edit_loading: false,\n                new_loading: false,\n                load:true,\n                new_files:[],\n                current_manager: null,\n                start: undefined,\n                end: undefined,\n            }\n        },\n        created() {\n            if (this.countries.length===0) {\n                this.$store.dispatch('getCountries', {town_id:0});\n            }\n            if (this.clients.length>0) {\n                this.load = true;\n                this.current_client = this.clients.find((client) => client.id == this.$route.params.id);\n                // this.clientTours=this.client.tours;\n                this.load = false;\n                if (this.managers.length>0)\n                {\n                    this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n                }\n                else {\n                    this.getManagers()\n                }\n            } else {\n               this.getClient();\n            }\n            // console.log(this.client)\n        },\n        mounted() {\n            if(this.branches.length<=0){\n                this.loadBranches();\n            }\n            // this.new_tour.TourInfo.country={Id:150,Name:\"Россия\",Alias:\"Russia\",Flags:8,HasTickets:true,HotelIsNotInStop:true,IsProVisa:false,IsVisa:false,OriginalName:\"Russia\",Rank:0,TicketsIncluded:true};\n            // this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n            // this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'', star_id:''});\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            clients() {\n                return this.$store.getters.clients\n            },\n            client() {\n                return this.current_client\n            },\n            managers() {\n                return this.$store.getters.managers\n            },\n            manager() {\n                return this.current_manager\n            },\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        methods: {\n            //info\n            updateClientInfo() {\n                this.client.info.ManagerId = this.manager.id;\n                var data ={\n                    info: this.client.info,\n                    id: this.client.id\n                }\n                this.$store.dispatch('updateClientInfo', this.client.info)\n                    .then(response => {\n                        this.sendMessage('Информация клиента успешно обновлена');\n                    });\n            },\n            async getClient() {\n                // await this.$http.get(`auth/manager/clients/${this.$route.params.id}`)\n                //     .then((response) => {\n                //         this.client = response.data.client;\n                //         this.clientTours=this.client.tours;\n                //         this.clientTours.forEach( tour => {\n                //             tour.show = false;\n                //             tour.isLoading = false;\n                //             tour.expand = {\n                //                 country: tour.TourInfo.country,\n                //                 resort: tour.TourInfo.resort,\n                //                 hotel: tour.TourInfo.hotel,\n                //                 meal:tour.TourInfo.meal,\n                //                 room_type:tour.TourInfo.room_type,\n                //                 tour_operator:tour.TourInfo.tour_operator,\n                //                 date_range:{start:tour.TourInfo.date_range.start, end:tour.TourInfo.date_range.end},\n                //                 price:tour.TourInfo.price,\n                //                 paid:tour.TourInfo.paid,\n                //                 left:tour.TourInfo.left,\n                //                 services:tour.TourInfo.services,\n                //                 avia_tickets:tour.TourInfo.avia_tickets,\n                //                 passengers:tour.TourInfo.passengers,\n                //                 files:tour.TourInfo.files,\n                //             }\n                //         })\n                //         this.load = false;\n                //     });\n                // console.log(this.clientTours)\n                this.load = true;\n                await this.$store.dispatch('setClients').then(response => {\n                    this.current_client = this.clients.find((client) => client.id == this.$route.params.id);\n                    // this.clientTours=this.client.tours;\n                    this.load = false;\n                    if (this.managers.length>0)\n                    {\n                        this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n\n                    }\n                    else {\n                        this.getManagers()\n                    }\n                })\n            },\n            async getManagers() {\n                await this.$store.dispatch('setManagers').then(() => {\n                    this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n                    console.log(this.managers)\n                })\n            },\n            async loadBranches() {\n                await this.$store.dispatch('setBranches')\n            },\n            async selectCity(item) {\n                item.Department = '';\n            },\n            //edit\n            editClientTour(row) {\n                this.edit_tour = row;\n                this.start = moment(this.edit_tour.TourInfo.date_range.start, \"DD/MM/YYYY\").toDate();\n                this.end = moment(this.edit_tour.TourInfo.date_range.end, \"DD/MM/YYYY\").toDate();\n                // this.start =this.edit_tour.TourInfo.date_range.start;\n                // this.end =this.edit_tour.TourInfo.date_range.end\n                // this.edit_tour.TourInfo.date_range.start= this.start;\n                // this.edit_tour.TourInfo.date_range.end= this.end;\n\n                this.edit_tour.TourInfo.delete_files=[];\n                this.edit_tour.TourInfo.new_files=[];\n                this.edit_tour.new_files=[];\n                this.$store.dispatch('getCities', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                this.$store.dispatch('openModal', '#editUserTourModalBox')\n\n            },\n            chooseEditResortCountry(value){\n                this.edit_tour.TourInfo.resort={Name:'Любой'};\n                this.edit_tour.TourInfo.hotel={Name:'Любой'};\n                this.edit_tour.TourInfo.country = value;\n                this.$store.dispatch('getCities', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n            },\n            chooseEditResort(value) {\n                this.edit_tour.TourInfo.resort = value;\n                if(this.edit_tour.TourInfo.resort.Name != 'Любой')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:'0'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:'Любой'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                }\n            },\n            chooseEditHotel(value) {\n                this.edit_tour.TourInfo.hotel = value;\n            },\n            changeEditDateRange(date_object) {\n                this.edit_tour.TourInfo.date_range=date_object;\n            },\n            chooseEditMeal(value){\n                this.edit_tour.TourInfo.meal = value;\n            },\n            deleteClientTour(row) {\n                row.isLoading = true;\n                this.$store.dispatch('deleteClientTour', row)\n                    .then(response => {\n                        row.isLoading = false;\n                        this.sendMessage('Тур клиента успешно удалён');\n                    });\n            },\n            changeEditPrice(){\n                this.edit_tour.TourInfo.left = this.edit_tour.TourInfo.price - this.edit_tour.TourInfo.paid;\n            },\n            handleEditFiles() {\n                let uploadedFiles = this.$refs.edit_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_files.push({type:'file', name:uploadedFiles[i].name, data:uploadedFiles[i], date: date });\n                        this.getImagePreviews(this.new_files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onEditResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_files.push({\n                    type: 'audio',\n                    name: 'record-'+time+'.mp3',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date\n                })\n                this.getImagePreviews(this.new_files);\n            },\n            deleteFile(file, key) {\n                // var data = {\n                //     name: file.name,\n                //     path: file.path\n                // };\n                // try {\n                // const response = await axios.post('auth/manager/clients/tours/deleteFile',data);\n                this.edit_tour.TourInfo.delete_files.push(file);\n                this.edit_tour.TourInfo.files.splice( key, 1 );\n                // this.getImagePreviews(this.edit_tour.TourInfo.files);\n                // }\n                // catch (error) {\n                // }\n            },\n            updateClientTour(){\n                this.edit_loading = true;\n                this.edit_tour.StartAt = moment(this.edit_tour.TourInfo.date_range.start, \"DD-MM-YYYY\");\n                this.edit_tour.EndAt = moment(this.edit_tour.TourInfo.date_range.end, \"DD-MM-YYYY\");\n                console.log(this.edit_tour.EndAt)\n                this.edit_tour.new_files = this.new_files;\n                let formData = new FormData();\n                formData.append(\"UserTour\", JSON.stringify(this.edit_tour));\n\n                for (var i = 0; i < this.new_files.length; i++) {\n                    let file = this.new_files[i].data;\n\n                    formData.append('new_files[' + i + ']', file);\n                }\n\n                this.$store.dispatch('updateClientTour', formData)\n                    .then(response => {\n                        console.log('response', response)\n                        this.edit_tour.TourInfo.delete_files=[];\n                        this.edit_tour.TourInfo.new_files=[];\n                        this.edit_tour.TourInfo.files = response.TourInfo.files;\n                        this.edit_tour.expand = response.expand;\n                        this.sendMessage('Тур клиента успешно обновлён');\n                        this.edit_tour={\n                            UserId:'',\n                            TourId:'',\n                            TourInfo: {\n                                country:'',\n                                resort:'',\n                                hotel:'',\n                                meal:'',\n                                tour_operator:'',\n                                date_range:{start:'', end:''},\n                                price:0,\n                                paid:0,\n                                left:0,\n                                services:'',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            new_files:[],\n                            StartAt:'',\n                            EndAt:'',\n                            Comment:''\n                        };\n                            this.edit_loading = false;\n                        this.$store.dispatch('closeModal', '#editUserTourModalBox');\n                    });\n            },\n\n            //new\n            addClientTour: function(){\n                this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                this.$store.dispatch('openModal', '#newUserTourModalBox')\n            },\n            chooseNewResortCountry(value){\n                this.new_tour.TourInfo.resort={Name:'Любой'};\n                this.new_tour.TourInfo.hotel={Name:'Любой'};\n                this.new_tour.TourInfo.country = value;\n                this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n\n            },\n            chooseNewResorts(value){\n                this.new_tour.TourInfo.resort = value;\n                if(this.new_tour.TourInfo.resort.Name != 'Любой')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.new_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:town_id, star_id:'0'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.new_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.new_tour.TourInfo.hotel = {Name:'Любой'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                }\n            },\n            chooseNewHotel(value) {\n                this.new_tour.TourInfo.hotel = value;\n            },\n            changeNewDateRange(date_object) {\n                this.new_tour.TourInfo.date_range=date_object;\n            },\n            chooseNewMeal(value){\n                this.new_tour.TourInfo.meal = value;\n            },\n            changeNewPrice(){\n                this.new_tour.TourInfo.left = this.new_tour.TourInfo.price - this.new_tour.TourInfo.paid;\n            },\n            handleNewFiles() {\n                let uploadedFiles = this.$refs.new_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_tour.TourInfo.files.push({type:'file', name:uploadedFiles[i].name, data:uploadedFiles[i], date:date});\n                        this.getImagePreviews(this.new_tour.TourInfo.files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_tour.TourInfo.files.push({\n                    type: 'audio',\n                    name: 'record-'+time+'.mp3',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                })\n                this.getImagePreviews(this.new_tour.TourInfo.files);\n            },\n            saveClientTour(){\n                this.new_loading = true;\n                this.new_tour.UserId = this.$route.params.id;\n                this.new_tour.StartAt = moment(this.new_tour.TourInfo.date_range.start, \"DD-MM-YYYY\");\n                this.new_tour.EndAt = moment(this.new_tour.TourInfo.date_range.end, \"DD-MM-YYYY\");\n\n                let formData = new FormData();\n                formData.append(\"UserTour\", JSON.stringify(this.new_tour));\n\n                for (var i = 0; i < this.new_tour.TourInfo.files.length; i++) {\n                    let file = this.new_tour.TourInfo.files[i].data;\n\n                    formData.append('files[' + i + ']', file);\n                }\n\n                this.$store.dispatch('newClientTour', formData)\n                    .then(response => {\n                        this.sendMessage('Тур клиента успешно добавлен');\n\n                        this.new_tour= {\n                            UserId:'',\n                            TourId:'',\n                            TourInfo: {\n                                country:'',\n                                resort:'',\n                                hotel:'',\n                                meal:'',\n                                tour_operator:'',\n                                date_range:{start:'', end:''},\n                                price:0,\n                                paid:0,\n                                left:0,\n                                services:'',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            StartAt:'',\n                            EndAt:'',\n                            Comment:'',\n                            Archive:false\n                        }\n\n                        this.new_loading = false;\n                        this.$store.dispatch('closeModal', '#newUserTourModalBox');\n                    });\n\n            },\n\n            //both\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener(\"load\", function() {\n                            this.$refs['preview'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs['preview'+parseInt(i)][0].src = '/images/LOGO-1.png';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                console.log('Got a stream object:', stream);\n            },\n\n            sendMessage(message) {\n                this.$notify({\n                    group: 'info',\n                    type: 'travel',\n                    title: 'Сообщение от TravelClub',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return 'курорт'\n                }\n                if (n>1 && n<5) {\n                    return 'курорта'\n                }\n                if (n>4 && n<20) {\n                    return 'курортов'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return 'курорт'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return 'курорта'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return 'курортов'\n                    }\n                    return 'курортов'\n                }\n                return 'курортов'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return 'отель'\n                }\n                if (n>1 && n<5) {\n                    return 'отеля'\n                }\n                if (n>4 && n<20) {\n                    return 'отелей'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return 'отель'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return 'отеля'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return 'отелей'\n                    }\n                    return 'отелей'\n                }\n                return 'отелей'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return 'выбран'\n                }\n                return 'выбрано'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\x3c!--<style scoped lang=\"scss\" src=\"@/sass/desktop/black-dashboard.scss\">--\x3e\n\n\x3c!--</style>--\x3e\n<style>\n    .modal-dialog{\n        transform: none !important;\n    }\n    #client .modal-dialog{\n        max-width: 900px !important;\n    }\n    .modal-title{\n        color: #062348;\n        font-weight: 900;\n        font-family: \"Open Sans\";\n    }\n    .travel-card-description{\n        color: #062348;\n        font-size: 13px;\n        font-weight: 900;\n        font-family: \"Open Sans\";\n    }\n    .more-text {\n        font-family: \"Open Sans\";\n        text-transform: uppercase;\n        color: #f08b23;\n        font-weight: 600;\n        font-size: 16px;\n        cursor:pointer;\n    }\n    .more-button {\n        cursor:pointer;\n        margin: 0 10px;\n        right: 10px;\n    }\n    .more-button div {\n        width: 40px;\n        height: 40px;\n        display: block;\n        border-radius: 50px;\n        text-decoration: none;\n        font-size: 40px;\n        /*line-height: 50px;*/\n        color:  white;\n        background: #f08b23;\n        padding: 0px !important;\n    }\n    .travel-card {\n        border-radius: 20px;\n        background: white;\n        box-shadow: 0px 3px 15px #0000006b;\n        -moz-box-shadow: 0px 3px 15px #0000006b;\n        -webkit-box-shadow: 0px 3px 15px #0000006b;\n    }\n\n    .white--text {\n        color: #fff !important;\n        caret-color: #fff !important;\n    }\n    .active-tour {\n        background: #f08b23;\n        border-radius: 20px;\n        padding: 3px 20px;\n        -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        font-weight: 900;\n        text-transform: uppercase;\n        font-family: 'Open Sans';\n    }\n    /*.card label {*/\n    /*    font-family: \"Open Sans\" !important;*/\n    /*    font-weight: 900 !important;*/\n    /*    font-size: 0.7500000025rem;*/\n    /*}*/\n    .control-label {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n        color: #344675;\n        font-size: 0.7500000025rem;\n    }\n    .white-content .form-control::placeholder {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n    }\n    .white-content .form-control{\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n        color: #062348;\n    }\n    .white-content  .form-control {\n        border-color: #f08b23;\n        border-radius: 20px;\n    }\n    .v-card > :last-child:not(.v-btn):not(.v-chip) {\n        border-bottom-left-radius: inherit;\n        border-bottom-right-radius: inherit;\n    }\n    .v-card > :first-child:not(.v-btn):not(.v-chip), .v-card > .v-card__progress + :not(.v-btn):not(.v-chip) {\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n    }\n    .v-card > :last-child:not(.v-btn):not(.v-chip) {\n        border-bottom-left-radius: inherit;\n        border-bottom-right-radius: inherit;\n    }\n    .v-card > .v-card__progress + :not(.v-btn):not(.v-chip), .v-card > :first-child:not(.v-btn):not(.v-chip) {\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n    }\n    .v-responsive {\n        position: relative;\n        overflow: hidden;\n        flex: 1 0 auto;\n        max-width: 100%;\n        display: flex;\n    }\n    .v-image {\n        z-index: 0;\n    }\n    .v-card {\n        overflow-wrap: break-word;\n        white-space: normal;\n    }\n    .v-responsive__sizer {\n        background: #0d274b61;\n        transition: padding-bottom .2s cubic-bezier(.25,.8,.5,1);\n        flex: 1 0 0px;\n    }\n    .v-image__image--cover {\n        background-size: cover;\n    }\n    .v-image__image {\n        background-repeat: no-repeat;\n    }\n    .v-image__image, .v-image__placeholder {\n        z-index: -1;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    }\n    .v-responsive__sizer ~ .v-responsive__content {\n        margin-left: -100%;\n    }\n    .v-responsive__content {\n        flex: 1 0 0px;\n        max-width: 100%;\n    }\n    .elevation-24 {\n        -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n    }\n    .v-card__title {\n        align-items: center;\n        display: flex;\n        flex-wrap: wrap;\n        font-size: 1.25rem;\n        font-weight: 500;\n        letter-spacing: .0125em;\n        line-height: 2rem;\n        word-break: break-all;\n    }\n    .v-card__subtitle, .v-card__text, .v-card__title {\n        padding: 16px;\n    }\n    .v-card__subtitle {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n    }\n    .v-card__subtitle h3{\n        font-weight: 900;\n        font-family: 'Open Sans';\n    }\n</style>\n<style>\n    @media only screen and (max-width:767.98px) {\n        .vhd-container:not(.desktop) .vhd-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vhd-input {\n            min-width: 100% !important;\n        }\n        .vhd-container {\n            width: 100% !important;\n        }\n    }\n\n    #client .vhd-picker {\n        z-index: 3 !important;\n        min-height: 362px!important;\n        padding: 18px!important;\n    }\n    #client .vhd-container{\n        width: 100% !important;\n    }\n    #client .vhd-input {\n        min-width: 100px;\n        padding: 8px;\n        border: 1px solid #f08b23 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vhd-input::placeholder {\n        color: #062348 !important;\n    }\n    .vhd-container:not(.desktop) .vhd-picker {\n        min-height: 362px;\n    }\n    .vhd-calendar .calendar-date .week .day[data-v-0cb4ff92] {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #505050;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vhd-calendar .calendar-date .week .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vhd-calendar-header {\n        height: 20px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header {\n        height:60px !important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header>.info {\n        display:block;\n        width:100%;\n        height:60px;\n        padding-top:32px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-footer {\n        height: 36px !important;\n    }\n    .vhd-calendar-footer {\n        height: 24px!important;\n    }\n    .vhd-calendar .calendar-date .week {\n        height: 30px !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vhd-calendar-footer .confirm, .vhd-calendar-footer .reset {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900!important;\n    }\n    .vhd-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vhd-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-week-item,  .vhd-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: '';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n\n    .multiselect__option.multiselect__option--group.multiselect__option--disabled{\n        text-align: center;\n        background: white !important;\n        color:#f08b23 !important;\n    }\n\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: \"Open Sans\";\n        font-weight: 600;\n        font-size: 1rem;\n    }\n\n    #client-profile .multiselect{\n        min-height: 38px;\n    }\n    #client-profile .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 0.7500000025rem;\n        min-height: 38px;\n        line-height: 1.428571 !important;\n    }\n    #client .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--selected.multiselect__option--highlight::after {\n        background: #ff6a6a00;\n        content: attr(data-deselect);\n        color: #fff;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b2300;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect__option {\n        white-space: break-spaces !important;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    #client-profile .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n        font-size: 0.7500000025rem !important;\n        line-height: 1.428571 !important;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: \"\";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: \"Open Sans\";\n        color: #0f213d!important;\n    }\n    #client .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 20px;\n        height: 20px;\n        font: 20px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n    }\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    #client .qty input{\n        border: 0;\n        width: 50%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style scoped>\n    .section {\n        padding: 0 16px;\n    }\n    .modalbox {\n        padding-top: env(safe-area-inset-top);\n        overflow: hidden;\n    }\n\n    .modalbox .modal-dialog {\n        transform: translate(0, 100%) !important;\n        min-width: 100%;\n        margin: 0;\n        transition: 0.5s all !important;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        margin-top: env(safe-area-inset-top);\n    }\n\n    .modalbox .modal-dialog .modal-content {\n        border-radius: 0;\n        border: 0;\n        margin: auto;\n        overflow: hidden;\n        padding-top: 56px;\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header {\n        border: 0;\n        padding: 0;\n        min-height: 56px;\n        padding: 10px 16px;\n        border-radius: 0;\n        display: flex;\n        border-bottom: 1px solid #E1E1E1;\n        align-items: center;\n        justify-content: space-between;\n        margin: 0;\n        position: fixed;\n        left: 0;\n        right: 0;\n        top: 0;\n        width: 100%;\n        z-index: 100;\n        background: #FFF;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header .modal-title {\n        margin: 0;\n        color: #063065;\n        font-size: 17px;\n        font-family: \"Open Sans\";\n        font-weight: 900;\n    }\n    .modalbox .modal-dialog .modal-content .modal-header a{\n        color: #063065;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-body {\n        padding: 20px 16px;\n        overflow: auto;\n    }\n\n    .modalbox.show .modal-dialog {\n        transform: translate(0, 0) !important;\n    }\n    .form-group {\n        width: 100%;\n    }\n\n    .form-group .label {\n        font-size: 12px;\n        margin: 0;\n        font-weight: 900;\n        color: #063065;\n        display: block;\n        line-height: 1.2em;\n        text-align: left;\n        font-family: Open Sans;\n    }\n\n    .form-group textarea {\n        resize: none;\n    }\n\n    .form-group .input-info {\n        font-size: 11px;\n        color: #A1A1A2;\n    }\n\n    .form-group .clear-input {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #4F5050;\n        height: 38px;\n        font-size: 22px;\n        position: absolute;\n        right: 6px;\n        top: 0px;\n        bottom: 0;\n        width: 32px;\n        opacity: 0.5;\n    }\n\n    .form-group .clear-input:hover, .form-group .clear-input:active {\n        opacity: 0.8;\n    }\n\n    .form-group .input-wrapper {\n        position: relative;\n    }\n\n    .form-group .input-wrapper.not-empty .clear-input {\n        display: flex;\n    }\n\n    .form-group .input-wrapper.active .label {\n        color: #f08b23 !important;\n    }\n\n    .form-group.basic {\n        padding: 8px 0;\n        margin: 0;\n    }\n\n    .form-group.basic .form-control,\n    .form-group.basic .custom-select {\n        background: transparent;\n        border: none;\n        border-bottom: 1px solid #E1E1E1;\n        padding: 0 30px 0 0;\n        border-radius: 0;\n        height: 40px;\n        color: #141515;\n        font-size: 15px;\n    }\n\n    .form-group.basic .form-control:focus,\n    .form-group.basic .custom-select:focus {\n        border-bottom-color: #f08b23;\n        box-shadow: inset 0 -1px 0 0 #f08b23;\n    }\n\n    .form-group.basic textarea.form-control {\n        height: auto;\n        padding: 7px 40px 7px 0;\n    }\n\n    .form-group.basic.animated .label {\n        margin-top: 20px;\n        opacity: 0;\n        top: -3px;\n        transition: 0.2s all;\n        position: absolute;\n    }\n\n    .form-group.basic.animated .input-wrapper {\n        padding-top: 5px;\n    }\n\n    .form-group.basic.animated .input-wrapper.not-empty .label {\n        margin-top: 0;\n        opacity: 1;\n    }\n\n    .form-button-group {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        padding-left: 16px;\n        padding-right: 16px;\n        background: #FFF;\n        min-height: 84px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding-bottom: env(safe-area-inset-bottom);\n    }\n    .form-button-group .btn {\n        background: #f08b23;\n        color: white;\n        text-transform: uppercase;\n        font-size: 24px;\n        font-family: \"Open Sans\";\n        font-weight: 900;\n        border: 0;\n        border-radius: 50px;\n        outline: none;\n    }\n    form-button-group .btn:focus {\n        outline: none !important;\n        box-shadow: none !important;\n    }\n    input[type=\"file\"]{\n        opacity: 0;\n        width: 100%;\n        height: 200px;\n        position: absolute;\n        cursor: pointer;\n    }\n    .filezone {\n        outline: 2px dashed grey;\n        outline-offset: -10px;\n        background: #ccc;\n        color: dimgray;\n        padding: 10px 10px;\n        min-height: 200px;\n        position: relative;\n        cursor: pointer;\n    }\n    .filezone:hover {\n        background: #c0c0c0;\n    }\n\n    .filezone p {\n        font-size: 1.2em;\n        text-align: center;\n        padding: 50px 50px 50px 50px;\n    }\n    div.file-listing img{\n        max-width: 90%;\n    }\n\n    div.file-listing{\n        margin: auto;\n        padding: 10px;\n        border-bottom: 1px solid #ddd;\n    }\n\n    div.file-listing img{\n        height: 100px;\n    }\n    .preview{\n        height: 100px;\n        max-width: 90%;\n    }\n    div.success-container{\n        text-align: center;\n        color: green;\n    }\n\n    div.remove-container{\n        text-align: center;\n    }\n\n    div.remove-container a{\n        color: red;\n        cursor: pointer;\n    }\n\n    a.submit-button{\n        display: block;\n        margin: auto;\n        text-align: center;\n        width: 200px;\n        padding: 10px;\n        text-transform: uppercase;\n        background-color: green;\n        color: white;\n        font-weight: bold;\n        margin-top: 20px;\n    }\n</style>\n"],sourceRoot:""}]);const s=a},6874:(n,t,e)=>{e.d(t,{A:()=>s});var o=e(45627),i=e.n(o),r=e(76798),a=e.n(r)()(i());a.push([n.id,".section[data-v-44bca19b]{padding:0 16px}.modalbox[data-v-44bca19b]{overflow:hidden;padding-top:env(safe-area-inset-top)}.modalbox .modal-dialog[data-v-44bca19b]{bottom:0;left:0;margin:env(safe-area-inset-top) 0 0;min-width:100%;position:fixed;right:0;top:0;transform:translateY(100%)!important;transition:all .5s!important}.modalbox .modal-dialog .modal-content[data-v-44bca19b]{border:0;border-radius:0;bottom:0;left:0;margin:auto;overflow:hidden;padding-top:56px;position:absolute;right:0;top:0}.modalbox .modal-dialog .modal-content .modal-header[data-v-44bca19b]{align-items:center;background:#fff;border:0;border-bottom:1px solid #e1e1e1;border-radius:0;display:flex;justify-content:space-between;left:0;margin:0;min-height:56px;padding:10px 16px;position:fixed;right:0;top:0;width:100%;z-index:100}.modalbox .modal-dialog .modal-content .modal-header .modal-title[data-v-44bca19b]{color:#063065;font-family:Open Sans;font-size:17px;font-weight:900;margin:0}.modalbox .modal-dialog .modal-content .modal-header a[data-v-44bca19b]{color:#063065}.modalbox .modal-dialog .modal-content .modal-body[data-v-44bca19b]{overflow:auto;padding:20px 16px}.modalbox.show .modal-dialog[data-v-44bca19b]{transform:translate(0)!important}.form-group[data-v-44bca19b]{width:100%}.form-group .label[data-v-44bca19b]{color:#063065;display:block;font-family:Open Sans;font-size:12px;font-weight:900;line-height:1.2em;margin:0;text-align:left}.form-group textarea[data-v-44bca19b]{resize:none}.form-group .input-info[data-v-44bca19b]{color:#a1a1a2;font-size:11px}.form-group .clear-input[data-v-44bca19b]{align-items:center;bottom:0;color:#4f5050;display:flex;font-size:22px;height:38px;justify-content:center;opacity:.5;position:absolute;right:6px;top:0;width:32px}.form-group .clear-input[data-v-44bca19b]:active,.form-group .clear-input[data-v-44bca19b]:hover{opacity:.8}.form-group .input-wrapper[data-v-44bca19b]{position:relative}.form-group .input-wrapper.not-empty .clear-input[data-v-44bca19b]{display:flex}.form-group .input-wrapper.active .label[data-v-44bca19b]{color:#f08b23!important}.form-group.basic[data-v-44bca19b]{margin:0;padding:8px 0}.form-group.basic .custom-select[data-v-44bca19b],.form-group.basic .form-control[data-v-44bca19b]{background:transparent;border:none;border-bottom:1px solid #e1e1e1;border-radius:0;color:#141515;font-size:15px;height:40px;padding:0 30px 0 0}.form-group.basic .custom-select[data-v-44bca19b]:focus,.form-group.basic .form-control[data-v-44bca19b]:focus{border-bottom-color:#f08b23;box-shadow:inset 0 -1px 0 0 #f08b23}.form-group.basic textarea.form-control[data-v-44bca19b]{height:auto;padding:7px 40px 7px 0}.form-group.basic.animated .label[data-v-44bca19b]{margin-top:20px;opacity:0;position:absolute;top:-3px;transition:all .2s}.form-group.basic.animated .input-wrapper[data-v-44bca19b]{padding-top:5px}.form-group.basic.animated .input-wrapper.not-empty .label[data-v-44bca19b]{margin-top:0;opacity:1}.form-button-group[data-v-44bca19b]{align-items:center;background:#fff;bottom:0;display:flex;justify-content:center;left:0;min-height:84px;padding-bottom:env(safe-area-inset-bottom);padding-left:16px;padding-right:16px;position:fixed;right:0;width:100%}.form-button-group .btn[data-v-44bca19b]{background:#f08b23;border:0;border-radius:50px;color:#fff;font-family:Open Sans;font-size:24px;font-weight:900;outline:none;text-transform:uppercase}form-button-group .btn[data-v-44bca19b]:focus{box-shadow:none!important;outline:none!important}input[type=file][data-v-44bca19b]{cursor:pointer;height:200px;opacity:0;position:absolute;width:100%}.filezone[data-v-44bca19b]{background:#ccc;color:dimgray;cursor:pointer;min-height:200px;outline:2px dashed grey;outline-offset:-10px;padding:10px;position:relative}.filezone[data-v-44bca19b]:hover{background:silver}.filezone p[data-v-44bca19b]{font-size:1.2em;padding:50px;text-align:center}div.file-listing img[data-v-44bca19b]{max-width:90%}div.file-listing[data-v-44bca19b]{border-bottom:1px solid #ddd;margin:auto;padding:10px}.preview[data-v-44bca19b],div.file-listing img[data-v-44bca19b]{height:100px}.preview[data-v-44bca19b]{max-width:90%}div.success-container[data-v-44bca19b]{color:green;text-align:center}div.remove-container[data-v-44bca19b]{text-align:center}div.remove-container a[data-v-44bca19b]{color:red;cursor:pointer}a.submit-button[data-v-44bca19b]{background-color:green;color:#fff;display:block;font-weight:700;margin:20px auto auto;padding:10px;text-align:center;text-transform:uppercase;width:200px}","",{version:3,sources:["webpack://./resources/js/desktop/mobile/pages/Manager/ClientProfile.vue"],names:[],mappings:"AAqhDA,0BACA,cACA,CACA,2BAEA,eAAA,CADA,oCAEA,CAEA,yCASA,QAAA,CAHA,MAAA,CAIA,mCAAA,CARA,cAAA,CAGA,cAAA,CAGA,OAAA,CADA,KAAA,CANA,oCAAA,CAGA,4BAOA,CAEA,wDAEA,QAAA,CADA,eAAA,CAQA,QAAA,CAFA,MAAA,CAJA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CAEA,OAAA,CAEA,KACA,CAEA,sEAQA,kBAAA,CASA,eAAA,CAhBA,QAAA,CAMA,+BAAA,CAFA,eAAA,CACA,YAAA,CAGA,6BAAA,CAGA,MAAA,CAFA,QAAA,CAPA,eAAA,CACA,iBAAA,CAOA,cAAA,CAEA,OAAA,CACA,KAAA,CACA,UAAA,CACA,WAEA,CAEA,mFAEA,aAAA,CAEA,qBAAA,CADA,cAAA,CAEA,eAAA,CAJA,QAKA,CACA,wEACA,aACA,CAEA,oEAEA,aAAA,CADA,iBAEA,CAEA,8CACA,gCACA,CACA,6BACA,UACA,CAEA,oCAIA,aAAA,CACA,aAAA,CAGA,qBAAA,CAPA,cAAA,CAEA,eAAA,CAGA,iBAAA,CAJA,QAAA,CAKA,eAEA,CAEA,sCACA,WACA,CAEA,yCAEA,aAAA,CADA,cAEA,CAEA,0CAEA,kBAAA,CAQA,QAAA,CANA,aAAA,CAHA,YAAA,CAKA,cAAA,CADA,WAAA,CAFA,sBAAA,CASA,UAAA,CALA,iBAAA,CACA,SAAA,CACA,KAAA,CAEA,UAEA,CAEA,iGACA,UACA,CAEA,4CACA,iBACA,CAEA,mEACA,YACA,CAEA,0DACA,uBACA,CAEA,mCAEA,QAAA,CADA,aAEA,CAEA,mGAEA,sBAAA,CAEA,WAAA,CAAA,+BAAA,CAEA,eAAA,CAEA,aAAA,CACA,cAAA,CAFA,WAAA,CAFA,kBAKA,CAEA,+GAEA,2BAAA,CACA,mCACA,CAEA,yDACA,WAAA,CACA,sBACA,CAEA,mDACA,eAAA,CACA,SAAA,CAGA,iBAAA,CAFA,QAAA,CACA,kBAEA,CAEA,2DACA,eACA,CAEA,4EACA,YAAA,CACA,SACA,CAEA,oCAWA,kBAAA,CAHA,eAAA,CANA,QAAA,CAQA,YAAA,CAEA,sBAAA,CATA,MAAA,CAMA,eAAA,CAIA,0CAAA,CAPA,iBAAA,CACA,kBAAA,CANA,cAAA,CAGA,OAAA,CACA,UASA,CACA,yCACA,kBAAA,CAMA,QAAA,CACA,kBAAA,CANA,UAAA,CAGA,qBAAA,CADA,cAAA,CAEA,eAAA,CAGA,YAAA,CANA,wBAOA,CACA,8CAEA,yBAAA,CADA,sBAEA,CACA,kCAKA,cAAA,CAFA,YAAA,CAFA,SAAA,CAGA,iBAAA,CAFA,UAIA,CACA,2BAGA,eAAA,CACA,aAAA,CAIA,cAAA,CAFA,gBAAA,CALA,uBAAA,CACA,oBAAA,CAGA,YAAA,CAEA,iBAEA,CACA,iCACA,iBACA,CAEA,6BACA,eAAA,CAEA,YAAA,CADA,iBAEA,CACA,sCACA,aACA,CAEA,kCAGA,4BAAA,CAFA,WAAA,CACA,YAEA,CAKA,gEAFA,YAKA,CAHA,0BAEA,aACA,CACA,uCAEA,WAAA,CADA,iBAEA,CAEA,sCACA,iBACA,CAEA,wCACA,SAAA,CACA,cACA,CAEA,iCAOA,sBAAA,CACA,UAAA,CAPA,aAAA,CAQA,eAAA,CACA,qBAAA,CALA,YAAA,CAFA,iBAAA,CAGA,wBAAA,CAFA,WAOA",sourcesContent:["<template>\n    <div>\n        <div class=\"container m-auto\" style=\"height: 100%;\">\n            <div class=\"row mx-auto\">\n                <div class=\"col-md-12\">\n                    <div class=\"row mx-auto mt-3 mb-5 justify-content-center align-items-center\" style=\"width: 100%;border-top: 4px solid #f08b23;\">\n                        <span class=\"white--text active-tour\" style=\"background:#062348; font-size: 24px;position: absolute\">Профиль</span>\n                    </div>\n                </div>\n                <div class=\"col-md-12\">\n                    <ValidationObserver v-slot=\"{ invalid }\">\n                        <card id=\"client-profile\">\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"lastName\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Фамилия\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Фамилия\"\n                                                          v-model=\"client.info.LastName\"\n                                                          placeholder=\"Фамилия\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"firstName\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Имя\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Имя\"\n                                                          v-model=\"client.info.FirstName\"\n                                                          placeholder=\"Имя\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 ps-md-1\">\n                                    <b-form-group label=\"Отчество\" label-size=\"sm\" class=\"mb-0\">\n                                        <b-form-input label=\"Отчество\"\n                                                      v-model=\"client.info.MiddleName\"\n                                                      placeholder=\"Отчество\"\n                                                      class=\"mb-0 travel-input\"\n                                        >\n                                        </b-form-input>\n                                    </b-form-group>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                \x3c!--                            <div class=\"col-md-4 pe-md-1\">--\x3e\n                                \x3c!--                                <ValidationProvider name=\"login\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">--\x3e\n                                \x3c!--                                    <b-form-input label=\"Логин\"--\x3e\n                                \x3c!--                                                placeholder=\"Логин\"--\x3e\n                                \x3c!--                                                v-model=\"user.login\"--\x3e\n                                \x3c!--                                                disabled--\x3e\n                                \x3c!--                                                class=\"mb-0\"--\x3e\n                                \x3c!--                                    >--\x3e\n                                \x3c!--                                    </b-form-input>--\x3e\n                                \x3c!--                                    <span class=\"validate-error\">{{ errors[0] }}</span>--\x3e\n                                \x3c!--                                </ValidationProvider>--\x3e\n                                \x3c!--                            </div>--\x3e\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"email\" rules=\"required|email\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Email\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Email\"\n                                                          type=\"email\"\n                                                          placeholder=\"client@email.com\"\n                                                          v-model=\"client.email\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"phone\" rules=\"required|phone\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Телефон\" label-size=\"sm\" class=\"mb-0\">\n                                            <b-form-input label=\"Телефон\"\n                                                          placeholder=\"Телефон\"\n                                                          v-model=\"client.info.Phone\"\n                                                          v-mask=\"['+# (###) ###-##-##','+## (###) ###-##-##']\"\n                                                          class=\"mb-0 travel-input\"\n                                            >\n                                            </b-form-input>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-4 pe-md-1\">\n                                    <ValidationProvider name=\"City\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Город\" label-size=\"sm\" class=\"mb-0\">\n                                            <multiselect\n                                                v-model=\"client.info.City\"\n                                                :options=\"branches\"\n                                                :option-height=\"25\"\n                                                placeholder=\"Выберите город\"\n                                                :show-labels=\"false\"\n                                                :maxHeight=\"200\"\n                                                :loading=\"branches.length===0\"\n                                                :disabled=\"branches.length===0\"\n                                                :allow-empty=\"false\"\n                                                track-by=\"city\"\n                                                label=\"city\"\n                                                @input=\"selectCity(client.info)\"\n                                            >\n                                                <template slot=\"singleLabel\" slot-scope=\"props\">\n                                                <span class=\"option__desc\">\n                                                    <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\" v-if=\"props.option.city\">{{ props.option.city}}</span>\n                                                </span>\n                                                </template>\n                                                <template slot=\"option\" slot-scope=\"props\">\n                                                <span class=\"option__desc\">\n                                                    <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.city}}</span>\n                                                </span>\n                                                </template>\n                                            </multiselect>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                                <div class=\"col-md-4 px-md-1\">\n                                    <ValidationProvider name=\"department\" rules=\"required\" v-slot=\"{ errors }\" style=\"width:100%;\">\n                                        <b-form-group label=\"Отделение\" label-size=\"sm\" class=\"mb-0\">\n                                            <multiselect\n                                                v-model=\"client.info.Department\"\n                                                :options=\"client.info.City.departments\"\n                                                :option-height=\"25\"\n                                                placeholder=\"Выберите отделение\"\n                                                :show-labels=\"false\"\n                                                :maxHeight=\"200\"\n                                                :disabled=\"client.info.City.departments.length===0\"\n                                                :allow-empty=\"false\"\n                                                label=\"address\"\n                                                track-by=\"address\"\n                                            >\n                                                <template slot=\"singleLabel\" slot-scope=\"props\">\n                                                    <span class=\"option__desc\">\n                                                        <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.address}}</span>\n                                                    </span>\n                                                </template>\n                                                <template slot=\"option\" slot-scope=\"props\">\n                                                    <span class=\"option__desc\">\n                                                        <span class=\"option__title\" style=\"font-size: 0.7500000025rem;line-height: 1.428571\">{{ props.option.address }}</span>\n                                                    </span>\n                                                </template>\n                                            </multiselect>\n                                        </b-form-group>\n                                        <span class=\"validate-error\">{{ errors[0] }}</span>\n                                    </ValidationProvider>\n                                </div>\n                            </div>\n                            <div class=\"row w-100 m-auto\">\n                                <div class=\"col-md-12\">\n                                    <b-form-group label=\"Дополнительная информация\" label-size=\"sm\" class=\"mb-0\">\n                                        <b-form-textarea rows=\"4\" cols=\"80\"\n                                                         class=\"travel-input p-2\"\n                                                         placeholder=\"Дополнительная информация о клиенте\"\n                                                         v-model=\"client.info.About\"\n                                                         style=\"border-radius: 20px !important\"\n                                        >\n                                        </b-form-textarea>\n                                    </b-form-group>\n                                </div>\n                            </div>\n                            <b-button slot=\"footer\" class=\"btn btn-travel float-right\" @click=\"updateClientInfo\" :disabled=\"invalid\">Сохранить</b-button>\n                        </card>\n                    </ValidationObserver>\n                </div>\n                <div class=\"col-md-12\">\n                    <div class=\"row mx-auto mt-5 mb-5 justify-content-center align-items-center\" style=\"width: 100%;border-top: 4px solid #f08b23;\">\n                        <span class=\"white--text active-tour\" style=\"background:#062348; font-size: 24px;position: absolute\">Туры</span>\n                    </div>\n                </div>\n                <div class=\"col-md-12\" v-if=\"client != null\">\n                    <client-tours :tours=\"client.tours\" :load=\"load\"></client-tours>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import {mask} from 'vue-the-mask'\n    import moment from 'moment'\n    import ClientTours from \"./ClientTours/Index\";\n    export default {\n        components: {ClientTours},\n        data() {\n            return {\n                current_client: {},\n                clientTours:[],\n                columns: [\n                    {\n                        label: 'ID тура',\n                        field: 'id',\n                    },\n                    {\n                        label: 'Дата',\n                        field: 'created_at',\n                    },\n                    {\n                        label: 'С',\n                        field: 'TourInfo.date_range.start',\n                    },\n                    {\n                        label: 'По',\n                        field: 'TourInfo.date_range.end',\n                    },\n                    {\n                        label: 'Страна',\n                        field: 'TourInfo.country.Name',\n                    },\n                    {\n                        label: 'Курорт',\n                        field: 'TourInfo.resort.Name',\n                    },\n                    {\n                        label: 'Цена',\n                        field: 'TourInfo.price',\n                    },\n                    {\n                        label: 'Выплачено',\n                        field: 'TourInfo.paid',\n                    },\n                ],\n                city_options: [\n                    'Донецк',\n                    'Ростов-на-Дону'\n                ],\n                new_tour:{\n                    UserId:'',\n                    TourId:'',\n                    TourInfo: {\n                        country:{Id:150,Name:\"Россия\",Alias:\"Russia\",Flags:8,HasTickets:true,HotelIsNotInStop:true,IsProVisa:false,IsVisa:false,OriginalName:\"Russia\",Rank:0,TicketsIncluded:true},\n                        resort:{Name:'Любой'},\n                        hotel: {Name:'Любой'},\n                        room_type:'',\n                        meal:'',\n                        tour_operator:'',\n                        date_range:{start:'', end:''},\n                        price:'',\n                        paid:'',\n                        left:0,\n                        services:'',\n                        avia_tickets:[],\n                        passengers:[],\n                        files:[],\n                    },\n                    StartAt:'',\n                    EndAt:'',\n                    Comment:''\n                },\n                edit_tour:{\n                    UserId:'',\n                    TourId:'',\n                    TourInfo: {\n                        country:'',\n                        resort:'',\n                        hotel:'',\n                        room_type:'',\n                        meal:'',\n                        tour_operator:'',\n                        date_range:{start:'', end:''},\n                        price:'',\n                        paid:'',\n                        left:0,\n                        services:'',\n                        avia_tickets:[],\n                        passengers:[],\n                        files:[],\n                        delete_files: [],\n                        new_files: [],\n                    },\n                    StartAt:'',\n                    EndAt:'',\n                    Comment:''\n                },\n                new_mode:false,\n                meals: [\n                    { Id:'115', Name:'AI', desc:'завтраки, обеды, ужины, напитки'},\n                    { Id:'114',Name:'BB', desc:'завтраки'},\n                    { Id:'112',Name:'FB', desc:'завтраки, обеды, ужины'},\n                    { Id:'121',Name:'FB+', desc:'завтраки, обеды, ужины - расширенное меню'},\n                    { Id:'113',Name:'HB', desc:'завтраки, ужины'},\n                    { Id:'122',Name:'HB+', desc:'завтраки, ужины - расширенное меню'},\n                    { Id:'117',Name:'RO', desc:'без питания'},\n                    { Id:'116',Name:'UAI', desc:'завтраки, обеды, ужины, напитки - расширенное меню'},\n                    { Id:'129',Name:'SC', desc:'самообслуживание'},\n                ],\n                edit_loading: false,\n                new_loading: false,\n                load:true,\n                new_files:[],\n                current_manager: null,\n                start: undefined,\n                end: undefined,\n            }\n        },\n        created() {\n            if (this.countries.length===0) {\n                this.$store.dispatch('getCountries', {town_id:0});\n            }\n            if (this.clients.length>0) {\n                this.load = true;\n                this.current_client = this.clients.find((client) => client.id == this.$route.params.id);\n                // this.clientTours=this.client.tours;\n                this.load = false;\n                if (this.managers.length>0)\n                {\n                    this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n                }\n                else {\n                    this.getManagers()\n                }\n            } else {\n               this.getClient();\n            }\n            // console.log(this.client)\n        },\n        mounted() {\n            if(this.branches.length<=0){\n                this.loadBranches();\n            }\n            // this.new_tour.TourInfo.country={Id:150,Name:\"Россия\",Alias:\"Russia\",Flags:8,HasTickets:true,HotelIsNotInStop:true,IsProVisa:false,IsVisa:false,OriginalName:\"Russia\",Rank:0,TicketsIncluded:true};\n            // this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n            // this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'', star_id:''});\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            clients() {\n                return this.$store.getters.clients\n            },\n            client() {\n                return this.current_client\n            },\n            managers() {\n                return this.$store.getters.managers\n            },\n            manager() {\n                return this.current_manager\n            },\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        methods: {\n            //info\n            updateClientInfo() {\n                this.client.info.ManagerId = this.manager.id;\n                var data ={\n                    info: this.client.info,\n                    id: this.client.id\n                }\n                this.$store.dispatch('updateClientInfo', this.client.info)\n                    .then(response => {\n                        this.sendMessage('Информация клиента успешно обновлена');\n                    });\n            },\n            async getClient() {\n                // await this.$http.get(`auth/manager/clients/${this.$route.params.id}`)\n                //     .then((response) => {\n                //         this.client = response.data.client;\n                //         this.clientTours=this.client.tours;\n                //         this.clientTours.forEach( tour => {\n                //             tour.show = false;\n                //             tour.isLoading = false;\n                //             tour.expand = {\n                //                 country: tour.TourInfo.country,\n                //                 resort: tour.TourInfo.resort,\n                //                 hotel: tour.TourInfo.hotel,\n                //                 meal:tour.TourInfo.meal,\n                //                 room_type:tour.TourInfo.room_type,\n                //                 tour_operator:tour.TourInfo.tour_operator,\n                //                 date_range:{start:tour.TourInfo.date_range.start, end:tour.TourInfo.date_range.end},\n                //                 price:tour.TourInfo.price,\n                //                 paid:tour.TourInfo.paid,\n                //                 left:tour.TourInfo.left,\n                //                 services:tour.TourInfo.services,\n                //                 avia_tickets:tour.TourInfo.avia_tickets,\n                //                 passengers:tour.TourInfo.passengers,\n                //                 files:tour.TourInfo.files,\n                //             }\n                //         })\n                //         this.load = false;\n                //     });\n                // console.log(this.clientTours)\n                this.load = true;\n                await this.$store.dispatch('setClients').then(response => {\n                    this.current_client = this.clients.find((client) => client.id == this.$route.params.id);\n                    // this.clientTours=this.client.tours;\n                    this.load = false;\n                    if (this.managers.length>0)\n                    {\n                        this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n\n                    }\n                    else {\n                        this.getManagers()\n                    }\n                })\n            },\n            async getManagers() {\n                await this.$store.dispatch('setManagers').then(() => {\n                    this.current_manager= this.managers.find((manager) => manager.id == this.current_client.info.ManagerId)\n                    console.log(this.managers)\n                })\n            },\n            async loadBranches() {\n                await this.$store.dispatch('setBranches')\n            },\n            async selectCity(item) {\n                item.Department = '';\n            },\n            //edit\n            editClientTour(row) {\n                this.edit_tour = row;\n                this.start = moment(this.edit_tour.TourInfo.date_range.start, \"DD/MM/YYYY\").toDate();\n                this.end = moment(this.edit_tour.TourInfo.date_range.end, \"DD/MM/YYYY\").toDate();\n                // this.start =this.edit_tour.TourInfo.date_range.start;\n                // this.end =this.edit_tour.TourInfo.date_range.end\n                // this.edit_tour.TourInfo.date_range.start= this.start;\n                // this.edit_tour.TourInfo.date_range.end= this.end;\n\n                this.edit_tour.TourInfo.delete_files=[];\n                this.edit_tour.TourInfo.new_files=[];\n                this.edit_tour.new_files=[];\n                this.$store.dispatch('getCities', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                this.$store.dispatch('openModal', '#editUserTourModalBox')\n\n            },\n            chooseEditResortCountry(value){\n                this.edit_tour.TourInfo.resort={Name:'Любой'};\n                this.edit_tour.TourInfo.hotel={Name:'Любой'};\n                this.edit_tour.TourInfo.country = value;\n                this.$store.dispatch('getCities', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n            },\n            chooseEditResort(value) {\n                this.edit_tour.TourInfo.resort = value;\n                if(this.edit_tour.TourInfo.resort.Name != 'Любой')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:'0'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:'Любой'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch('getHotels', {country_id:this.edit_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                }\n            },\n            chooseEditHotel(value) {\n                this.edit_tour.TourInfo.hotel = value;\n            },\n            changeEditDateRange(date_object) {\n                this.edit_tour.TourInfo.date_range=date_object;\n            },\n            chooseEditMeal(value){\n                this.edit_tour.TourInfo.meal = value;\n            },\n            deleteClientTour(row) {\n                row.isLoading = true;\n                this.$store.dispatch('deleteClientTour', row)\n                    .then(response => {\n                        row.isLoading = false;\n                        this.sendMessage('Тур клиента успешно удалён');\n                    });\n            },\n            changeEditPrice(){\n                this.edit_tour.TourInfo.left = this.edit_tour.TourInfo.price - this.edit_tour.TourInfo.paid;\n            },\n            handleEditFiles() {\n                let uploadedFiles = this.$refs.edit_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_files.push({type:'file', name:uploadedFiles[i].name, data:uploadedFiles[i], date: date });\n                        this.getImagePreviews(this.new_files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onEditResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_files.push({\n                    type: 'audio',\n                    name: 'record-'+time+'.mp3',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date\n                })\n                this.getImagePreviews(this.new_files);\n            },\n            deleteFile(file, key) {\n                // var data = {\n                //     name: file.name,\n                //     path: file.path\n                // };\n                // try {\n                // const response = await axios.post('auth/manager/clients/tours/deleteFile',data);\n                this.edit_tour.TourInfo.delete_files.push(file);\n                this.edit_tour.TourInfo.files.splice( key, 1 );\n                // this.getImagePreviews(this.edit_tour.TourInfo.files);\n                // }\n                // catch (error) {\n                // }\n            },\n            updateClientTour(){\n                this.edit_loading = true;\n                this.edit_tour.StartAt = moment(this.edit_tour.TourInfo.date_range.start, \"DD-MM-YYYY\");\n                this.edit_tour.EndAt = moment(this.edit_tour.TourInfo.date_range.end, \"DD-MM-YYYY\");\n                console.log(this.edit_tour.EndAt)\n                this.edit_tour.new_files = this.new_files;\n                let formData = new FormData();\n                formData.append(\"UserTour\", JSON.stringify(this.edit_tour));\n\n                for (var i = 0; i < this.new_files.length; i++) {\n                    let file = this.new_files[i].data;\n\n                    formData.append('new_files[' + i + ']', file);\n                }\n\n                this.$store.dispatch('updateClientTour', formData)\n                    .then(response => {\n                        console.log('response', response)\n                        this.edit_tour.TourInfo.delete_files=[];\n                        this.edit_tour.TourInfo.new_files=[];\n                        this.edit_tour.TourInfo.files = response.TourInfo.files;\n                        this.edit_tour.expand = response.expand;\n                        this.sendMessage('Тур клиента успешно обновлён');\n                        this.edit_tour={\n                            UserId:'',\n                            TourId:'',\n                            TourInfo: {\n                                country:'',\n                                resort:'',\n                                hotel:'',\n                                meal:'',\n                                tour_operator:'',\n                                date_range:{start:'', end:''},\n                                price:0,\n                                paid:0,\n                                left:0,\n                                services:'',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            new_files:[],\n                            StartAt:'',\n                            EndAt:'',\n                            Comment:''\n                        };\n                            this.edit_loading = false;\n                        this.$store.dispatch('closeModal', '#editUserTourModalBox');\n                    });\n            },\n\n            //new\n            addClientTour: function(){\n                this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                this.$store.dispatch('openModal', '#newUserTourModalBox')\n            },\n            chooseNewResortCountry(value){\n                this.new_tour.TourInfo.resort={Name:'Любой'};\n                this.new_tour.TourInfo.hotel={Name:'Любой'};\n                this.new_tour.TourInfo.country = value;\n                this.$store.dispatch('getCities', this.new_tour.TourInfo.country.Id);\n                this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n\n            },\n            chooseNewResorts(value){\n                this.new_tour.TourInfo.resort = value;\n                if(this.new_tour.TourInfo.resort.Name != 'Любой')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.new_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:town_id, star_id:'0'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.new_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.new_tour.TourInfo.hotel = {Name:'Любой'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch('getHotels', {country_id:this.new_tour.TourInfo.country.Id, town_id:'0', star_id:'0'});\n                }\n            },\n            chooseNewHotel(value) {\n                this.new_tour.TourInfo.hotel = value;\n            },\n            changeNewDateRange(date_object) {\n                this.new_tour.TourInfo.date_range=date_object;\n            },\n            chooseNewMeal(value){\n                this.new_tour.TourInfo.meal = value;\n            },\n            changeNewPrice(){\n                this.new_tour.TourInfo.left = this.new_tour.TourInfo.price - this.new_tour.TourInfo.paid;\n            },\n            handleNewFiles() {\n                let uploadedFiles = this.$refs.new_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_tour.TourInfo.files.push({type:'file', name:uploadedFiles[i].name, data:uploadedFiles[i], date:date});\n                        this.getImagePreviews(this.new_tour.TourInfo.files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_tour.TourInfo.files.push({\n                    type: 'audio',\n                    name: 'record-'+time+'.mp3',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                })\n                this.getImagePreviews(this.new_tour.TourInfo.files);\n            },\n            saveClientTour(){\n                this.new_loading = true;\n                this.new_tour.UserId = this.$route.params.id;\n                this.new_tour.StartAt = moment(this.new_tour.TourInfo.date_range.start, \"DD-MM-YYYY\");\n                this.new_tour.EndAt = moment(this.new_tour.TourInfo.date_range.end, \"DD-MM-YYYY\");\n\n                let formData = new FormData();\n                formData.append(\"UserTour\", JSON.stringify(this.new_tour));\n\n                for (var i = 0; i < this.new_tour.TourInfo.files.length; i++) {\n                    let file = this.new_tour.TourInfo.files[i].data;\n\n                    formData.append('files[' + i + ']', file);\n                }\n\n                this.$store.dispatch('newClientTour', formData)\n                    .then(response => {\n                        this.sendMessage('Тур клиента успешно добавлен');\n\n                        this.new_tour= {\n                            UserId:'',\n                            TourId:'',\n                            TourInfo: {\n                                country:'',\n                                resort:'',\n                                hotel:'',\n                                meal:'',\n                                tour_operator:'',\n                                date_range:{start:'', end:''},\n                                price:0,\n                                paid:0,\n                                left:0,\n                                services:'',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            StartAt:'',\n                            EndAt:'',\n                            Comment:'',\n                            Archive:false\n                        }\n\n                        this.new_loading = false;\n                        this.$store.dispatch('closeModal', '#newUserTourModalBox');\n                    });\n\n            },\n\n            //both\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener(\"load\", function() {\n                            this.$refs['preview'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs['preview'+parseInt(i)][0].src = '/images/LOGO-1.png';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                console.log('Got a stream object:', stream);\n            },\n\n            sendMessage(message) {\n                this.$notify({\n                    group: 'info',\n                    type: 'travel',\n                    title: 'Сообщение от TravelClub',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return 'курорт'\n                }\n                if (n>1 && n<5) {\n                    return 'курорта'\n                }\n                if (n>4 && n<20) {\n                    return 'курортов'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return 'курорт'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return 'курорта'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return 'курортов'\n                    }\n                    return 'курортов'\n                }\n                return 'курортов'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return 'отель'\n                }\n                if (n>1 && n<5) {\n                    return 'отеля'\n                }\n                if (n>4 && n<20) {\n                    return 'отелей'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return 'отель'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return 'отеля'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return 'отелей'\n                    }\n                    return 'отелей'\n                }\n                return 'отелей'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return 'выбран'\n                }\n                return 'выбрано'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\x3c!--<style scoped lang=\"scss\" src=\"@/sass/desktop/black-dashboard.scss\">--\x3e\n\n\x3c!--</style>--\x3e\n<style>\n    .modal-dialog{\n        transform: none !important;\n    }\n    #client .modal-dialog{\n        max-width: 900px !important;\n    }\n    .modal-title{\n        color: #062348;\n        font-weight: 900;\n        font-family: \"Open Sans\";\n    }\n    .travel-card-description{\n        color: #062348;\n        font-size: 13px;\n        font-weight: 900;\n        font-family: \"Open Sans\";\n    }\n    .more-text {\n        font-family: \"Open Sans\";\n        text-transform: uppercase;\n        color: #f08b23;\n        font-weight: 600;\n        font-size: 16px;\n        cursor:pointer;\n    }\n    .more-button {\n        cursor:pointer;\n        margin: 0 10px;\n        right: 10px;\n    }\n    .more-button div {\n        width: 40px;\n        height: 40px;\n        display: block;\n        border-radius: 50px;\n        text-decoration: none;\n        font-size: 40px;\n        /*line-height: 50px;*/\n        color:  white;\n        background: #f08b23;\n        padding: 0px !important;\n    }\n    .travel-card {\n        border-radius: 20px;\n        background: white;\n        box-shadow: 0px 3px 15px #0000006b;\n        -moz-box-shadow: 0px 3px 15px #0000006b;\n        -webkit-box-shadow: 0px 3px 15px #0000006b;\n    }\n\n    .white--text {\n        color: #fff !important;\n        caret-color: #fff !important;\n    }\n    .active-tour {\n        background: #f08b23;\n        border-radius: 20px;\n        padding: 3px 20px;\n        -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        font-weight: 900;\n        text-transform: uppercase;\n        font-family: 'Open Sans';\n    }\n    /*.card label {*/\n    /*    font-family: \"Open Sans\" !important;*/\n    /*    font-weight: 900 !important;*/\n    /*    font-size: 0.7500000025rem;*/\n    /*}*/\n    .control-label {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n        color: #344675;\n        font-size: 0.7500000025rem;\n    }\n    .white-content .form-control::placeholder {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n    }\n    .white-content .form-control{\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n        color: #062348;\n    }\n    .white-content  .form-control {\n        border-color: #f08b23;\n        border-radius: 20px;\n    }\n    .v-card > :last-child:not(.v-btn):not(.v-chip) {\n        border-bottom-left-radius: inherit;\n        border-bottom-right-radius: inherit;\n    }\n    .v-card > :first-child:not(.v-btn):not(.v-chip), .v-card > .v-card__progress + :not(.v-btn):not(.v-chip) {\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n    }\n    .v-card > :last-child:not(.v-btn):not(.v-chip) {\n        border-bottom-left-radius: inherit;\n        border-bottom-right-radius: inherit;\n    }\n    .v-card > .v-card__progress + :not(.v-btn):not(.v-chip), .v-card > :first-child:not(.v-btn):not(.v-chip) {\n        border-top-left-radius: inherit;\n        border-top-right-radius: inherit;\n    }\n    .v-responsive {\n        position: relative;\n        overflow: hidden;\n        flex: 1 0 auto;\n        max-width: 100%;\n        display: flex;\n    }\n    .v-image {\n        z-index: 0;\n    }\n    .v-card {\n        overflow-wrap: break-word;\n        white-space: normal;\n    }\n    .v-responsive__sizer {\n        background: #0d274b61;\n        transition: padding-bottom .2s cubic-bezier(.25,.8,.5,1);\n        flex: 1 0 0px;\n    }\n    .v-image__image--cover {\n        background-size: cover;\n    }\n    .v-image__image {\n        background-repeat: no-repeat;\n    }\n    .v-image__image, .v-image__placeholder {\n        z-index: -1;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    }\n    .v-responsive__sizer ~ .v-responsive__content {\n        margin-left: -100%;\n    }\n    .v-responsive__content {\n        flex: 1 0 0px;\n        max-width: 100%;\n    }\n    .elevation-24 {\n        -webkit-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12), 0 1px 5px 0 rgba(0, 0, 0, 0.2);\n    }\n    .v-card__title {\n        align-items: center;\n        display: flex;\n        flex-wrap: wrap;\n        font-size: 1.25rem;\n        font-weight: 500;\n        letter-spacing: .0125em;\n        line-height: 2rem;\n        word-break: break-all;\n    }\n    .v-card__subtitle, .v-card__text, .v-card__title {\n        padding: 16px;\n    }\n    .v-card__subtitle {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n    }\n    .v-card__subtitle h3{\n        font-weight: 900;\n        font-family: 'Open Sans';\n    }\n</style>\n<style>\n    @media only screen and (max-width:767.98px) {\n        .vhd-container:not(.desktop) .vhd-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vhd-input {\n            min-width: 100% !important;\n        }\n        .vhd-container {\n            width: 100% !important;\n        }\n    }\n\n    #client .vhd-picker {\n        z-index: 3 !important;\n        min-height: 362px!important;\n        padding: 18px!important;\n    }\n    #client .vhd-container{\n        width: 100% !important;\n    }\n    #client .vhd-input {\n        min-width: 100px;\n        padding: 8px;\n        border: 1px solid #f08b23 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vhd-input::placeholder {\n        color: #062348 !important;\n    }\n    .vhd-container:not(.desktop) .vhd-picker {\n        min-height: 362px;\n    }\n    .vhd-calendar .calendar-date .week .day[data-v-0cb4ff92] {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #505050;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vhd-calendar .calendar-date .week .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vhd-calendar-header {\n        height: 20px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header {\n        height:60px !important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header>.info {\n        display:block;\n        width:100%;\n        height:60px;\n        padding-top:32px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-footer {\n        height: 36px !important;\n    }\n    .vhd-calendar-footer {\n        height: 24px!important;\n    }\n    .vhd-calendar .calendar-date .week {\n        height: 30px !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vhd-calendar-footer .confirm, .vhd-calendar-footer .reset {\n        font-family: \"Open Sans\" !important;\n        font-weight: 900!important;\n    }\n    .vhd-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vhd-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-week-item,  .vhd-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: '';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n\n    .multiselect__option.multiselect__option--group.multiselect__option--disabled{\n        text-align: center;\n        background: white !important;\n        color:#f08b23 !important;\n    }\n\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: \"Open Sans\";\n        font-weight: 600;\n        font-size: 1rem;\n    }\n\n    #client-profile .multiselect{\n        min-height: 38px;\n    }\n    #client-profile .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 0.7500000025rem;\n        min-height: 38px;\n        line-height: 1.428571 !important;\n    }\n    #client .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--selected.multiselect__option--highlight::after {\n        background: #ff6a6a00;\n        content: attr(data-deselect);\n        color: #fff;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b2300;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect__option {\n        white-space: break-spaces !important;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: \"Open Sans\" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    #client-profile .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n        font-size: 0.7500000025rem !important;\n        line-height: 1.428571 !important;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: \"\";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: \"Open Sans\";\n        color: #0f213d!important;\n    }\n    #client .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 20px;\n        height: 20px;\n        font: 20px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n    }\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    #client .qty input{\n        border: 0;\n        width: 50%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style scoped>\n    .section {\n        padding: 0 16px;\n    }\n    .modalbox {\n        padding-top: env(safe-area-inset-top);\n        overflow: hidden;\n    }\n\n    .modalbox .modal-dialog {\n        transform: translate(0, 100%) !important;\n        min-width: 100%;\n        margin: 0;\n        transition: 0.5s all !important;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        margin-top: env(safe-area-inset-top);\n    }\n\n    .modalbox .modal-dialog .modal-content {\n        border-radius: 0;\n        border: 0;\n        margin: auto;\n        overflow: hidden;\n        padding-top: 56px;\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header {\n        border: 0;\n        padding: 0;\n        min-height: 56px;\n        padding: 10px 16px;\n        border-radius: 0;\n        display: flex;\n        border-bottom: 1px solid #E1E1E1;\n        align-items: center;\n        justify-content: space-between;\n        margin: 0;\n        position: fixed;\n        left: 0;\n        right: 0;\n        top: 0;\n        width: 100%;\n        z-index: 100;\n        background: #FFF;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header .modal-title {\n        margin: 0;\n        color: #063065;\n        font-size: 17px;\n        font-family: \"Open Sans\";\n        font-weight: 900;\n    }\n    .modalbox .modal-dialog .modal-content .modal-header a{\n        color: #063065;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-body {\n        padding: 20px 16px;\n        overflow: auto;\n    }\n\n    .modalbox.show .modal-dialog {\n        transform: translate(0, 0) !important;\n    }\n    .form-group {\n        width: 100%;\n    }\n\n    .form-group .label {\n        font-size: 12px;\n        margin: 0;\n        font-weight: 900;\n        color: #063065;\n        display: block;\n        line-height: 1.2em;\n        text-align: left;\n        font-family: Open Sans;\n    }\n\n    .form-group textarea {\n        resize: none;\n    }\n\n    .form-group .input-info {\n        font-size: 11px;\n        color: #A1A1A2;\n    }\n\n    .form-group .clear-input {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #4F5050;\n        height: 38px;\n        font-size: 22px;\n        position: absolute;\n        right: 6px;\n        top: 0px;\n        bottom: 0;\n        width: 32px;\n        opacity: 0.5;\n    }\n\n    .form-group .clear-input:hover, .form-group .clear-input:active {\n        opacity: 0.8;\n    }\n\n    .form-group .input-wrapper {\n        position: relative;\n    }\n\n    .form-group .input-wrapper.not-empty .clear-input {\n        display: flex;\n    }\n\n    .form-group .input-wrapper.active .label {\n        color: #f08b23 !important;\n    }\n\n    .form-group.basic {\n        padding: 8px 0;\n        margin: 0;\n    }\n\n    .form-group.basic .form-control,\n    .form-group.basic .custom-select {\n        background: transparent;\n        border: none;\n        border-bottom: 1px solid #E1E1E1;\n        padding: 0 30px 0 0;\n        border-radius: 0;\n        height: 40px;\n        color: #141515;\n        font-size: 15px;\n    }\n\n    .form-group.basic .form-control:focus,\n    .form-group.basic .custom-select:focus {\n        border-bottom-color: #f08b23;\n        box-shadow: inset 0 -1px 0 0 #f08b23;\n    }\n\n    .form-group.basic textarea.form-control {\n        height: auto;\n        padding: 7px 40px 7px 0;\n    }\n\n    .form-group.basic.animated .label {\n        margin-top: 20px;\n        opacity: 0;\n        top: -3px;\n        transition: 0.2s all;\n        position: absolute;\n    }\n\n    .form-group.basic.animated .input-wrapper {\n        padding-top: 5px;\n    }\n\n    .form-group.basic.animated .input-wrapper.not-empty .label {\n        margin-top: 0;\n        opacity: 1;\n    }\n\n    .form-button-group {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        padding-left: 16px;\n        padding-right: 16px;\n        background: #FFF;\n        min-height: 84px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding-bottom: env(safe-area-inset-bottom);\n    }\n    .form-button-group .btn {\n        background: #f08b23;\n        color: white;\n        text-transform: uppercase;\n        font-size: 24px;\n        font-family: \"Open Sans\";\n        font-weight: 900;\n        border: 0;\n        border-radius: 50px;\n        outline: none;\n    }\n    form-button-group .btn:focus {\n        outline: none !important;\n        box-shadow: none !important;\n    }\n    input[type=\"file\"]{\n        opacity: 0;\n        width: 100%;\n        height: 200px;\n        position: absolute;\n        cursor: pointer;\n    }\n    .filezone {\n        outline: 2px dashed grey;\n        outline-offset: -10px;\n        background: #ccc;\n        color: dimgray;\n        padding: 10px 10px;\n        min-height: 200px;\n        position: relative;\n        cursor: pointer;\n    }\n    .filezone:hover {\n        background: #c0c0c0;\n    }\n\n    .filezone p {\n        font-size: 1.2em;\n        text-align: center;\n        padding: 50px 50px 50px 50px;\n    }\n    div.file-listing img{\n        max-width: 90%;\n    }\n\n    div.file-listing{\n        margin: auto;\n        padding: 10px;\n        border-bottom: 1px solid #ddd;\n    }\n\n    div.file-listing img{\n        height: 100px;\n    }\n    .preview{\n        height: 100px;\n        max-width: 90%;\n    }\n    div.success-container{\n        text-align: center;\n        color: green;\n    }\n\n    div.remove-container{\n        text-align: center;\n    }\n\n    div.remove-container a{\n        color: red;\n        cursor: pointer;\n    }\n\n    a.submit-button{\n        display: block;\n        margin: auto;\n        text-align: center;\n        width: 200px;\n        padding: 10px;\n        text-transform: uppercase;\n        background-color: green;\n        color: white;\n        font-weight: bold;\n        margin-top: 20px;\n    }\n</style>\n"],sourceRoot:""}]);const s=a},84336:(n,t,e)=>{e.d(t,{A:()=>s});var o=e(45627),i=e.n(o),r=e(76798),a=e.n(r)()(i());a.push([n.id,".start-form[data-v-cdf37b06]{margin:auto;max-width:500px}.section[data-v-cdf37b06]{padding:0 16px}.modalbox[data-v-cdf37b06]{overflow:hidden;padding-top:env(safe-area-inset-top)}.modalbox .modal-dialog[data-v-cdf37b06]{bottom:0;left:0;margin:env(safe-area-inset-top) 0 0;min-width:100%;position:fixed;right:0;top:0;transform:translateY(100%)!important;transition:all .5s!important}.modalbox .modal-dialog .modal-content[data-v-cdf37b06]{border:0;border-radius:0;bottom:0;left:0;margin:auto;overflow:hidden;padding-top:56px;position:absolute;right:0;top:0}.modalbox .modal-dialog .modal-content .modal-header[data-v-cdf37b06]{align-items:center;background:#fff;border:0;border-bottom:1px solid #e1e1e1;border-radius:0;display:flex;justify-content:space-between;left:0;margin:0;min-height:56px;padding:10px 16px;position:fixed;right:0;top:0;width:100%;z-index:100}.modalbox .modal-dialog .modal-content .modal-header .modal-title[data-v-cdf37b06]{color:#063065;font-family:Open Sans;font-size:17px;font-weight:900;margin:0}.modalbox .modal-dialog .modal-content .modal-header a[data-v-cdf37b06]{color:#063065}.modalbox .modal-dialog .modal-content .modal-body[data-v-cdf37b06]{overflow:auto;padding:20px 16px}.modalbox.show .modal-dialog[data-v-cdf37b06]{transform:translate(0)!important}.form-group[data-v-cdf37b06]{width:100%}.form-group .label[data-v-cdf37b06]{color:#063065;display:block;font-family:Open Sans;font-size:12px;font-weight:900;line-height:1.2em;margin:0;text-align:left}.form-group textarea[data-v-cdf37b06]{resize:none}.form-group .input-info[data-v-cdf37b06]{color:#a1a1a2;font-size:11px}.form-group .clear-input[data-v-cdf37b06]{align-items:center;bottom:0;color:#4f5050;display:flex;font-size:22px;height:38px;justify-content:center;opacity:.5;position:absolute;right:6px;top:0;width:32px}.form-group .clear-input[data-v-cdf37b06]:active,.form-group .clear-input[data-v-cdf37b06]:hover{opacity:.8}.form-group .input-wrapper[data-v-cdf37b06]{position:relative}.form-group .input-wrapper.not-empty .clear-input[data-v-cdf37b06]{display:flex}.form-group .input-wrapper.active .label[data-v-cdf37b06]{color:#f08b23!important}.form-group.basic[data-v-cdf37b06]{margin:0;padding:8px 0}.form-group.basic .custom-select[data-v-cdf37b06],.form-group.basic .form-control[data-v-cdf37b06]{background:transparent;border:none;border-bottom:1px solid #e1e1e1;border-radius:0;color:#141515;font-size:15px;height:40px;padding:0 30px 0 0}.form-group.basic .custom-select[data-v-cdf37b06]:focus,.form-group.basic .form-control[data-v-cdf37b06]:focus{border-bottom-color:#f08b23;box-shadow:inset 0 -1px 0 0 #f08b23}.form-group.basic textarea.form-control[data-v-cdf37b06]{height:auto;padding:7px 40px 7px 0}.form-group.basic.animated .label[data-v-cdf37b06]{margin-top:20px;opacity:0;position:absolute;top:-3px;transition:all .2s}.form-group.basic.animated .input-wrapper[data-v-cdf37b06]{padding-top:5px}.form-group.basic.animated .input-wrapper.not-empty .label[data-v-cdf37b06]{margin-top:0;opacity:1}.form-button-group[data-v-cdf37b06]{align-items:center;background:#fff;bottom:0;display:flex;justify-content:center;left:0;min-height:84px;padding-bottom:env(safe-area-inset-bottom);padding-left:16px;padding-right:16px;position:fixed;right:0;width:100%}.form-button-group .btn[data-v-cdf37b06]{background:#f08b23;border:0;border-radius:50px;color:#fff;font-family:Open Sans;font-size:24px;font-weight:900;outline:none;text-transform:uppercase}form-button-group .btn[data-v-cdf37b06]:focus{box-shadow:none!important;outline:none!important}.btn.btn-primary[data-v-cdf37b06]{background:linear-gradient(0deg,#ffbf00,#f08b23);background-color:transparent;background-color:#f08b23!important;border-color:#f08b23!important;box-shadow:0 2px 2px 0 rgba(156,39,176,.14),0 3px 1px -2px rgba(156,39,176,.2),0 1px 5px 0 rgba(156,39,176,.12)!important;color:#fff!important}","",{version:3,sources:["webpack://./resources/js/desktop/mobile/pages/Manager/ClientTours/Create.vue"],names:[],mappings:"AA2zBA,6BAGA,WAAA,CAFA,eAIA,CACA,0BACA,cACA,CACA,2BAEA,eAAA,CADA,oCAEA,CAEA,yCASA,QAAA,CAHA,MAAA,CAIA,mCAAA,CARA,cAAA,CAGA,cAAA,CAGA,OAAA,CADA,KAAA,CANA,oCAAA,CAGA,4BAOA,CAEA,wDAEA,QAAA,CADA,eAAA,CAQA,QAAA,CAFA,MAAA,CAJA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CAEA,OAAA,CAEA,KACA,CAEA,sEAQA,kBAAA,CASA,eAAA,CAhBA,QAAA,CAMA,+BAAA,CAFA,eAAA,CACA,YAAA,CAGA,6BAAA,CAGA,MAAA,CAFA,QAAA,CAPA,eAAA,CACA,iBAAA,CAOA,cAAA,CAEA,OAAA,CACA,KAAA,CACA,UAAA,CACA,WAEA,CAEA,mFAEA,aAAA,CAEA,qBAAA,CADA,cAAA,CAEA,eAAA,CAJA,QAKA,CACA,wEACA,aACA,CAEA,oEAEA,aAAA,CADA,iBAEA,CAEA,8CACA,gCACA,CACA,6BACA,UACA,CAEA,oCAIA,aAAA,CACA,aAAA,CAGA,qBAAA,CAPA,cAAA,CAEA,eAAA,CAGA,iBAAA,CAJA,QAAA,CAKA,eAEA,CAEA,sCACA,WACA,CAEA,yCAEA,aAAA,CADA,cAEA,CAEA,0CAEA,kBAAA,CAQA,QAAA,CANA,aAAA,CAHA,YAAA,CAKA,cAAA,CADA,WAAA,CAFA,sBAAA,CASA,UAAA,CALA,iBAAA,CACA,SAAA,CACA,KAAA,CAEA,UAEA,CAEA,iGACA,UACA,CAEA,4CACA,iBACA,CAEA,mEACA,YACA,CAEA,0DACA,uBACA,CAEA,mCAEA,QAAA,CADA,aAEA,CAEA,mGAEA,sBAAA,CAEA,WAAA,CAAA,+BAAA,CAEA,eAAA,CAEA,aAAA,CACA,cAAA,CAFA,WAAA,CAFA,kBAKA,CAEA,+GAEA,2BAAA,CACA,mCACA,CAEA,yDACA,WAAA,CACA,sBACA,CAEA,mDACA,eAAA,CACA,SAAA,CAGA,iBAAA,CAFA,QAAA,CACA,kBAEA,CAEA,2DACA,eACA,CAEA,4EACA,YAAA,CACA,SACA,CAEA,oCAWA,kBAAA,CAHA,eAAA,CANA,QAAA,CAQA,YAAA,CAEA,sBAAA,CATA,MAAA,CAMA,eAAA,CAIA,0CAAA,CAPA,iBAAA,CACA,kBAAA,CANA,cAAA,CAGA,OAAA,CACA,UASA,CACA,yCACA,kBAAA,CAMA,QAAA,CACA,kBAAA,CANA,UAAA,CAGA,qBAAA,CADA,cAAA,CAEA,eAAA,CAGA,YAAA,CANA,wBAOA,CACA,8CAEA,yBAAA,CADA,sBAEA,CACA,kCAEA,gDAAA,CACA,4BAAA,CACA,kCAAA,CACA,8BAAA,CACA,yHAAA,CALA,oBAMA",sourcesContent:['<template>\n    <div class="modal fade modalbox show"\n         id="newUserTourModalBox"  data-bs-backdrop="static"\n         tabindex="-1" role="dialog"\n         aria-modal="true"\n    >\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title">Новый тур клиента</h5>\n                    <a href="javascript:;"  data-bs-dismiss="modal" style="text-decoration: none">Закрыть</a>\n                </div>\n                <div class="modal-body">\n                    <div class="start-form" style="margin-bottom: 110px">\n                        <div class="section mx-auto">\n                            <div class="row my-3">\n                                <ValidationObserver v-slot="{ invalid }">\n                                    <div class="col-12 col-md-6">\n                                        <label class="control-label">Куда</label>\n                                        <multiselect\n                                            v-model="new_tour.TourInfo.country"\n                                            :options="countries"\n                                            :option-height="25"\n                                            placeholder="Выберите страну"\n                                            :show-labels="false"\n                                            :maxHeight="200"\n                                            label="Name"\n                                            track-by="Name"\n                                            :loading="isCountriesLoading"\n                                            :disabled="isCountriesLoading"\n                                            :allow-empty="false"\n                                            @input="chooseNewResortCountry"\n                                        >\n                                            <template slot="singleLabel" slot-scope="props">\n                                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                                <span class="option__desc">\n                            <span class="option__title">{{ props.option.Name }}</span>\n                        </span>\n                                            </template>\n                                            <template slot="option" slot-scope="props">\n                                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                                <span class="option__desc">\n                            <span class="option__title">{{ props.option.Name }}</span>\n                        </span>\n                                            </template>\n                                        </multiselect>\n                                    </div>\n                                    <div class="col-12 col-md-6">\n                                        <label class="control-label">Курорт</label>\n                                        <multiselect\n                                            v-model="new_tour.TourInfo.resort"\n                                            :options="cities"\n                                            placeholder="Введите название курорта"\n                                            :show-labels="false"\n                                            :maxHeight="200"\n                                            label="Name"\n                                            track-by="Name"\n                                            :close-on-select="true" :clear-on-select="true"\n                                            :loading="isCountriesLoading || isCitiesLoading"\n                                            :disabled="isCountriesLoading || isCitiesLoading"\n                                            @input="chooseNewResorts"\n                                            :preselectFirst="true"\n                                        >\n                                            <template slot="selection" slot-scope="{ values, search, isOpen }">\n                        <span\n                            class="multiselect__single"\n                            v-if="values.length>3 && !isOpen"\n                        >\n                            {{ values.length }} {{values.length | pluralizeResorts }} {{values.length | pluralizeChoose}}\n                        </span>\n                                            </template>\n                                        </multiselect>\n                                    </div>\n                                    <div class="col-12 col-md-6">\n                                        <label class="control-label">Отель</label>\n                                        <multiselect\n                                            v-model="new_tour.TourInfo.hotel"\n                                            :options="hotels"\n                                            placeholder="Введите название отеля"\n                                            :show-labels="false"\n                                            :maxHeight="200"\n                                            label="Name"\n                                            track-by="Name"\n                                            :close-on-select="true" :clear-on-select="true"\n                                            :loading="isCountriesLoading || isHotelsLoading"\n                                            :disabled="isCountriesLoading || isHotelsLoading"\n                                            :allow-empty="false"\n                                            @input="chooseNewHotel"\n                                            :preselectFirst="true"\n                                        >\n\n                                            <template slot="selection" slot-scope="{ values, search, isOpen }">\n                        <span\n                            class="multiselect__single"\n                            v-if="values.length>3 && !isOpen"\n                        >\n                            {{ values.length }} {{values.length | pluralizeHotels}} {{values.length | pluralizeChoose}}\n                        </span>\n                                            </template>\n                                            <template slot="singleLabel" slot-scope="props">\n                        <span class="option__desc">\n                            <span class="option__title">{{ props.option.Name }}</span>\n                            <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                            <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                        </span>\n                                            </template>\n                                            <template slot="option" slot-scope="props">\n                                                <div class="option__desc">\n                                                    <span class="option__title">{{ props.option.Name }}</span>\n                                                    <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                                    <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                                </div>\n                                            </template>\n                                        </multiselect>\n                                    </div>\n                                    <div class="col-12 col-md-6">\n                                        <label class="control-label">Питание</label>\n                                        <ValidationProvider name="meal" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                            <multiselect\n                                                v-model="new_tour.TourInfo.meal"\n                                                :options="meals"\n                                                :option-height="25"\n                                                placeholder="Выберите питание"\n                                                :show-labels="false"\n                                                :maxHeight="200"\n                                                label="Name"\n                                                track-by="Name"\n                                                :close-on-select="true" :clear-on-select="true"\n                                                @input="chooseNewMeal"\n                                                :allow-empty="false"\n                                            >\n                                                <template slot="singleLabel" slot-scope="props">\n                            <span class="option__desc">\n                                <span class="option__title">{{props.option.Name}}</span>\n                            </span>\n                                                </template>\n                                                <template slot="option" slot-scope="props">\n                                                    <div>\n                                                        <div class="option__desc">\n                                                            <span class="option__title">{{props.option.Name}}</span>\n                                                        </div>\n                                                        <div class="row align-items-center m-auto" style="width: 100%; height: 100%">\n                                                            <p class="" style="font-size: 12px; margin:0px;">{{props.option.desc}}</p>\n                                                        </div>\n                                                    </div>\n                                                </template>\n                                            </multiselect>\n                                            <span class="validate-error">{{ errors[0] }}</span>\n                                        </ValidationProvider>\n                                    </div>\n                                    <div class="col-12 col-md-6">\n                                        <label class="control-label">Категория номера</label>\n                                        <ValidationProvider name="room_type" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                            <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                                                <input type="text" class=" multiselect__input price" v-model="new_tour.TourInfo.room_type" placeholder="Категория номера">\n                                            </div>\n                                            <span class="validate-error">{{ errors[0] }}</span>\n                                        </ValidationProvider>\n                                    </div>\n                                    <div class="col-12 col-md-6">\n                                        <div class="row align-items-center w-100 m-auto" style="width: 100%;">\n                                            <label class="control-label">Даты тура</label>\n                                            <ValidationProvider name="date_range" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                                <div class="row align-items-center justify-content-center m-auto w-100" style="width: 100%;">\n                                                    <VueHotelDatepicker\n                                                        :startDate="new_tour.TourInfo.date_range.start"\n                                                        :endDate="new_tour.TourInfo.date_range.end"\n                                                        :placeholder="\'Даты тура\'"\n                                                        :format="\'DD/MM/YYYY\'"\n                                                        :weekList="[\'Вс.\', \'Пн.\', \'Вт.\', \'Ср.\', \'Чт.\', \'Пт.\', \'Сб.\']"\n                                                        :monthList="[\'Янв.\', \'Фев.\', \'Мар.\', \'Апр.\', \'Май.\', \'Июн.\', \'Июл.\', \'Авг.\', \'Сен.\', \'Окт\', \'Ноя.\', \'Дек.\']"\n                                                        :fromText="\'С\'"\n                                                        :toText="\'По\'"\n                                                        :resetText="\'Очистить\'"\n                                                        :confirmText="\'Подтвердить\'"\n                                                        :mobile="\'mobile\'"\n                                                        class="w-100"\n                                                        @update="changeNewDateRange"\n                                                    />\n                                                </div>\n                                                <span class="validate-error">{{ errors[0] }}</span>\n                                            </ValidationProvider>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <div class="row align-items-center w-100 m-auto" style="width: 100%;">\n                                            <label class="control-label">Цена</label>\n                                            <ValidationProvider name="price" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                                <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                                                    <input type="number" class="multiselect__input price" v-model="new_tour.TourInfo.price" step="1" min="0" @input="changeNewPrice">\n                                                </div>\n                                                <span class="validate-error">{{ errors[0] }}</span>\n                                            </ValidationProvider>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <div class="row align-items-center w-100 m-auto" style="width: 100%;">\n                                            <label class="control-label">Выплачено</label>\n                                            <ValidationProvider name="left" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                                <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                                                    <input type="number" class=" multiselect__input price" v-model="new_tour.TourInfo.paid" step="1" min="0" @input="changeNewPrice">\n                                                </div>\n                                                <span class="validate-error">{{ errors[0] }}</span>\n                                            </ValidationProvider>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="row align-items-center w-100 mx-auto mt-3" style="width: 100%;">\n                                            <label class="control-label">Дополнительные услуги</label>\n                                            <textarea rows="4" cols="80"\n                                                      class="form-control"\n                                                      placeholder="Дополнительные услуги"\n                                                      v-model="new_tour.TourInfo.services"\n                                                      style="padding: 5px 15px; border: 1px solid #f08b23; border-radius: 20px"\n                                            >\n                                            </textarea>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Авиабилеты</label>\n                                        <avia-tickets-list :avia_tickets="new_tour.TourInfo.avia_tickets"></avia-tickets-list>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Пассажиры</label>\n                                        <passengers-list :passengers="new_tour.TourInfo.passengers"></passengers-list>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Файлы для клиента</label>\n                                        <div class="row w-100 mx-auto mt-2">\n                                            <div class="col-md-12">\n                                                <div class="large-12 medium-12 small-12 filezone">\n                                                    <input type="file" id="new_files" ref="new_tour_files" multiple v-on:change="handleNewFiles()"/>\n                                                    <p>\n                                                        Перетащите файл(ы) сюда<br>или нажмите для поиска\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Или запишите голосовое сообщение</label>\n                                        <div class="d-flex justify-content-center mt-2">\n                                            <vue-record-audio :mode="\'press\'" @stream="onStream" @result="onResult"/>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="file-listing">\n                                            <div class="list-group-item" v-for="(file, index) in new_tour.TourInfo.files" :key="file.name">\n                                                <div class="row m-auto w-100 align-items-center justify-content-center" v-if="file.type==\'file\'">\n                                                    <div class="col-4 text-center">\n                                                        <img class="preview" v-bind:ref="\'preview\'+parseInt(index)"/>\n                                                    </div>\n                                                    <div class="col-8">\n                                                        <div v-if="file.type==\'file\'">\n                                                            <p class="control-label">{{file.data.name}}</p>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class="row m-auto w-100 align-items-center justify-content-center" v-if="file.type==\'audio\'">\n                                                    <div class="audio-container w-100">\n                                                        <audio-player :audio="file" class="w-100"></audio-player>\n                                                    </div>\n                                                </div>\n                                                <div class="remove-container">\n                                                    <a class="remove" v-on:click="removeFile(new_tour.TourInfo.files, index)" v-if="loading == false">Отменить</a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-12 contact-btn form-button-group">\n                                        <button type="submit" class="btn btn-block btn-lg" style="width: 100%" @click="saveClientTour" :disabled="invalid||loading">\n                                            <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                                                <span v-if="loading" class="spinner-border spinner-border-sm mx-2" role="status" aria-hidden="true"></span>\n                                                <span v-if="loading" class="sr-only">Loading...</span>\n                                                Сохранить\n                                            </div>\n                                        </button>\n                                    </div>\n                                </ValidationObserver>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mask} from \'vue-the-mask\'\n    import moment from \'moment\'\n    export default {\n        name: "Create",\n        data() {\n            return {\n                city_options: [\n                    \'Донецк\',\n                    \'Ростов-на-Дону\'\n                ],\n                new_tour:{\n                    UserId:\'\',\n                    TourId:\'\',\n                    TourInfo: {\n                        country:{Id:150,Name:"Россия",Alias:"Russia",Flags:8,HasTickets:true,HotelIsNotInStop:true,IsProVisa:false,IsVisa:false,OriginalName:"Russia",Rank:0,TicketsIncluded:true},\n                        resort:{Name:\'Любой\'},\n                        hotel: {Name:\'Любой\'},\n                        room_type:\'\',\n                        meal:\'\',\n                        tour_operator:\'\',\n                        date_range:{start:\'\', end:\'\'},\n                        price:\'\',\n                        paid:\'\',\n                        left:\'\',\n                        services:\'\',\n                        avia_tickets:[],\n                        passengers:[],\n                        files:[],\n                    },\n                    StartAt:\'\',\n                    EndAt:\'\',\n                    Comment:\'\'\n                },\n                new_mode:false,\n                meals: [\n                    { Id:\'115\', Name:\'AI\', desc:\'завтраки, обеды, ужины, напитки\'},\n                    { Id:\'114\',Name:\'BB\', desc:\'завтраки\'},\n                    { Id:\'112\',Name:\'FB\', desc:\'завтраки, обеды, ужины\'},\n                    { Id:\'121\',Name:\'FB+\', desc:\'завтраки, обеды, ужины - расширенное меню\'},\n                    { Id:\'113\',Name:\'HB\', desc:\'завтраки, ужины\'},\n                    { Id:\'122\',Name:\'HB+\', desc:\'завтраки, ужины - расширенное меню\'},\n                    { Id:\'117\',Name:\'RO\', desc:\'без питания\'},\n                    { Id:\'116\',Name:\'UAI\', desc:\'завтраки, обеды, ужины, напитки - расширенное меню\'},\n                    { Id:\'129\',Name:\'SC\', desc:\'самообслуживание\'},\n                ],\n                loading: false,\n                new_files:[],\n                start: undefined,\n                end: undefined,\n                flag:false,\n                seconds:0,\n                interval:\'\',\n            }\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        methods: {\n            chooseNewResortCountry(value){\n                this.new_tour.TourInfo.resort={Name:\'Любой\'};\n                this.new_tour.TourInfo.hotel={Name:\'Любой\'};\n                this.new_tour.TourInfo.country = value;\n                this.$store.dispatch(\'getCities\', this.new_tour.TourInfo.country.Id);\n                this.$store.dispatch(\'getHotels\', {country_id:this.new_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n            },\n            chooseNewResorts(value){\n                this.new_tour.TourInfo.resort = value;\n                if(this.new_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.new_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.new_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.new_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.new_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.new_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n            },\n            chooseNewHotel(value) {\n                this.new_tour.TourInfo.hotel = value;\n            },\n            changeNewDateRange(date_object) {\n                this.new_tour.TourInfo.date_range=date_object;\n            },\n            chooseNewMeal(value){\n                this.new_tour.TourInfo.meal = value;\n            },\n            changeNewPrice(){\n                this.new_tour.TourInfo.left = this.new_tour.TourInfo.price - this.new_tour.TourInfo.paid;\n            },\n            handleNewFiles() {\n                let uploadedFiles = this.$refs.new_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_tour.TourInfo.files.push({type:\'file\', name:uploadedFiles[i].name, data:uploadedFiles[i], date:date});\n                        this.getImagePreviews(this.new_tour.TourInfo.files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onResult(data) {\n                this.countSeconds();\n                var time = Date.now();\n                var date = new Date();\n                this.new_tour.TourInfo.files.push({\n                    type: \'audio\',\n                    name: \'record-\'+time+\'.mp3\',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                    seconds: this.seconds\n                })\n                // this.getImagePreviews(this.new_tour.TourInfo.files);\n            },\n            saveClientTour(){\n                this.loading = true;\n                this.new_tour.UserId = this.$route.params.id;\n                this.new_tour.StartAt = moment(this.new_tour.TourInfo.date_range.start, "DD-MM-YYYY");\n                this.new_tour.EndAt = moment(this.new_tour.TourInfo.date_range.end, "DD-MM-YYYY");\n\n                let formData = new FormData();\n                formData.append("UserTour", JSON.stringify(this.new_tour));\n\n                for (var i = 0; i < this.new_tour.TourInfo.files.length; i++) {\n                    let file = this.new_tour.TourInfo.files[i].data;\n\n                    formData.append(\'files[\' + i + \']\', file);\n                }\n\n                this.$store.dispatch(\'newClientTour\', formData)\n                    .then(response => {\n                        this.sendMessage(\'Тур клиента успешно добавлен\');\n\n                        this.new_tour= {\n                            UserId:\'\',\n                            TourId:\'\',\n                            TourInfo: {\n                                country:\'\',\n                                resort:\'\',\n                                hotel:\'\',\n                                meal:\'\',\n                                tour_operator:\'\',\n                                date_range:{start:\'\', end:\'\'},\n                                price:\'\',\n                                paid:\'\',\n                                left:\'\',\n                                services:\'\',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            StartAt:\'\',\n                            EndAt:\'\',\n                            Comment:\'\',\n                            Archive:false\n                        }\n\n                        this.loading = false;\n                        this.$store.dispatch(\'closeModal\', \'#newUserTourModalBox\');\n                    });\n\n            },\n\n            //both\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener("load", function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = \'/images/LOGO-1.png\';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                console.log(\'Got a stream object:\', stream);\n                this.countSeconds();\n            },\n            countSeconds() {\n                this.flag = !this.flag;\n                if (this.flag == true) {\n                    this.seconds=0;\n                    this.interval = setInterval(this.incrementSeconds, 1000);\n                }\n                else {\n                    clearInterval(this.interval)\n                }\n            },\n            incrementSeconds() {\n                this.seconds += 1;\n            },\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Сообщение от TravelClub\',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return \'курорт\'\n                }\n                if (n>1 && n<5) {\n                    return \'курорта\'\n                }\n                if (n>4 && n<20) {\n                    return \'курортов\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'курорт\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'курорта\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'курортов\'\n                    }\n                    return \'курортов\'\n                }\n                return \'курортов\'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return \'отель\'\n                }\n                if (n>1 && n<5) {\n                    return \'отеля\'\n                }\n                if (n>4 && n<20) {\n                    return \'отелей\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'отель\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'отеля\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'отелей\'\n                    }\n                    return \'отелей\'\n                }\n                return \'отелей\'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return \'выбран\'\n                }\n                return \'выбрано\'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\n<style scoped>\n    .start-form {\n        max-width: 500px;\n        margin: auto;\n        margin-top: auto;\n        /*text-align: center;*/\n    }\n    .section {\n        padding: 0 16px;\n    }\n    .modalbox {\n        padding-top: env(safe-area-inset-top);\n        overflow: hidden;\n    }\n\n    .modalbox .modal-dialog {\n        transform: translate(0, 100%) !important;\n        min-width: 100%;\n        margin: 0;\n        transition: 0.5s all !important;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        margin-top: env(safe-area-inset-top);\n    }\n\n    .modalbox .modal-dialog .modal-content {\n        border-radius: 0;\n        border: 0;\n        margin: auto;\n        overflow: hidden;\n        padding-top: 56px;\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header {\n        border: 0;\n        padding: 0;\n        min-height: 56px;\n        padding: 10px 16px;\n        border-radius: 0;\n        display: flex;\n        border-bottom: 1px solid #E1E1E1;\n        align-items: center;\n        justify-content: space-between;\n        margin: 0;\n        position: fixed;\n        left: 0;\n        right: 0;\n        top: 0;\n        width: 100%;\n        z-index: 100;\n        background: #FFF;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header .modal-title {\n        margin: 0;\n        color: #063065;\n        font-size: 17px;\n        font-family: "Open Sans";\n        font-weight: 900;\n    }\n    .modalbox .modal-dialog .modal-content .modal-header a{\n        color: #063065;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-body {\n        padding: 20px 16px;\n        overflow: auto;\n    }\n\n    .modalbox.show .modal-dialog {\n        transform: translate(0, 0) !important;\n    }\n    .form-group {\n        width: 100%;\n    }\n\n    .form-group .label {\n        font-size: 12px;\n        margin: 0;\n        font-weight: 900;\n        color: #063065;\n        display: block;\n        line-height: 1.2em;\n        text-align: left;\n        font-family: Open Sans;\n    }\n\n    .form-group textarea {\n        resize: none;\n    }\n\n    .form-group .input-info {\n        font-size: 11px;\n        color: #A1A1A2;\n    }\n\n    .form-group .clear-input {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #4F5050;\n        height: 38px;\n        font-size: 22px;\n        position: absolute;\n        right: 6px;\n        top: 0px;\n        bottom: 0;\n        width: 32px;\n        opacity: 0.5;\n    }\n\n    .form-group .clear-input:hover, .form-group .clear-input:active {\n        opacity: 0.8;\n    }\n\n    .form-group .input-wrapper {\n        position: relative;\n    }\n\n    .form-group .input-wrapper.not-empty .clear-input {\n        display: flex;\n    }\n\n    .form-group .input-wrapper.active .label {\n        color: #f08b23 !important;\n    }\n\n    .form-group.basic {\n        padding: 8px 0;\n        margin: 0;\n    }\n\n    .form-group.basic .form-control,\n    .form-group.basic .custom-select {\n        background: transparent;\n        border: none;\n        border-bottom: 1px solid #E1E1E1;\n        padding: 0 30px 0 0;\n        border-radius: 0;\n        height: 40px;\n        color: #141515;\n        font-size: 15px;\n    }\n\n    .form-group.basic .form-control:focus,\n    .form-group.basic .custom-select:focus {\n        border-bottom-color: #f08b23;\n        box-shadow: inset 0 -1px 0 0 #f08b23;\n    }\n\n    .form-group.basic textarea.form-control {\n        height: auto;\n        padding: 7px 40px 7px 0;\n    }\n\n    .form-group.basic.animated .label {\n        margin-top: 20px;\n        opacity: 0;\n        top: -3px;\n        transition: 0.2s all;\n        position: absolute;\n    }\n\n    .form-group.basic.animated .input-wrapper {\n        padding-top: 5px;\n    }\n\n    .form-group.basic.animated .input-wrapper.not-empty .label {\n        margin-top: 0;\n        opacity: 1;\n    }\n\n    .form-button-group {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        padding-left: 16px;\n        padding-right: 16px;\n        background: #FFF;\n        min-height: 84px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding-bottom: env(safe-area-inset-bottom);\n    }\n    .form-button-group .btn {\n        background: #f08b23;\n        color: white;\n        text-transform: uppercase;\n        font-size: 24px;\n        font-family: "Open Sans";\n        font-weight: 900;\n        border: 0;\n        border-radius: 50px;\n        outline: none;\n    }\n    form-button-group .btn:focus {\n        outline: none !important;\n        box-shadow: none !important;\n    }\n    .btn.btn-primary {\n        color: #fff !important;\n        background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%);\n        background-color: rgba(0, 0, 0, 0);\n        background-color: #f08b23 !important;\n        border-color: #f08b23 !important;\n        box-shadow: 0 2px 2px 0 rgba(156, 39, 176, 0.14), 0 3px 1px -2px rgba(156, 39, 176, 0.2), 0 1px 5px 0 rgba(156, 39, 176, 0.12) !important;\n    }\n</style>\n'],sourceRoot:""}]);const s=a},43662:(n,t,e)=>{e.d(t,{A:()=>s});var o=e(45627),i=e.n(o),r=e(76798),a=e.n(r)()(i());a.push([n.id,".start-form[data-v-8444d95a]{margin:auto;max-width:500px}.section[data-v-8444d95a]{padding:0 16px}.modalbox[data-v-8444d95a]{overflow:hidden;padding-top:env(safe-area-inset-top)}.modalbox .modal-dialog[data-v-8444d95a]{bottom:0;left:0;margin:env(safe-area-inset-top) 0 0;min-width:100%;position:fixed;right:0;top:0;transform:translateY(100%)!important;transition:all .5s!important}.modalbox .modal-dialog .modal-content[data-v-8444d95a]{border:0;border-radius:0;bottom:0;left:0;margin:auto;overflow:hidden;padding-top:56px;position:absolute;right:0;top:0}.modalbox .modal-dialog .modal-content .modal-header[data-v-8444d95a]{align-items:center;background:#fff;border:0;border-bottom:1px solid #e1e1e1;border-radius:0;display:flex;justify-content:space-between;left:0;margin:0;min-height:56px;padding:10px 16px;position:fixed;right:0;top:0;width:100%;z-index:100}.modalbox .modal-dialog .modal-content .modal-header .modal-title[data-v-8444d95a]{color:#063065;font-family:Open Sans;font-size:17px;font-weight:900;margin:0}.modalbox .modal-dialog .modal-content .modal-header a[data-v-8444d95a]{color:#063065}.modalbox .modal-dialog .modal-content .modal-body[data-v-8444d95a]{overflow:auto;padding:20px 16px}.modalbox.show .modal-dialog[data-v-8444d95a]{transform:translate(0)!important}.form-group[data-v-8444d95a]{width:100%}.form-group .label[data-v-8444d95a]{color:#063065;display:block;font-family:Open Sans;font-size:12px;font-weight:900;line-height:1.2em;margin:0;text-align:left}.form-group textarea[data-v-8444d95a]{resize:none}.form-group .input-info[data-v-8444d95a]{color:#a1a1a2;font-size:11px}.form-group .clear-input[data-v-8444d95a]{align-items:center;bottom:0;color:#4f5050;display:flex;font-size:22px;height:38px;justify-content:center;opacity:.5;position:absolute;right:6px;top:0;width:32px}.form-group .clear-input[data-v-8444d95a]:active,.form-group .clear-input[data-v-8444d95a]:hover{opacity:.8}.form-group .input-wrapper[data-v-8444d95a]{position:relative}.form-group .input-wrapper.not-empty .clear-input[data-v-8444d95a]{display:flex}.form-group .input-wrapper.active .label[data-v-8444d95a]{color:#f08b23!important}.form-group.basic[data-v-8444d95a]{margin:0;padding:8px 0}.form-group.basic .custom-select[data-v-8444d95a],.form-group.basic .form-control[data-v-8444d95a]{background:transparent;border:none;border-bottom:1px solid #e1e1e1;border-radius:0;color:#141515;font-size:15px;height:40px;padding:0 30px 0 0}.form-group.basic .custom-select[data-v-8444d95a]:focus,.form-group.basic .form-control[data-v-8444d95a]:focus{border-bottom-color:#f08b23;box-shadow:inset 0 -1px 0 0 #f08b23}.form-group.basic textarea.form-control[data-v-8444d95a]{height:auto;padding:7px 40px 7px 0}.form-group.basic.animated .label[data-v-8444d95a]{margin-top:20px;opacity:0;position:absolute;top:-3px;transition:all .2s}.form-group.basic.animated .input-wrapper[data-v-8444d95a]{padding-top:5px}.form-group.basic.animated .input-wrapper.not-empty .label[data-v-8444d95a]{margin-top:0;opacity:1}.form-button-group[data-v-8444d95a]{align-items:center;background:#fff;bottom:0;display:flex;justify-content:center;left:0;min-height:84px;padding-bottom:env(safe-area-inset-bottom);padding-left:16px;padding-right:16px;position:fixed;right:0;width:100%}.form-button-group .btn[data-v-8444d95a]{background:#f08b23;border:0;border-radius:50px;color:#fff;font-family:Open Sans;font-size:24px;font-weight:900;outline:none;text-transform:uppercase}form-button-group .btn[data-v-8444d95a]:focus{box-shadow:none!important;outline:none!important}.btn.btn-primary[data-v-8444d95a]{background:linear-gradient(0deg,#ffbf00,#f08b23);background-color:transparent;background-color:#f08b23!important;border-color:#f08b23!important;box-shadow:0 2px 2px 0 rgba(156,39,176,.14),0 3px 1px -2px rgba(156,39,176,.2),0 1px 5px 0 rgba(156,39,176,.12)!important;color:#fff!important}","",{version:3,sources:["webpack://./resources/js/desktop/mobile/pages/Manager/ClientTours/Edit.vue"],names:[],mappings:"AA6zBA,6BAGA,WAAA,CAFA,eAIA,CACA,0BACA,cACA,CACA,2BAEA,eAAA,CADA,oCAEA,CAEA,yCASA,QAAA,CAHA,MAAA,CAIA,mCAAA,CARA,cAAA,CAGA,cAAA,CAGA,OAAA,CADA,KAAA,CANA,oCAAA,CAGA,4BAOA,CAEA,wDAEA,QAAA,CADA,eAAA,CAQA,QAAA,CAFA,MAAA,CAJA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CAEA,OAAA,CAEA,KACA,CAEA,sEAQA,kBAAA,CASA,eAAA,CAhBA,QAAA,CAMA,+BAAA,CAFA,eAAA,CACA,YAAA,CAGA,6BAAA,CAGA,MAAA,CAFA,QAAA,CAPA,eAAA,CACA,iBAAA,CAOA,cAAA,CAEA,OAAA,CACA,KAAA,CACA,UAAA,CACA,WAEA,CAEA,mFAEA,aAAA,CAEA,qBAAA,CADA,cAAA,CAEA,eAAA,CAJA,QAKA,CACA,wEACA,aACA,CAEA,oEAEA,aAAA,CADA,iBAEA,CAEA,8CACA,gCACA,CACA,6BACA,UACA,CAEA,oCAIA,aAAA,CACA,aAAA,CAGA,qBAAA,CAPA,cAAA,CAEA,eAAA,CAGA,iBAAA,CAJA,QAAA,CAKA,eAEA,CAEA,sCACA,WACA,CAEA,yCAEA,aAAA,CADA,cAEA,CAEA,0CAEA,kBAAA,CAQA,QAAA,CANA,aAAA,CAHA,YAAA,CAKA,cAAA,CADA,WAAA,CAFA,sBAAA,CASA,UAAA,CALA,iBAAA,CACA,SAAA,CACA,KAAA,CAEA,UAEA,CAEA,iGACA,UACA,CAEA,4CACA,iBACA,CAEA,mEACA,YACA,CAEA,0DACA,uBACA,CAEA,mCAEA,QAAA,CADA,aAEA,CAEA,mGAEA,sBAAA,CAEA,WAAA,CAAA,+BAAA,CAEA,eAAA,CAEA,aAAA,CACA,cAAA,CAFA,WAAA,CAFA,kBAKA,CAEA,+GAEA,2BAAA,CACA,mCACA,CAEA,yDACA,WAAA,CACA,sBACA,CAEA,mDACA,eAAA,CACA,SAAA,CAGA,iBAAA,CAFA,QAAA,CACA,kBAEA,CAEA,2DACA,eACA,CAEA,4EACA,YAAA,CACA,SACA,CAEA,oCAWA,kBAAA,CAHA,eAAA,CANA,QAAA,CAQA,YAAA,CAEA,sBAAA,CATA,MAAA,CAMA,eAAA,CAIA,0CAAA,CAPA,iBAAA,CACA,kBAAA,CANA,cAAA,CAGA,OAAA,CACA,UASA,CACA,yCACA,kBAAA,CAMA,QAAA,CACA,kBAAA,CANA,UAAA,CAGA,qBAAA,CADA,cAAA,CAEA,eAAA,CAGA,YAAA,CANA,wBAOA,CACA,8CAEA,yBAAA,CADA,sBAEA,CACA,kCAEA,gDAAA,CACA,4BAAA,CACA,kCAAA,CACA,8BAAA,CACA,yHAAA,CALA,oBAMA",sourcesContent:['<template>\n    <div class="modal fade modalbox show"\n         id="editUserTourModalBox"  data-bs-backdrop="static"\n         tabindex="-1" role="dialog"\n         aria-modal="true"\n    >\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h5 class="modal-title">Редактировать тур клиента</h5>\n                    <a href="javascript:;"  data-bs-dismiss="modal" style="text-decoration: none">Закрыть</a>\n                </div>\n                <div class="modal-body">\n                    <div class="start-form" style="margin-bottom: 110px">\n                        <div class="section mx-auto">\n                            <div class="row my-3">\n                                <ValidationObserver v-slot="{ invalid }">\n                                    <div class="col-md-6 col-12">\n                                        <label class="control-label">Куда</label>\n                                        <multiselect\n                                            v-model="edit_tour.TourInfo.country"\n                                            :options="countries"\n                                            :option-height="25"\n                                            placeholder="Выберите страну"\n                                            :show-labels="false"\n                                            :maxHeight="200"\n                                            label="Name"\n                                            track-by="Name"\n                                            :loading="isCountriesLoading"\n                                            :disabled="isCountriesLoading"\n                                            :allow-empty="false"\n                                            @input="chooseEditResortCountry"\n                                        >\n                                            <template slot="singleLabel" slot-scope="props">\n                                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                                            </template>\n                                            <template slot="option" slot-scope="props">\n                                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                                            </template>\n                                        </multiselect>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <label class="control-label">Курорт</label>\n                                        <multiselect\n                                            :value="edit_tour.TourInfo.resort"\n                                            :options="cities"\n                                            placeholder="Введите название курорта"\n                                            :show-labels="false"\n                                            :maxHeight="200"\n                                            label="Name"\n                                            track-by="Name"\n                                            :close-on-select="true" :clear-on-select="true"\n                                            :loading="isCountriesLoading || isCitiesLoading"\n                                            :disabled="isCountriesLoading || isCitiesLoading"\n                                            @input="chooseEditResort"\n                                            :allow-empty="false"\n                                            :preselectFirst="true"\n                                        >\n                                            <template slot="selection" slot-scope="{ values, search, isOpen }"><span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeResorts }} {{values.length | pluralizeChoose}}</span></template>\n                                        </multiselect>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <label class="control-label">Отель</label>\n                                        <multiselect\n                                            :value="edit_tour.TourInfo.hotel"\n                                            :options="hotels"\n                                            placeholder="Введите название отеля"\n                                            :show-labels="false"\n                                            :limit="2"\n                                            :maxHeight="200"\n                                            label="Name"\n                                            track-by="Name"\n                                            :allow-empty="false"\n                                            :close-on-select="true" :clear-on-select="true"\n                                            :loading="isCountriesLoading || isHotelsLoading"\n                                            :disabled="isCountriesLoading || isHotelsLoading"\n                                            @input="chooseEditHotel"\n                                        >\n                                            <template slot="selection" slot-scope="{ values, search, isOpen }">\n                                    <span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeHotels}} {{values.length | pluralizeChoose}}\n                                    </span>\n                                            </template>\n                                            <template slot="singleLabel" slot-scope="props">\n                                    <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                        <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                        <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                    </span>\n                                            </template>\n                                            <template slot="option" slot-scope="props">\n                                                <div class="option__desc">\n                                                    <span class="option__title">{{ props.option.Name }}</span>\n                                                    <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                                    <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                                </div>\n                                            </template>\n                                        </multiselect>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <label class="control-label">Категория номера</label>\n                                        <ValidationProvider name="room_type" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                            <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                                                <input type="text" class=" multiselect__input price" v-model="edit_tour.TourInfo.room_type" placeholder="Категория номера">\n                                            </div>\n                                            <span class="validate-error">{{ errors[0] }}</span>\n                                        </ValidationProvider>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <label class="control-label">Питание</label>\n                                        <ValidationProvider name="meal" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                            <multiselect\n                                                v-model="edit_tour.TourInfo.meal"\n                                                :options="meals"\n                                                :option-height="25"\n                                                placeholder="Выберите питание"\n                                                :show-labels="false"\n                                                :maxHeight="200"\n                                                label="Name"\n                                                track-by="Name"\n                                                :close-on-select="true" :clear-on-select="true"\n                                                @input="chooseEditMeal"\n                                                :allow-empty="false"\n                                            >\n                                                <template slot="singleLabel" slot-scope="props">\n                                <span class="option__desc">\n                                    <span class="option__title">{{props.option.Name}}</span>\n                                </span>\n                                                </template>\n                                                <template slot="option" slot-scope="props">\n                                                    <div>\n                                                        <div class="option__desc">\n                                                            <span class="option__title">{{props.option.Name}}</span>\n                                                        </div>\n                                                        <div class="row align-items-center m-auto" style="width: 100%; height: 100%">\n                                                            <p class="" style="font-size: 12px; margin:0px;">{{props.option.desc}}</p>\n                                                        </div>\n                                                    </div>\n                                                </template>\n                                            </multiselect>\n                                            <span class="validate-error">{{ errors[0] }}</span>\n                                        </ValidationProvider>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <div class="row align-items-center justify-content-center mx-auto" style="width: 100%;">\n                                            <label class="control-label">Даты тура</label>\n                                            <ValidationProvider name="date_range" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                                <div class="row align-items-center justify-content-center m-auto w-100" style="width: 100%;">\n                                                    <VueHotelDatepicker\n                                                        ref="datepickerId"\n                                                        :startDate="edit_tour.TourInfo.start"\n                                                        :endDate="edit_tour.TourInfo.end"\n                                                        :placeholder="\'Даты тура\'"\n                                                        :format="\'DD/MM/YYYY\'"\n                                                        :weekList="[\'Вс.\', \'Пн.\', \'Вт.\', \'Ср.\', \'Чт.\', \'Пт.\', \'Сб.\']"\n                                                        :monthList="[\'Янв.\', \'Фев.\', \'Мар.\', \'Апр.\', \'Май.\', \'Июн.\', \'Июл.\', \'Авг.\', \'Сен.\', \'Окт\', \'Ноя.\', \'Дек.\']"\n                                                        :fromText="\'С\'"\n                                                        :toText="\'По\'"\n                                                        :resetText="\'Очистить\'"\n                                                        :confirmText="\'Подтвердить\'"\n                                                        :mobile="\'mobile\'"\n                                                        class="w-100"\n                                                        @update="changeEditDateRange"\n                                                    />\n                                                </div>\n                                                <span class="validate-error">{{ errors[0] }}</span>\n                                            </ValidationProvider>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <div class="row align-items-center justify-content-center m-auto" style="width: 100%;height: 100%;">\n                                            <label class="control-label">Цена</label>\n                                            <ValidationProvider name="price" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                                <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                                                    <input type="number" class="multiselect__input price" v-model="edit_tour.TourInfo.price" step="1" min="0" @input="changeEditPrice">\n                                                </div>\n                                                <span class="validate-error">{{ errors[0] }}</span>\n                                            </ValidationProvider>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-6 col-12">\n                                        <div class="row align-items-center justify-content-center m-auto" style="width: 100%;height: 100%;">\n                                            <label class="control-label">Выплачено</label>\n                                            <ValidationProvider name="paid" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                                                <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                                                    <input type="number" class=" multiselect__input price" v-model="edit_tour.TourInfo.paid" step="1" min="0" @input="changeEditPrice">\n                                                </div>\n                                                <span class="validate-error">{{ errors[0] }}</span>\n                                            </ValidationProvider>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="row align-items-center justify-content-center mx-auto mt-3" style="width: 100%;">\n                                            <label class="control-label">Дополнительные услуги</label>\n                                            <textarea rows="4" cols="80"\n                                                      class="form-control"\n                                                      placeholder="Дополнительные услуги"\n                                                      v-model="edit_tour.TourInfo.services"\n                                                      style="padding: 5px 15px; border: 1px solid #f08b23;border-radius: 20px"\n                                            >\n                        </textarea>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Авиабилеты</label>\n                                        <avia-tickets-list :avia_tickets="edit_tour.TourInfo.avia_tickets"></avia-tickets-list>\n\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Пассажиры</label>\n                                        <passengers-list :passengers="edit_tour.TourInfo.passengers"></passengers-list>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Файлы для клиента</label>\n                                        <div class="row w-100 mx-auto mt-2">\n                                            <div class="col-md-12">\n                                                <div class="large-12 medium-12 small-12 filezone">\n                                                    <input type="file" id="files" ref="edit_tour_files" multiple v-on:change="handleEditFiles()"/>\n                                                    <p>\n                                                        Перетащите файл(ы) сюда<br>или нажмите для поиска\n                                                    </p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <label class="control-label">Или запишите голосовое сообщение</label>\n                                        <div class="d-flex justify-content-center mt-2">\n                                            <vue-record-audio :mode="\'press\'" @stream="onStream" @result="onEditResult"/>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="file-listing">\n                                            <div\n                                                class="list-group-item"\n                                                v-for="(file, index) in edit_tour.TourInfo.files"\n                                                :key="file.name"\n                                            >\n                                                <div class="row m-auto w-100 align-items-center justify-content-center" v-if="file.type==\'file\'">\n                                                    <div class="col-4 text-center">\n                                                        <img class="preview" v-if="/\\.(jpe?g|png|svg)$/i.test(file.name)" :src="file.path"/>\n                                                        <img class="preview" v-else src="/images/LOGO-1.png"/>\n                                                    </div>\n                                                    <div class="col-8">\n                                                        <div>\n                                                            <p class="control-label">{{file.name}}</p>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class="row m-auto w-100 align-items-center justify-content-center" v-if="file.type==\'audio\'">\n                                                    <div class="audio-container w-100">\n                                                        <audio-player :audio="file" class="w-100"></audio-player>\n                                                    </div>\n                                                </div>\n\n                                                <div class="remove-container">\n                                                    <a class="remove" v-on:click="deleteFile(file, index)" v-if="loading == false">Удалить</a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-md-12">\n                                        <div class="file-listing">\n                                            <div class="list-group-item" v-for="(file, index) in new_files">\n                                                <div class="row m-auto w-100 align-items-center justify-content-center" v-if="file.type==\'file\'">\n                                                    <div class="col-4 text-center">\n                                                        <img class="preview" v-bind:ref="\'preview\'+parseInt(index)"/>\n                                                    </div>\n                                                    <div class="col-8">\n                                                        <div>\n                                                            <p class="control-label">{{file.data.name}}</p>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class="row m-auto w-100 align-items-center justify-content-center" v-if="file.type==\'audio\'">\n                                                    <div class="audio-container w-100">\n                                                        <audio-player :audio="file" class="w-100"></audio-player>\n                                                    </div>\n                                                </div>\n                                                <div class="remove-container">\n                                                    <a class="remove" v-on:click="removeFile(new_files, index)" v-if="loading == false">Отменить</a>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="col-12 contact-btn form-button-group">\n                                        <button type="submit" class="btn btn-block btn-lg" style="width: 100%" @click="updateClientTour" :disabled="invalid||loading">\n                                            <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                                                <span v-if="loading" role="status" aria-hidden="true" class="spinner-border spinner-border-sm mx-2"></span>\n                                                <span v-if="loading" class="sr-only">Loading...</span>\n                                                Сохранить\n                                            </div>\n                                        </button>\n                                    </div>\n                                </ValidationObserver>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mask} from \'vue-the-mask\'\n    import moment from \'moment\'\n\n    export default {\n        name: "Edit",\n        props:[\'edit_tour\'],\n        data() {\n            return {\n                meals: [\n                    { Id:\'115\', Name:\'AI\', desc:\'завтраки, обеды, ужины, напитки\'},\n                    { Id:\'114\',Name:\'BB\', desc:\'завтраки\'},\n                    { Id:\'112\',Name:\'FB\', desc:\'завтраки, обеды, ужины\'},\n                    { Id:\'121\',Name:\'FB+\', desc:\'завтраки, обеды, ужины - расширенное меню\'},\n                    { Id:\'113\',Name:\'HB\', desc:\'завтраки, ужины\'},\n                    { Id:\'122\',Name:\'HB+\', desc:\'завтраки, ужины - расширенное меню\'},\n                    { Id:\'117\',Name:\'RO\', desc:\'без питания\'},\n                    { Id:\'116\',Name:\'UAI\', desc:\'завтраки, обеды, ужины, напитки - расширенное меню\'},\n                    { Id:\'129\',Name:\'SC\', desc:\'самообслуживание\'},\n                ],\n                loading: false,\n                start: undefined,\n                end: undefined,\n                new_files:[],\n                flag:false,\n                seconds:0,\n                interval:\'\',\n            }\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        methods: {\n            chooseEditResortCountry(value){\n                this.edit_tour.TourInfo.resort={Name:\'Любой\'};\n                this.edit_tour.TourInfo.hotel={Name:\'Любой\'};\n                this.edit_tour.TourInfo.country = value;\n                this.$store.dispatch(\'getCities\', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n            },\n            chooseEditResort(value) {\n                this.edit_tour.TourInfo.resort = value;\n                if(this.edit_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n            },\n            chooseEditHotel(value) {\n                this.edit_tour.TourInfo.hotel = value;\n            },\n            changeEditDateRange(date_object) {\n                this.edit_tour.TourInfo.date_range=date_object;\n            },\n            chooseEditMeal(value){\n                this.edit_tour.TourInfo.meal = value;\n            },\n            changeEditPrice(){\n                this.edit_tour.TourInfo.left = this.edit_tour.TourInfo.price - this.edit_tour.TourInfo.paid;\n            },\n            handleEditFiles() {\n                let uploadedFiles = this.$refs.edit_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_files.push({type:\'file\', name:uploadedFiles[i].name, data:uploadedFiles[i], date: date });\n                        this.getImagePreviews(this.new_files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onEditResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_files.push({\n                    type: \'audio\',\n                    name: \'record-\'+time+\'.mp3\',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                    seconds: this.seconds\n                })\n                this.countSeconds();\n                // this.getImagePreviews(this.new_files);\n            },\n            deleteFile(file, key) {\n                this.edit_tour.TourInfo.delete_files.push(file);\n                this.edit_tour.TourInfo.files.splice( key, 1 );\n            },\n            updateClientTour(){\n                this.loading = true;\n                this.edit_tour.StartAt = moment(this.edit_tour.TourInfo.date_range.start, "DD-MM-YYYY");\n                this.edit_tour.EndAt = moment(this.edit_tour.TourInfo.date_range.end, "DD-MM-YYYY");\n                console.log(this.edit_tour.EndAt)\n                this.edit_tour.new_files = this.new_files;\n                let formData = new FormData();\n                formData.append("UserTour", JSON.stringify(this.edit_tour));\n\n                for (var i = 0; i < this.new_files.length; i++) {\n                    let file = this.new_files[i].data;\n\n                    formData.append(\'new_files[\' + i + \']\', file);\n                }\n\n                this.$store.dispatch(\'updateClientTour\', formData)\n                    .then(response => {\n                        console.log(\'response\', response)\n                        this.edit_tour.TourInfo.delete_files=[];\n                        this.edit_tour.TourInfo.new_files=[];\n                        this.edit_tour.TourInfo.files = response.TourInfo.files;\n                        this.edit_tour.expand = response.expand;\n                        this.sendMessage(\'Тур клиента успешно обновлён\');\n                        this.edit_tour={\n                            UserId:\'\',\n                            TourId:\'\',\n                            TourInfo: {\n                                country:\'\',\n                                resort:\'\',\n                                hotel:\'\',\n                                meal:\'\',\n                                tour_operator:\'\',\n                                date_range:{start:\'\', end:\'\'},\n                                price:\'\',\n                                paid:\'\',\n                                left:\'\',\n                                services:\'\',\n                                avia_tickets:[],\n                                passengers:[],\n                                files:[],\n                            },\n                            new_files:[],\n                            StartAt:\'\',\n                            EndAt:\'\',\n                            Comment:\'\'\n                        };\n                        this.loading = false;\n                        this.$store.dispatch(\'closeModal\', \'#editUserTourModalBox\');\n                    });\n            },\n\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener("load", function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = \'/images/LOGO-1.png\';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                this.countSeconds();\n                console.log(\'Got a stream object:\', stream);\n            },\n            countSeconds() {\n                this.flag = !this.flag;\n                if (this.flag == true) {\n                    this.seconds=0;\n                    this.interval = setInterval(this.incrementSeconds, 1000);\n                }\n                else {\n                    clearInterval(this.interval)\n                    this.voice_record.seconds = this.seconds\n                }\n            },\n            incrementSeconds() {\n                this.seconds += 1;\n            },\n\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Сообщение от TravelClub\',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return \'курорт\'\n                }\n                if (n>1 && n<5) {\n                    return \'курорта\'\n                }\n                if (n>4 && n<20) {\n                    return \'курортов\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'курорт\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'курорта\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'курортов\'\n                    }\n                    return \'курортов\'\n                }\n                return \'курортов\'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return \'отель\'\n                }\n                if (n>1 && n<5) {\n                    return \'отеля\'\n                }\n                if (n>4 && n<20) {\n                    return \'отелей\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'отель\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'отеля\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'отелей\'\n                    }\n                    return \'отелей\'\n                }\n                return \'отелей\'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return \'выбран\'\n                }\n                return \'выбрано\'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\n<style scoped>\n    .start-form {\n        max-width: 500px;\n        margin: auto;\n        margin-top: auto;\n        /*text-align: center;*/\n    }\n    .section {\n        padding: 0 16px;\n    }\n    .modalbox {\n        padding-top: env(safe-area-inset-top);\n        overflow: hidden;\n    }\n\n    .modalbox .modal-dialog {\n        transform: translate(0, 100%) !important;\n        min-width: 100%;\n        margin: 0;\n        transition: 0.5s all !important;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        margin-top: env(safe-area-inset-top);\n    }\n\n    .modalbox .modal-dialog .modal-content {\n        border-radius: 0;\n        border: 0;\n        margin: auto;\n        overflow: hidden;\n        padding-top: 56px;\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header {\n        border: 0;\n        padding: 0;\n        min-height: 56px;\n        padding: 10px 16px;\n        border-radius: 0;\n        display: flex;\n        border-bottom: 1px solid #E1E1E1;\n        align-items: center;\n        justify-content: space-between;\n        margin: 0;\n        position: fixed;\n        left: 0;\n        right: 0;\n        top: 0;\n        width: 100%;\n        z-index: 100;\n        background: #FFF;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header .modal-title {\n        margin: 0;\n        color: #063065;\n        font-size: 17px;\n        font-family: "Open Sans";\n        font-weight: 900;\n    }\n    .modalbox .modal-dialog .modal-content .modal-header a{\n        color: #063065;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-body {\n        padding: 20px 16px;\n        overflow: auto;\n    }\n\n    .modalbox.show .modal-dialog {\n        transform: translate(0, 0) !important;\n    }\n    .form-group {\n        width: 100%;\n    }\n\n    .form-group .label {\n        font-size: 12px;\n        margin: 0;\n        font-weight: 900;\n        color: #063065;\n        display: block;\n        line-height: 1.2em;\n        text-align: left;\n        font-family: Open Sans;\n    }\n\n    .form-group textarea {\n        resize: none;\n    }\n\n    .form-group .input-info {\n        font-size: 11px;\n        color: #A1A1A2;\n    }\n\n    .form-group .clear-input {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #4F5050;\n        height: 38px;\n        font-size: 22px;\n        position: absolute;\n        right: 6px;\n        top: 0px;\n        bottom: 0;\n        width: 32px;\n        opacity: 0.5;\n    }\n\n    .form-group .clear-input:hover, .form-group .clear-input:active {\n        opacity: 0.8;\n    }\n\n    .form-group .input-wrapper {\n        position: relative;\n    }\n\n    .form-group .input-wrapper.not-empty .clear-input {\n        display: flex;\n    }\n\n    .form-group .input-wrapper.active .label {\n        color: #f08b23 !important;\n    }\n\n    .form-group.basic {\n        padding: 8px 0;\n        margin: 0;\n    }\n\n    .form-group.basic .form-control,\n    .form-group.basic .custom-select {\n        background: transparent;\n        border: none;\n        border-bottom: 1px solid #E1E1E1;\n        padding: 0 30px 0 0;\n        border-radius: 0;\n        height: 40px;\n        color: #141515;\n        font-size: 15px;\n    }\n\n    .form-group.basic .form-control:focus,\n    .form-group.basic .custom-select:focus {\n        border-bottom-color: #f08b23;\n        box-shadow: inset 0 -1px 0 0 #f08b23;\n    }\n\n    .form-group.basic textarea.form-control {\n        height: auto;\n        padding: 7px 40px 7px 0;\n    }\n\n    .form-group.basic.animated .label {\n        margin-top: 20px;\n        opacity: 0;\n        top: -3px;\n        transition: 0.2s all;\n        position: absolute;\n    }\n\n    .form-group.basic.animated .input-wrapper {\n        padding-top: 5px;\n    }\n\n    .form-group.basic.animated .input-wrapper.not-empty .label {\n        margin-top: 0;\n        opacity: 1;\n    }\n\n    .form-button-group {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        padding-left: 16px;\n        padding-right: 16px;\n        background: #FFF;\n        min-height: 84px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding-bottom: env(safe-area-inset-bottom);\n    }\n    .form-button-group .btn {\n        background: #f08b23;\n        color: white;\n        text-transform: uppercase;\n        font-size: 24px;\n        font-family: "Open Sans";\n        font-weight: 900;\n        border: 0;\n        border-radius: 50px;\n        outline: none;\n    }\n    form-button-group .btn:focus {\n        outline: none !important;\n        box-shadow: none !important;\n    }\n    .btn.btn-primary {\n        color: #fff !important;\n        background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%);\n        background-color: rgba(0, 0, 0, 0);\n        background-color: #f08b23 !important;\n        border-color: #f08b23 !important;\n        box-shadow: 0 2px 2px 0 rgba(156, 39, 176, 0.14), 0 3px 1px -2px rgba(156, 39, 176, 0.2), 0 1px 5px 0 rgba(156, 39, 176, 0.12) !important;\n    }\n</style>\n'],sourceRoot:""}]);const s=a},6814:(n,t,e)=>{e.r(t),e.d(t,{default:()=>E});var o=e(29928),i=e(95093),r=e.n(i);const a={name:"Edit",props:["edit_tour"],data:function(){return{meals:[{Id:"115",Name:"AI",desc:"завтраки, обеды, ужины, напитки"},{Id:"114",Name:"BB",desc:"завтраки"},{Id:"112",Name:"FB",desc:"завтраки, обеды, ужины"},{Id:"121",Name:"FB+",desc:"завтраки, обеды, ужины - расширенное меню"},{Id:"113",Name:"HB",desc:"завтраки, ужины"},{Id:"122",Name:"HB+",desc:"завтраки, ужины - расширенное меню"},{Id:"117",Name:"RO",desc:"без питания"},{Id:"116",Name:"UAI",desc:"завтраки, обеды, ужины, напитки - расширенное меню"},{Id:"129",Name:"SC",desc:"самообслуживание"}],loading:!1,start:void 0,end:void 0,new_files:[],flag:!1,seconds:0,interval:""}},computed:{menu:function(){return this.$store.getters.menu},tourModule:function(){return this.$store.getters.tourModule},countries:function(){return this.$store.getters.countries},cities:function(){return this.$store.getters.cities},hotels:function(){return this.$store.getters.hotels},branches:function(){return this.$store.getters.branches},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading},isHotelsLoading:function(){return this.$store.getters.isHotelsLoading}},methods:{chooseEditResortCountry:function(n){this.edit_tour.TourInfo.resort={Name:"Любой"},this.edit_tour.TourInfo.hotel={Name:"Любой"},this.edit_tour.TourInfo.country=n,this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditResort:function(n){var t=this;if(this.edit_tour.TourInfo.resort=n,"Любой"!=this.edit_tour.TourInfo.resort.Name){var e=this.edit_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:e,star_id:"0"}).then((function(){-1==t.hotels.findIndex((function(n){return n.Id==t.edit_tour.TourInfo.hotel.Id}))&&(t.edit_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditHotel:function(n){this.edit_tour.TourInfo.hotel=n},changeEditDateRange:function(n){this.edit_tour.TourInfo.date_range=n},chooseEditMeal:function(n){this.edit_tour.TourInfo.meal=n},changeEditPrice:function(){this.edit_tour.TourInfo.left=this.edit_tour.TourInfo.price-this.edit_tour.TourInfo.paid},handleEditFiles:function(){for(var n=this.$refs.edit_tour_files.files,t=0;t<n.length&&/\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(n[t].name);t++){var e=new Date;this.new_files.push({type:"file",name:n[t].name,data:n[t],date:e}),this.getImagePreviews(this.new_files)}},onEditResult:function(n){var t=Date.now(),e=new Date;this.new_files.push({type:"audio",name:"record-"+t+".mp3",src:window.URL.createObjectURL(n),data:n,date:e,seconds:this.seconds}),this.countSeconds()},deleteFile:function(n,t){this.edit_tour.TourInfo.delete_files.push(n),this.edit_tour.TourInfo.files.splice(t,1)},updateClientTour:function(){var n=this;this.loading=!0,this.edit_tour.StartAt=r()(this.edit_tour.TourInfo.date_range.start,"DD-MM-YYYY"),this.edit_tour.EndAt=r()(this.edit_tour.TourInfo.date_range.end,"DD-MM-YYYY"),console.log(this.edit_tour.EndAt),this.edit_tour.new_files=this.new_files;var t=new FormData;t.append("UserTour",JSON.stringify(this.edit_tour));for(var e=0;e<this.new_files.length;e++){var o=this.new_files[e].data;t.append("new_files["+e+"]",o)}this.$store.dispatch("updateClientTour",t).then((function(t){console.log("response",t),n.edit_tour.TourInfo.delete_files=[],n.edit_tour.TourInfo.new_files=[],n.edit_tour.TourInfo.files=t.TourInfo.files,n.edit_tour.expand=t.expand,n.sendMessage("Тур клиента успешно обновлён"),n.edit_tour={UserId:"",TourId:"",TourInfo:{country:"",resort:"",hotel:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:"",paid:"",left:"",services:"",avia_tickets:[],passengers:[],files:[]},new_files:[],StartAt:"",EndAt:"",Comment:""},n.loading=!1,n.$store.dispatch("closeModal","#editUserTourModalBox")}))},getImagePreviews:function(n){for(var t=this,e=function(e){if(/\.(jpe?g|png|svg)$/i.test(n[e].name)){var o=new FileReader;o.addEventListener("load",function(){this.$refs["preview"+parseInt(e)][0].src=o.result}.bind(t),!1),o.readAsDataURL(n[e].data)}else t.$nextTick((function(){this.$refs["preview"+parseInt(e)][0].src="/images/LOGO-1.png"}))},o=0;o<n.length;o++)e(o)},removeFile:function(n,t){n.splice(t,1),this.getImagePreviews(n)},onStream:function(n){this.countSeconds(),console.log("Got a stream object:",n)},countSeconds:function(){this.flag=!this.flag,1==this.flag?(this.seconds=0,this.interval=setInterval(this.incrementSeconds,1e3)):(clearInterval(this.interval),this.voice_record.seconds=this.seconds)},incrementSeconds:function(){this.seconds+=1},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:n})}},filters:{pluralizeResorts:function(n){if(1===n)return"курорт";if(n>1&&n<5)return"курорта";if(n>4&&n<20)return"курортов";if(n>19){var t=n%10;return 1===t?"курорт":t>1&&t<5?"курорта":"курортов"}return"курортов"},pluralizeHotels:function(n){if(1===n)return"отель";if(n>1&&n<5)return"отеля";if(n>4&&n<20)return"отелей";if(n>19){var t=n%10;return 1===t?"отель":t>1&&t<5?"отеля":"отелей"}return"отелей"},pluralizeChoose:function(n){return 1===n?"выбран":"выбрано"}},directives:{mask:o.mask}};var s=e(85072),l=e.n(s),d=e(43662),c={insert:"head",singleton:!1};l()(d.A,c);d.A.locals;var u=e(14486);const p=(0,u.A)(a,(function(){var n=this,t=n._self._c;return t("div",{staticClass:"modal fade modalbox show",attrs:{id:"editUserTourModalBox","data-bs-backdrop":"static",tabindex:"-1",role:"dialog","aria-modal":"true"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[n._m(0),n._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"start-form",staticStyle:{"margin-bottom":"110px"}},[t("div",{staticClass:"section mx-auto"},[t("div",{staticClass:"row my-3"},[t("ValidationObserver",{scopedSlots:n._u([{key:"default",fn:function(e){var o=e.invalid;return[t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"control-label"},[n._v("Куда")]),n._v(" "),t("multiselect",{attrs:{options:n.countries,"option-height":25,placeholder:"Выберите страну","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name",loading:n.isCountriesLoading,disabled:n.isCountriesLoading,"allow-empty":!1},on:{input:n.chooseEditResortCountry},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}},{key:"option",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}}],null,!0),model:{value:n.edit_tour.TourInfo.country,callback:function(t){n.$set(n.edit_tour.TourInfo,"country",t)},expression:"edit_tour.TourInfo.country"}})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"control-label"},[n._v("Курорт")]),n._v(" "),t("multiselect",{attrs:{value:n.edit_tour.TourInfo.resort,options:n.cities,placeholder:"Введите название курорта","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,loading:n.isCountriesLoading||n.isCitiesLoading,disabled:n.isCountriesLoading||n.isCitiesLoading,"allow-empty":!1,preselectFirst:!0},on:{input:n.chooseEditResort},scopedSlots:n._u([{key:"selection",fn:function(e){var o=e.values,i=(e.search,e.isOpen);return[o.length>3&&!i?t("span",{staticClass:"multiselect__single"},[n._v(n._s(o.length)+" "+n._s(n._f("pluralizeResorts")(o.length))+" "+n._s(n._f("pluralizeChoose")(o.length)))]):n._e()]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"control-label"},[n._v("Отель")]),n._v(" "),t("multiselect",{attrs:{value:n.edit_tour.TourInfo.hotel,options:n.hotels,placeholder:"Введите название отеля","show-labels":!1,limit:2,maxHeight:200,label:"Name","track-by":"Name","allow-empty":!1,"close-on-select":!0,"clear-on-select":!0,loading:n.isCountriesLoading||n.isHotelsLoading,disabled:n.isCountriesLoading||n.isHotelsLoading},on:{input:n.chooseEditHotel},scopedSlots:n._u([{key:"selection",fn:function(e){var o=e.values,i=(e.search,e.isOpen);return[o.length>3&&!i?t("span",{staticClass:"multiselect__single"},[n._v(n._s(o.length)+" "+n._s(n._f("pluralizeHotels")(o.length))+" "+n._s(n._f("pluralizeChoose")(o.length))+"\n                                ")]):n._e()]}},{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))]),n._v(" "),0!=e.option.CommonRate?t("span",{staticClass:"option__title",staticStyle:{float:"right"}},[n._v(n._s(e.option.CommonRate))]):n._e(),n._v(" "),e.option.StarName?t("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[n._v(n._s(e.option.StarName))]):n._e()])]}},{key:"option",fn:function(e){return[t("div",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))]),n._v(" "),0!=e.option.CommonRate?t("span",{staticClass:"option__title",staticStyle:{float:"right"}},[n._v(n._s(e.option.CommonRate))]):n._e(),n._v(" "),e.option.StarName?t("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[n._v(n._s(e.option.StarName))]):n._e()])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"control-label"},[n._v("Категория номера")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"room_type",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.edit_tour.TourInfo.room_type,expression:"edit_tour.TourInfo.room_type"}],staticClass:"multiselect__input price",attrs:{type:"text",placeholder:"Категория номера"},domProps:{value:n.edit_tour.TourInfo.room_type},on:{input:function(t){t.target.composing||n.$set(n.edit_tour.TourInfo,"room_type",t.target.value)}}})]),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"control-label"},[n._v("Питание")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"meal",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("multiselect",{attrs:{options:n.meals,"option-height":25,placeholder:"Выберите питание","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,"allow-empty":!1},on:{input:n.chooseEditMeal},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}},{key:"option",fn:function(e){return[t("div",[t("div",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])]),n._v(" "),t("div",{staticClass:"row align-items-center m-auto",staticStyle:{width:"100%",height:"100%"}},[t("p",{staticStyle:{"font-size":"12px",margin:"0px"}},[n._v(n._s(e.option.desc))])])])]}}],null,!0),model:{value:n.edit_tour.TourInfo.meal,callback:function(t){n.$set(n.edit_tour.TourInfo,"meal",t)},expression:"edit_tour.TourInfo.meal"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center justify-content-center mx-auto",staticStyle:{width:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Даты тура")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"date_range",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100",staticStyle:{width:"100%"}},[t("VueHotelDatepicker",{ref:"datepickerId",staticClass:"w-100",attrs:{startDate:n.edit_tour.TourInfo.start,endDate:n.edit_tour.TourInfo.end,placeholder:"Даты тура",format:"DD/MM/YYYY",weekList:["Вс.","Пн.","Вт.","Ср.","Чт.","Пт.","Сб."],monthList:["Янв.","Фев.","Мар.","Апр.","Май.","Июн.","Июл.","Авг.","Сен.","Окт","Ноя.","Дек."],fromText:"С",toText:"По",resetText:"Очистить",confirmText:"Подтвердить",mobile:"mobile"},on:{update:n.changeEditDateRange}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center justify-content-center m-auto",staticStyle:{width:"100%",height:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Цена")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"price",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.edit_tour.TourInfo.price,expression:"edit_tour.TourInfo.price"}],staticClass:"multiselect__input price",attrs:{type:"number",step:"1",min:"0"},domProps:{value:n.edit_tour.TourInfo.price},on:{input:[function(t){t.target.composing||n.$set(n.edit_tour.TourInfo,"price",t.target.value)},n.changeEditPrice]}})]),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center justify-content-center m-auto",staticStyle:{width:"100%",height:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Выплачено")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"paid",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.edit_tour.TourInfo.paid,expression:"edit_tour.TourInfo.paid"}],staticClass:"multiselect__input price",attrs:{type:"number",step:"1",min:"0"},domProps:{value:n.edit_tour.TourInfo.paid},on:{input:[function(t){t.target.composing||n.$set(n.edit_tour.TourInfo,"paid",t.target.value)},n.changeEditPrice]}})]),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row align-items-center justify-content-center mx-auto mt-3",staticStyle:{width:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Дополнительные услуги")]),n._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.edit_tour.TourInfo.services,expression:"edit_tour.TourInfo.services"}],staticClass:"form-control",staticStyle:{padding:"5px 15px",border:"1px solid #f08b23","border-radius":"20px"},attrs:{rows:"4",cols:"80",placeholder:"Дополнительные услуги"},domProps:{value:n.edit_tour.TourInfo.services},on:{input:function(t){t.target.composing||n.$set(n.edit_tour.TourInfo,"services",t.target.value)}}})])]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Авиабилеты")]),n._v(" "),t("avia-tickets-list",{attrs:{avia_tickets:n.edit_tour.TourInfo.avia_tickets}})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Пассажиры")]),n._v(" "),t("passengers-list",{attrs:{passengers:n.edit_tour.TourInfo.passengers}})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Файлы для клиента")]),n._v(" "),t("div",{staticClass:"row w-100 mx-auto mt-2"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"large-12 medium-12 small-12 filezone"},[t("input",{ref:"edit_tour_files",attrs:{type:"file",id:"files",multiple:""},on:{change:function(t){return n.handleEditFiles()}}}),n._v(" "),t("p",[n._v("\n                                                    Перетащите файл(ы) сюда"),t("br"),n._v("или нажмите для поиска\n                                                ")])])])])]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Или запишите голосовое сообщение")]),n._v(" "),t("div",{staticClass:"d-flex justify-content-center mt-2"},[t("vue-record-audio",{attrs:{mode:"press"},on:{stream:n.onStream,result:n.onEditResult}})],1)]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"file-listing"},n._l(n.edit_tour.TourInfo.files,(function(e,o){return t("div",{key:e.name,staticClass:"list-group-item"},["file"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"col-4 text-center"},[/\.(jpe?g|png|svg)$/i.test(e.name)?t("img",{staticClass:"preview",attrs:{src:e.path}}):t("img",{staticClass:"preview",attrs:{src:"/images/LOGO-1.png"}})]),n._v(" "),t("div",{staticClass:"col-8"},[t("div",[t("p",{staticClass:"control-label"},[n._v(n._s(e.name))])])])]):n._e(),n._v(" "),"audio"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"audio-container w-100"},[t("audio-player",{staticClass:"w-100",attrs:{audio:e}})],1)]):n._e(),n._v(" "),t("div",{staticClass:"remove-container"},[0==n.loading?t("a",{staticClass:"remove",on:{click:function(t){return n.deleteFile(e,o)}}},[n._v("Удалить")]):n._e()])])})),0)]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"file-listing"},n._l(n.new_files,(function(e,o){return t("div",{staticClass:"list-group-item"},["file"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"col-4 text-center"},[t("img",{ref:"preview"+parseInt(o),refInFor:!0,staticClass:"preview"})]),n._v(" "),t("div",{staticClass:"col-8"},[t("div",[t("p",{staticClass:"control-label"},[n._v(n._s(e.data.name))])])])]):n._e(),n._v(" "),"audio"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"audio-container w-100"},[t("audio-player",{staticClass:"w-100",attrs:{audio:e}})],1)]):n._e(),n._v(" "),t("div",{staticClass:"remove-container"},[0==n.loading?t("a",{staticClass:"remove",on:{click:function(t){return n.removeFile(n.new_files,o)}}},[n._v("Отменить")]):n._e()])])})),0)]),n._v(" "),t("div",{staticClass:"col-12 contact-btn form-button-group"},[t("button",{staticClass:"btn btn-block btn-lg",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:o||n.loading},on:{click:n.updateClientTour}},[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[n.loading?t("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):n._e(),n._v(" "),n.loading?t("span",{staticClass:"sr-only"},[n._v("Loading...")]):n._e(),n._v("\n                                            Сохранить\n                                        ")])])])]}}])})],1)])])])])])])}),[function(){var n=this,t=n._self._c;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[n._v("Редактировать тур клиента")]),n._v(" "),t("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"javascript:;","data-bs-dismiss":"modal"}},[n._v("Закрыть")])])}],!1,null,"8444d95a",null).exports;const m={name:"Create",data:function(){return{city_options:["Донецк","Ростов-на-Дону"],new_tour:{UserId:"",TourId:"",TourInfo:{country:{Id:150,Name:"Россия",Alias:"Russia",Flags:8,HasTickets:!0,HotelIsNotInStop:!0,IsProVisa:!1,IsVisa:!1,OriginalName:"Russia",Rank:0,TicketsIncluded:!0},resort:{Name:"Любой"},hotel:{Name:"Любой"},room_type:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:"",paid:"",left:"",services:"",avia_tickets:[],passengers:[],files:[]},StartAt:"",EndAt:"",Comment:""},new_mode:!1,meals:[{Id:"115",Name:"AI",desc:"завтраки, обеды, ужины, напитки"},{Id:"114",Name:"BB",desc:"завтраки"},{Id:"112",Name:"FB",desc:"завтраки, обеды, ужины"},{Id:"121",Name:"FB+",desc:"завтраки, обеды, ужины - расширенное меню"},{Id:"113",Name:"HB",desc:"завтраки, ужины"},{Id:"122",Name:"HB+",desc:"завтраки, ужины - расширенное меню"},{Id:"117",Name:"RO",desc:"без питания"},{Id:"116",Name:"UAI",desc:"завтраки, обеды, ужины, напитки - расширенное меню"},{Id:"129",Name:"SC",desc:"самообслуживание"}],loading:!1,new_files:[],start:void 0,end:void 0,flag:!1,seconds:0,interval:""}},computed:{menu:function(){return this.$store.getters.menu},tourModule:function(){return this.$store.getters.tourModule},countries:function(){return this.$store.getters.countries},cities:function(){return this.$store.getters.cities},hotels:function(){return this.$store.getters.hotels},branches:function(){return this.$store.getters.branches},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading},isHotelsLoading:function(){return this.$store.getters.isHotelsLoading}},methods:{chooseNewResortCountry:function(n){this.new_tour.TourInfo.resort={Name:"Любой"},this.new_tour.TourInfo.hotel={Name:"Любой"},this.new_tour.TourInfo.country=n,this.$store.dispatch("getCities",this.new_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseNewResorts:function(n){var t=this;if(this.new_tour.TourInfo.resort=n,"Любой"!=this.new_tour.TourInfo.resort.Name){var e=this.new_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:e,star_id:"0"}).then((function(){-1==t.hotels.findIndex((function(n){return n.Id==t.new_tour.TourInfo.hotel.Id}))&&(t.new_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseNewHotel:function(n){this.new_tour.TourInfo.hotel=n},changeNewDateRange:function(n){this.new_tour.TourInfo.date_range=n},chooseNewMeal:function(n){this.new_tour.TourInfo.meal=n},changeNewPrice:function(){this.new_tour.TourInfo.left=this.new_tour.TourInfo.price-this.new_tour.TourInfo.paid},handleNewFiles:function(){for(var n=this.$refs.new_tour_files.files,t=0;t<n.length&&/\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(n[t].name);t++){var e=new Date;this.new_tour.TourInfo.files.push({type:"file",name:n[t].name,data:n[t],date:e}),this.getImagePreviews(this.new_tour.TourInfo.files)}},onResult:function(n){this.countSeconds();var t=Date.now(),e=new Date;this.new_tour.TourInfo.files.push({type:"audio",name:"record-"+t+".mp3",src:window.URL.createObjectURL(n),data:n,date:e,seconds:this.seconds})},saveClientTour:function(){var n=this;this.loading=!0,this.new_tour.UserId=this.$route.params.id,this.new_tour.StartAt=r()(this.new_tour.TourInfo.date_range.start,"DD-MM-YYYY"),this.new_tour.EndAt=r()(this.new_tour.TourInfo.date_range.end,"DD-MM-YYYY");var t=new FormData;t.append("UserTour",JSON.stringify(this.new_tour));for(var e=0;e<this.new_tour.TourInfo.files.length;e++){var o=this.new_tour.TourInfo.files[e].data;t.append("files["+e+"]",o)}this.$store.dispatch("newClientTour",t).then((function(t){n.sendMessage("Тур клиента успешно добавлен"),n.new_tour={UserId:"",TourId:"",TourInfo:{country:"",resort:"",hotel:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:"",paid:"",left:"",services:"",avia_tickets:[],passengers:[],files:[]},StartAt:"",EndAt:"",Comment:"",Archive:!1},n.loading=!1,n.$store.dispatch("closeModal","#newUserTourModalBox")}))},getImagePreviews:function(n){for(var t=this,e=function(e){if(/\.(jpe?g|png|svg)$/i.test(n[e].name)){var o=new FileReader;o.addEventListener("load",function(){this.$refs["preview"+parseInt(e)][0].src=o.result}.bind(t),!1),o.readAsDataURL(n[e].data)}else t.$nextTick((function(){this.$refs["preview"+parseInt(e)][0].src="/images/LOGO-1.png"}))},o=0;o<n.length;o++)e(o)},removeFile:function(n,t){n.splice(t,1),this.getImagePreviews(n)},onStream:function(n){console.log("Got a stream object:",n),this.countSeconds()},countSeconds:function(){this.flag=!this.flag,1==this.flag?(this.seconds=0,this.interval=setInterval(this.incrementSeconds,1e3)):clearInterval(this.interval)},incrementSeconds:function(){this.seconds+=1},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:n})}},filters:{pluralizeResorts:function(n){if(1===n)return"курорт";if(n>1&&n<5)return"курорта";if(n>4&&n<20)return"курортов";if(n>19){var t=n%10;return 1===t?"курорт":t>1&&t<5?"курорта":"курортов"}return"курортов"},pluralizeHotels:function(n){if(1===n)return"отель";if(n>1&&n<5)return"отеля";if(n>4&&n<20)return"отелей";if(n>19){var t=n%10;return 1===t?"отель":t>1&&t<5?"отеля":"отелей"}return"отелей"},pluralizeChoose:function(n){return 1===n?"выбран":"выбрано"}},directives:{mask:o.mask}};var f=e(84336),A={insert:"head",singleton:!1};l()(f.A,A);f.A.locals;const h={name:"Index",components:{Edit:p,Create:(0,u.A)(m,(function(){var n=this,t=n._self._c;return t("div",{staticClass:"modal fade modalbox show",attrs:{id:"newUserTourModalBox","data-bs-backdrop":"static",tabindex:"-1",role:"dialog","aria-modal":"true"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[n._m(0),n._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"start-form",staticStyle:{"margin-bottom":"110px"}},[t("div",{staticClass:"section mx-auto"},[t("div",{staticClass:"row my-3"},[t("ValidationObserver",{scopedSlots:n._u([{key:"default",fn:function(e){var o=e.invalid;return[t("div",{staticClass:"col-12 col-md-6"},[t("label",{staticClass:"control-label"},[n._v("Куда")]),n._v(" "),t("multiselect",{attrs:{options:n.countries,"option-height":25,placeholder:"Выберите страну","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name",loading:n.isCountriesLoading,disabled:n.isCountriesLoading,"allow-empty":!1},on:{input:n.chooseNewResortCountry},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}},{key:"option",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}}],null,!0),model:{value:n.new_tour.TourInfo.country,callback:function(t){n.$set(n.new_tour.TourInfo,"country",t)},expression:"new_tour.TourInfo.country"}})],1),n._v(" "),t("div",{staticClass:"col-12 col-md-6"},[t("label",{staticClass:"control-label"},[n._v("Курорт")]),n._v(" "),t("multiselect",{attrs:{options:n.cities,placeholder:"Введите название курорта","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,loading:n.isCountriesLoading||n.isCitiesLoading,disabled:n.isCountriesLoading||n.isCitiesLoading,preselectFirst:!0},on:{input:n.chooseNewResorts},scopedSlots:n._u([{key:"selection",fn:function(e){var o=e.values,i=(e.search,e.isOpen);return[o.length>3&&!i?t("span",{staticClass:"multiselect__single"},[n._v("\n                        "+n._s(o.length)+" "+n._s(n._f("pluralizeResorts")(o.length))+" "+n._s(n._f("pluralizeChoose")(o.length))+"\n                    ")]):n._e()]}}],null,!0),model:{value:n.new_tour.TourInfo.resort,callback:function(t){n.$set(n.new_tour.TourInfo,"resort",t)},expression:"new_tour.TourInfo.resort"}})],1),n._v(" "),t("div",{staticClass:"col-12 col-md-6"},[t("label",{staticClass:"control-label"},[n._v("Отель")]),n._v(" "),t("multiselect",{attrs:{options:n.hotels,placeholder:"Введите название отеля","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,loading:n.isCountriesLoading||n.isHotelsLoading,disabled:n.isCountriesLoading||n.isHotelsLoading,"allow-empty":!1,preselectFirst:!0},on:{input:n.chooseNewHotel},scopedSlots:n._u([{key:"selection",fn:function(e){var o=e.values,i=(e.search,e.isOpen);return[o.length>3&&!i?t("span",{staticClass:"multiselect__single"},[n._v("\n                        "+n._s(o.length)+" "+n._s(n._f("pluralizeHotels")(o.length))+" "+n._s(n._f("pluralizeChoose")(o.length))+"\n                    ")]):n._e()]}},{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))]),n._v(" "),0!=e.option.CommonRate?t("span",{staticClass:"option__title",staticStyle:{float:"right"}},[n._v(n._s(e.option.CommonRate))]):n._e(),n._v(" "),e.option.StarName?t("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[n._v(n._s(e.option.StarName))]):n._e()])]}},{key:"option",fn:function(e){return[t("div",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))]),n._v(" "),0!=e.option.CommonRate?t("span",{staticClass:"option__title",staticStyle:{float:"right"}},[n._v(n._s(e.option.CommonRate))]):n._e(),n._v(" "),e.option.StarName?t("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[n._v(n._s(e.option.StarName))]):n._e()])]}}],null,!0),model:{value:n.new_tour.TourInfo.hotel,callback:function(t){n.$set(n.new_tour.TourInfo,"hotel",t)},expression:"new_tour.TourInfo.hotel"}})],1),n._v(" "),t("div",{staticClass:"col-12 col-md-6"},[t("label",{staticClass:"control-label"},[n._v("Питание")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"meal",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("multiselect",{attrs:{options:n.meals,"option-height":25,placeholder:"Выберите питание","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,"allow-empty":!1},on:{input:n.chooseNewMeal},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}},{key:"option",fn:function(e){return[t("div",[t("div",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])]),n._v(" "),t("div",{staticClass:"row align-items-center m-auto",staticStyle:{width:"100%",height:"100%"}},[t("p",{staticStyle:{"font-size":"12px",margin:"0px"}},[n._v(n._s(e.option.desc))])])])]}}],null,!0),model:{value:n.new_tour.TourInfo.meal,callback:function(t){n.$set(n.new_tour.TourInfo,"meal",t)},expression:"new_tour.TourInfo.meal"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-12 col-md-6"},[t("label",{staticClass:"control-label"},[n._v("Категория номера")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"room_type",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.new_tour.TourInfo.room_type,expression:"new_tour.TourInfo.room_type"}],staticClass:"multiselect__input price",attrs:{type:"text",placeholder:"Категория номера"},domProps:{value:n.new_tour.TourInfo.room_type},on:{input:function(t){t.target.composing||n.$set(n.new_tour.TourInfo,"room_type",t.target.value)}}})]),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-12 col-md-6"},[t("div",{staticClass:"row align-items-center w-100 m-auto",staticStyle:{width:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Даты тура")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"date_range",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100",staticStyle:{width:"100%"}},[t("VueHotelDatepicker",{staticClass:"w-100",attrs:{startDate:n.new_tour.TourInfo.date_range.start,endDate:n.new_tour.TourInfo.date_range.end,placeholder:"Даты тура",format:"DD/MM/YYYY",weekList:["Вс.","Пн.","Вт.","Ср.","Чт.","Пт.","Сб."],monthList:["Янв.","Фев.","Мар.","Апр.","Май.","Июн.","Июл.","Авг.","Сен.","Окт","Ноя.","Дек."],fromText:"С",toText:"По",resetText:"Очистить",confirmText:"Подтвердить",mobile:"mobile"},on:{update:n.changeNewDateRange}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center w-100 m-auto",staticStyle:{width:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Цена")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"price",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.new_tour.TourInfo.price,expression:"new_tour.TourInfo.price"}],staticClass:"multiselect__input price",attrs:{type:"number",step:"1",min:"0"},domProps:{value:n.new_tour.TourInfo.price},on:{input:[function(t){t.target.composing||n.$set(n.new_tour.TourInfo,"price",t.target.value)},n.changeNewPrice]}})]),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center w-100 m-auto",staticStyle:{width:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Выплачено")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"left",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.new_tour.TourInfo.paid,expression:"new_tour.TourInfo.paid"}],staticClass:"multiselect__input price",attrs:{type:"number",step:"1",min:"0"},domProps:{value:n.new_tour.TourInfo.paid},on:{input:[function(t){t.target.composing||n.$set(n.new_tour.TourInfo,"paid",t.target.value)},n.changeNewPrice]}})]),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row align-items-center w-100 mx-auto mt-3",staticStyle:{width:"100%"}},[t("label",{staticClass:"control-label"},[n._v("Дополнительные услуги")]),n._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.new_tour.TourInfo.services,expression:"new_tour.TourInfo.services"}],staticClass:"form-control",staticStyle:{padding:"5px 15px",border:"1px solid #f08b23","border-radius":"20px"},attrs:{rows:"4",cols:"80",placeholder:"Дополнительные услуги"},domProps:{value:n.new_tour.TourInfo.services},on:{input:function(t){t.target.composing||n.$set(n.new_tour.TourInfo,"services",t.target.value)}}})])]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Авиабилеты")]),n._v(" "),t("avia-tickets-list",{attrs:{avia_tickets:n.new_tour.TourInfo.avia_tickets}})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Пассажиры")]),n._v(" "),t("passengers-list",{attrs:{passengers:n.new_tour.TourInfo.passengers}})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Файлы для клиента")]),n._v(" "),t("div",{staticClass:"row w-100 mx-auto mt-2"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"large-12 medium-12 small-12 filezone"},[t("input",{ref:"new_tour_files",attrs:{type:"file",id:"new_files",multiple:""},on:{change:function(t){return n.handleNewFiles()}}}),n._v(" "),t("p",[n._v("\n                                                    Перетащите файл(ы) сюда"),t("br"),n._v("или нажмите для поиска\n                                                ")])])])])]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("Или запишите голосовое сообщение")]),n._v(" "),t("div",{staticClass:"d-flex justify-content-center mt-2"},[t("vue-record-audio",{attrs:{mode:"press"},on:{stream:n.onStream,result:n.onResult}})],1)]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"file-listing"},n._l(n.new_tour.TourInfo.files,(function(e,o){return t("div",{key:e.name,staticClass:"list-group-item"},["file"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"col-4 text-center"},[t("img",{ref:"preview"+parseInt(o),refInFor:!0,staticClass:"preview"})]),n._v(" "),t("div",{staticClass:"col-8"},["file"==e.type?t("div",[t("p",{staticClass:"control-label"},[n._v(n._s(e.data.name))])]):n._e()])]):n._e(),n._v(" "),"audio"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"audio-container w-100"},[t("audio-player",{staticClass:"w-100",attrs:{audio:e}})],1)]):n._e(),n._v(" "),t("div",{staticClass:"remove-container"},[0==n.loading?t("a",{staticClass:"remove",on:{click:function(t){return n.removeFile(n.new_tour.TourInfo.files,o)}}},[n._v("Отменить")]):n._e()])])})),0)]),n._v(" "),t("div",{staticClass:"col-12 contact-btn form-button-group"},[t("button",{staticClass:"btn btn-block btn-lg",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:o||n.loading},on:{click:n.saveClientTour}},[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[n.loading?t("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):n._e(),n._v(" "),n.loading?t("span",{staticClass:"sr-only"},[n._v("Loading...")]):n._e(),n._v("\n                                            Сохранить\n                                        ")])])])]}}])})],1)])])])])])])}),[function(){var n=this,t=n._self._c;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[n._v("Новый тур клиента")]),n._v(" "),t("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"javascript:;","data-bs-dismiss":"modal"}},[n._v("Закрыть")])])}],!1,null,"cdf37b06",null).exports},props:["tours","load"],data:function(){return{columns:[{label:"ID тура",field:"id"},{label:"Дата",field:"created_at"},{label:"С",field:"TourInfo.date_range.start"},{label:"По",field:"TourInfo.date_range.end"},{label:"Страна",field:"TourInfo.country.Name"},{label:"Курорт",field:"TourInfo.resort.Name"},{label:"Цена",field:"TourInfo.price"},{label:"Выплачено",field:"TourInfo.paid"}],new_tour:{UserId:"",TourId:"",TourInfo:{country:{Id:150,Name:"Россия",Alias:"Russia",Flags:8,HasTickets:!0,HotelIsNotInStop:!0,IsProVisa:!1,IsVisa:!1,OriginalName:"Russia",Rank:0,TicketsIncluded:!0},resort:{Name:"Любой"},hotel:{Name:"Любой"},room_type:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:"",paid:"",left:0,services:"",avia_tickets:[],passengers:[],files:[]},StartAt:"",EndAt:"",Comment:""},edit_tour:{UserId:"",TourId:"",TourInfo:{country:"",resort:"",hotel:"",room_type:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:"",paid:"",left:0,services:"",avia_tickets:[],passengers:[],files:[],delete_files:[],new_files:[]},StartAt:"",EndAt:"",Comment:""}}},computed:{menu:function(){return this.$store.getters.menu},tourModule:function(){return this.$store.getters.tourModule},countries:function(){return this.$store.getters.countries},cities:function(){return this.$store.getters.cities},hotels:function(){return this.$store.getters.hotels},branches:function(){return this.$store.getters.branches},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading},isHotelsLoading:function(){return this.$store.getters.isHotelsLoading}},methods:{editClientTour:function(n){this.edit_tour=n,this.edit_tour.TourInfo.start=r()(this.edit_tour.TourInfo.date_range.start,"DD/MM/YYYY").toDate(),this.edit_tour.TourInfo.end=r()(this.edit_tour.TourInfo.date_range.end,"DD/MM/YYYY").toDate(),this.edit_tour.TourInfo.delete_files=[],this.edit_tour.TourInfo.new_files=[],this.edit_tour.new_files=[],this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},deleteClientTour:function(n){var t=this;n.isLoading=!0,this.$store.dispatch("deleteClientTour",n).then((function(e){n.isLoading=!1,t.sendMessage("Тур клиента успешно удалён")}))},addClientTour:function(){this.$store.dispatch("getCities",this.new_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:"0",star_id:"0"}),this.$store.dispatch("openModal","#newUserTourModalBox")},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:n})}}};function g(n){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},g(n)}function v(){v=function(){return t};var n,t={},e=Object.prototype,o=e.hasOwnProperty,i=Object.defineProperty||function(n,t,e){n[t]=e.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function d(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{d({},"")}catch(n){d=function(n,t,e){return n[t]=e}}function c(n,t,e,o){var r=t&&t.prototype instanceof b?t:b,a=Object.create(r.prototype),s=new z(o||[]);return i(a,"_invoke",{value:E(n,e,s)}),a}function u(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=c;var p="suspendedStart",m="suspendedYield",f="executing",A="completed",h={};function b(){}function _(){}function C(){}var w={};d(w,a,(function(){return this}));var x=Object.getPrototypeOf,y=x&&x(x(S([])));y&&y!==e&&o.call(y,a)&&(w=y);var I=C.prototype=b.prototype=Object.create(w);function T(n){["next","throw","return"].forEach((function(t){d(n,t,(function(n){return this._invoke(t,n)}))}))}function k(n,t){function e(i,r,a,s){var l=u(n[i],n,r);if("throw"!==l.type){var d=l.arg,c=d.value;return c&&"object"==g(c)&&o.call(c,"__await")?t.resolve(c.__await).then((function(n){e("next",n,a,s)}),(function(n){e("throw",n,a,s)})):t.resolve(c).then((function(n){d.value=n,a(d)}),(function(n){return e("throw",n,a,s)}))}s(l.arg)}var r;i(this,"_invoke",{value:function(n,o){function i(){return new t((function(t,i){e(n,o,t,i)}))}return r=r?r.then(i,i):i()}})}function E(t,e,o){var i=p;return function(r,a){if(i===f)throw Error("Generator is already running");if(i===A){if("throw"===r)throw a;return{value:n,done:!0}}for(o.method=r,o.arg=a;;){var s=o.delegate;if(s){var l=D(s,o);if(l){if(l===h)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===p)throw i=A,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=f;var d=u(t,e,o);if("normal"===d.type){if(i=o.done?A:m,d.arg===h)continue;return{value:d.arg,done:o.done}}"throw"===d.type&&(i=A,o.method="throw",o.arg=d.arg)}}}function D(t,e){var o=e.method,i=t.iterator[o];if(i===n)return e.delegate=null,"throw"===o&&t.iterator.return&&(e.method="return",e.arg=n,D(t,e),"throw"===e.method)||"return"!==o&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),h;var r=u(i,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function B(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function N(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function z(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(B,this),this.reset(!0)}function S(t){if(t||""===t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(o.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return r.next=r}}throw new TypeError(g(t)+" is not iterable")}return _.prototype=C,i(I,"constructor",{value:C,configurable:!0}),i(C,"constructor",{value:_,configurable:!0}),_.displayName=d(C,l,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,C):(n.__proto__=C,d(n,l,"GeneratorFunction")),n.prototype=Object.create(I),n},t.awrap=function(n){return{__await:n}},T(k.prototype),d(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(n,e,o,i,r){void 0===r&&(r=Promise);var a=new k(c(n,e,o,i),r);return t.isGeneratorFunction(e)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},T(I),d(I,l,"Generator"),d(I,a,(function(){return this})),d(I,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var o in t)e.push(o);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=S,z.prototype={constructor:z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(o,i){return s.type="throw",s.arg=t,e.next=o,i&&(e.method="next",e.arg=n),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),d=o.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===n||"continue"===n)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=n,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),h},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),N(e),h}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var o=e.completion;if("throw"===o.type){var i=o.arg;N(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:S(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=n),h}},t}function b(n,t,e,o,i,r,a){try{var s=n[r](a),l=s.value}catch(n){return void e(n)}s.done?t(l):Promise.resolve(l).then(o,i)}function _(n){return function(){var t=this,e=arguments;return new Promise((function(o,i){var r=n.apply(t,e);function a(n){b(r,o,i,a,s,"next",n)}function s(n){b(r,o,i,a,s,"throw",n)}a(void 0)}))}}const C={components:{ClientTours:(0,u.A)(h,(function(){var n=this,t=n._self._c;return null!=n.tours||null!=n.tours?t("div",{attrs:{id:"mobile-table"}},[t("create"),n._v(" "),t("edit",{attrs:{edit_tour:n.edit_tour}}),n._v(" "),t("data-table",{attrs:{title:"Туры",columns:n.columns,rows:n.tours,perPage:[5,10,25,50],expandMode:!0,addButton:!0,addButtonClick:n.addClientTour,loadingAnimation:n.load},scopedSlots:n._u([{key:"tbody-tr",fn:function(e){return[t("td",{attrs:{"data-title":"Действия"}},[e.row.isLoading?n._e():t("button",{staticClass:"btn waves-effect",staticStyle:{outline:"none"},on:{click:function(t){return n.deleteClientTour(e.row)}}},[t("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[n._v("delete")])]),n._v(" "),e.row.isLoading?t("div",{staticClass:"d-flex align-items-center float-left",staticStyle:{padding:".375rem .75rem"}},[t("div",{staticClass:"spinner-border text-center",staticStyle:{width:"24px",height:"24px"},attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[n._v("Loading...")])])]):n._e(),n._v(" "),e.row.isLoading?n._e():t("button",{staticClass:"btn waves-effect",staticStyle:{outline:"none"},attrs:{"data-bs-toggle":"modal","data-bs-target":"#editUserTourModalBox"},on:{click:function(t){return n.editClientTour(e.row)}}},[t("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[n._v("edit")])])])]}},{key:"expand-panel",fn:function(e){return[t("div",{staticStyle:{width:"100%",height:"100%"}},[t("div",{staticClass:"row align-items-center justify-content-center m-auto",staticStyle:{width:"100%",height:"100%"}},[t("div",{staticClass:"col-md-6 col-sm-12 mx-auto"},[t("div",{staticClass:"list-group"},[t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Страна")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v(n._s(e.row.expand.country.Name))])]),n._v(" "),t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Курорт")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v("\n                                    "+n._s(e.row.expand.resort.Name)+"\n                                ")])]),n._v(" "),t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Отель")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v("\n                                    "+n._s(e.row.expand.hotel.Name)+"\n                                ")])]),n._v(" "),t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Питание")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v("\n                                    "+n._s(e.row.expand.meal.Name)+"\n                                ")])])])]),n._v(" "),t("div",{staticClass:"col-md-6 col-sm-12 mx-auto"},[t("div",{staticClass:"list-group"},[t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Даты тура")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v(n._s(e.row.expand.date_range.start)+" - "+n._s(e.row.expand.date_range.end))])]),n._v(" "),t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Цена")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v(n._s(e.row.expand.price))])]),n._v(" "),t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Выплачено")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v(n._s(e.row.expand.paid))])]),n._v(" "),t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("div",{staticClass:"d-flex w-100 justify-content-between"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Остаток")])]),n._v(" "),t("p",{staticClass:"mb-1"},[n._v(n._s(e.row.expand.left))])])])]),n._v(" "),t("div",{staticClass:"col-md-12 col-sm-12 mx-auto"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Дополнительные услуги")]),n._v(" "),t("div",{staticClass:"list-group-item flex-column align-items-start p-1"},[t("p",{staticClass:"mb-1"},[n._v(n._s(e.row.expand.services))])])]),n._v(" "),t("div",{staticClass:"col-md-12 col-sm-12 mx-auto"},[t("label",{staticClass:"mb-1 control-label",staticStyle:{color:"#f08b23"}},[n._v("Файлы")]),n._v(" "),n._l(e.row.expand.files,(function(e,o){return t("div",{key:e.name,staticClass:"list-group-item"},["file"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"col-4 text-center"},[/\.(jpe?g|png|svg)$/i.test(e.name)?t("img",{staticClass:"preview",attrs:{src:e.path}}):t("img",{staticClass:"preview",attrs:{src:"/images/LOGO-1.png"}})]),n._v(" "),t("div",{staticClass:"col-8"},["file"==e.type?t("div",[t("p",{staticClass:"control-label"},[n._v(n._s(e.name))])]):n._e()])]):n._e(),n._v(" "),"audio"==e.type?t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"audio-container w-100"},[t("audio-player",{staticClass:"w-100",attrs:{audio:e,type:"url"}})],1)]):n._e()])}))],2)])])]}}],null,!1,41220284)},[t("th",{staticStyle:{width:"auto"},attrs:{slot:"thead-tr"},slot:"thead-tr"},[n._v("\n            Действия\n        ")])])],1):n._e()}),[],!1,null,"eda2f2c0",null).exports},data:function(){return{current_client:{},clientTours:[],columns:[{label:"ID тура",field:"id"},{label:"Дата",field:"created_at"},{label:"С",field:"TourInfo.date_range.start"},{label:"По",field:"TourInfo.date_range.end"},{label:"Страна",field:"TourInfo.country.Name"},{label:"Курорт",field:"TourInfo.resort.Name"},{label:"Цена",field:"TourInfo.price"},{label:"Выплачено",field:"TourInfo.paid"}],city_options:["Донецк","Ростов-на-Дону"],new_tour:{UserId:"",TourId:"",TourInfo:{country:{Id:150,Name:"Россия",Alias:"Russia",Flags:8,HasTickets:!0,HotelIsNotInStop:!0,IsProVisa:!1,IsVisa:!1,OriginalName:"Russia",Rank:0,TicketsIncluded:!0},resort:{Name:"Любой"},hotel:{Name:"Любой"},room_type:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:"",paid:"",left:0,services:"",avia_tickets:[],passengers:[],files:[]},StartAt:"",EndAt:"",Comment:""},edit_tour:{UserId:"",TourId:"",TourInfo:{country:"",resort:"",hotel:"",room_type:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:"",paid:"",left:0,services:"",avia_tickets:[],passengers:[],files:[],delete_files:[],new_files:[]},StartAt:"",EndAt:"",Comment:""},new_mode:!1,meals:[{Id:"115",Name:"AI",desc:"завтраки, обеды, ужины, напитки"},{Id:"114",Name:"BB",desc:"завтраки"},{Id:"112",Name:"FB",desc:"завтраки, обеды, ужины"},{Id:"121",Name:"FB+",desc:"завтраки, обеды, ужины - расширенное меню"},{Id:"113",Name:"HB",desc:"завтраки, ужины"},{Id:"122",Name:"HB+",desc:"завтраки, ужины - расширенное меню"},{Id:"117",Name:"RO",desc:"без питания"},{Id:"116",Name:"UAI",desc:"завтраки, обеды, ужины, напитки - расширенное меню"},{Id:"129",Name:"SC",desc:"самообслуживание"}],edit_loading:!1,new_loading:!1,load:!0,new_files:[],current_manager:null,start:void 0,end:void 0}},created:function(){var n=this;0===this.countries.length&&this.$store.dispatch("getCountries",{town_id:0}),this.clients.length>0?(this.load=!0,this.current_client=this.clients.find((function(t){return t.id==n.$route.params.id})),this.load=!1,this.managers.length>0?this.current_manager=this.managers.find((function(t){return t.id==n.current_client.info.ManagerId})):this.getManagers()):this.getClient()},mounted:function(){this.branches.length<=0&&this.loadBranches()},computed:{menu:function(){return this.$store.getters.menu},clients:function(){return this.$store.getters.clients},client:function(){return this.current_client},managers:function(){return this.$store.getters.managers},manager:function(){return this.current_manager},tourModule:function(){return this.$store.getters.tourModule},countries:function(){return this.$store.getters.countries},cities:function(){return this.$store.getters.cities},hotels:function(){return this.$store.getters.hotels},branches:function(){return this.$store.getters.branches},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading},isHotelsLoading:function(){return this.$store.getters.isHotelsLoading}},methods:{updateClientInfo:function(){var n=this;this.client.info.ManagerId=this.manager.id;this.client.info,this.client.id;this.$store.dispatch("updateClientInfo",this.client.info).then((function(t){n.sendMessage("Информация клиента успешно обновлена")}))},getClient:function(){var n=this;return _(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.load=!0,t.next=3,n.$store.dispatch("setClients").then((function(t){n.current_client=n.clients.find((function(t){return t.id==n.$route.params.id})),n.load=!1,n.managers.length>0?n.current_manager=n.managers.find((function(t){return t.id==n.current_client.info.ManagerId})):n.getManagers()}));case 3:case"end":return t.stop()}}),t)})))()},getManagers:function(){var n=this;return _(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("setManagers").then((function(){n.current_manager=n.managers.find((function(t){return t.id==n.current_client.info.ManagerId})),console.log(n.managers)}));case 2:case"end":return t.stop()}}),t)})))()},loadBranches:function(){var n=this;return _(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("setBranches");case 2:case"end":return t.stop()}}),t)})))()},selectCity:function(n){return _(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.Department="";case 1:case"end":return t.stop()}}),t)})))()},editClientTour:function(n){this.edit_tour=n,this.start=r()(this.edit_tour.TourInfo.date_range.start,"DD/MM/YYYY").toDate(),this.end=r()(this.edit_tour.TourInfo.date_range.end,"DD/MM/YYYY").toDate(),this.edit_tour.TourInfo.delete_files=[],this.edit_tour.TourInfo.new_files=[],this.edit_tour.new_files=[],this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"}),this.$store.dispatch("openModal","#editUserTourModalBox")},chooseEditResortCountry:function(n){this.edit_tour.TourInfo.resort={Name:"Любой"},this.edit_tour.TourInfo.hotel={Name:"Любой"},this.edit_tour.TourInfo.country=n,this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditResort:function(n){var t=this;if(this.edit_tour.TourInfo.resort=n,"Любой"!=this.edit_tour.TourInfo.resort.Name){var e=this.edit_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:e,star_id:"0"}).then((function(){-1==t.hotels.findIndex((function(n){return n.Id==t.edit_tour.TourInfo.hotel.Id}))&&(t.edit_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditHotel:function(n){this.edit_tour.TourInfo.hotel=n},changeEditDateRange:function(n){this.edit_tour.TourInfo.date_range=n},chooseEditMeal:function(n){this.edit_tour.TourInfo.meal=n},deleteClientTour:function(n){var t=this;n.isLoading=!0,this.$store.dispatch("deleteClientTour",n).then((function(e){n.isLoading=!1,t.sendMessage("Тур клиента успешно удалён")}))},changeEditPrice:function(){this.edit_tour.TourInfo.left=this.edit_tour.TourInfo.price-this.edit_tour.TourInfo.paid},handleEditFiles:function(){for(var n=this.$refs.edit_tour_files.files,t=0;t<n.length&&/\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(n[t].name);t++){var e=new Date;this.new_files.push({type:"file",name:n[t].name,data:n[t],date:e}),this.getImagePreviews(this.new_files)}},onEditResult:function(n){var t=Date.now(),e=new Date;this.new_files.push({type:"audio",name:"record-"+t+".mp3",src:window.URL.createObjectURL(n),data:n,date:e}),this.getImagePreviews(this.new_files)},deleteFile:function(n,t){this.edit_tour.TourInfo.delete_files.push(n),this.edit_tour.TourInfo.files.splice(t,1)},updateClientTour:function(){var n=this;this.edit_loading=!0,this.edit_tour.StartAt=r()(this.edit_tour.TourInfo.date_range.start,"DD-MM-YYYY"),this.edit_tour.EndAt=r()(this.edit_tour.TourInfo.date_range.end,"DD-MM-YYYY"),console.log(this.edit_tour.EndAt),this.edit_tour.new_files=this.new_files;var t=new FormData;t.append("UserTour",JSON.stringify(this.edit_tour));for(var e=0;e<this.new_files.length;e++){var o=this.new_files[e].data;t.append("new_files["+e+"]",o)}this.$store.dispatch("updateClientTour",t).then((function(t){console.log("response",t),n.edit_tour.TourInfo.delete_files=[],n.edit_tour.TourInfo.new_files=[],n.edit_tour.TourInfo.files=t.TourInfo.files,n.edit_tour.expand=t.expand,n.sendMessage("Тур клиента успешно обновлён"),n.edit_tour={UserId:"",TourId:"",TourInfo:{country:"",resort:"",hotel:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:0,paid:0,left:0,services:"",avia_tickets:[],passengers:[],files:[]},new_files:[],StartAt:"",EndAt:"",Comment:""},n.edit_loading=!1,n.$store.dispatch("closeModal","#editUserTourModalBox")}))},addClientTour:function(){this.$store.dispatch("getCities",this.new_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:"0",star_id:"0"}),this.$store.dispatch("openModal","#newUserTourModalBox")},chooseNewResortCountry:function(n){this.new_tour.TourInfo.resort={Name:"Любой"},this.new_tour.TourInfo.hotel={Name:"Любой"},this.new_tour.TourInfo.country=n,this.$store.dispatch("getCities",this.new_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseNewResorts:function(n){var t=this;if(this.new_tour.TourInfo.resort=n,"Любой"!=this.new_tour.TourInfo.resort.Name){var e=this.new_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:e,star_id:"0"}).then((function(){-1==t.hotels.findIndex((function(n){return n.Id==t.new_tour.TourInfo.hotel.Id}))&&(t.new_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.new_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseNewHotel:function(n){this.new_tour.TourInfo.hotel=n},changeNewDateRange:function(n){this.new_tour.TourInfo.date_range=n},chooseNewMeal:function(n){this.new_tour.TourInfo.meal=n},changeNewPrice:function(){this.new_tour.TourInfo.left=this.new_tour.TourInfo.price-this.new_tour.TourInfo.paid},handleNewFiles:function(){for(var n=this.$refs.new_tour_files.files,t=0;t<n.length&&/\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(n[t].name);t++){var e=new Date;this.new_tour.TourInfo.files.push({type:"file",name:n[t].name,data:n[t],date:e}),this.getImagePreviews(this.new_tour.TourInfo.files)}},onResult:function(n){var t=Date.now(),e=new Date;this.new_tour.TourInfo.files.push({type:"audio",name:"record-"+t+".mp3",src:window.URL.createObjectURL(n),data:n,date:e}),this.getImagePreviews(this.new_tour.TourInfo.files)},saveClientTour:function(){var n=this;this.new_loading=!0,this.new_tour.UserId=this.$route.params.id,this.new_tour.StartAt=r()(this.new_tour.TourInfo.date_range.start,"DD-MM-YYYY"),this.new_tour.EndAt=r()(this.new_tour.TourInfo.date_range.end,"DD-MM-YYYY");var t=new FormData;t.append("UserTour",JSON.stringify(this.new_tour));for(var e=0;e<this.new_tour.TourInfo.files.length;e++){var o=this.new_tour.TourInfo.files[e].data;t.append("files["+e+"]",o)}this.$store.dispatch("newClientTour",t).then((function(t){n.sendMessage("Тур клиента успешно добавлен"),n.new_tour={UserId:"",TourId:"",TourInfo:{country:"",resort:"",hotel:"",meal:"",tour_operator:"",date_range:{start:"",end:""},price:0,paid:0,left:0,services:"",avia_tickets:[],passengers:[],files:[]},StartAt:"",EndAt:"",Comment:"",Archive:!1},n.new_loading=!1,n.$store.dispatch("closeModal","#newUserTourModalBox")}))},getImagePreviews:function(n){for(var t=this,e=function(e){if(/\.(jpe?g|png|svg)$/i.test(n[e].name)){var o=new FileReader;o.addEventListener("load",function(){this.$refs["preview"+parseInt(e)][0].src=o.result}.bind(t),!1),o.readAsDataURL(n[e].data)}else t.$nextTick((function(){this.$refs["preview"+parseInt(e)][0].src="/images/LOGO-1.png"}))},o=0;o<n.length;o++)e(o)},removeFile:function(n,t){n.splice(t,1),this.getImagePreviews(n)},onStream:function(n){console.log("Got a stream object:",n)},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:n})}},filters:{pluralizeResorts:function(n){if(1===n)return"курорт";if(n>1&&n<5)return"курорта";if(n>4&&n<20)return"курортов";if(n>19){var t=n%10;return 1===t?"курорт":t>1&&t<5?"курорта":"курортов"}return"курортов"},pluralizeHotels:function(n){if(1===n)return"отель";if(n>1&&n<5)return"отеля";if(n>4&&n<20)return"отелей";if(n>19){var t=n%10;return 1===t?"отель":t>1&&t<5?"отеля":"отелей"}return"отелей"},pluralizeChoose:function(n){return 1===n?"выбран":"выбрано"}},directives:{mask:o.mask}};var w=e(16813),x={insert:"head",singleton:!1};l()(w.A,x);w.A.locals;var y=e(1268),I={insert:"head",singleton:!1};l()(y.A,I);y.A.locals;var T=e(6874),k={insert:"head",singleton:!1};l()(T.A,k);T.A.locals;const E=(0,u.A)(C,(function(){var n=this,t=n._self._c;return t("div",[t("div",{staticClass:"container m-auto",staticStyle:{height:"100%"}},[t("div",{staticClass:"row mx-auto"},[n._m(0),n._v(" "),t("div",{staticClass:"col-md-12"},[t("ValidationObserver",{scopedSlots:n._u([{key:"default",fn:function(e){var o=e.invalid;return[t("card",{attrs:{id:"client-profile"}},[t("div",{staticClass:"row w-100 m-auto"},[t("div",{staticClass:"col-md-4 pe-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"lastName",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Фамилия","label-size":"sm"}},[t("b-form-input",{staticClass:"mb-0 travel-input",attrs:{label:"Фамилия",placeholder:"Фамилия"},model:{value:n.client.info.LastName,callback:function(t){n.$set(n.client.info,"LastName",t)},expression:"client.info.LastName"}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-4 px-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"firstName",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Имя","label-size":"sm"}},[t("b-form-input",{staticClass:"mb-0 travel-input",attrs:{label:"Имя",placeholder:"Имя"},model:{value:n.client.info.FirstName,callback:function(t){n.$set(n.client.info,"FirstName",t)},expression:"client.info.FirstName"}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-4 ps-md-1"},[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Отчество","label-size":"sm"}},[t("b-form-input",{staticClass:"mb-0 travel-input",attrs:{label:"Отчество",placeholder:"Отчество"},model:{value:n.client.info.MiddleName,callback:function(t){n.$set(n.client.info,"MiddleName",t)},expression:"client.info.MiddleName"}})],1)],1)]),n._v(" "),t("div",{staticClass:"row w-100 m-auto"},[t("div",{staticClass:"col-md-4 pe-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"email",rules:"required|email"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Email","label-size":"sm"}},[t("b-form-input",{staticClass:"mb-0 travel-input",attrs:{label:"Email",type:"email",placeholder:"client@email.com"},model:{value:n.client.email,callback:function(t){n.$set(n.client,"email",t)},expression:"client.email"}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-4 px-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"phone",rules:"required|phone"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Телефон","label-size":"sm"}},[t("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:["+# (###) ###-##-##","+## (###) ###-##-##"],expression:"['+# (###) ###-##-##','+## (###) ###-##-##']"}],staticClass:"mb-0 travel-input",attrs:{label:"Телефон",placeholder:"Телефон"},model:{value:n.client.info.Phone,callback:function(t){n.$set(n.client.info,"Phone",t)},expression:"client.info.Phone"}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"row w-100 m-auto"},[t("div",{staticClass:"col-md-4 pe-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"City",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Город","label-size":"sm"}},[t("multiselect",{attrs:{options:n.branches,"option-height":25,placeholder:"Выберите город","show-labels":!1,maxHeight:200,loading:0===n.branches.length,disabled:0===n.branches.length,"allow-empty":!1,"track-by":"city",label:"city"},on:{input:function(t){return n.selectCity(n.client.info)}},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[e.option.city?t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.city))]):n._e()])]}},{key:"option",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.city))])])]}}],null,!0),model:{value:n.client.info.City,callback:function(t){n.$set(n.client.info,"City",t)},expression:"client.info.City"}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-4 px-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"department",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var o=e.errors;return[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Отделение","label-size":"sm"}},[t("multiselect",{attrs:{options:n.client.info.City.departments,"option-height":25,placeholder:"Выберите отделение","show-labels":!1,maxHeight:200,disabled:0===n.client.info.City.departments.length,"allow-empty":!1,label:"address","track-by":"address"},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.address))])])]}},{key:"option",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.address))])])]}}],null,!0),model:{value:n.client.info.Department,callback:function(t){n.$set(n.client.info,"Department",t)},expression:"client.info.Department"}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(o[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"row w-100 m-auto"},[t("div",{staticClass:"col-md-12"},[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Дополнительная информация","label-size":"sm"}},[t("b-form-textarea",{staticClass:"travel-input p-2",staticStyle:{"border-radius":"20px !important"},attrs:{rows:"4",cols:"80",placeholder:"Дополнительная информация о клиенте"},model:{value:n.client.info.About,callback:function(t){n.$set(n.client.info,"About",t)},expression:"client.info.About"}})],1)],1)]),n._v(" "),t("b-button",{staticClass:"btn btn-travel float-right",attrs:{slot:"footer",disabled:o},on:{click:n.updateClientInfo},slot:"footer"},[n._v("Сохранить")])],1)]}}])})],1),n._v(" "),n._m(1),n._v(" "),null!=n.client?t("div",{staticClass:"col-md-12"},[t("client-tours",{attrs:{tours:n.client.tours,load:n.load}})],1):n._e()])])])}),[function(){var n=this._self._c;return n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"row mx-auto mt-3 mb-5 justify-content-center align-items-center",staticStyle:{width:"100%","border-top":"4px solid #f08b23"}},[n("span",{staticClass:"white--text active-tour",staticStyle:{background:"#062348","font-size":"24px",position:"absolute"}},[this._v("Профиль")])])])},function(){var n=this._self._c;return n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"row mx-auto mt-5 mb-5 justify-content-center align-items-center",staticStyle:{width:"100%","border-top":"4px solid #f08b23"}},[n("span",{staticClass:"white--text active-tour",staticStyle:{background:"#062348","font-size":"24px",position:"absolute"}},[this._v("Туры")])])])}],!1,null,"44bca19b",null).exports}}]);
//# sourceMappingURL=6814.js.map