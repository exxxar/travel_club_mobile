/*! For license information please see 4976.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4976],{47703:(n,t,e)=>{e.d(t,{A:()=>i});var r=e(45627),o=e.n(r),a=e(76798),s=e.n(a)()(o());s.push([n.id,".btn-travel[data-v-17fda86e]{background:#e17e4e;background-color:#e17e4e;background-image:none;background-image:linear-gradient(to bottom left,#e17e4e,#ffbf00,#e17e4e);background-position:100% 0;background-position-x:0;background-position-y:0;background-size:auto;background-size:210% 210%;border:none;box-shadow:none;color:#fff;max-width:300px;transition:all .15s ease}","",{version:3,sources:["webpack://./resources/js/desktop/pages/Dashboard/Branches/Create.vue"],names:[],mappings:"AA4NA,6BACA,kBAAA,CASA,wBAAA,CALA,qBAAA,CAEA,wEAAA,CAEA,0BAAA,CANA,uBAAA,CACA,uBAAA,CAEA,oBAAA,CAEA,yBAAA,CAOA,WAAA,CAHA,eAAA,CACA,UAAA,CACA,eAAA,CAHA,wBAKA",sourcesContent:['<template>\n    <div>\n        <b-modal id="new-branch" scrollable centered title="Создать новый филиал">\n            <div class="row m-auto w-100 justify-content-center align-items-start" style="min-height: 210px">\n                <div class="col-12">\n                    <b-form-group label="Страна" class="mb-0">\n                        <multiselect\n                            v-model="new_branch.country"\n                            :options="countries"\n                            :option-height="25"\n                            placeholder="Выберете страну"\n                            :show-labels="false"\n                            :maxHeight="150"\n                            label="Name"\n                            track-by="Name"\n                            :loading="isCountriesLoading"\n                            :disabled="isCountriesLoading"\n                            :allow-empty="false"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                <span class="option__title">{{ props.option.Name }}</span>\n                            </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                <span class="option__title">{{ props.option.Name }}</span>\n                            </span>\n                            </template>\n                        </multiselect>\n                    </b-form-group>\n                </div>\n                <div class="col-12">\n                    <b-form-group label="Город" class="mb-0">\n                        <b-form-input\n                            v-model="new_branch.city"\n                            :placeholder="\'Введите город\'"\n                            class="travel-input"\n                        >\n                        </b-form-input>\n                    </b-form-group>\n                </div>\n            </div>\n\n            <template v-slot:modal-footer>\n                <div class="w-100">\n                    <b-button\n                        variant="primary"\n                        class="float-right btn-travel"\n                        @click="createBranch"\n                        :disabled="new_branch.country===\'\' || new_branch.city===\'\'"\n                    >\n                        <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                            <span v-if="loading" class="spinner-border spinner-border-sm mx-2" role="status" aria-hidden="true"></span>\n                            Сохранить\n                        </div>\n                    </b-button>\n                    <b-button\n                        variant="primary"\n                        class="float-right mr-2 btn-travel"\n                        @click="cancel"\n                    >\n                        Отмена\n                    </b-button>\n                </div>\n            </template>\n        </b-modal>\n        <b-button variant="primary" class="w-100 btn-travel" v-b-modal.new-branch>Создать филиал</b-button>\n    </div>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                loading: false,\n\n                new_branch: {\n                    country: \'\',\n                    country_alias: \'\',\n                    city:\'\',\n                },\n                template: null,\n            }\n        },\n        computed:{\n            countries() {\n                return this.$store.getters.countries;\n            },\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n        },\n        created() {\n            this.$store.dispatch(\'getCountries\', {town_id:0});\n        },\n        mounted() {\n            this.template = JSON.parse(JSON.stringify(this.new_branch));\n        },\n        methods:{\n            createBranch(){\n                this.loading=true;\n                this.new_branch.country_alias = this.new_branch.country.Alias;\n                this.new_branch.country = this.new_branch.country.Name;\n\n                this.$store.dispatch(\'addBranch\', this.new_branch).then(resp =>{\n                    this.$store.dispatch(\'sendNotification\',\n                        {message: \'Филиал успешно сохранён\'});\n                    this.loading=false;\n                    this.$bvModal.hide("new-branch");\n                });\n            },\n            cancel(){\n                this.$bvModal.hide("new-branch");\n            },\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Филиалы\',\n                    text: message\n                });\n            },\n        }\n    }\n<\/script>\n\n<style scoped>\n    .btn-travel{\n        background: #e17e4e;\n        background-color: rgb(225, 126, 78);\n        background-position-x: 0%;\n        background-position-y: 0%;\n        background-image: none;\n        background-size: auto;\n        background-image: linear-gradient(to bottom left, #e17e4e, #ffbf00, #e17e4e);\n        background-size: 210% 210%;\n        background-position: top right;\n        background-color: #e17e4e;\n        transition: all 0.15s ease;\n        box-shadow: none;\n        color: #ffffff;\n        max-width: 300px;\n        border: none;\n    }\n</style>\n<style>\n    /*.multiselect-title {*/\n    /*    color: #062348 !important;*/\n    /*    font-family: "Bello Pro";*/\n    /*    !*font-weight: 700;*!*/\n    /*}*/\n    /*.multiselect__tags {*/\n    /*    border: 1px solid #f08b23;*/\n    /*    border-radius: 20px;*/\n    /*    font-size: 1rem;*/\n    /*    min-height: 40px;*/\n    /*}*/\n    /*.multiselect__tag {*/\n    /*    background: #062348;*/\n    /*}*/\n    /*.multiselect__tag-icon::after {*/\n    /*    color:#fff;*/\n    /*}*/\n    /*.multiselect__tag-icon:focus, .multiselect__tag-icon:hover {*/\n    /*    background: #f08b23;*/\n    /*}*/\n    /*.multiselect__option--highlight::after {*/\n    /*    background: #f08b23;*/\n    /*}*/\n    /*.multiselect__option--highlight{*/\n    /*    background: #f08b23;*/\n    /*}*/\n    /*.multiselect{*/\n    /*    color: #062348;*/\n    /*    font-family: "Open Sans" !important;*/\n    /*    font-weight: 900;*/\n    /*}*/\n    /*.multiselect__placeholder {*/\n    /*    color: #062348;*/\n    /*}*/\n    /*.multiselect__input:focus, .multiselect__single:focus {*/\n    /*    border-color: #062348;*/\n    /*}*/\n    /*.multiselect__input::placeholder {*/\n    /*    color: #062348 !important;*/\n    /*    font-family: Open Sans !important;*/\n    /*    font-weight: 700;*/\n    /*}*/\n    /*.multiselect--disabled {*/\n    /*    background: white;*/\n    /*}*/\n    /*.multiselect--disabled .multiselect__select {*/\n    /*    background: transparent;*/\n    /*}*/\n    /*.multiselect__spinner::after, .multiselect__spinner::before {*/\n    /*    position: absolute;*/\n    /*    content: "";*/\n    /*    top: 50%;*/\n    /*    left: 50%;*/\n    /*    margin: -8px 0 0 -8px;*/\n    /*    width: 16px;*/\n    /*    height: 16px;*/\n    /*    border-radius: 100%;*/\n    /*    border: 3px solid transparent;*/\n    /*    border-top-color: transparent;*/\n    /*    border-top-color: #ffa500;*/\n    /*    box-shadow: 0 0 0 1px transparent;*/\n    /*    background: transparent;*/\n    /*}*/\n    /*.multiselect__spinner{*/\n    /*    border-radius: 50px;*/\n    /*}*/\n</style>\n'],sourceRoot:""}]);const i=s},61959:(n,t,e)=>{e.d(t,{A:()=>i});var r=e(45627),o=e.n(r),a=e(76798),s=e.n(a)()(o());s.push([n.id,"\n/*    !*font-weight: 700;*!*/","",{version:3,sources:["webpack://./resources/js/desktop/pages/Dashboard/Branches/Create.vue"],names:[],mappings:";AA+NA,4BAAA",sourcesContent:['<template>\n    <div>\n        <b-modal id="new-branch" scrollable centered title="Создать новый филиал">\n            <div class="row m-auto w-100 justify-content-center align-items-start" style="min-height: 210px">\n                <div class="col-12">\n                    <b-form-group label="Страна" class="mb-0">\n                        <multiselect\n                            v-model="new_branch.country"\n                            :options="countries"\n                            :option-height="25"\n                            placeholder="Выберете страну"\n                            :show-labels="false"\n                            :maxHeight="150"\n                            label="Name"\n                            track-by="Name"\n                            :loading="isCountriesLoading"\n                            :disabled="isCountriesLoading"\n                            :allow-empty="false"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                <span class="option__title">{{ props.option.Name }}</span>\n                            </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                <span class="option__title">{{ props.option.Name }}</span>\n                            </span>\n                            </template>\n                        </multiselect>\n                    </b-form-group>\n                </div>\n                <div class="col-12">\n                    <b-form-group label="Город" class="mb-0">\n                        <b-form-input\n                            v-model="new_branch.city"\n                            :placeholder="\'Введите город\'"\n                            class="travel-input"\n                        >\n                        </b-form-input>\n                    </b-form-group>\n                </div>\n            </div>\n\n            <template v-slot:modal-footer>\n                <div class="w-100">\n                    <b-button\n                        variant="primary"\n                        class="float-right btn-travel"\n                        @click="createBranch"\n                        :disabled="new_branch.country===\'\' || new_branch.city===\'\'"\n                    >\n                        <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                            <span v-if="loading" class="spinner-border spinner-border-sm mx-2" role="status" aria-hidden="true"></span>\n                            Сохранить\n                        </div>\n                    </b-button>\n                    <b-button\n                        variant="primary"\n                        class="float-right mr-2 btn-travel"\n                        @click="cancel"\n                    >\n                        Отмена\n                    </b-button>\n                </div>\n            </template>\n        </b-modal>\n        <b-button variant="primary" class="w-100 btn-travel" v-b-modal.new-branch>Создать филиал</b-button>\n    </div>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                loading: false,\n\n                new_branch: {\n                    country: \'\',\n                    country_alias: \'\',\n                    city:\'\',\n                },\n                template: null,\n            }\n        },\n        computed:{\n            countries() {\n                return this.$store.getters.countries;\n            },\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n        },\n        created() {\n            this.$store.dispatch(\'getCountries\', {town_id:0});\n        },\n        mounted() {\n            this.template = JSON.parse(JSON.stringify(this.new_branch));\n        },\n        methods:{\n            createBranch(){\n                this.loading=true;\n                this.new_branch.country_alias = this.new_branch.country.Alias;\n                this.new_branch.country = this.new_branch.country.Name;\n\n                this.$store.dispatch(\'addBranch\', this.new_branch).then(resp =>{\n                    this.$store.dispatch(\'sendNotification\',\n                        {message: \'Филиал успешно сохранён\'});\n                    this.loading=false;\n                    this.$bvModal.hide("new-branch");\n                });\n            },\n            cancel(){\n                this.$bvModal.hide("new-branch");\n            },\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Филиалы\',\n                    text: message\n                });\n            },\n        }\n    }\n<\/script>\n\n<style scoped>\n    .btn-travel{\n        background: #e17e4e;\n        background-color: rgb(225, 126, 78);\n        background-position-x: 0%;\n        background-position-y: 0%;\n        background-image: none;\n        background-size: auto;\n        background-image: linear-gradient(to bottom left, #e17e4e, #ffbf00, #e17e4e);\n        background-size: 210% 210%;\n        background-position: top right;\n        background-color: #e17e4e;\n        transition: all 0.15s ease;\n        box-shadow: none;\n        color: #ffffff;\n        max-width: 300px;\n        border: none;\n    }\n</style>\n<style>\n    /*.multiselect-title {*/\n    /*    color: #062348 !important;*/\n    /*    font-family: "Bello Pro";*/\n    /*    !*font-weight: 700;*!*/\n    /*}*/\n    /*.multiselect__tags {*/\n    /*    border: 1px solid #f08b23;*/\n    /*    border-radius: 20px;*/\n    /*    font-size: 1rem;*/\n    /*    min-height: 40px;*/\n    /*}*/\n    /*.multiselect__tag {*/\n    /*    background: #062348;*/\n    /*}*/\n    /*.multiselect__tag-icon::after {*/\n    /*    color:#fff;*/\n    /*}*/\n    /*.multiselect__tag-icon:focus, .multiselect__tag-icon:hover {*/\n    /*    background: #f08b23;*/\n    /*}*/\n    /*.multiselect__option--highlight::after {*/\n    /*    background: #f08b23;*/\n    /*}*/\n    /*.multiselect__option--highlight{*/\n    /*    background: #f08b23;*/\n    /*}*/\n    /*.multiselect{*/\n    /*    color: #062348;*/\n    /*    font-family: "Open Sans" !important;*/\n    /*    font-weight: 900;*/\n    /*}*/\n    /*.multiselect__placeholder {*/\n    /*    color: #062348;*/\n    /*}*/\n    /*.multiselect__input:focus, .multiselect__single:focus {*/\n    /*    border-color: #062348;*/\n    /*}*/\n    /*.multiselect__input::placeholder {*/\n    /*    color: #062348 !important;*/\n    /*    font-family: Open Sans !important;*/\n    /*    font-weight: 700;*/\n    /*}*/\n    /*.multiselect--disabled {*/\n    /*    background: white;*/\n    /*}*/\n    /*.multiselect--disabled .multiselect__select {*/\n    /*    background: transparent;*/\n    /*}*/\n    /*.multiselect__spinner::after, .multiselect__spinner::before {*/\n    /*    position: absolute;*/\n    /*    content: "";*/\n    /*    top: 50%;*/\n    /*    left: 50%;*/\n    /*    margin: -8px 0 0 -8px;*/\n    /*    width: 16px;*/\n    /*    height: 16px;*/\n    /*    border-radius: 100%;*/\n    /*    border: 3px solid transparent;*/\n    /*    border-top-color: transparent;*/\n    /*    border-top-color: #ffa500;*/\n    /*    box-shadow: 0 0 0 1px transparent;*/\n    /*    background: transparent;*/\n    /*}*/\n    /*.multiselect__spinner{*/\n    /*    border-radius: 50px;*/\n    /*}*/\n</style>\n'],sourceRoot:""}]);const i=s},69680:(n,t,e)=>{e.d(t,{A:()=>i});var r=e(45627),o=e.n(r),a=e(76798),s=e.n(a)()(o());s.push([n.id,".btn-travel[data-v-1ecee446]{background:#e17e4e;background-color:#e17e4e;background-image:none;background-image:linear-gradient(to bottom left,#e17e4e,#ffbf00,#e17e4e);background-position:100% 0;background-position-x:0;background-position-y:0;background-size:auto;background-size:210% 210%;border:none;box-shadow:none;color:#fff;max-width:300px;transition:all .15s ease}","",{version:3,sources:["webpack://./resources/js/desktop/pages/Dashboard/Branches/Index.vue"],names:[],mappings:"AA6SA,6BACA,kBAAA,CASA,wBAAA,CALA,qBAAA,CAEA,wEAAA,CAEA,0BAAA,CANA,uBAAA,CACA,uBAAA,CAEA,oBAAA,CAEA,yBAAA,CAOA,WAAA,CAHA,eAAA,CACA,UAAA,CACA,eAAA,CAHA,wBAKA",sourcesContent:['<template>\n    <b-container fluid>\n        <div class="row w-100 my-3 mx-auto">\n            <div class="col-12 col-md-4 col-lg-6">\n                <create></create>\n            </div>\n        </div>\n        <b-row>\n            <b-col lg="6" class="my-1">\n                <b-form-group\n                    label="Сортировка"\n                    label-cols-sm="3"\n                    label-align-sm="right"\n                    label-size="sm"\n                    label-for="order_bySelect1"\n                    class="mb-0"\n                >\n                    <b-input-group size="sm">\n                        <b-form-select v-model="order_by" id="order_bySelect1" :options="sortOptions" class="w-75">\n                            <template v-slot:first>\n                                <option value="">-- none --</option>\n                            </template>\n                        </b-form-select>\n                        <b-form-select v-model="sortDesc" size="sm" :disabled="!order_by" class="w-25">\n                            <option :value="false">Asc</option>\n                            <option :value="true">Desc</option>\n                        </b-form-select>\n                    </b-input-group>\n                </b-form-group>\n            </b-col>\n\n            <b-col lg="6" class="my-1">\n                <b-form-group\n                    label="Поиск"\n                    label-cols-sm="3"\n                    label-align-sm="right"\n                    label-size="sm"\n                    label-for="filterInput"\n                    class="mb-0"\n                >\n                    <b-input-group size="sm">\n                        <b-form-input\n                            v-model="filter"\n                            type="search"\n                            id="filterInput"\n                            placeholder="Введите для поиска"\n                        />\n                        <b-input-group-append>\n                            <b-button :disabled="!filter" @click="filter = \'\'">Очистить</b-button>\n                        </b-input-group-append>\n                    </b-input-group>\n                </b-form-group>\n            </b-col>\n\n            <b-col sm="5" md="6" class="my-1">\n                <b-form-group\n                    label="На странице"\n                    label-cols-sm="6"\n                    label-cols-md="4"\n                    label-cols-lg="3"\n                    label-align-sm="right"\n                    label-size="sm"\n                    label-for="perPageSelect1"\n                    class="mb-0"\n                >\n                    <b-form-select\n                        v-model="perPage"\n                        id="perPageSelect1"\n                        size="sm"\n                        :options="pageOptions"\n                    />\n                </b-form-group>\n            </b-col>\n\n            <b-col sm="7" md="6" class="my-1">\n                <b-pagination\n                    v-model="currentPage"\n                    :total-rows="totalRows"\n                    :per-page="perPage"\n                    align="fill"\n                    size="sm"\n                    class="my-0"\n                />\n            </b-col>\n        </b-row>\n        <b-table\n            show-empty\n            small\n            stacked="md"\n            :items="branches"\n            :fields="fields"\n            :current-page="currentPage"\n            :per-page="perPage"\n            :filter="filter"\n            :filterIncludedFields="filterOn"\n            :sort-by.sync="order_by"\n            :sort-desc.sync="sortDesc"\n            :sort-direction="order_direction"\n            @filtered="onFiltered"\n            :busy="loading"\n            empty-text="Нет записей для отображения"\n            empty-filtered-text="Нет записей, соответствующих вашему запросу"\n        >\n            <template v-slot:cell(country)="data">\n                <b-input-group size="sm">\n                    {{data.item.country}}\n\x3c!--                    <b-form-input :value="data.item.country"--\x3e\n\x3c!--                                  @blur="save($event.target.value,data.item.id,\'country\')"--\x3e\n\x3c!--                                  placeholder="Введите "/>--\x3e\n\x3c!--                    <multiselect--\x3e\n\x3c!--                        v-model="data.item.country"--\x3e\n\x3c!--                        :options="countries"--\x3e\n\x3c!--                        :option-height="25"--\x3e\n\x3c!--                        placeholder="Выберете страну"--\x3e\n\x3c!--                        :show-labels="false"--\x3e\n\x3c!--                        :maxHeight="200"--\x3e\n\x3c!--                        label="Name"--\x3e\n\x3c!--                        track-by="Name"--\x3e\n\x3c!--                        :loading="isCountriesLoading"--\x3e\n\x3c!--                        :disabled="isCountriesLoading"--\x3e\n\x3c!--                        :allow-empty="false"--\x3e\n\x3c!--                        @input="save($event.target.value,data.item.id,\'country\')"--\x3e\n\x3c!--                    >--\x3e\n\x3c!--                        <template slot="singleLabel" slot-scope="props">--\x3e\n\x3c!--                            <b :class="\'tc-flag-\'+props.option.Id"></b>--\x3e\n\x3c!--                            <span class="option__desc">--\x3e\n\x3c!--                                <span class="option__title">{{ props.option.Name }}</span>--\x3e\n\x3c!--                            </span>--\x3e\n\x3c!--                        </template>--\x3e\n\x3c!--                        <template slot="option" slot-scope="props">--\x3e\n\x3c!--                            <b :class="\'tc-flag-\'+props.option.Id"></b>--\x3e\n\x3c!--                            <span class="option__desc">--\x3e\n\x3c!--                                <span class="option__title">{{ props.option.Name }}</span>--\x3e\n\x3c!--                            </span>--\x3e\n\x3c!--                        </template>--\x3e\n\x3c!--                    </multiselect>--\x3e\n                </b-input-group>\n            </template>\n            <template v-slot:cell(city)="data">\n                <b-input-group size="sm">\n                    <b-form-input\n                        v-model="data.item.city"\n                        @blur="save($event.target.value, data.item.id,\'city\')"\n                        placeholder="Введите город"\n                        class="travel-input"\n                    >\n                    </b-form-input>\n                </b-input-group>\n            </template>\n            <template v-slot:cell(action1)="data">\n                <b-input-group size="sm" >\n                    <b-button  @click="seeDepartments(data.item.id)" class="btn btn-info mr-1 mb-1 btn-travel w-100"\n                              :disabled="data.item.id===null">\n                        Отделения\n                    </b-button>\n                </b-input-group>\n            </template>\n            <template v-slot:cell(action2)="data">\n                <b-input-group size="sm" >\n                    <b-button  @click="remove(data.item.id)" class="btn btn-info mr-1 mb-1 btn-travel w-100"\n                              :disabled="data.item.id===null">\n                        Удалить\n                    </b-button>\n                </b-input-group>\n            </template>\n            <template v-slot:table-busy>\n                <div class="text-center text-warning my-2">\n                    <b-spinner class="align-middle" variant="warning"/>\n                    <strong>Загрузка...</strong>\n                </div>\n            </template>\n        </b-table>\n    </b-container>\n</template>\n\n<script>\n    import Create from "./Create";\n    export default {\n        name: "Index",\n        components: {\n            Create\n        },\n        data() {\n            return {\n                order_by: \'id\',\n                sortDesc: false,\n                totalRows: 1,\n                currentPage: 1,\n                perPage: 5,\n                order_direction: \'asc\',\n                filter: null,\n                filterOn: [],\n\n                pageOptions: [5, 10, 15, 25, 50, 100],\n\n                fields: [\n                    {key: \'id\', label: \'ID\', sortable: true, order_direction: \'desc\'},\n                    {key: \'country\', label: \'Страна\', sortable: true, order_direction: \'desc\'},\n                    {key: \'city\', label: \'Город\', sortable: true, order_direction: \'desc\'},\n                    {key: \'action1\', label: \'Показать\'},\n                    {key: \'action2\', label: \'Действия\'}\n                ],\n                 loading:false,\n            }\n        },\n        computed: {\n            sortOptions() {\n                return this.fields\n                    .filter(f => f.sortable)\n                    .map(f => {\n                        return {text: f.label, value: f.key}\n                    })\n            },\n            branches() {\n                return this.$store.getters.branches;\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n        },\n        mounted() {\n            if(this.branches.length<=0){\n                this.loadBranches();\n            }\n        },\n        methods: {\n            seeDepartments(id) {\n                this.$router.push(\'/admin/branches/\'+id)\n            },\n            async loadBranches() {\n                await this.$store.dispatch(\'setBranches\')\n            },\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Филиалы\',\n                    text: message\n                });\n            },async remove(id) {\n                this.$store.dispatch(\'removeBranch\', id).then(resp => {\n                    this.$store.dispatch(\'sendNotification\',\n                        {message: resp.data.message});\n                })\n            },\n\n            async save(value, id, key) {\n                this.$store.dispatch(\'saveBranch\', {\n                    id: id,\n                    key: key,\n                    value: value\n                }).then(resp => {\n                    this.$store.commit(\'saveBranch\', resp.data.branch);\n                    this.$store.dispatch(\'sendNotification\',\n                        {message: resp.data.message});\n                });\n            },\n\n            onFiltered(filteredItems) {\n                this.totalRows = filteredItems.length;\n                this.currentPage = 1\n            },\n        }\n    }\n<\/script>\n\n<style scoped>\n    .btn-travel{\n        background: #e17e4e;\n        background-color: rgb(225, 126, 78);\n        background-position-x: 0%;\n        background-position-y: 0%;\n        background-image: none;\n        background-size: auto;\n        background-image: linear-gradient(to bottom left, #e17e4e, #ffbf00, #e17e4e);\n        background-size: 210% 210%;\n        background-position: top right;\n        background-color: #e17e4e;\n        transition: all 0.15s ease;\n        box-shadow: none;\n        color: #ffffff;\n        max-width: 300px;\n        border: none;\n    }\n</style>\n<style>\n    .page-item.active .page-link {\n        background: #f08b23;\n        border: 1px solid #f08b23;\n        transition: all 0.15s ease;\n        box-shadow: none;\n        color: #ffffff;\n    }\n</style>\n'],sourceRoot:""}]);const i=s},30596:(n,t,e)=>{e.d(t,{A:()=>i});var r=e(45627),o=e.n(r),a=e(76798),s=e.n(a)()(o());s.push([n.id,".page-item.active .page-link{background:#f08b23;border:1px solid #f08b23;box-shadow:none;color:#fff;transition:all .15s ease}","",{version:3,sources:["webpack://./resources/js/desktop/pages/Dashboard/Branches/Index.vue"],names:[],mappings:"AA6SA,6BACA,kBAAA,CACA,wBAAA,CAEA,eAAA,CACA,UAAA,CAFA,wBAGA",sourcesContent:['<template>\n    <b-container fluid>\n        <div class="row w-100 my-3 mx-auto">\n            <div class="col-12 col-md-4 col-lg-6">\n                <create></create>\n            </div>\n        </div>\n        <b-row>\n            <b-col lg="6" class="my-1">\n                <b-form-group\n                    label="Сортировка"\n                    label-cols-sm="3"\n                    label-align-sm="right"\n                    label-size="sm"\n                    label-for="order_bySelect1"\n                    class="mb-0"\n                >\n                    <b-input-group size="sm">\n                        <b-form-select v-model="order_by" id="order_bySelect1" :options="sortOptions" class="w-75">\n                            <template v-slot:first>\n                                <option value="">-- none --</option>\n                            </template>\n                        </b-form-select>\n                        <b-form-select v-model="sortDesc" size="sm" :disabled="!order_by" class="w-25">\n                            <option :value="false">Asc</option>\n                            <option :value="true">Desc</option>\n                        </b-form-select>\n                    </b-input-group>\n                </b-form-group>\n            </b-col>\n\n            <b-col lg="6" class="my-1">\n                <b-form-group\n                    label="Поиск"\n                    label-cols-sm="3"\n                    label-align-sm="right"\n                    label-size="sm"\n                    label-for="filterInput"\n                    class="mb-0"\n                >\n                    <b-input-group size="sm">\n                        <b-form-input\n                            v-model="filter"\n                            type="search"\n                            id="filterInput"\n                            placeholder="Введите для поиска"\n                        />\n                        <b-input-group-append>\n                            <b-button :disabled="!filter" @click="filter = \'\'">Очистить</b-button>\n                        </b-input-group-append>\n                    </b-input-group>\n                </b-form-group>\n            </b-col>\n\n            <b-col sm="5" md="6" class="my-1">\n                <b-form-group\n                    label="На странице"\n                    label-cols-sm="6"\n                    label-cols-md="4"\n                    label-cols-lg="3"\n                    label-align-sm="right"\n                    label-size="sm"\n                    label-for="perPageSelect1"\n                    class="mb-0"\n                >\n                    <b-form-select\n                        v-model="perPage"\n                        id="perPageSelect1"\n                        size="sm"\n                        :options="pageOptions"\n                    />\n                </b-form-group>\n            </b-col>\n\n            <b-col sm="7" md="6" class="my-1">\n                <b-pagination\n                    v-model="currentPage"\n                    :total-rows="totalRows"\n                    :per-page="perPage"\n                    align="fill"\n                    size="sm"\n                    class="my-0"\n                />\n            </b-col>\n        </b-row>\n        <b-table\n            show-empty\n            small\n            stacked="md"\n            :items="branches"\n            :fields="fields"\n            :current-page="currentPage"\n            :per-page="perPage"\n            :filter="filter"\n            :filterIncludedFields="filterOn"\n            :sort-by.sync="order_by"\n            :sort-desc.sync="sortDesc"\n            :sort-direction="order_direction"\n            @filtered="onFiltered"\n            :busy="loading"\n            empty-text="Нет записей для отображения"\n            empty-filtered-text="Нет записей, соответствующих вашему запросу"\n        >\n            <template v-slot:cell(country)="data">\n                <b-input-group size="sm">\n                    {{data.item.country}}\n\x3c!--                    <b-form-input :value="data.item.country"--\x3e\n\x3c!--                                  @blur="save($event.target.value,data.item.id,\'country\')"--\x3e\n\x3c!--                                  placeholder="Введите "/>--\x3e\n\x3c!--                    <multiselect--\x3e\n\x3c!--                        v-model="data.item.country"--\x3e\n\x3c!--                        :options="countries"--\x3e\n\x3c!--                        :option-height="25"--\x3e\n\x3c!--                        placeholder="Выберете страну"--\x3e\n\x3c!--                        :show-labels="false"--\x3e\n\x3c!--                        :maxHeight="200"--\x3e\n\x3c!--                        label="Name"--\x3e\n\x3c!--                        track-by="Name"--\x3e\n\x3c!--                        :loading="isCountriesLoading"--\x3e\n\x3c!--                        :disabled="isCountriesLoading"--\x3e\n\x3c!--                        :allow-empty="false"--\x3e\n\x3c!--                        @input="save($event.target.value,data.item.id,\'country\')"--\x3e\n\x3c!--                    >--\x3e\n\x3c!--                        <template slot="singleLabel" slot-scope="props">--\x3e\n\x3c!--                            <b :class="\'tc-flag-\'+props.option.Id"></b>--\x3e\n\x3c!--                            <span class="option__desc">--\x3e\n\x3c!--                                <span class="option__title">{{ props.option.Name }}</span>--\x3e\n\x3c!--                            </span>--\x3e\n\x3c!--                        </template>--\x3e\n\x3c!--                        <template slot="option" slot-scope="props">--\x3e\n\x3c!--                            <b :class="\'tc-flag-\'+props.option.Id"></b>--\x3e\n\x3c!--                            <span class="option__desc">--\x3e\n\x3c!--                                <span class="option__title">{{ props.option.Name }}</span>--\x3e\n\x3c!--                            </span>--\x3e\n\x3c!--                        </template>--\x3e\n\x3c!--                    </multiselect>--\x3e\n                </b-input-group>\n            </template>\n            <template v-slot:cell(city)="data">\n                <b-input-group size="sm">\n                    <b-form-input\n                        v-model="data.item.city"\n                        @blur="save($event.target.value, data.item.id,\'city\')"\n                        placeholder="Введите город"\n                        class="travel-input"\n                    >\n                    </b-form-input>\n                </b-input-group>\n            </template>\n            <template v-slot:cell(action1)="data">\n                <b-input-group size="sm" >\n                    <b-button  @click="seeDepartments(data.item.id)" class="btn btn-info mr-1 mb-1 btn-travel w-100"\n                              :disabled="data.item.id===null">\n                        Отделения\n                    </b-button>\n                </b-input-group>\n            </template>\n            <template v-slot:cell(action2)="data">\n                <b-input-group size="sm" >\n                    <b-button  @click="remove(data.item.id)" class="btn btn-info mr-1 mb-1 btn-travel w-100"\n                              :disabled="data.item.id===null">\n                        Удалить\n                    </b-button>\n                </b-input-group>\n            </template>\n            <template v-slot:table-busy>\n                <div class="text-center text-warning my-2">\n                    <b-spinner class="align-middle" variant="warning"/>\n                    <strong>Загрузка...</strong>\n                </div>\n            </template>\n        </b-table>\n    </b-container>\n</template>\n\n<script>\n    import Create from "./Create";\n    export default {\n        name: "Index",\n        components: {\n            Create\n        },\n        data() {\n            return {\n                order_by: \'id\',\n                sortDesc: false,\n                totalRows: 1,\n                currentPage: 1,\n                perPage: 5,\n                order_direction: \'asc\',\n                filter: null,\n                filterOn: [],\n\n                pageOptions: [5, 10, 15, 25, 50, 100],\n\n                fields: [\n                    {key: \'id\', label: \'ID\', sortable: true, order_direction: \'desc\'},\n                    {key: \'country\', label: \'Страна\', sortable: true, order_direction: \'desc\'},\n                    {key: \'city\', label: \'Город\', sortable: true, order_direction: \'desc\'},\n                    {key: \'action1\', label: \'Показать\'},\n                    {key: \'action2\', label: \'Действия\'}\n                ],\n                 loading:false,\n            }\n        },\n        computed: {\n            sortOptions() {\n                return this.fields\n                    .filter(f => f.sortable)\n                    .map(f => {\n                        return {text: f.label, value: f.key}\n                    })\n            },\n            branches() {\n                return this.$store.getters.branches;\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n        },\n        mounted() {\n            if(this.branches.length<=0){\n                this.loadBranches();\n            }\n        },\n        methods: {\n            seeDepartments(id) {\n                this.$router.push(\'/admin/branches/\'+id)\n            },\n            async loadBranches() {\n                await this.$store.dispatch(\'setBranches\')\n            },\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Филиалы\',\n                    text: message\n                });\n            },async remove(id) {\n                this.$store.dispatch(\'removeBranch\', id).then(resp => {\n                    this.$store.dispatch(\'sendNotification\',\n                        {message: resp.data.message});\n                })\n            },\n\n            async save(value, id, key) {\n                this.$store.dispatch(\'saveBranch\', {\n                    id: id,\n                    key: key,\n                    value: value\n                }).then(resp => {\n                    this.$store.commit(\'saveBranch\', resp.data.branch);\n                    this.$store.dispatch(\'sendNotification\',\n                        {message: resp.data.message});\n                });\n            },\n\n            onFiltered(filteredItems) {\n                this.totalRows = filteredItems.length;\n                this.currentPage = 1\n            },\n        }\n    }\n<\/script>\n\n<style scoped>\n    .btn-travel{\n        background: #e17e4e;\n        background-color: rgb(225, 126, 78);\n        background-position-x: 0%;\n        background-position-y: 0%;\n        background-image: none;\n        background-size: auto;\n        background-image: linear-gradient(to bottom left, #e17e4e, #ffbf00, #e17e4e);\n        background-size: 210% 210%;\n        background-position: top right;\n        background-color: #e17e4e;\n        transition: all 0.15s ease;\n        box-shadow: none;\n        color: #ffffff;\n        max-width: 300px;\n        border: none;\n    }\n</style>\n<style>\n    .page-item.active .page-link {\n        background: #f08b23;\n        border: 1px solid #f08b23;\n        transition: all 0.15s ease;\n        box-shadow: none;\n        color: #ffffff;\n    }\n</style>\n'],sourceRoot:""}]);const i=s},24976:(n,t,e)=>{e.r(t),e.d(t,{default:()=>x});const r={data:function(){return{loading:!1,new_branch:{country:"",country_alias:"",city:""},template:null}},computed:{countries:function(){return this.$store.getters.countries},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading}},created:function(){this.$store.dispatch("getCountries",{town_id:0})},mounted:function(){this.template=JSON.parse(JSON.stringify(this.new_branch))},methods:{createBranch:function(){var n=this;this.loading=!0,this.new_branch.country_alias=this.new_branch.country.Alias,this.new_branch.country=this.new_branch.country.Name,this.$store.dispatch("addBranch",this.new_branch).then((function(t){n.$store.dispatch("sendNotification",{message:"Филиал успешно сохранён"}),n.loading=!1,n.$bvModal.hide("new-branch")}))},cancel:function(){this.$bvModal.hide("new-branch")},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Филиалы",text:n})}}};var o=e(85072),a=e.n(o),s=e(47703),i={insert:"head",singleton:!1};a()(s.A,i);s.A.locals;var l=e(61959),c={insert:"head",singleton:!1};a()(l.A,c);l.A.locals;var u=e(14486);function p(n){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},p(n)}function d(){d=function(){return t};var n,t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(n,t,e){n[t]=e.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{c({},"")}catch(n){c=function(n,t,e){return n[t]=e}}function u(n,t,e,r){var a=t&&t.prototype instanceof v?t:v,s=Object.create(a.prototype),i=new O(r||[]);return o(s,"_invoke",{value:B(n,e,i)}),s}function b(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var m="suspendedStart",f="suspendedYield",g="executing",h="completed",y={};function v(){}function x(){}function _(){}var w={};c(w,s,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(S([])));k&&k!==e&&r.call(k,s)&&(w=k);var C=_.prototype=v.prototype=Object.create(w);function $(n){["next","throw","return"].forEach((function(t){c(n,t,(function(n){return this._invoke(t,n)}))}))}function L(n,t){function e(o,a,s,i){var l=b(n[o],n,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==p(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(n){e("next",n,s,i)}),(function(n){e("throw",n,s,i)})):t.resolve(u).then((function(n){c.value=n,s(c)}),(function(n){return e("throw",n,s,i)}))}i(l.arg)}var a;o(this,"_invoke",{value:function(n,r){function o(){return new t((function(t,o){e(n,r,t,o)}))}return a=a?a.then(o,o):o()}})}function B(t,e,r){var o=m;return function(a,s){if(o===g)throw Error("Generator is already running");if(o===h){if("throw"===a)throw s;return{value:n,done:!0}}for(r.method=a,r.arg=s;;){var i=r.delegate;if(i){var l=N(i,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var c=b(t,e,r);if("normal"===c.type){if(o=r.done?h:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=h,r.method="throw",r.arg=c.arg)}}}function N(t,e){var r=e.method,o=t.iterator[r];if(o===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=n,N(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=b(o,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,y;var s=a.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function z(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function P(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function O(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(z,this),this.reset(!0)}function S(t){if(t||""===t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(r.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(p(t)+" is not iterable")}return x.prototype=_,o(C,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:x,configurable:!0}),x.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,_):(n.__proto__=_,c(n,l,"GeneratorFunction")),n.prototype=Object.create(C),n},t.awrap=function(n){return{__await:n}},$(L.prototype),c(L.prototype,i,(function(){return this})),t.AsyncIterator=L,t.async=function(n,e,r,o,a){void 0===a&&(a=Promise);var s=new L(u(n,e,r,o),a);return t.isGeneratorFunction(e)?s:s.next().then((function(n){return n.done?n.value:s.next()}))},$(C),c(C,l,"Generator"),c(C,s,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var r in t)e.push(r);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(r,o){return i.type="throw",i.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===n||"continue"===n)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=n,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(s)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),y},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),P(e),y}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;P(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}},t}function b(n,t,e,r,o,a,s){try{var i=n[a](s),l=i.value}catch(n){return void e(n)}i.done?t(l):Promise.resolve(l).then(r,o)}function m(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function s(n){b(a,r,o,s,i,"next",n)}function i(n){b(a,r,o,s,i,"throw",n)}s(void 0)}))}}const f={name:"Index",components:{Create:(0,u.A)(r,(function(){var n=this,t=n._self._c;return t("div",[t("b-modal",{attrs:{id:"new-branch",scrollable:"",centered:"",title:"Создать новый филиал"},scopedSlots:n._u([{key:"modal-footer",fn:function(){return[t("div",{staticClass:"w-100"},[t("b-button",{staticClass:"float-right btn-travel",attrs:{variant:"primary",disabled:""===n.new_branch.country||""===n.new_branch.city},on:{click:n.createBranch}},[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[n.loading?t("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):n._e(),n._v("\n                        Сохранить\n                    ")])]),n._v(" "),t("b-button",{staticClass:"float-right mr-2 btn-travel",attrs:{variant:"primary"},on:{click:n.cancel}},[n._v("\n                    Отмена\n                ")])],1)]},proxy:!0}])},[t("div",{staticClass:"row m-auto w-100 justify-content-center align-items-start",staticStyle:{"min-height":"210px"}},[t("div",{staticClass:"col-12"},[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Страна"}},[t("multiselect",{attrs:{options:n.countries,"option-height":25,placeholder:"Выберете страну","show-labels":!1,maxHeight:150,label:"Name","track-by":"Name",loading:n.isCountriesLoading,disabled:n.isCountriesLoading,"allow-empty":!1},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}},{key:"option",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}}]),model:{value:n.new_branch.country,callback:function(t){n.$set(n.new_branch,"country",t)},expression:"new_branch.country"}})],1)],1),n._v(" "),t("div",{staticClass:"col-12"},[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Город"}},[t("b-form-input",{staticClass:"travel-input",attrs:{placeholder:"Введите город"},model:{value:n.new_branch.city,callback:function(t){n.$set(n.new_branch,"city",t)},expression:"new_branch.city"}})],1)],1)])]),n._v(" "),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-branch",modifiers:{"new-branch":!0}}],staticClass:"w-100 btn-travel",attrs:{variant:"primary"}},[n._v("Создать филиал")])],1)}),[],!1,null,"17fda86e",null).exports},data:function(){return{order_by:"id",sortDesc:!1,totalRows:1,currentPage:1,perPage:5,order_direction:"asc",filter:null,filterOn:[],pageOptions:[5,10,15,25,50,100],fields:[{key:"id",label:"ID",sortable:!0,order_direction:"desc"},{key:"country",label:"Страна",sortable:!0,order_direction:"desc"},{key:"city",label:"Город",sortable:!0,order_direction:"desc"},{key:"action1",label:"Показать"},{key:"action2",label:"Действия"}],loading:!1}},computed:{sortOptions:function(){return this.fields.filter((function(n){return n.sortable})).map((function(n){return{text:n.label,value:n.key}}))},branches:function(){return this.$store.getters.branches},countries:function(){return this.$store.getters.countries},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading}},mounted:function(){this.branches.length<=0&&this.loadBranches()},methods:{seeDepartments:function(n){this.$router.push("/admin/branches/"+n)},loadBranches:function(){var n=this;return m(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.$store.dispatch("setBranches");case 2:case"end":return t.stop()}}),t)})))()},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Филиалы",text:n})},remove:function(n){var t=this;return m(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.dispatch("removeBranch",n).then((function(n){t.$store.dispatch("sendNotification",{message:n.data.message})}));case 1:case"end":return e.stop()}}),e)})))()},save:function(n,t,e){var r=this;return m(d().mark((function o(){return d().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r.$store.dispatch("saveBranch",{id:t,key:e,value:n}).then((function(n){r.$store.commit("saveBranch",n.data.branch),r.$store.dispatch("sendNotification",{message:n.data.message})}));case 1:case"end":return o.stop()}}),o)})))()},onFiltered:function(n){this.totalRows=n.length,this.currentPage=1}}};var g=e(69680),h={insert:"head",singleton:!1};a()(g.A,h);g.A.locals;var y=e(30596),v={insert:"head",singleton:!1};a()(y.A,v);y.A.locals;const x=(0,u.A)(f,(function(){var n=this,t=n._self._c;return t("b-container",{attrs:{fluid:""}},[t("div",{staticClass:"row w-100 my-3 mx-auto"},[t("div",{staticClass:"col-12 col-md-4 col-lg-6"},[t("create")],1)]),n._v(" "),t("b-row",[t("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Сортировка","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"order_bySelect1"}},[t("b-input-group",{attrs:{size:"sm"}},[t("b-form-select",{staticClass:"w-75",attrs:{id:"order_bySelect1",options:n.sortOptions},scopedSlots:n._u([{key:"first",fn:function(){return[t("option",{attrs:{value:""}},[n._v("-- none --")])]},proxy:!0}]),model:{value:n.order_by,callback:function(t){n.order_by=t},expression:"order_by"}}),n._v(" "),t("b-form-select",{staticClass:"w-25",attrs:{size:"sm",disabled:!n.order_by},model:{value:n.sortDesc,callback:function(t){n.sortDesc=t},expression:"sortDesc"}},[t("option",{domProps:{value:!1}},[n._v("Asc")]),n._v(" "),t("option",{domProps:{value:!0}},[n._v("Desc")])])],1)],1)],1),n._v(" "),t("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[t("b-form-group",{staticClass:"mb-0",attrs:{label:"Поиск","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[t("b-input-group",{attrs:{size:"sm"}},[t("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Введите для поиска"},model:{value:n.filter,callback:function(t){n.filter=t},expression:"filter"}}),n._v(" "),t("b-input-group-append",[t("b-button",{attrs:{disabled:!n.filter},on:{click:function(t){n.filter=""}}},[n._v("Очистить")])],1)],1)],1)],1),n._v(" "),t("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[t("b-form-group",{staticClass:"mb-0",attrs:{label:"На странице","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect1"}},[t("b-form-select",{attrs:{id:"perPageSelect1",size:"sm",options:n.pageOptions},model:{value:n.perPage,callback:function(t){n.perPage=t},expression:"perPage"}})],1)],1),n._v(" "),t("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[t("b-pagination",{staticClass:"my-0",attrs:{"total-rows":n.totalRows,"per-page":n.perPage,align:"fill",size:"sm"},model:{value:n.currentPage,callback:function(t){n.currentPage=t},expression:"currentPage"}})],1)],1),n._v(" "),t("b-table",{attrs:{"show-empty":"",small:"",stacked:"md",items:n.branches,fields:n.fields,"current-page":n.currentPage,"per-page":n.perPage,filter:n.filter,filterIncludedFields:n.filterOn,"sort-by":n.order_by,"sort-desc":n.sortDesc,"sort-direction":n.order_direction,busy:n.loading,"empty-text":"Нет записей для отображения","empty-filtered-text":"Нет записей, соответствующих вашему запросу"},on:{"update:sortBy":function(t){n.order_by=t},"update:sort-by":function(t){n.order_by=t},"update:sortDesc":function(t){n.sortDesc=t},"update:sort-desc":function(t){n.sortDesc=t},filtered:n.onFiltered},scopedSlots:n._u([{key:"cell(country)",fn:function(e){return[t("b-input-group",{attrs:{size:"sm"}},[n._v("\n                    "+n._s(e.item.country)+"\n")])]}},{key:"cell(city)",fn:function(e){return[t("b-input-group",{attrs:{size:"sm"}},[t("b-form-input",{staticClass:"travel-input",attrs:{placeholder:"Введите город"},on:{blur:function(t){return n.save(t.target.value,e.item.id,"city")}},model:{value:e.item.city,callback:function(t){n.$set(e.item,"city",t)},expression:"data.item.city"}})],1)]}},{key:"cell(action1)",fn:function(e){return[t("b-input-group",{attrs:{size:"sm"}},[t("b-button",{staticClass:"btn btn-info mr-1 mb-1 btn-travel w-100",attrs:{disabled:null===e.item.id},on:{click:function(t){return n.seeDepartments(e.item.id)}}},[n._v("\n                        Отделения\n                    ")])],1)]}},{key:"cell(action2)",fn:function(e){return[t("b-input-group",{attrs:{size:"sm"}},[t("b-button",{staticClass:"btn btn-info mr-1 mb-1 btn-travel w-100",attrs:{disabled:null===e.item.id},on:{click:function(t){return n.remove(e.item.id)}}},[n._v("\n                        Удалить\n                    ")])],1)]}},{key:"table-busy",fn:function(){return[t("div",{staticClass:"text-center text-warning my-2"},[t("b-spinner",{staticClass:"align-middle",attrs:{variant:"warning"}}),n._v(" "),t("strong",[n._v("Загрузка...")])],1)]},proxy:!0}])})],1)}),[],!1,null,"1ecee446",null).exports}}]);
//# sourceMappingURL=4976.js.map