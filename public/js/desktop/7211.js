"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7211],{35073:(n,t,e)=>{e.d(t,{A:()=>l});var a=e(45627),o=e.n(a),i=e(76798),s=e.n(i)()(o());s.push([n.id,".section[data-v-03cdcdd4]{padding:0 16px}.modalbox[data-v-03cdcdd4]{overflow:hidden;padding-top:env(safe-area-inset-top)}.modalbox .modal-dialog[data-v-03cdcdd4]{bottom:0;left:0;margin:env(safe-area-inset-top) 0 0;min-width:100%;position:fixed;right:0;top:0;transform:translateY(100%)!important;transition:all .5s!important}.modalbox .modal-dialog .modal-content[data-v-03cdcdd4]{border:0;border-radius:0;bottom:0;left:0;margin:auto;overflow:hidden;padding-top:56px;position:absolute;right:0;top:0}.modalbox .modal-dialog .modal-content .modal-header[data-v-03cdcdd4]{align-items:center;background:#fff;border:0;border-bottom:1px solid #e1e1e1;border-radius:0;display:flex;justify-content:space-between;left:0;margin:0;min-height:56px;padding:10px 16px;position:fixed;right:0;top:0;width:100%;z-index:100}.modalbox .modal-dialog .modal-content .modal-header .modal-title[data-v-03cdcdd4]{color:#063065;font-family:Open Sans;font-size:17px;font-weight:900;margin:0}.modalbox .modal-dialog .modal-content .modal-header a[data-v-03cdcdd4]{color:#063065}.modalbox .modal-dialog .modal-content .modal-body[data-v-03cdcdd4]{overflow:auto;padding:20px 16px}.modalbox.show .modal-dialog[data-v-03cdcdd4]{transform:translate(0)!important}.form-group[data-v-03cdcdd4]{width:100%}.form-group .label[data-v-03cdcdd4]{color:#063065;display:block;font-family:Open Sans;font-size:12px;font-weight:900;line-height:1.2em;margin:0;text-align:left}.form-group textarea[data-v-03cdcdd4]{resize:none}.form-group .input-info[data-v-03cdcdd4]{color:#a1a1a2;font-size:11px}.form-group .clear-input[data-v-03cdcdd4]{align-items:center;bottom:0;color:#4f5050;display:flex;font-size:22px;height:38px;justify-content:center;opacity:.5;position:absolute;right:6px;top:0;width:32px}.form-group .clear-input[data-v-03cdcdd4]:active,.form-group .clear-input[data-v-03cdcdd4]:hover{opacity:.8}.form-group .input-wrapper[data-v-03cdcdd4]{position:relative}.form-group .input-wrapper.not-empty .clear-input[data-v-03cdcdd4]{display:flex}.form-group .input-wrapper.active .label[data-v-03cdcdd4]{color:#f08b23!important}.form-group.basic[data-v-03cdcdd4]{margin:0;padding:8px 0}.form-group.basic .custom-select[data-v-03cdcdd4],.form-group.basic .form-control[data-v-03cdcdd4]{background:transparent;border:none;border-bottom:1px solid #e1e1e1;border-radius:0;color:#141515;font-size:15px;height:40px;padding:0 30px 0 0}.form-group.basic .custom-select[data-v-03cdcdd4]:focus,.form-group.basic .form-control[data-v-03cdcdd4]:focus{border-bottom-color:#f08b23;box-shadow:inset 0 -1px 0 0 #f08b23}.form-group.basic textarea.form-control[data-v-03cdcdd4]{height:auto;padding:7px 40px 7px 0}.form-group.basic.animated .label[data-v-03cdcdd4]{margin-top:20px;opacity:0;position:absolute;top:-3px;transition:all .2s}.form-group.basic.animated .input-wrapper[data-v-03cdcdd4]{padding-top:5px}.form-group.basic.animated .input-wrapper.not-empty .label[data-v-03cdcdd4]{margin-top:0;opacity:1}.form-button-group[data-v-03cdcdd4]{align-items:center;background:#fff;bottom:0;display:flex;justify-content:center;left:0;min-height:84px;padding-bottom:env(safe-area-inset-bottom);padding-left:16px;padding-right:16px;position:fixed;right:0;width:100%}.form-button-group .btn[data-v-03cdcdd4]{background:#f08b23;border:0;border-radius:50px;color:#fff;font-family:Open Sans;font-size:24px;font-weight:900;outline:none;text-transform:uppercase}form-button-group .btn[data-v-03cdcdd4]:focus{box-shadow:none!important;outline:none!important}.modal-title[data-v-03cdcdd4]{color:#062348;font-family:Open Sans;font-weight:900}","",{version:3,sources:["webpack://./resources/js/desktop/mobile/pages/Manager/Clients.vue"],names:[],mappings:"AAgkBA,0BACA,cACA,CACA,2BAEA,eAAA,CADA,oCAEA,CAEA,yCASA,QAAA,CAHA,MAAA,CAIA,mCAAA,CARA,cAAA,CAGA,cAAA,CAGA,OAAA,CADA,KAAA,CANA,oCAAA,CAGA,4BAOA,CAEA,wDAEA,QAAA,CADA,eAAA,CAQA,QAAA,CAFA,MAAA,CAJA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CAEA,OAAA,CAEA,KACA,CAEA,sEAQA,kBAAA,CASA,eAAA,CAhBA,QAAA,CAMA,+BAAA,CAFA,eAAA,CACA,YAAA,CAGA,6BAAA,CAGA,MAAA,CAFA,QAAA,CAPA,eAAA,CACA,iBAAA,CAOA,cAAA,CAEA,OAAA,CACA,KAAA,CACA,UAAA,CACA,WAEA,CAEA,mFAEA,aAAA,CAEA,qBAAA,CADA,cAAA,CAEA,eAAA,CAJA,QAKA,CACA,wEACA,aACA,CAEA,oEAEA,aAAA,CADA,iBAEA,CAEA,8CACA,gCACA,CACA,6BACA,UACA,CAEA,oCAIA,aAAA,CACA,aAAA,CAGA,qBAAA,CAPA,cAAA,CAEA,eAAA,CAGA,iBAAA,CAJA,QAAA,CAKA,eAEA,CAEA,sCACA,WACA,CAEA,yCAEA,aAAA,CADA,cAEA,CAEA,0CAEA,kBAAA,CAQA,QAAA,CANA,aAAA,CAHA,YAAA,CAKA,cAAA,CADA,WAAA,CAFA,sBAAA,CASA,UAAA,CALA,iBAAA,CACA,SAAA,CACA,KAAA,CAEA,UAEA,CAEA,iGACA,UACA,CAEA,4CACA,iBACA,CAEA,mEACA,YACA,CAEA,0DACA,uBACA,CAEA,mCAEA,QAAA,CADA,aAEA,CAEA,mGAEA,sBAAA,CAEA,WAAA,CAAA,+BAAA,CAEA,eAAA,CAEA,aAAA,CACA,cAAA,CAFA,WAAA,CAFA,kBAKA,CAEA,+GAEA,2BAAA,CACA,mCACA,CAEA,yDACA,WAAA,CACA,sBACA,CAEA,mDACA,eAAA,CACA,SAAA,CAGA,iBAAA,CAFA,QAAA,CACA,kBAEA,CAEA,2DACA,eACA,CAEA,4EACA,YAAA,CACA,SACA,CAEA,oCAWA,kBAAA,CAHA,eAAA,CANA,QAAA,CAQA,YAAA,CAEA,sBAAA,CATA,MAAA,CAMA,eAAA,CAIA,0CAAA,CAPA,iBAAA,CACA,kBAAA,CANA,cAAA,CAGA,OAAA,CACA,UASA,CACA,yCACA,kBAAA,CAMA,QAAA,CACA,kBAAA,CANA,UAAA,CAGA,qBAAA,CADA,cAAA,CAEA,eAAA,CAGA,YAAA,CANA,wBAOA,CACA,8CAEA,yBAAA,CADA,sBAEA,CACA,8BACA,aAAA,CAEA,qBAAA,CADA,eAEA",sourcesContent:['<template>\n    <div>\n        <div id="mobile-table" class="row m-auto mb-4 px-4 justify-content-center align-items-center" style="width: 100%;height: 100%;">\n            <div class="modal fade modalbox show"\n                 id="newClientModalBox"  data-bs-backdrop="static"\n                 tabindex="-1" role="dialog"\n                 aria-modal="true"\n            >\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        <div class="modal-header">\n                            <h5 class="modal-title">Создать клиента</h5>\n                            <a href="javascript:;"  data-bs-dismiss="modal" style="text-decoration: none">Закрыть</a>\n                        </div>\n                        <div class="modal-body">\n                            <div class="start-form" style="margin-bottom: 110px">\n                                <div class="section mx-auto">\n                                    <div class="row my-3">\n                                        <ValidationObserver v-slot="{ invalid }">\n                                            <div class="col-12">\n                                                <div class="row w-100 m-auto">\n                                                    <div class="col-md-12">\n                                                        <ValidationProvider name="email" rules="required|email" v-slot="{ errors }" style="width:100%;">\n                                                            <base-input label="Email"\n                                                                        v-model="newClient.email"\n                                                                        placeholder="Email"\n                                                                        class="mb-0"\n                                                            >\n                                                            </base-input>\n                                                            <span class="validate-error">{{ errors[0] }}</span>\n                                                        </ValidationProvider>\n                                                    </div>\n                                                    <div class="col-md-12">\n                                                        <ValidationProvider name="lastName" rules="required" v-slot="{ errors }" style="width:100%;">\n                                                            <base-input label="Фамилия"\n                                                                        v-model="newClient.LastName"\n                                                                        placeholder="Фамилия"\n                                                                        class="mb-0"\n                                                            >\n                                                            </base-input>\n                                                            <span class="validate-error">{{ errors[0] }}</span>\n                                                        </ValidationProvider>\n                                                    </div>\n                                                    <div class="col-md-12">\n                                                        <ValidationProvider name="firstName" rules="required" v-slot="{ errors }" style="width:100%;">\n                                                            <base-input label="Имя"\n                                                                        v-model="newClient.FirstName"\n                                                                        placeholder="Имя"\n                                                                        class="mb-0"\n                                                            >\n                                                            </base-input>\n                                                            <span class="validate-error">{{ errors[0] }}</span>\n                                                        </ValidationProvider>\n                                                    </div>\n                                                    <div class="col-md-12">\n                                                        <base-input label="Отчество"\n                                                                    v-model="newClient.MiddleName"\n                                                                    placeholder="Отчество"\n                                                                    class="mb-0"\n                                                        >\n                                                        </base-input>\n                                                    </div>\n                                                    <div class="col-md-12">\n                                                        <ValidationProvider name="phone" rules="required|phone" v-slot="{ errors }" style="width:100%;">\n                                                            <base-input label="Телефон"\n                                                                        placeholder="Телефон"\n                                                                        v-model="newClient.Phone"\n                                                                        v-mask="[\'+# (###) ###-##-##\',\'+## (###) ###-##-##\']"\n                                                                        class="mb-0"\n                                                            >\n                                                            </base-input>\n                                                            <span class="validate-error">{{ errors[0] }}</span>\n                                                        </ValidationProvider>\n                                                    </div>\n                                                    <div class="col-md-12 pe-md-1">\n                                                        <ValidationProvider name="City" rules="required" v-slot="{ errors }" style="width:100%;">\n                                                            <div class="form-group mb-0">\n                                                                <label class="control-label">Город</label>\n                                                                <multiselect\n                                                                    v-model="newClient.City"\n                                                                    :options="branches"\n                                                                    :option-height="25"\n                                                                    placeholder="Выберите город"\n                                                                    :show-labels="false"\n                                                                    :maxHeight="200"\n                                                                    :loading="branches.length===0"\n                                                                    :disabled="branches.length===0"\n                                                                    :allow-empty="false"\n                                                                    track-by="city"\n                                                                    label="city"\n                                                                >\n                                                                    <template slot="singleLabel" slot-scope="props">\n                                                    <span class="option__desc">\n                                                        <span class="option__title" style="font-size: 0.7500000025rem;line-height: 1.428571" v-if="props.option.city">{{ props.option.city}}</span>\n                                                    </span>\n                                                                    </template>\n                                                                    <template slot="option" slot-scope="props">\n                                                    <span class="option__desc">\n                                                        <span class="option__title" style="font-size: 0.7500000025rem;line-height: 1.428571">{{ props.option.city}}</span>\n                                                    </span>\n                                                                    </template>\n                                                                </multiselect>\n                                                            </div>\n                                                            <span class="validate-error">{{ errors[0] }}</span>\n                                                        </ValidationProvider>\n                                                    </div>\n                                                    <div class="col-md-12 px-md-1">\n                                                        <ValidationProvider name="department" rules="required" v-slot="{ errors }" style="width:100%;">\n                                                            <label class="control-label">Отделение</label>\n                                                            <multiselect\n                                                                v-model="newClient.Department"\n                                                                :options="newClient.City.departments"\n                                                                :option-height="25"\n                                                                placeholder="Выберите отделение"\n                                                                :show-labels="false"\n                                                                :maxHeight="200"\n                                                                :loading="newClient.City.departments.length===0"\n                                                                :disabled="newClient.City.departments.length===0"\n                                                                :allow-empty="false"\n                                                                label="address"\n                                                                track-by="address"\n                                                            >\n                                                                <template slot="singleLabel" slot-scope="props">\n                                                    <span class="option__desc">\n                                                        <span class="option__title" style="font-size: 0.7500000025rem;line-height: 1.428571">{{ props.option.address}}</span>\n                                                    </span>\n                                                                </template>\n                                                                <template slot="option" slot-scope="props">\n                                                    <span class="option__desc">\n                                                        <span class="option__title" style="font-size: 0.7500000025rem;line-height: 1.428571">{{ props.option.address }}</span>\n                                                    </span>\n                                                                </template>\n                                                            </multiselect>\n                                                            <span class="validate-error">{{ errors[0] }}</span>\n                                                        </ValidationProvider>\n                                                    </div>\n                                                    <div class="col-md-12">\n                                                        <label class="control-label">\n                                                            Менеджер\n                                                        </label>\n                                                        <ValidationProvider name="manager" rules="required" v-slot="{ errors }" style="width:100%;">\n                                                            <multiselect\n                                                                v-model="manager"\n                                                                :options="managers"\n                                                                :option-height="25"\n                                                                placeholder="Выберите менеджера"\n                                                                :show-labels="false"\n                                                                :maxHeight="200"\n                                                                label="info"\n                                                                track-by="id"\n                                                                :loading="managers.length<=0"\n                                                                :disabled="managers.length<=0"\n                                                                :allow-empty="false"\n                                                            >\n                                                                <template slot="singleLabel" slot-scope="props">\n                                                    <span class="option__desc">\n                                                        <span class="option__title">{{ props.option.info.FullName }}</span>\n                                                    </span>\n                                                                </template>\n                                                                <template slot="option" slot-scope="props">\n                                                    <span class="option__desc">\n                                                        <span class="option__title">{{ props.option.info.FullName }}</span>\n                                                    </span>\n                                                                </template>\n                                                            </multiselect>\n                                                            <span class="validate-error">{{ errors[0] }}</span>\n                                                        </ValidationProvider>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class="col-12">\n                                                <div class="row w-100 m-auto">\n                                                    <p>Пароль для входа в систему созданного пользователя: <span style="font-weight: 700; color: #f8a105">TravelClub</span></p>\n                                                </div>\n                                            </div>\n                                            <div class="col-12 contact-btn form-button-group">\n                                                <button type="submit" class="btn btn-block btn-lg" style="width: 100%" :disabled="invalid||loading" @click="saveClient">\n                                                    <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                                                        <span v-if="loading" class="spinner-border spinner-border-sm mx-2" role="status" aria-hidden="true"></span>\n                                                        <span v-if="loading" class="sr-only">Loading...</span>\n                                                        Сохранить\n                                                    </div>\n                                                </button>\n                                            </div>\n                                        </ValidationObserver>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <data-table\n                title="Клиенты"\n                :columns="columns"\n                :rows="clients"\n                :clickable="true"\n                :perPage="[ 5, 10, 25, 50 ]"\n                :expandMode="false"\n                :addButton="true"\n                :addButtonClick="addClient"\n                :loadingAnimation="load"\n            >\n                <th slot="thead-tr" style="width: auto" >\n                   Действия\n                </th>\n                <template slot="tbody-tr" slot-scope="props">\n                    <td data-title="Действия">\n                        <button v-if="!props.row.isLoading" class="btn waves-effect" style="outline: none;"\n                                @click="deleteClient(props.row)"\n                        >\n                            <i class="material-icons" style="color: #0d274b;">delete</i>\n                        </button>\n                        <div v-if="props.row.isLoading" class="d-flex align-items-center float-left" style="padding: .375rem .75rem;">\n                            <div class="spinner-border text-center" style="width: 24px; height: 24px;" role="status">\n                                <span class="sr-only">Loading...</span>\n                            </div>\n                        </div>\n                        <button v-if="!props.row.isLoading" class="btn waves-effect"\n                                @click="seeClientProfile(props.row.id)"\n                        >\n                            <i class="material-icons" style="color: #0d274b;">edit</i>\n                        </button>\n                    </td>\n                </template>\n            </data-table>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mask} from \'vue-the-mask\'\n    export default {\n        name: "Clients",\n        data: () => ({\n            columns: [\n                {\n                    label: \'ID\',\n                    field: \'id\',\n                },\n                {\n                    label: \'Имя\',\n                    field: \'info.FullName\',\n                },\n                // {\n                //     label: \'Логин\',\n                //     field: \'login\',\n                // },\n                {\n                    label: \'Email\',\n                    field: \'email\',\n                },\n                {\n                    label: \'Телефон\',\n                    field: \'info.Phone\',\n                },\n            ],\n            window: {\n                width: 0,\n                height: 0\n            },\n            manager:null,\n            countItems:3,\n            newClient:{\n                email: \'\',\n                role:\'client\',\n                is_admin: 0,\n                is_manager: 0,\n                FullName: \'\',\n                FirstName: \'\',\n                MiddleName: \'\',\n                LastName: \'\',\n                // name: \'\',\n                Phone: \'\',\n                ManagerId:\'\',\n                City:\'\',\n                Department:\'\',\n                // email: \'\',\n                // password: \'\',\n            },\n            load:true,\n            loading:false,\n        }),\n        created() {\n            if (this.managers.length===0)\n            {\n                this.$store.dispatch(\'setManagers\')\n            }\n        },\n\n        mounted() {\n            this.load = true;\n            if (this.clients.length===0)\n            {\n                this.$store.dispatch(\'setClients\').then(response => {\n                    this.load = false;\n                })\n            }\n            console.log(this.managers)\n        },\n        computed:\n            {\n                menu() {\n                    return this.$store.getters.menu\n                },\n                clients() {\n                    return this.$store.getters.clients\n                },\n                managers() {\n                    return this.$store.getters.managers\n                },\n                preloader() {\n                    return this.$store.getters.preloader\n                },\n\n            },\n        methods:\n            {\n                addClient: function(){\n                    this.$store.dispatch(\'openModal\', \'#newClientModalBox\')\n                },\n                saveClient: function(){\n                    this.loading=true;\n                    this.newClient.FullName= this.newClient.LastName+\' \'+ this.newClient.FirstName+\' \'+this.newClient.MiddleName;\n                    this.newClient.ManagerId = this.manager.id;\n                    console.log( this.newClient);\n                    this.$store.dispatch(\'newClient\', this.newClient)\n                        .then(response => {\n                            this.sendMessage(\'Клиент успешно сохранён\')\n                            this.loading=false;\n                            this.$store.dispatch(\'closeModal\', \'#newClientModalBox\');\n                    });\n\n                },\n                editClient(id) {\n                    this.sendMessage(\'Клиент успешно обнавлён\')\n                },\n                deleteClient(row) {\n                    row.isLoading = true;\n                    this.$store.dispatch(\'deleteClient\', row.id)\n                        .then(response => {\n                            row.isLoading = false;\n                            this.sendMessage(\'Клиент успешно удалён\');\n                    });\n                },\n                seeClientProfile(id) {\n                    this.$router.push(\'/manager/client-profile/\'+id)\n                },\n                onRowClick: function(row) {\n                    this.$router.push(\'/manager/client-profile/\'+row.id)\n                },\n                sendMessage(message) {\n                    this.$notify({\n                        group: \'info\',\n                        type: \'travel\',\n                        title: \'Сообщение от TravelClub\',\n                        text: message\n                    });\n                },\n            },\n        directives: {mask}\n    }\n<\/script>\n\n<style scoped>\n    .section {\n        padding: 0 16px;\n    }\n    .modalbox {\n        padding-top: env(safe-area-inset-top);\n        overflow: hidden;\n    }\n\n    .modalbox .modal-dialog {\n        transform: translate(0, 100%) !important;\n        min-width: 100%;\n        margin: 0;\n        transition: 0.5s all !important;\n        position: fixed;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        margin-top: env(safe-area-inset-top);\n    }\n\n    .modalbox .modal-dialog .modal-content {\n        border-radius: 0;\n        border: 0;\n        margin: auto;\n        overflow: hidden;\n        padding-top: 56px;\n        position: absolute;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        top: 0;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header {\n        border: 0;\n        padding: 0;\n        min-height: 56px;\n        padding: 10px 16px;\n        border-radius: 0;\n        display: flex;\n        border-bottom: 1px solid #E1E1E1;\n        align-items: center;\n        justify-content: space-between;\n        margin: 0;\n        position: fixed;\n        left: 0;\n        right: 0;\n        top: 0;\n        width: 100%;\n        z-index: 100;\n        background: #FFF;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-header .modal-title {\n        margin: 0;\n        color: #063065;\n        font-size: 17px;\n        font-family: "Open Sans";\n        font-weight: 900;\n    }\n    .modalbox .modal-dialog .modal-content .modal-header a{\n        color: #063065;\n    }\n\n    .modalbox .modal-dialog .modal-content .modal-body {\n        padding: 20px 16px;\n        overflow: auto;\n    }\n\n    .modalbox.show .modal-dialog {\n        transform: translate(0, 0) !important;\n    }\n    .form-group {\n        width: 100%;\n    }\n\n    .form-group .label {\n        font-size: 12px;\n        margin: 0;\n        font-weight: 900;\n        color: #063065;\n        display: block;\n        line-height: 1.2em;\n        text-align: left;\n        font-family: Open Sans;\n    }\n\n    .form-group textarea {\n        resize: none;\n    }\n\n    .form-group .input-info {\n        font-size: 11px;\n        color: #A1A1A2;\n    }\n\n    .form-group .clear-input {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #4F5050;\n        height: 38px;\n        font-size: 22px;\n        position: absolute;\n        right: 6px;\n        top: 0px;\n        bottom: 0;\n        width: 32px;\n        opacity: 0.5;\n    }\n\n    .form-group .clear-input:hover, .form-group .clear-input:active {\n        opacity: 0.8;\n    }\n\n    .form-group .input-wrapper {\n        position: relative;\n    }\n\n    .form-group .input-wrapper.not-empty .clear-input {\n        display: flex;\n    }\n\n    .form-group .input-wrapper.active .label {\n        color: #f08b23 !important;\n    }\n\n    .form-group.basic {\n        padding: 8px 0;\n        margin: 0;\n    }\n\n    .form-group.basic .form-control,\n    .form-group.basic .custom-select {\n        background: transparent;\n        border: none;\n        border-bottom: 1px solid #E1E1E1;\n        padding: 0 30px 0 0;\n        border-radius: 0;\n        height: 40px;\n        color: #141515;\n        font-size: 15px;\n    }\n\n    .form-group.basic .form-control:focus,\n    .form-group.basic .custom-select:focus {\n        border-bottom-color: #f08b23;\n        box-shadow: inset 0 -1px 0 0 #f08b23;\n    }\n\n    .form-group.basic textarea.form-control {\n        height: auto;\n        padding: 7px 40px 7px 0;\n    }\n\n    .form-group.basic.animated .label {\n        margin-top: 20px;\n        opacity: 0;\n        top: -3px;\n        transition: 0.2s all;\n        position: absolute;\n    }\n\n    .form-group.basic.animated .input-wrapper {\n        padding-top: 5px;\n    }\n\n    .form-group.basic.animated .input-wrapper.not-empty .label {\n        margin-top: 0;\n        opacity: 1;\n    }\n\n    .form-button-group {\n        position: fixed;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        width: 100%;\n        padding-left: 16px;\n        padding-right: 16px;\n        background: #FFF;\n        min-height: 84px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding-bottom: env(safe-area-inset-bottom);\n    }\n    .form-button-group .btn {\n        background: #f08b23;\n        color: white;\n        text-transform: uppercase;\n        font-size: 24px;\n        font-family: "Open Sans";\n        font-weight: 900;\n        border: 0;\n        border-radius: 50px;\n        outline: none;\n    }\n    form-button-group .btn:focus {\n        outline: none !important;\n        box-shadow: none !important;\n    }\n    .modal-title{\n        color: #062348;\n        font-weight: 900;\n        font-family: "Open Sans";\n    }\n</style>\n'],sourceRoot:""}]);const l=s},27211:(n,t,e)=>{e.r(t),e.d(t,{default:()=>r});const a={name:"Clients",data:function(){return{columns:[{label:"ID",field:"id"},{label:"Имя",field:"info.FullName"},{label:"Email",field:"email"},{label:"Телефон",field:"info.Phone"}],window:{width:0,height:0},manager:null,countItems:3,newClient:{email:"",role:"client",is_admin:0,is_manager:0,FullName:"",FirstName:"",MiddleName:"",LastName:"",Phone:"",ManagerId:"",City:"",Department:""},load:!0,loading:!1}},created:function(){0===this.managers.length&&this.$store.dispatch("setManagers")},mounted:function(){var n=this;this.load=!0,0===this.clients.length&&this.$store.dispatch("setClients").then((function(t){n.load=!1})),console.log(this.managers)},computed:{menu:function(){return this.$store.getters.menu},clients:function(){return this.$store.getters.clients},managers:function(){return this.$store.getters.managers},preloader:function(){return this.$store.getters.preloader}},methods:{addClient:function(){this.$store.dispatch("openModal","#newClientModalBox")},saveClient:function(){var n=this;this.loading=!0,this.newClient.FullName=this.newClient.LastName+" "+this.newClient.FirstName+" "+this.newClient.MiddleName,this.newClient.ManagerId=this.manager.id,console.log(this.newClient),this.$store.dispatch("newClient",this.newClient).then((function(t){n.sendMessage("Клиент успешно сохранён"),n.loading=!1,n.$store.dispatch("closeModal","#newClientModalBox")}))},editClient:function(n){this.sendMessage("Клиент успешно обнавлён")},deleteClient:function(n){var t=this;n.isLoading=!0,this.$store.dispatch("deleteClient",n.id).then((function(e){n.isLoading=!1,t.sendMessage("Клиент успешно удалён")}))},seeClientProfile:function(n){this.$router.push("/manager/client-profile/"+n)},onRowClick:function(n){this.$router.push("/manager/client-profile/"+n.id)},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:n})}},directives:{mask:e(29928).mask}};var o=e(85072),i=e.n(o),s=e(35073),l={insert:"head",singleton:!1};i()(s.A,l);s.A.locals;const r=(0,e(14486).A)(a,(function(){var n=this,t=n._self._c;return t("div",[t("div",{staticClass:"row m-auto mb-4 px-4 justify-content-center align-items-center",staticStyle:{width:"100%",height:"100%"},attrs:{id:"mobile-table"}},[t("div",{staticClass:"modal fade modalbox show",attrs:{id:"newClientModalBox","data-bs-backdrop":"static",tabindex:"-1",role:"dialog","aria-modal":"true"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[n._m(0),n._v(" "),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"start-form",staticStyle:{"margin-bottom":"110px"}},[t("div",{staticClass:"section mx-auto"},[t("div",{staticClass:"row my-3"},[t("ValidationObserver",{scopedSlots:n._u([{key:"default",fn:function(e){var a=e.invalid;return[t("div",{staticClass:"col-12"},[t("div",{staticClass:"row w-100 m-auto"},[t("div",{staticClass:"col-md-12"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"email",rules:"required|email"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.errors;return[t("base-input",{staticClass:"mb-0",attrs:{label:"Email",placeholder:"Email"},model:{value:n.newClient.email,callback:function(t){n.$set(n.newClient,"email",t)},expression:"newClient.email"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(a[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"lastName",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.errors;return[t("base-input",{staticClass:"mb-0",attrs:{label:"Фамилия",placeholder:"Фамилия"},model:{value:n.newClient.LastName,callback:function(t){n.$set(n.newClient,"LastName",t)},expression:"newClient.LastName"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(a[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"firstName",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.errors;return[t("base-input",{staticClass:"mb-0",attrs:{label:"Имя",placeholder:"Имя"},model:{value:n.newClient.FirstName,callback:function(t){n.$set(n.newClient,"FirstName",t)},expression:"newClient.FirstName"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(a[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("base-input",{staticClass:"mb-0",attrs:{label:"Отчество",placeholder:"Отчество"},model:{value:n.newClient.MiddleName,callback:function(t){n.$set(n.newClient,"MiddleName",t)},expression:"newClient.MiddleName"}})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"phone",rules:"required|phone"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.errors;return[t("base-input",{directives:[{name:"mask",rawName:"v-mask",value:["+# (###) ###-##-##","+## (###) ###-##-##"],expression:"['+# (###) ###-##-##','+## (###) ###-##-##']"}],staticClass:"mb-0",attrs:{label:"Телефон",placeholder:"Телефон"},model:{value:n.newClient.Phone,callback:function(t){n.$set(n.newClient,"Phone",t)},expression:"newClient.Phone"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(a[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-12 pe-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"City",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.errors;return[t("div",{staticClass:"form-group mb-0"},[t("label",{staticClass:"control-label"},[n._v("Город")]),n._v(" "),t("multiselect",{attrs:{options:n.branches,"option-height":25,placeholder:"Выберите город","show-labels":!1,maxHeight:200,loading:0===n.branches.length,disabled:0===n.branches.length,"allow-empty":!1,"track-by":"city",label:"city"},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[e.option.city?t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.city))]):n._e()])]}},{key:"option",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.city))])])]}}],null,!0),model:{value:n.newClient.City,callback:function(t){n.$set(n.newClient,"City",t)},expression:"newClient.City"}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(a[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-12 px-md-1"},[t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"department",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.errors;return[t("label",{staticClass:"control-label"},[n._v("Отделение")]),n._v(" "),t("multiselect",{attrs:{options:n.newClient.City.departments,"option-height":25,placeholder:"Выберите отделение","show-labels":!1,maxHeight:200,loading:0===n.newClient.City.departments.length,disabled:0===n.newClient.City.departments.length,"allow-empty":!1,label:"address","track-by":"address"},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.address))])])]}},{key:"option",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[n._v(n._s(e.option.address))])])]}}],null,!0),model:{value:n.newClient.Department,callback:function(t){n.$set(n.newClient,"Department",t)},expression:"newClient.Department"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(a[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"control-label"},[n._v("\n                                                        Менеджер\n                                                    ")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"manager",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.errors;return[t("multiselect",{attrs:{options:n.managers,"option-height":25,placeholder:"Выберите менеджера","show-labels":!1,maxHeight:200,label:"info","track-by":"id",loading:n.managers.length<=0,disabled:n.managers.length<=0,"allow-empty":!1},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.info.FullName))])])]}},{key:"option",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.info.FullName))])])]}}],null,!0),model:{value:n.manager,callback:function(t){n.manager=t},expression:"manager"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(a[0]))])]}}],null,!0)})],1)])]),n._v(" "),t("div",{staticClass:"col-12"},[t("div",{staticClass:"row w-100 m-auto"},[t("p",[n._v("Пароль для входа в систему созданного пользователя: "),t("span",{staticStyle:{"font-weight":"700",color:"#f8a105"}},[n._v("TravelClub")])])])]),n._v(" "),t("div",{staticClass:"col-12 contact-btn form-button-group"},[t("button",{staticClass:"btn btn-block btn-lg",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:a||n.loading},on:{click:n.saveClient}},[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[n.loading?t("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):n._e(),n._v(" "),n.loading?t("span",{staticClass:"sr-only"},[n._v("Loading...")]):n._e(),n._v("\n                                                    Сохранить\n                                                ")])])])]}}])})],1)])])])])])]),n._v(" "),t("data-table",{attrs:{title:"Клиенты",columns:n.columns,rows:n.clients,clickable:!0,perPage:[5,10,25,50],expandMode:!1,addButton:!0,addButtonClick:n.addClient,loadingAnimation:n.load},scopedSlots:n._u([{key:"tbody-tr",fn:function(e){return[t("td",{attrs:{"data-title":"Действия"}},[e.row.isLoading?n._e():t("button",{staticClass:"btn waves-effect",staticStyle:{outline:"none"},on:{click:function(t){return n.deleteClient(e.row)}}},[t("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[n._v("delete")])]),n._v(" "),e.row.isLoading?t("div",{staticClass:"d-flex align-items-center float-left",staticStyle:{padding:".375rem .75rem"}},[t("div",{staticClass:"spinner-border text-center",staticStyle:{width:"24px",height:"24px"},attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[n._v("Loading...")])])]):n._e(),n._v(" "),e.row.isLoading?n._e():t("button",{staticClass:"btn waves-effect",on:{click:function(t){return n.seeClientProfile(e.row.id)}}},[t("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[n._v("edit")])])])]}}])},[t("th",{staticStyle:{width:"auto"},attrs:{slot:"thead-tr"},slot:"thead-tr"},[n._v("\n               Действия\n            ")])])],1)])}),[function(){var n=this,t=n._self._c;return t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[n._v("Создать клиента")]),n._v(" "),t("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"javascript:;","data-bs-dismiss":"modal"}},[n._v("Закрыть")])])}],!1,null,"03cdcdd4",null).exports}}]);
//# sourceMappingURL=7211.js.map