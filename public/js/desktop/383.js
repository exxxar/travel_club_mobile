/*! For license information please see 383.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[383],{47579:(n,t,e)=>{e.d(t,{A:()=>s});var i=e(45627),o=e.n(i),a=e(76798),r=e.n(a)()(o());r.push([n.id,'.btn-travel{background:linear-gradient(0deg,#ffbf00,#f08b23);background-color:transparent;background-color:#f08b23!important;border-color:#f08b23!important;box-shadow:0 2px 2px 0 rgba(156,39,176,.14),0 3px 1px -2px rgba(156,39,176,.2),0 1px 5px 0 rgba(156,39,176,.12)!important;color:#fff!important}@media only screen and (max-width:767.98px){.vdp-container:not(.desktop) .vdp-picker{padding:8px;width:100%!important}.tour-module .cont .row{width:100%!important}.qty input{border:0;width:50%}}@media screen and (max-width:477px){.vdp-input{min-width:100%!important}.vdp-container{width:100%!important}}@media screen and (max-width:576px){.tour-module .cont{height:100%!important}}.vdp-datepicker__calendar{background:#fff;border:1px solid #ccc;padding:18px!important;position:absolute;width:300px;z-index:2!important}.vdp-datepicker input{border:1px solid orange!important;border-radius:20px;color:#062348!important;font-family:Open Sans!important;font-size:16px;font-weight:900;height:40px!important;line-height:32px;min-height:40px;outline:none;padding:8px;width:100%}.vdp-datepicker input::-moz-placeholder{color:#062348!important}.vdp-datepicker input::placeholder{color:#062348!important}.vdp-datepicker__calendar .day-header{color:#062348;font-family:Open Sans!important;font-weight:900!important}.vdp-datepicker__clear-button{color:#0f213d;font-size:36px;position:absolute;right:20px;top:-11px}.vdp-datepicker__calendar .cell{height:30px;line-height:30px}.vdp-datepicker__calendar .day{background-image:none!important;color:#0f213d;cursor:pointer;font-size:16px;font-weight:500;height:30px!important;line-height:30px;text-align:center}.vdp-datepicker__calendar .cell{border:1px solid transparent;display:inline-block;height:30px!important;line-height:30px!important;padding:0 5px;text-align:center;vertical-align:middle;width:14.285714285714286%}.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover{border:1px solid orange!important}.vdp-datepicker__calendar .cell.selected,.vdp-datepicker__calendar .cell.selected:hover{background:#ffa50070!important;background-image:none}.vdp-calendar .calendar-date .week .day.end-date:after,.vdp-calendar .calendar-date .week .day.start-date:before{background-color:orange!important}.vdp-calendar .calendar-date .week .day.end-date,.vdp-calendar .calendar-date .week .day.in-date-range,.vdp-calendar .calendar-date .week .day.start-date{background-color:#ffa50070!important}.vdp-calendar .calendar-date .week .day.today{border:1px solid orange!important}.vdp-calendar-footer .confirm,.vdp-calendar-footer .reset{font-family:Open Sans!important;font-weight:900!important}.vdp-calendar-footer .reset{color:#062348!important}.vdp-calendar-footer .confirm{color:orange!important}.vdp-calendar .calendar-month-title,.vdp-calendar .calendar-week-item{color:#062348!important;font-family:Open Sans!important;font-weight:900!important}.values__hotel-rating:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);background-position:50%;background-repeat:no-repeat;content:"";display:inline-block;height:12px;margin-left:2px;width:13px}.multiselect__tags .price{color:#062348;font-family:Open Sans!important;font-weight:900!important}.multiselect__tags .price:focus{box-shadow:none!important;outline:none!important}.multiselect-title{color:#062348!important;font-family:Bello Pro}.multiselect__tags{border:1px solid #f08b23;border-radius:20px;font-size:1rem;min-height:40px}.multiselect__tag{background:#062348}.multiselect__tag-icon:after{color:#fff}.multiselect__option--highlight,.multiselect__option--highlight:after,.multiselect__tag-icon:focus,.multiselect__tag-icon:hover{background:#f08b23}.multiselect{font-family:Open Sans!important;font-weight:900}.multiselect,.multiselect__placeholder{color:#062348}.multiselect__input:focus,.multiselect__single:focus{border-color:#062348}.multiselect__input::-moz-placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect__input::placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect--disabled{background:#fff}.multiselect--disabled .multiselect__select{background:transparent}.multiselect__spinner:after,.multiselect__spinner:before{background:transparent;border:3px solid transparent;border-radius:100%;border-top-color:orange;box-shadow:0 0 0 1px transparent;content:"";height:16px;left:50%;margin:-8px 0 0 -8px;position:absolute;top:50%;width:16px}.multiselect__spinner{border-radius:50px}.qty .count{color:#0f213d!important;font-family:Open Sans;font-size:25px;font-weight:700;line-height:30px;min-width:35px;padding:0 2px}.qty .count,.qty button{display:inline-block;text-align:center;vertical-align:top}.qty button{background:#f08b23;border:0;border-radius:50%;color:#fff;cursor:pointer;font:30px/1 Arial,sans-serif;height:30px;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;width:30px}.qty div{text-align:center}.qty .minus:hover,.qty .plus:hover{background:#0f213d!important;color:#fff}.qty input{border:0;width:60%}.qty input::-webkit-inner-spin-button,.qty input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.qty input:disabled{background-color:#fff}',"",{version:3,sources:["webpack://./resources/js/desktop/pages/Manager/Tours/Edit.vue"],names:[],mappings:"AA8wCA,YAEA,gDAAA,CACA,4BAAA,CACA,kCAAA,CACA,8BAAA,CACA,yHAAA,CALA,oBAMA,CACA,4CACA,yCAEA,WAAA,CADA,oBAEA,CACA,wBACA,oBACA,CACA,WACA,QAAA,CACA,SACA,CACA,CACA,oCACA,WACA,wBACA,CACA,eACA,oBACA,CACA,CACA,oCACA,mBACA,qBACA,CAEA,CACA,0BAIA,eAAA,CAEA,qBAAA,CAHA,sBAAA,CAFA,iBAAA,CAIA,WAAA,CAHA,mBAKA,CACA,sBAGA,iCAAA,CAKA,kBAAA,CAJA,uBAAA,CAOA,+BAAA,CANA,cAAA,CAOA,eAAA,CAFA,qBAAA,CAJA,gBAAA,CAGA,eAAA,CAFA,YAAA,CALA,WAAA,CAWA,UACA,CACA,wCACA,uBACA,CAFA,mCACA,uBACA,CACA,sCAEA,aAAA,CACA,+BAAA,CACA,yBACA,CACA,8BAKA,aAAA,CACA,cAAA,CAJA,iBAAA,CACA,UAAA,CACA,SAGA,CACA,gCAIA,WAAA,CACA,gBAIA,CAEA,+BASA,+BAAA,CALA,aAAA,CAEA,cAAA,CALA,cAAA,CACA,eAAA,CAQA,qBAAA,CAPA,gBAAA,CAEA,iBAEA,CAKA,gCAQA,4BAAA,CAPA,oBAAA,CAGA,qBAAA,CACA,0BAAA,CAHA,aAAA,CAIA,iBAAA,CACA,qBAAA,CAJA,yBAMA,CACA,kNAGA,iCACA,CAKA,wFACA,8BAAA,CACA,qBACA,CAKA,iHACA,iCACA,CAOA,0JACA,oCACA,CACA,8CACA,iCACA,CACA,0DACA,+BAAA,CACA,yBACA,CACA,4BACA,uBACA,CACA,8BACA,sBACA,CACA,sEACA,uBAAA,CACA,+BAAA,CACA,yBACA,CACA,4BAMA,gbAAA,CAEA,uBAAA,CADA,2BAAA,CANA,UAAA,CACA,oBAAA,CAGA,WAAA,CAFA,eAAA,CACA,UAKA,CACA,0BACA,aAAA,CACA,+BAAA,CACA,yBACA,CAEA,gCAEA,yBAAA,CADA,sBAEA,CAEA,mBACA,uBAAA,CACA,qBAEA,CACA,mBACA,wBAAA,CACA,kBAAA,CACA,cAAA,CACA,eACA,CACA,kBACA,kBACA,CACA,6BACA,UACA,CAOA,gIACA,kBACA,CACA,aAEA,+BAAA,CACA,eACA,CACA,uCAJA,aAMA,CACA,qDACA,oBACA,CACA,sCACA,uBAAA,CACA,+BAAA,CACA,eACA,CAJA,iCACA,uBAAA,CACA,+BAAA,CACA,eACA,CACA,uBACA,eACA,CACA,4CACA,sBACA,CACA,yDAaA,sBAAA,CAFA,4BAAA,CAHA,kBAAA,CAGA,uBAAA,CACA,gCAAA,CAVA,UAAA,CAKA,WAAA,CAHA,QAAA,CACA,oBAAA,CAJA,iBAAA,CAEA,OAAA,CAGA,UAQA,CACA,sBACA,kBACA,CAEA,YAUA,uBAAA,CADA,qBAAA,CANA,cAAA,CACA,eAAA,CACA,gBAAA,CAEA,cAAA,CADA,aAKA,CACA,wBAXA,oBAAA,CAOA,iBAAA,CANA,kBA0BA,CAhBA,YAcA,kBAAA,CACA,QAAA,CAHA,iBAAA,CALA,UAAA,CAHA,cAAA,CAMA,4BAAA,CADA,WAAA,CAIA,SAAA,CAZA,wBAAA,CACA,qBAAA,CACA,oBAAA,CAKA,UAQA,CACA,SACA,iBACA,CAKA,mCACA,4BAAA,CACA,UACA,CAEA,WACA,QAAA,CACA,SACA,CACA,4EAEA,uBAAA,CACA,QACA,CACA,oBACA,qBACA",sourcesContent:['<template>\n    <div>\n        <ValidationObserver v-slot="{ invalid }">\n            <div v-if="!load" class="row mb-5 mx-auto">\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Куда</label>\n                    <ValidationProvider name="country" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            v-model="edit_tour.TourInfo.country"\n                            :options="countries"\n                            :option-height="25"\n                            placeholder="Выберите страну"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :loading="isCountriesLoading"\n                            :disabled="isCountriesLoading"\n                            :allow-empty="false"\n                            @input="chooseEditResortCountry"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Курорт</label>\n                    <ValidationProvider name="resort" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            :value="edit_tour.TourInfo.resort"\n                            :options="cities"\n                            placeholder="Введите название курорта"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :close-on-select="true" :clear-on-select="true"\n                            :loading="isCountriesLoading || isCitiesLoading"\n                            :disabled="isCountriesLoading || isCitiesLoading"\n                            @input="chooseEditResort"\n                            :allow-empty="false"\n                            :preselectFirst="true"\n                        >\n                            <template slot="selection" slot-scope="{ values, search, isOpen }"><span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeResorts }} {{values.length | pluralizeChoose}}</span></template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Отель</label>\n                    <ValidationProvider name="hotel" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            :value="edit_tour.TourInfo.hotel"\n                            :options="hotels"\n                            placeholder="Введите название отеля"\n                            :show-labels="false"\n                            :limit="2"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :allow-empty="false"\n                            :close-on-select="true" :clear-on-select="true"\n                            :loading="isCountriesLoading || isHotelsLoading"\n                            :disabled="isCountriesLoading || isHotelsLoading"\n                            @input="chooseEditHotel"\n                        >\n                            <template slot="selection" slot-scope="{ values, search, isOpen }">\n                                    <span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeHotels}} {{values.length | pluralizeChoose}}\n                                    </span>\n                            </template>\n                            <template slot="singleLabel" slot-scope="props">\n                                    <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                        <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                        <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                    </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <div class="option__desc">\n                                    <span class="option__title">{{ props.option.Name }}</span>\n                                    <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                    <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                </div>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Категория номера</label>\n                    <ValidationProvider name="room_type" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                            <input type="text" class=" multiselect__input price" v-model="edit_tour.TourInfo.room_type" placeholder="Категория номера">\n                        </div>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Питание</label>\n                    <ValidationProvider name="meal" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            v-model="edit_tour.TourInfo.meal"\n                            :options="meals"\n                            :option-height="25"\n                            placeholder="Выберите питание"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :close-on-select="true" :clear-on-select="true"\n                            @input="chooseEditMeal"\n                            :allow-empty="false"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                            <span class="option__desc">\n                                <span class="option__title">{{props.option.Name}}</span>\n                            </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <div>\n                                    <div class="option__desc">\n                                        <span class="option__title">{{props.option.Name}}</span>\n                                    </div>\n                                    <div class="row align-items-center m-auto" style="width: 100%; height: 100%">\n                                        <p class="" style="font-size: 12px; margin:0px;">{{props.option.desc}}</p>\n                                    </div>\n                                </div>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 mx-auto" style="width: 100%;">\n                        <label class="travel-label">Даты тура</label>\n                        <ValidationProvider name="date_range" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <div class="row align-items-center justify-content-center m-auto w-100" style="width: 100%;">\n                                <VueHotelDatepicker\n                                    ref="datepickerId"\n                                    :startDate="edit_tour.TourInfo.start"\n                                    :endDate="edit_tour.TourInfo.end"\n                                    :minDate="minDate"\n                                    :placeholder="\'Даты тура\'"\n                                    :format="\'DD/MM/YYYY\'"\n                                    :weekList="[\'Вс.\', \'Пн.\', \'Вт.\', \'Ср.\', \'Чт.\', \'Пт.\', \'Сб.\']"\n                                    :monthList="[\'Янв.\', \'Фев.\', \'Мар.\', \'Апр.\', \'Май.\', \'Июн.\', \'Июл.\', \'Авг.\', \'Сен.\', \'Окт\', \'Ноя.\', \'Дек.\']"\n                                    :fromText="\'С\'"\n                                    :toText="\'По\'"\n                                    :resetText="\'Очистить\'"\n                                    :confirmText="\'Подтвердить\'"\n                                    :mobile="\'mobile\'"\n                                    class="w-100"\n                                    @update="changeEditDateRange"\n                                />\n                            </div>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 m-auto">\n                        <label class="travel-label">Цена</label>\n                        <ValidationProvider name="price" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <b-form-input type="number" class="travel-input" v-model="edit_tour.TourInfo.price" step="1" min="0" @input="changeEditPrice">\n                            </b-form-input>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 m-auto">\n                        <label class="travel-label">Выплачено</label>\n                        <ValidationProvider name="paid" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <b-form-input type="number" class="travel-input" v-model="edit_tour.TourInfo.paid" step="1" min="0" @input="changeEditPrice">\n                            </b-form-input>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <div class="row align-items-center w-100 mx-auto mt-3" style="width: 100%;">\n                        <label class="travel-label">Дополнительные услуги</label>\n                        <b-form-textarea rows="4" cols="80"\n                                  class="travel-input"\n                                  placeholder="Дополнительные услуги"\n                                  v-model="edit_tour.TourInfo.services"\n                                  style="padding: 5px 15px; border: 1px solid #f08b23;border-radius: 20px !important;"\n                        >\n                    </b-form-textarea>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Авиабилеты</label>\n                    <avia-tickets-list :avia_tickets="edit_tour.TourInfo.avia_tickets"></avia-tickets-list>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Пассажиры</label>\n                    <passengers-list :passengers="edit_tour.TourInfo.passengers"></passengers-list>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Файлы для клиента</label>\n                    <div class="form-group row mt-2">\n                        <div class="col-md-12">\n                            <div class="large-12 medium-12 small-12 filezone">\n                                <input type="file" id="files" ref="edit_tour_files" multiple v-on:change="handleEditFiles()"/>\n                                <p>\n                                    Перетащите файл(ы) сюда<br>или нажмите для поиска\n                                </p>\n                            </div>\n                            <label class="travel-label">Или запишите голосовое сообщение</label>\n                            <div class="d-flex justify-content-center mt-2">\n                                <vue-record-audio :mode="\'press\'" @stream="onStream" @result="onEditResult"/>\n                            </div>\n                            <div class="file-listing">\n                                <div\n                                    class="list-group-item"\n                                    v-for="(file, index) in edit_tour.TourInfo.files"\n                                    :key="file.name"\n                                >\n                                    <div class="row m-auto w-100 align-items-center justify-content-center">\n                                        <div class="col-4 text-center">\n                                            <img class="preview" v-if="/\\.(jpe?g|png|svg)$/i.test(file.name)" :src="file.path"/>\n                                            <img class="preview" v-else src="/images/LOGO-1.png"/>\n                                        </div>\n                                        <div class="col-8">\n                                            <div v-if="file.type==\'file\'">\n                                                <p class="travel-label">{{file.name}}</p>\n                                            </div>\n                                            <div v-if="file.type==\'audio\'">\n                                                <audio-player :audio="file"></audio-player>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class="remove-container">\n                                        <a class="remove" v-on:click="deleteFile(file, index)" v-if="loading == false">Удалить</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="file-listing">\n                                <div class="list-group-item" v-for="(file, index) in new_files">\n                                    <div class="row m-auto w-100 align-items-center justify-content-center">\n                                        <div class="col-4 text-center">\n                                            <img class="preview" v-bind:ref="\'preview\'+parseInt(index)"/>\n                                        </div>\n                                        <div class="col-8">\n                                            <div v-if="file.type==\'file\'">\n                                                <p class="travel-label">{{file.data.name}}</p>\n                                            </div>\n                                            <div v-if="file.type==\'audio\'">\n                                                <audio-player :audio="file"></audio-player>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="remove-container">\n                                        <a class="remove" v-on:click="removeFile(new_files, index)" v-if="loading == false">Отменить</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div v-if="!load" class="row w-100 m-auto">\n                <div class="col-6 col-md-6 contact-btn text-center">\n                    <button class="btn btn-travel" style="width: 100%" @click="back">\n                        Отмена\n                    </button>\n                </div>\n                <div class="col-6 col-md-6 contact-btn text-center">\n                    <button type="submit" class="btn btn-travel" style="width: 100%" @click="updateClientTour" :disabled="invalid||loading">\n                        <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                            <span v-if="loading" role="status" aria-hidden="true" class="spinner-border spinner-border-sm mx-2"></span>\n                            <span v-if="loading" class="sr-only">Loading...</span>\n                            Сохранить\n                        </div>\n                    </button>\n                </div>\n            </div>\n            <div v-if="load" class="row w-100 m-auto">\n                <div class="text-center text-warning my-2">\n                    <b-spinner variant="warning" class="align-middle"/>\n                    <strong>Загрузка...</strong>\n                </div>\n            </div>\n        </ValidationObserver>\n    </div>\n</template>\n\n<script>\n    import {mask} from \'vue-the-mask\'\n    import moment from \'moment\'\n\n    export default {\n        name: "Edit",\n        data() {\n            return {\n                meals: [\n                    { Id:\'115\', Name:\'AI\', desc:\'завтраки, обеды, ужины, напитки\'},\n                    { Id:\'114\',Name:\'BB\', desc:\'завтраки\'},\n                    { Id:\'112\',Name:\'FB\', desc:\'завтраки, обеды, ужины\'},\n                    { Id:\'121\',Name:\'FB+\', desc:\'завтраки, обеды, ужины - расширенное меню\'},\n                    { Id:\'113\',Name:\'HB\', desc:\'завтраки, ужины\'},\n                    { Id:\'122\',Name:\'HB+\', desc:\'завтраки, ужины - расширенное меню\'},\n                    { Id:\'117\',Name:\'RO\', desc:\'без питания\'},\n                    { Id:\'116\',Name:\'UAI\', desc:\'завтраки, обеды, ужины, напитки - расширенное меню\'},\n                    { Id:\'129\',Name:\'SC\', desc:\'самообслуживание\'},\n                ],\n                loading: false,\n                load: false,\n                start: undefined,\n                end: undefined,\n                new_files:[],\n                seconds:0,\n                interval:\'\',\n                flag:false,\n                edit_tour:\'\',\n                minDate:\'01/01/2000\'\n            }\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            clients() {\n                return this.$store.getters.clients\n            },\n            isAdmin : function(){ return this.$store.getters.isAdmin},\n            isManager : function(){ return this.$store.getters.isManager},\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        created() {\n            if (this.countries.length===0) {\n                this.$store.dispatch(\'getCountries\', {town_id:0});\n            }\n        },\n        mounted() {\n            if (this.clients.length>0) {\n                this.load = true;\n                var current_client = this.clients.find((client) => client.id == this.$route.params.client_id);\n                this.edit_tour = current_client.tours.find((tour) => tour.id == this.$route.params.id);\n                this.loadAdditionalData()\n                this.load = false;\n            } else {\n                this.getClient();\n            }\n        },\n        methods: {\n            back() {\n                if(this.isAdmin){\n                    this.$router.push(\'/admin/client-tours/\'+this.$route.params.client_id)\n                }\n                if(this.isManager){\n                    this.$router.push(\'/manager/client-tours/\'+this.$route.params.client_id)\n                }\n            },\n            loadAdditionalData(){\n                this.$store.dispatch(\'getCities\', this.edit_tour.TourInfo.country.Id);\n                if(this.edit_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n                this.edit_tour.TourInfo.start = moment(this.edit_tour.TourInfo.date_range.start, "DD/MM/YYYY").toDate();\n                this.edit_tour.TourInfo.end = moment(this.edit_tour.TourInfo.date_range.end, "DD/MM/YYYY").toDate();\n                this.edit_tour.TourInfo.delete_files=[];\n                this.edit_tour.TourInfo.new_files=[];\n                this.edit_tour.new_files=[];\n            },\n            async getClient() {\n                this.load = true;\n                await this.$store.dispatch(\'setClients\').then(resp => {\n                    this.$store.commit(\'setClients\', resp.data.users);\n                    this.$store.commit(\'setDeletedClients\', resp.data.deleted_users);\n                    var current_client = this.clients.find((client) => client.id == this.$route.params.client_id);\n                    this.edit_tour = current_client.tours.find((tour) => tour.id == this.$route.params.id);\n                    this.loadAdditionalData()\n                    this.load = false;\n                })\n            },\n            chooseEditResortCountry(value){\n                this.edit_tour.TourInfo.resort={Name:\'Любой\'};\n                this.edit_tour.TourInfo.hotel={Name:\'Любой\'};\n                this.edit_tour.TourInfo.country = value;\n                this.$store.dispatch(\'getCities\', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n            },\n            chooseEditResort(value) {\n                this.edit_tour.TourInfo.resort = value;\n                if(this.edit_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n            },\n            chooseEditHotel(value) {\n                this.edit_tour.TourInfo.hotel = value;\n            },\n            changeEditDateRange(date_object) {\n                this.edit_tour.TourInfo.date_range=date_object;\n            },\n            chooseEditMeal(value){\n                this.edit_tour.TourInfo.meal = value;\n            },\n            changeEditPrice(){\n                this.edit_tour.TourInfo.left = this.edit_tour.TourInfo.price - this.edit_tour.TourInfo.paid;\n            },\n            handleEditFiles() {\n                let uploadedFiles = this.$refs.edit_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_files.push({type:\'file\', name:uploadedFiles[i].name, data:uploadedFiles[i], date: date });\n                        this.getImagePreviews(this.new_files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onEditResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_files.push({\n                    type: \'audio\',\n                    name: \'record-\'+time+\'.mp3\',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                    seconds: this.seconds\n                })\n                this.countSeconds();\n                this.getImagePreviews(this.new_files);\n            },\n            deleteFile(file, key) {\n                this.edit_tour.TourInfo.delete_files.push(file);\n                this.edit_tour.TourInfo.files.splice( key, 1 );\n            },\n            updateClientTour(){\n                this.loading = true;\n                this.edit_tour.StartAt = moment(this.edit_tour.TourInfo.date_range.start, "DD-MM-YYYY");\n                this.edit_tour.EndAt = moment(this.edit_tour.TourInfo.date_range.end, "DD-MM-YYYY");\n                console.log(this.edit_tour.EndAt)\n                this.edit_tour.new_files = this.new_files;\n                let formData = new FormData();\n                formData.append("UserTour", JSON.stringify(this.edit_tour));\n\n                for (var i = 0; i < this.new_files.length; i++) {\n                    let file = this.new_files[i].data;\n\n                    formData.append(\'new_files[\' + i + \']\', file);\n                }\n\n                this.$store.dispatch(\'updateClientTour\', formData)\n                    .then(response => {\n                        console.log(\'response\', response)\n                        this.edit_tour.TourInfo.delete_files=[];\n                        this.edit_tour.TourInfo.new_files=[];\n                        this.edit_tour.TourInfo.files = response.TourInfo.files;\n                        this.sendMessage(\'Тур клиента успешно обновлён\');\n                        this.loading = false;\n                    });\n            },\n\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener("load", function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = \'/images/LOGO-1.png\';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                this.countSeconds();\n                console.log(\'Got a stream object:\', stream);\n            },\n            countSeconds() {\n                this.flag = !this.flag;\n                if (this.flag == true) {\n                    this.seconds=0;\n                    this.interval = setInterval(this.incrementSeconds, 1000);\n                }\n                else {\n                    clearInterval(this.interval)\n                }\n            },\n            incrementSeconds() {\n                this.seconds += 1;\n            },\n\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Сообщение от TravelClub\',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return \'курорт\'\n                }\n                if (n>1 && n<5) {\n                    return \'курорта\'\n                }\n                if (n>4 && n<20) {\n                    return \'курортов\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'курорт\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'курорта\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'курортов\'\n                    }\n                    return \'курортов\'\n                }\n                return \'курортов\'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return \'отель\'\n                }\n                if (n>1 && n<5) {\n                    return \'отеля\'\n                }\n                if (n>4 && n<20) {\n                    return \'отелей\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'отель\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'отеля\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'отелей\'\n                    }\n                    return \'отелей\'\n                }\n                return \'отелей\'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return \'выбран\'\n                }\n                return \'выбрано\'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\n<style>\n    .btn-travel {\n        color: #fff !important;\n        background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%);\n        background-color: rgba(0, 0, 0, 0);\n        background-color: #f08b23 !important;\n        border-color: #f08b23 !important;\n        box-shadow: 0 2px 2px 0 rgba(156, 39, 176, 0.14), 0 3px 1px -2px rgba(156, 39, 176, 0.2), 0 1px 5px 0 rgba(156, 39, 176, 0.12) !important;\n    }\n    @media only screen and (max-width:767.98px) {\n        .vdp-container:not(.desktop) .vdp-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n        .tour-module .cont .row{\n            width: 100% !important;\n        }\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vdp-input {\n            min-width: 100% !important;\n        }\n        .vdp-container {\n            width: 100% !important;\n        }\n    }\n    @media screen and (max-width: 576px) {\n        .tour-module .cont {\n            height: 100% !important;\n        }\n\n    }\n    .vdp-datepicker__calendar {\n        position: absolute;\n        z-index: 2!important;\n        padding: 18px!important;\n        background: #fff;\n        width: 300px;\n        border: 1px solid #ccc;\n    }\n    .vdp-datepicker input {\n        /*min-width: 300px;*/\n        padding: 8px;\n        border: 1px solid #ffa500 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vdp-datepicker input::placeholder {\n        color: #062348 !important;\n    }\n    .vdp-datepicker__calendar .day-header\n    {\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n    .vdp-datepicker__clear-button\n    {\n        position: absolute;\n        right: 20px;\n        top: -11px;\n        color: #0f213d;\n        font-size: 36px;\n    }\n    .vdp-datepicker__calendar .cell {\n        display: inline-block;\n        padding: 0 5px;\n        width: 14.285714285714286%;\n        height: 30px;\n        line-height: 30px;\n        text-align: center;\n        vertical-align: middle;\n        border: 1px solid transparent;\n    }\n\n    .vdp-datepicker__calendar .day {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #0f213d;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vdp-datepicker__calendar .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vdp-datepicker__calendar .cell {\n        display: inline-block;\n        padding: 0 5px;\n        width: 14.285714285714286%;\n        height: 30px !important;\n        line-height: 30px !important;\n        text-align: center;\n        vertical-align: middle;\n        border: 1px solid transparent;\n    }\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n        border: 1px solid #ffa500 !important;\n    }\n    .vdp-datepicker__calendar .cell.selected {\n        background: #ffa50070 !important;\n        background-image: none;\n    }\n    .vdp-datepicker__calendar .cell.selected:hover {\n        background: #ffa50070 !important;\n        background-image: none;\n    }\n\n    .vdp-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vdp-calendar-footer .confirm, .vdp-calendar-footer .reset {\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .vdp-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vdp-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-week-item,  .vdp-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: \'\';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: "Bello Pro";\n        /*font-weight: 700;*/\n    }\n    .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: "";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: "Open Sans";\n        color: #0f213d!important;\n    }\n    .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 30px;\n        height: 30px;\n        font: 30px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n        border: 0;\n    }\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    .qty input{\n        border: 0;\n        width: 60%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style>\n    @media only screen and (max-width:767.98px) {\n        .vhd-container:not(.desktop) .vhd-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n        .tour-module .cont .row{\n            width: 100% !important;\n        }\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vhd-input {\n            min-width: 100% !important;\n        }\n        .vhd-container {\n            width: 100% !important;\n        }\n    }\n    @media screen and (max-width: 576px) {\n        .tour-module .cont {\n            height: 100% !important;\n        }\n\n    }\n    .vhd-picker {\n        z-index: 2!important;\n        min-height: 362px!important;\n        padding: 18px!important;\n    }\n    .vhd-input {\n        /*min-width: 300px;*/\n        padding: 8px;\n        border: 1px solid #ffa500 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vhd-input::placeholder {\n        color: #062348 !important;\n    }\n    .vhd-container:not(.desktop) .vhd-picker {\n        min-height: 362px;\n    }\n    .vhd-calendar .calendar-date .week .day[data-v-0cb4ff92] {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #505050;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vhd-calendar .calendar-date .week .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vhd-calendar-header {\n        height: 20px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header {\n        height:60px !important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header>.info {\n        display:block;\n        width:100%;\n        height:60px;\n        padding-top:32px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-footer {\n        height: 36px !important;\n    }\n    .vhd-calendar-footer {\n        height: 24px!important;\n    }\n    .vhd-calendar .calendar-date .week {\n        height: 30px !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vhd-calendar-footer .confirm, .vhd-calendar-footer .reset {\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .vhd-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vhd-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-week-item,  .vhd-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: \'\';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: "Bello Pro";\n        /*font-weight: 700;*/\n    }\n    .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: "";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: "Open Sans";\n        color: #0f213d!important;\n    }\n    .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 30px;\n        height: 30px;\n        font: 30px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n    }\n    /*.qty .plus {*/\n    /*    cursor: pointer;*/\n    /*    display: inline-block;*/\n    /*    vertical-align: top;*/\n    /*    color: white;*/\n    /*    width: 30px;*/\n    /*    height: 30px;*/\n    /*    font: 30px/1 Arial,sans-serif;*/\n    /*    text-align: center;*/\n    /*    border-radius: 50%;*/\n    /*}*/\n    /*.qty .minus {*/\n    /*    cursor: pointer;*/\n    /*    display: inline-block;*/\n    /*    vertical-align: top;*/\n    /*    color: white;*/\n    /*    width: 30px;*/\n    /*    height: 30px;*/\n    /*    font: 30px/1 Arial,sans-serif;*/\n    /*    text-align: center;*/\n    /*    border-radius: 50%;*/\n    /*    background-clip: padding-box;*/\n    /*}*/\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    .qty input{\n        border: 0;\n        width: 60%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style scoped>\n    input[type="file"]{\n        opacity: 0;\n        width: 100%;\n        height: 200px;\n        position: absolute;\n        cursor: pointer;\n    }\n    .filezone {\n        outline: 2px dashed grey;\n        outline-offset: -10px;\n        background: #ccc;\n        color: dimgray;\n        padding: 10px 10px;\n        min-height: 200px;\n        position: relative;\n        cursor: pointer;\n    }\n    .filezone:hover {\n        background: #c0c0c0;\n    }\n\n    .filezone p {\n        font-size: 1.2em;\n        text-align: center;\n        padding: 50px 50px 50px 50px;\n    }\n    div.file-listing img{\n        max-width: 90%;\n    }\n\n    div.file-listing{\n        margin: auto;\n        padding: 10px;\n        border-bottom: 1px solid #ddd;\n    }\n\n    div.file-listing img{\n        height: 100px;\n    }\n    .preview{\n        height: 100px;\n        max-width: 90%;\n    }\n    div.success-container{\n        text-align: center;\n        color: green;\n    }\n\n    div.remove-container{\n        text-align: center;\n    }\n\n    div.remove-container a{\n        color: red;\n        cursor: pointer;\n    }\n\n    a.submit-button{\n        display: block;\n        margin: auto;\n        text-align: center;\n        width: 200px;\n        padding: 10px;\n        text-transform: uppercase;\n        background-color: green;\n        color: white;\n        font-weight: bold;\n        margin-top: 20px;\n    }\n</style>\n'],sourceRoot:""}]);const s=r},15362:(n,t,e)=>{e.d(t,{A:()=>s});var i=e(45627),o=e.n(i),a=e(76798),r=e.n(a)()(o());r.push([n.id,'@media only screen and (max-width:767.98px){.vhd-container:not(.desktop) .vhd-picker{padding:8px;width:100%!important}.tour-module .cont .row{width:100%!important}.qty input{border:0;width:50%}}@media screen and (max-width:477px){.vhd-input{min-width:100%!important}.vhd-container{width:100%!important}}@media screen and (max-width:576px){.tour-module .cont{height:100%!important}}.vhd-picker{min-height:362px!important;padding:18px!important;z-index:2!important}.vhd-input{border:1px solid orange!important;border-radius:20px;color:#062348!important;font-family:Open Sans!important;font-size:16px;font-weight:900;height:40px!important;line-height:32px;min-height:40px;outline:none;padding:8px;width:100%}.vhd-input::-moz-placeholder{color:#062348!important}.vhd-input::placeholder{color:#062348!important}.vhd-container:not(.desktop) .vhd-picker{min-height:362px}.vhd-calendar .calendar-date .week .day[data-v-0cb4ff92]{color:#505050;cursor:pointer;font-size:16px;font-weight:500;line-height:30px;text-align:center}.vhd-calendar .calendar-date .week .day{background-image:none!important;height:30px!important}.vhd-calendar-header{height:20px!important}.vhd-container:not(.desktop) .vhd-calendar-header{height:60px!important}.vhd-container:not(.desktop) .vhd-calendar-header>.info{display:block;height:60px;padding-top:32px!important;width:100%}.vhd-container:not(.desktop) .vhd-calendar-footer{height:36px!important}.vhd-calendar-footer{height:24px!important}.vhd-calendar .calendar-date .week{height:30px!important}.vhd-calendar .calendar-date .week .day.end-date:after,.vhd-calendar .calendar-date .week .day.start-date:before{background-color:orange!important}.vhd-calendar .calendar-date .week .day.end-date,.vhd-calendar .calendar-date .week .day.in-date-range,.vhd-calendar .calendar-date .week .day.start-date{background-color:#ffa50070!important}.vhd-calendar .calendar-date .week .day.today{border:1px solid orange!important}.vhd-calendar-footer .confirm,.vhd-calendar-footer .reset{font-family:Open Sans!important;font-weight:900!important}.vhd-calendar-footer .reset{color:#062348!important}.vhd-calendar-footer .confirm{color:orange!important}.vhd-calendar .calendar-month-title,.vhd-calendar .calendar-week-item{color:#062348!important;font-family:Open Sans!important;font-weight:900!important}.values__hotel-rating:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);background-position:50%;background-repeat:no-repeat;content:"";display:inline-block;height:12px;margin-left:2px;width:13px}.multiselect__tags .price{color:#062348;font-family:Open Sans!important;font-weight:900!important}.multiselect__tags .price:focus{box-shadow:none!important;outline:none!important}.multiselect-title{color:#062348!important;font-family:Bello Pro}.multiselect__tags{border:1px solid #f08b23;border-radius:20px;font-size:1rem;min-height:40px}.multiselect__tag{background:#062348}.multiselect__tag-icon:after{color:#fff}.multiselect__option--highlight,.multiselect__option--highlight:after,.multiselect__tag-icon:focus,.multiselect__tag-icon:hover{background:#f08b23}.multiselect{font-family:Open Sans!important;font-weight:900}.multiselect,.multiselect__placeholder{color:#062348}.multiselect__input:focus,.multiselect__single:focus{border-color:#062348}.multiselect__input::-moz-placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect__input::placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect--disabled{background:#fff}.multiselect--disabled .multiselect__select{background:transparent}.multiselect__spinner:after,.multiselect__spinner:before{background:transparent;border:3px solid transparent;border-radius:100%;border-top-color:orange;box-shadow:0 0 0 1px transparent;content:"";height:16px;left:50%;margin:-8px 0 0 -8px;position:absolute;top:50%;width:16px}.multiselect__spinner{border-radius:50px}.qty .count{color:#0f213d!important;font-family:Open Sans;font-size:25px;font-weight:700;line-height:30px;min-width:35px;padding:0 2px}.qty .count,.qty button{display:inline-block;text-align:center;vertical-align:top}.qty button{background:#f08b23;border-radius:50%;color:#fff;cursor:pointer;font:30px/1 Arial,sans-serif;height:30px;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;width:30px}.qty div{text-align:center}.qty .minus:hover,.qty .plus:hover{background:#0f213d!important;color:#fff}.qty input{border:0;width:60%}.qty input::-webkit-inner-spin-button,.qty input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.qty input:disabled{background-color:#fff}',"",{version:3,sources:["webpack://./resources/js/desktop/pages/Manager/Tours/Edit.vue"],names:[],mappings:"AA8wCA,4CACA,yCAEA,WAAA,CADA,oBAEA,CACA,wBACA,oBACA,CACA,WACA,QAAA,CACA,SACA,CACA,CACA,oCACA,WACA,wBACA,CACA,eACA,oBACA,CACA,CACA,oCACA,mBACA,qBACA,CAEA,CACA,YAEA,0BAAA,CACA,sBAAA,CAFA,mBAGA,CACA,WAGA,iCAAA,CAKA,kBAAA,CAJA,uBAAA,CAOA,+BAAA,CANA,cAAA,CAOA,eAAA,CAFA,qBAAA,CAJA,gBAAA,CAGA,eAAA,CAFA,YAAA,CALA,WAAA,CAWA,UACA,CACA,6BACA,uBACA,CAFA,wBACA,uBACA,CACA,yCACA,gBACA,CACA,yDAIA,aAAA,CAEA,cAAA,CALA,cAAA,CACA,eAAA,CACA,gBAAA,CAEA,iBAEA,CACA,wCACA,+BAAA,CACA,qBACA,CACA,qBACA,qBACA,CACA,kDACA,qBACA,CACA,wDACA,aAAA,CAEA,WAAA,CACA,0BAAA,CAFA,UAGA,CACA,kDACA,qBACA,CACA,qBACA,qBACA,CACA,mCACA,qBACA,CAIA,iHACA,iCACA,CAOA,0JACA,oCACA,CACA,8CACA,iCACA,CACA,0DACA,+BAAA,CACA,yBACA,CACA,4BACA,uBACA,CACA,8BACA,sBACA,CACA,sEACA,uBAAA,CACA,+BAAA,CACA,yBACA,CACA,4BAMA,gbAAA,CAEA,uBAAA,CADA,2BAAA,CANA,UAAA,CACA,oBAAA,CAGA,WAAA,CAFA,eAAA,CACA,UAKA,CACA,0BACA,aAAA,CACA,+BAAA,CACA,yBACA,CAEA,gCAEA,yBAAA,CADA,sBAEA,CAEA,mBACA,uBAAA,CACA,qBAEA,CACA,mBACA,wBAAA,CACA,kBAAA,CACA,cAAA,CACA,eACA,CACA,kBACA,kBACA,CACA,6BACA,UACA,CAOA,gIACA,kBACA,CACA,aAEA,+BAAA,CACA,eACA,CACA,uCAJA,aAMA,CACA,qDACA,oBACA,CACA,sCACA,uBAAA,CACA,+BAAA,CACA,eACA,CAJA,iCACA,uBAAA,CACA,+BAAA,CACA,eACA,CACA,uBACA,eACA,CACA,4CACA,sBACA,CACA,yDAaA,sBAAA,CAFA,4BAAA,CAHA,kBAAA,CAGA,uBAAA,CACA,gCAAA,CAVA,UAAA,CAKA,WAAA,CAHA,QAAA,CACA,oBAAA,CAJA,iBAAA,CAEA,OAAA,CAGA,UAQA,CACA,sBACA,kBACA,CAEA,YAUA,uBAAA,CADA,qBAAA,CANA,cAAA,CACA,eAAA,CACA,gBAAA,CAEA,cAAA,CADA,aAKA,CACA,wBAXA,oBAAA,CAOA,iBAAA,CANA,kBAyBA,CAfA,YAcA,kBAAA,CAFA,iBAAA,CALA,UAAA,CAHA,cAAA,CAMA,4BAAA,CADA,WAAA,CAIA,SAAA,CAZA,wBAAA,CACA,qBAAA,CACA,oBAAA,CAKA,UAOA,CAwBA,SACA,iBACA,CAKA,mCACA,4BAAA,CACA,UACA,CAEA,WACA,QAAA,CACA,SACA,CACA,4EAEA,uBAAA,CACA,QACA,CACA,oBACA,qBACA",sourcesContent:['<template>\n    <div>\n        <ValidationObserver v-slot="{ invalid }">\n            <div v-if="!load" class="row mb-5 mx-auto">\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Куда</label>\n                    <ValidationProvider name="country" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            v-model="edit_tour.TourInfo.country"\n                            :options="countries"\n                            :option-height="25"\n                            placeholder="Выберите страну"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :loading="isCountriesLoading"\n                            :disabled="isCountriesLoading"\n                            :allow-empty="false"\n                            @input="chooseEditResortCountry"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Курорт</label>\n                    <ValidationProvider name="resort" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            :value="edit_tour.TourInfo.resort"\n                            :options="cities"\n                            placeholder="Введите название курорта"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :close-on-select="true" :clear-on-select="true"\n                            :loading="isCountriesLoading || isCitiesLoading"\n                            :disabled="isCountriesLoading || isCitiesLoading"\n                            @input="chooseEditResort"\n                            :allow-empty="false"\n                            :preselectFirst="true"\n                        >\n                            <template slot="selection" slot-scope="{ values, search, isOpen }"><span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeResorts }} {{values.length | pluralizeChoose}}</span></template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Отель</label>\n                    <ValidationProvider name="hotel" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            :value="edit_tour.TourInfo.hotel"\n                            :options="hotels"\n                            placeholder="Введите название отеля"\n                            :show-labels="false"\n                            :limit="2"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :allow-empty="false"\n                            :close-on-select="true" :clear-on-select="true"\n                            :loading="isCountriesLoading || isHotelsLoading"\n                            :disabled="isCountriesLoading || isHotelsLoading"\n                            @input="chooseEditHotel"\n                        >\n                            <template slot="selection" slot-scope="{ values, search, isOpen }">\n                                    <span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeHotels}} {{values.length | pluralizeChoose}}\n                                    </span>\n                            </template>\n                            <template slot="singleLabel" slot-scope="props">\n                                    <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                        <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                        <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                    </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <div class="option__desc">\n                                    <span class="option__title">{{ props.option.Name }}</span>\n                                    <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                    <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                </div>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Категория номера</label>\n                    <ValidationProvider name="room_type" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                            <input type="text" class=" multiselect__input price" v-model="edit_tour.TourInfo.room_type" placeholder="Категория номера">\n                        </div>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Питание</label>\n                    <ValidationProvider name="meal" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            v-model="edit_tour.TourInfo.meal"\n                            :options="meals"\n                            :option-height="25"\n                            placeholder="Выберите питание"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :close-on-select="true" :clear-on-select="true"\n                            @input="chooseEditMeal"\n                            :allow-empty="false"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                            <span class="option__desc">\n                                <span class="option__title">{{props.option.Name}}</span>\n                            </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <div>\n                                    <div class="option__desc">\n                                        <span class="option__title">{{props.option.Name}}</span>\n                                    </div>\n                                    <div class="row align-items-center m-auto" style="width: 100%; height: 100%">\n                                        <p class="" style="font-size: 12px; margin:0px;">{{props.option.desc}}</p>\n                                    </div>\n                                </div>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 mx-auto" style="width: 100%;">\n                        <label class="travel-label">Даты тура</label>\n                        <ValidationProvider name="date_range" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <div class="row align-items-center justify-content-center m-auto w-100" style="width: 100%;">\n                                <VueHotelDatepicker\n                                    ref="datepickerId"\n                                    :startDate="edit_tour.TourInfo.start"\n                                    :endDate="edit_tour.TourInfo.end"\n                                    :minDate="minDate"\n                                    :placeholder="\'Даты тура\'"\n                                    :format="\'DD/MM/YYYY\'"\n                                    :weekList="[\'Вс.\', \'Пн.\', \'Вт.\', \'Ср.\', \'Чт.\', \'Пт.\', \'Сб.\']"\n                                    :monthList="[\'Янв.\', \'Фев.\', \'Мар.\', \'Апр.\', \'Май.\', \'Июн.\', \'Июл.\', \'Авг.\', \'Сен.\', \'Окт\', \'Ноя.\', \'Дек.\']"\n                                    :fromText="\'С\'"\n                                    :toText="\'По\'"\n                                    :resetText="\'Очистить\'"\n                                    :confirmText="\'Подтвердить\'"\n                                    :mobile="\'mobile\'"\n                                    class="w-100"\n                                    @update="changeEditDateRange"\n                                />\n                            </div>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 m-auto">\n                        <label class="travel-label">Цена</label>\n                        <ValidationProvider name="price" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <b-form-input type="number" class="travel-input" v-model="edit_tour.TourInfo.price" step="1" min="0" @input="changeEditPrice">\n                            </b-form-input>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 m-auto">\n                        <label class="travel-label">Выплачено</label>\n                        <ValidationProvider name="paid" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <b-form-input type="number" class="travel-input" v-model="edit_tour.TourInfo.paid" step="1" min="0" @input="changeEditPrice">\n                            </b-form-input>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <div class="row align-items-center w-100 mx-auto mt-3" style="width: 100%;">\n                        <label class="travel-label">Дополнительные услуги</label>\n                        <b-form-textarea rows="4" cols="80"\n                                  class="travel-input"\n                                  placeholder="Дополнительные услуги"\n                                  v-model="edit_tour.TourInfo.services"\n                                  style="padding: 5px 15px; border: 1px solid #f08b23;border-radius: 20px !important;"\n                        >\n                    </b-form-textarea>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Авиабилеты</label>\n                    <avia-tickets-list :avia_tickets="edit_tour.TourInfo.avia_tickets"></avia-tickets-list>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Пассажиры</label>\n                    <passengers-list :passengers="edit_tour.TourInfo.passengers"></passengers-list>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Файлы для клиента</label>\n                    <div class="form-group row mt-2">\n                        <div class="col-md-12">\n                            <div class="large-12 medium-12 small-12 filezone">\n                                <input type="file" id="files" ref="edit_tour_files" multiple v-on:change="handleEditFiles()"/>\n                                <p>\n                                    Перетащите файл(ы) сюда<br>или нажмите для поиска\n                                </p>\n                            </div>\n                            <label class="travel-label">Или запишите голосовое сообщение</label>\n                            <div class="d-flex justify-content-center mt-2">\n                                <vue-record-audio :mode="\'press\'" @stream="onStream" @result="onEditResult"/>\n                            </div>\n                            <div class="file-listing">\n                                <div\n                                    class="list-group-item"\n                                    v-for="(file, index) in edit_tour.TourInfo.files"\n                                    :key="file.name"\n                                >\n                                    <div class="row m-auto w-100 align-items-center justify-content-center">\n                                        <div class="col-4 text-center">\n                                            <img class="preview" v-if="/\\.(jpe?g|png|svg)$/i.test(file.name)" :src="file.path"/>\n                                            <img class="preview" v-else src="/images/LOGO-1.png"/>\n                                        </div>\n                                        <div class="col-8">\n                                            <div v-if="file.type==\'file\'">\n                                                <p class="travel-label">{{file.name}}</p>\n                                            </div>\n                                            <div v-if="file.type==\'audio\'">\n                                                <audio-player :audio="file"></audio-player>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class="remove-container">\n                                        <a class="remove" v-on:click="deleteFile(file, index)" v-if="loading == false">Удалить</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="file-listing">\n                                <div class="list-group-item" v-for="(file, index) in new_files">\n                                    <div class="row m-auto w-100 align-items-center justify-content-center">\n                                        <div class="col-4 text-center">\n                                            <img class="preview" v-bind:ref="\'preview\'+parseInt(index)"/>\n                                        </div>\n                                        <div class="col-8">\n                                            <div v-if="file.type==\'file\'">\n                                                <p class="travel-label">{{file.data.name}}</p>\n                                            </div>\n                                            <div v-if="file.type==\'audio\'">\n                                                <audio-player :audio="file"></audio-player>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="remove-container">\n                                        <a class="remove" v-on:click="removeFile(new_files, index)" v-if="loading == false">Отменить</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div v-if="!load" class="row w-100 m-auto">\n                <div class="col-6 col-md-6 contact-btn text-center">\n                    <button class="btn btn-travel" style="width: 100%" @click="back">\n                        Отмена\n                    </button>\n                </div>\n                <div class="col-6 col-md-6 contact-btn text-center">\n                    <button type="submit" class="btn btn-travel" style="width: 100%" @click="updateClientTour" :disabled="invalid||loading">\n                        <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                            <span v-if="loading" role="status" aria-hidden="true" class="spinner-border spinner-border-sm mx-2"></span>\n                            <span v-if="loading" class="sr-only">Loading...</span>\n                            Сохранить\n                        </div>\n                    </button>\n                </div>\n            </div>\n            <div v-if="load" class="row w-100 m-auto">\n                <div class="text-center text-warning my-2">\n                    <b-spinner variant="warning" class="align-middle"/>\n                    <strong>Загрузка...</strong>\n                </div>\n            </div>\n        </ValidationObserver>\n    </div>\n</template>\n\n<script>\n    import {mask} from \'vue-the-mask\'\n    import moment from \'moment\'\n\n    export default {\n        name: "Edit",\n        data() {\n            return {\n                meals: [\n                    { Id:\'115\', Name:\'AI\', desc:\'завтраки, обеды, ужины, напитки\'},\n                    { Id:\'114\',Name:\'BB\', desc:\'завтраки\'},\n                    { Id:\'112\',Name:\'FB\', desc:\'завтраки, обеды, ужины\'},\n                    { Id:\'121\',Name:\'FB+\', desc:\'завтраки, обеды, ужины - расширенное меню\'},\n                    { Id:\'113\',Name:\'HB\', desc:\'завтраки, ужины\'},\n                    { Id:\'122\',Name:\'HB+\', desc:\'завтраки, ужины - расширенное меню\'},\n                    { Id:\'117\',Name:\'RO\', desc:\'без питания\'},\n                    { Id:\'116\',Name:\'UAI\', desc:\'завтраки, обеды, ужины, напитки - расширенное меню\'},\n                    { Id:\'129\',Name:\'SC\', desc:\'самообслуживание\'},\n                ],\n                loading: false,\n                load: false,\n                start: undefined,\n                end: undefined,\n                new_files:[],\n                seconds:0,\n                interval:\'\',\n                flag:false,\n                edit_tour:\'\',\n                minDate:\'01/01/2000\'\n            }\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            clients() {\n                return this.$store.getters.clients\n            },\n            isAdmin : function(){ return this.$store.getters.isAdmin},\n            isManager : function(){ return this.$store.getters.isManager},\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        created() {\n            if (this.countries.length===0) {\n                this.$store.dispatch(\'getCountries\', {town_id:0});\n            }\n        },\n        mounted() {\n            if (this.clients.length>0) {\n                this.load = true;\n                var current_client = this.clients.find((client) => client.id == this.$route.params.client_id);\n                this.edit_tour = current_client.tours.find((tour) => tour.id == this.$route.params.id);\n                this.loadAdditionalData()\n                this.load = false;\n            } else {\n                this.getClient();\n            }\n        },\n        methods: {\n            back() {\n                if(this.isAdmin){\n                    this.$router.push(\'/admin/client-tours/\'+this.$route.params.client_id)\n                }\n                if(this.isManager){\n                    this.$router.push(\'/manager/client-tours/\'+this.$route.params.client_id)\n                }\n            },\n            loadAdditionalData(){\n                this.$store.dispatch(\'getCities\', this.edit_tour.TourInfo.country.Id);\n                if(this.edit_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n                this.edit_tour.TourInfo.start = moment(this.edit_tour.TourInfo.date_range.start, "DD/MM/YYYY").toDate();\n                this.edit_tour.TourInfo.end = moment(this.edit_tour.TourInfo.date_range.end, "DD/MM/YYYY").toDate();\n                this.edit_tour.TourInfo.delete_files=[];\n                this.edit_tour.TourInfo.new_files=[];\n                this.edit_tour.new_files=[];\n            },\n            async getClient() {\n                this.load = true;\n                await this.$store.dispatch(\'setClients\').then(resp => {\n                    this.$store.commit(\'setClients\', resp.data.users);\n                    this.$store.commit(\'setDeletedClients\', resp.data.deleted_users);\n                    var current_client = this.clients.find((client) => client.id == this.$route.params.client_id);\n                    this.edit_tour = current_client.tours.find((tour) => tour.id == this.$route.params.id);\n                    this.loadAdditionalData()\n                    this.load = false;\n                })\n            },\n            chooseEditResortCountry(value){\n                this.edit_tour.TourInfo.resort={Name:\'Любой\'};\n                this.edit_tour.TourInfo.hotel={Name:\'Любой\'};\n                this.edit_tour.TourInfo.country = value;\n                this.$store.dispatch(\'getCities\', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n            },\n            chooseEditResort(value) {\n                this.edit_tour.TourInfo.resort = value;\n                if(this.edit_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n            },\n            chooseEditHotel(value) {\n                this.edit_tour.TourInfo.hotel = value;\n            },\n            changeEditDateRange(date_object) {\n                this.edit_tour.TourInfo.date_range=date_object;\n            },\n            chooseEditMeal(value){\n                this.edit_tour.TourInfo.meal = value;\n            },\n            changeEditPrice(){\n                this.edit_tour.TourInfo.left = this.edit_tour.TourInfo.price - this.edit_tour.TourInfo.paid;\n            },\n            handleEditFiles() {\n                let uploadedFiles = this.$refs.edit_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_files.push({type:\'file\', name:uploadedFiles[i].name, data:uploadedFiles[i], date: date });\n                        this.getImagePreviews(this.new_files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onEditResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_files.push({\n                    type: \'audio\',\n                    name: \'record-\'+time+\'.mp3\',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                    seconds: this.seconds\n                })\n                this.countSeconds();\n                this.getImagePreviews(this.new_files);\n            },\n            deleteFile(file, key) {\n                this.edit_tour.TourInfo.delete_files.push(file);\n                this.edit_tour.TourInfo.files.splice( key, 1 );\n            },\n            updateClientTour(){\n                this.loading = true;\n                this.edit_tour.StartAt = moment(this.edit_tour.TourInfo.date_range.start, "DD-MM-YYYY");\n                this.edit_tour.EndAt = moment(this.edit_tour.TourInfo.date_range.end, "DD-MM-YYYY");\n                console.log(this.edit_tour.EndAt)\n                this.edit_tour.new_files = this.new_files;\n                let formData = new FormData();\n                formData.append("UserTour", JSON.stringify(this.edit_tour));\n\n                for (var i = 0; i < this.new_files.length; i++) {\n                    let file = this.new_files[i].data;\n\n                    formData.append(\'new_files[\' + i + \']\', file);\n                }\n\n                this.$store.dispatch(\'updateClientTour\', formData)\n                    .then(response => {\n                        console.log(\'response\', response)\n                        this.edit_tour.TourInfo.delete_files=[];\n                        this.edit_tour.TourInfo.new_files=[];\n                        this.edit_tour.TourInfo.files = response.TourInfo.files;\n                        this.sendMessage(\'Тур клиента успешно обновлён\');\n                        this.loading = false;\n                    });\n            },\n\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener("load", function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = \'/images/LOGO-1.png\';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                this.countSeconds();\n                console.log(\'Got a stream object:\', stream);\n            },\n            countSeconds() {\n                this.flag = !this.flag;\n                if (this.flag == true) {\n                    this.seconds=0;\n                    this.interval = setInterval(this.incrementSeconds, 1000);\n                }\n                else {\n                    clearInterval(this.interval)\n                }\n            },\n            incrementSeconds() {\n                this.seconds += 1;\n            },\n\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Сообщение от TravelClub\',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return \'курорт\'\n                }\n                if (n>1 && n<5) {\n                    return \'курорта\'\n                }\n                if (n>4 && n<20) {\n                    return \'курортов\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'курорт\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'курорта\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'курортов\'\n                    }\n                    return \'курортов\'\n                }\n                return \'курортов\'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return \'отель\'\n                }\n                if (n>1 && n<5) {\n                    return \'отеля\'\n                }\n                if (n>4 && n<20) {\n                    return \'отелей\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'отель\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'отеля\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'отелей\'\n                    }\n                    return \'отелей\'\n                }\n                return \'отелей\'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return \'выбран\'\n                }\n                return \'выбрано\'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\n<style>\n    .btn-travel {\n        color: #fff !important;\n        background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%);\n        background-color: rgba(0, 0, 0, 0);\n        background-color: #f08b23 !important;\n        border-color: #f08b23 !important;\n        box-shadow: 0 2px 2px 0 rgba(156, 39, 176, 0.14), 0 3px 1px -2px rgba(156, 39, 176, 0.2), 0 1px 5px 0 rgba(156, 39, 176, 0.12) !important;\n    }\n    @media only screen and (max-width:767.98px) {\n        .vdp-container:not(.desktop) .vdp-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n        .tour-module .cont .row{\n            width: 100% !important;\n        }\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vdp-input {\n            min-width: 100% !important;\n        }\n        .vdp-container {\n            width: 100% !important;\n        }\n    }\n    @media screen and (max-width: 576px) {\n        .tour-module .cont {\n            height: 100% !important;\n        }\n\n    }\n    .vdp-datepicker__calendar {\n        position: absolute;\n        z-index: 2!important;\n        padding: 18px!important;\n        background: #fff;\n        width: 300px;\n        border: 1px solid #ccc;\n    }\n    .vdp-datepicker input {\n        /*min-width: 300px;*/\n        padding: 8px;\n        border: 1px solid #ffa500 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vdp-datepicker input::placeholder {\n        color: #062348 !important;\n    }\n    .vdp-datepicker__calendar .day-header\n    {\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n    .vdp-datepicker__clear-button\n    {\n        position: absolute;\n        right: 20px;\n        top: -11px;\n        color: #0f213d;\n        font-size: 36px;\n    }\n    .vdp-datepicker__calendar .cell {\n        display: inline-block;\n        padding: 0 5px;\n        width: 14.285714285714286%;\n        height: 30px;\n        line-height: 30px;\n        text-align: center;\n        vertical-align: middle;\n        border: 1px solid transparent;\n    }\n\n    .vdp-datepicker__calendar .day {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #0f213d;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vdp-datepicker__calendar .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vdp-datepicker__calendar .cell {\n        display: inline-block;\n        padding: 0 5px;\n        width: 14.285714285714286%;\n        height: 30px !important;\n        line-height: 30px !important;\n        text-align: center;\n        vertical-align: middle;\n        border: 1px solid transparent;\n    }\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n        border: 1px solid #ffa500 !important;\n    }\n    .vdp-datepicker__calendar .cell.selected {\n        background: #ffa50070 !important;\n        background-image: none;\n    }\n    .vdp-datepicker__calendar .cell.selected:hover {\n        background: #ffa50070 !important;\n        background-image: none;\n    }\n\n    .vdp-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vdp-calendar-footer .confirm, .vdp-calendar-footer .reset {\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .vdp-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vdp-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-week-item,  .vdp-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: \'\';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: "Bello Pro";\n        /*font-weight: 700;*/\n    }\n    .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: "";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: "Open Sans";\n        color: #0f213d!important;\n    }\n    .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 30px;\n        height: 30px;\n        font: 30px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n        border: 0;\n    }\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    .qty input{\n        border: 0;\n        width: 60%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style>\n    @media only screen and (max-width:767.98px) {\n        .vhd-container:not(.desktop) .vhd-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n        .tour-module .cont .row{\n            width: 100% !important;\n        }\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vhd-input {\n            min-width: 100% !important;\n        }\n        .vhd-container {\n            width: 100% !important;\n        }\n    }\n    @media screen and (max-width: 576px) {\n        .tour-module .cont {\n            height: 100% !important;\n        }\n\n    }\n    .vhd-picker {\n        z-index: 2!important;\n        min-height: 362px!important;\n        padding: 18px!important;\n    }\n    .vhd-input {\n        /*min-width: 300px;*/\n        padding: 8px;\n        border: 1px solid #ffa500 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vhd-input::placeholder {\n        color: #062348 !important;\n    }\n    .vhd-container:not(.desktop) .vhd-picker {\n        min-height: 362px;\n    }\n    .vhd-calendar .calendar-date .week .day[data-v-0cb4ff92] {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #505050;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vhd-calendar .calendar-date .week .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vhd-calendar-header {\n        height: 20px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header {\n        height:60px !important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header>.info {\n        display:block;\n        width:100%;\n        height:60px;\n        padding-top:32px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-footer {\n        height: 36px !important;\n    }\n    .vhd-calendar-footer {\n        height: 24px!important;\n    }\n    .vhd-calendar .calendar-date .week {\n        height: 30px !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vhd-calendar-footer .confirm, .vhd-calendar-footer .reset {\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .vhd-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vhd-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-week-item,  .vhd-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: \'\';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: "Bello Pro";\n        /*font-weight: 700;*/\n    }\n    .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: "";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: "Open Sans";\n        color: #0f213d!important;\n    }\n    .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 30px;\n        height: 30px;\n        font: 30px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n    }\n    /*.qty .plus {*/\n    /*    cursor: pointer;*/\n    /*    display: inline-block;*/\n    /*    vertical-align: top;*/\n    /*    color: white;*/\n    /*    width: 30px;*/\n    /*    height: 30px;*/\n    /*    font: 30px/1 Arial,sans-serif;*/\n    /*    text-align: center;*/\n    /*    border-radius: 50%;*/\n    /*}*/\n    /*.qty .minus {*/\n    /*    cursor: pointer;*/\n    /*    display: inline-block;*/\n    /*    vertical-align: top;*/\n    /*    color: white;*/\n    /*    width: 30px;*/\n    /*    height: 30px;*/\n    /*    font: 30px/1 Arial,sans-serif;*/\n    /*    text-align: center;*/\n    /*    border-radius: 50%;*/\n    /*    background-clip: padding-box;*/\n    /*}*/\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    .qty input{\n        border: 0;\n        width: 60%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style scoped>\n    input[type="file"]{\n        opacity: 0;\n        width: 100%;\n        height: 200px;\n        position: absolute;\n        cursor: pointer;\n    }\n    .filezone {\n        outline: 2px dashed grey;\n        outline-offset: -10px;\n        background: #ccc;\n        color: dimgray;\n        padding: 10px 10px;\n        min-height: 200px;\n        position: relative;\n        cursor: pointer;\n    }\n    .filezone:hover {\n        background: #c0c0c0;\n    }\n\n    .filezone p {\n        font-size: 1.2em;\n        text-align: center;\n        padding: 50px 50px 50px 50px;\n    }\n    div.file-listing img{\n        max-width: 90%;\n    }\n\n    div.file-listing{\n        margin: auto;\n        padding: 10px;\n        border-bottom: 1px solid #ddd;\n    }\n\n    div.file-listing img{\n        height: 100px;\n    }\n    .preview{\n        height: 100px;\n        max-width: 90%;\n    }\n    div.success-container{\n        text-align: center;\n        color: green;\n    }\n\n    div.remove-container{\n        text-align: center;\n    }\n\n    div.remove-container a{\n        color: red;\n        cursor: pointer;\n    }\n\n    a.submit-button{\n        display: block;\n        margin: auto;\n        text-align: center;\n        width: 200px;\n        padding: 10px;\n        text-transform: uppercase;\n        background-color: green;\n        color: white;\n        font-weight: bold;\n        margin-top: 20px;\n    }\n</style>\n'],sourceRoot:""}]);const s=r},78332:(n,t,e)=>{e.d(t,{A:()=>s});var i=e(45627),o=e.n(i),a=e(76798),r=e.n(a)()(o());r.push([n.id,"input[type=file][data-v-582ef948]{cursor:pointer;height:200px;opacity:0;position:absolute;width:100%}.filezone[data-v-582ef948]{background:#ccc;color:dimgray;cursor:pointer;min-height:200px;outline:2px dashed grey;outline-offset:-10px;padding:10px;position:relative}.filezone[data-v-582ef948]:hover{background:silver}.filezone p[data-v-582ef948]{font-size:1.2em;padding:50px;text-align:center}div.file-listing img[data-v-582ef948]{max-width:90%}div.file-listing[data-v-582ef948]{border-bottom:1px solid #ddd;margin:auto;padding:10px}.preview[data-v-582ef948],div.file-listing img[data-v-582ef948]{height:100px}.preview[data-v-582ef948]{max-width:90%}div.success-container[data-v-582ef948]{color:green;text-align:center}div.remove-container[data-v-582ef948]{text-align:center}div.remove-container a[data-v-582ef948]{color:red;cursor:pointer}a.submit-button[data-v-582ef948]{background-color:green;color:#fff;display:block;font-weight:700;margin:20px auto auto;padding:10px;text-align:center;text-transform:uppercase;width:200px}","",{version:3,sources:["webpack://./resources/js/desktop/pages/Manager/Tours/Edit.vue"],names:[],mappings:"AA8wCA,kCAKA,cAAA,CAFA,YAAA,CAFA,SAAA,CAGA,iBAAA,CAFA,UAIA,CACA,2BAGA,eAAA,CACA,aAAA,CAIA,cAAA,CAFA,gBAAA,CALA,uBAAA,CACA,oBAAA,CAGA,YAAA,CAEA,iBAEA,CACA,iCACA,iBACA,CAEA,6BACA,eAAA,CAEA,YAAA,CADA,iBAEA,CACA,sCACA,aACA,CAEA,kCAGA,4BAAA,CAFA,WAAA,CACA,YAEA,CAKA,gEAFA,YAKA,CAHA,0BAEA,aACA,CACA,uCAEA,WAAA,CADA,iBAEA,CAEA,sCACA,iBACA,CAEA,wCACA,SAAA,CACA,cACA,CAEA,iCAOA,sBAAA,CACA,UAAA,CAPA,aAAA,CAQA,eAAA,CACA,qBAAA,CALA,YAAA,CAFA,iBAAA,CAGA,wBAAA,CAFA,WAOA",sourcesContent:['<template>\n    <div>\n        <ValidationObserver v-slot="{ invalid }">\n            <div v-if="!load" class="row mb-5 mx-auto">\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Куда</label>\n                    <ValidationProvider name="country" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            v-model="edit_tour.TourInfo.country"\n                            :options="countries"\n                            :option-height="25"\n                            placeholder="Выберите страну"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :loading="isCountriesLoading"\n                            :disabled="isCountriesLoading"\n                            :allow-empty="false"\n                            @input="chooseEditResortCountry"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <b :class="\'tc-flag-\'+props.option.Id"></b>\n                                <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                    </span>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Курорт</label>\n                    <ValidationProvider name="resort" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            :value="edit_tour.TourInfo.resort"\n                            :options="cities"\n                            placeholder="Введите название курорта"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :close-on-select="true" :clear-on-select="true"\n                            :loading="isCountriesLoading || isCitiesLoading"\n                            :disabled="isCountriesLoading || isCitiesLoading"\n                            @input="chooseEditResort"\n                            :allow-empty="false"\n                            :preselectFirst="true"\n                        >\n                            <template slot="selection" slot-scope="{ values, search, isOpen }"><span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeResorts }} {{values.length | pluralizeChoose}}</span></template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Отель</label>\n                    <ValidationProvider name="hotel" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            :value="edit_tour.TourInfo.hotel"\n                            :options="hotels"\n                            placeholder="Введите название отеля"\n                            :show-labels="false"\n                            :limit="2"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :allow-empty="false"\n                            :close-on-select="true" :clear-on-select="true"\n                            :loading="isCountriesLoading || isHotelsLoading"\n                            :disabled="isCountriesLoading || isHotelsLoading"\n                            @input="chooseEditHotel"\n                        >\n                            <template slot="selection" slot-scope="{ values, search, isOpen }">\n                                    <span class="multiselect__single" v-if="values.length>3 && !isOpen">{{ values.length }} {{values.length | pluralizeHotels}} {{values.length | pluralizeChoose}}\n                                    </span>\n                            </template>\n                            <template slot="singleLabel" slot-scope="props">\n                                    <span class="option__desc">\n                                        <span class="option__title">{{ props.option.Name }}</span>\n                                        <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                        <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                    </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <div class="option__desc">\n                                    <span class="option__title">{{ props.option.Name }}</span>\n                                    <span class="option__title" style="float:right" v-if="props.option.CommonRate!=0">{{ props.option.CommonRate }}</span>\n                                    <span class="values__hotel-rating" style="float:right" v-if="props.option.StarName">{{ props.option.StarName }}</span>\n                                </div>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Категория номера</label>\n                    <ValidationProvider name="room_type" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <div class="row multiselect__tags align-items-center justify-content-center m-auto" style="width: 100%;">\n                            <input type="text" class=" multiselect__input price" v-model="edit_tour.TourInfo.room_type" placeholder="Категория номера">\n                        </div>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <label class="travel-label">Питание</label>\n                    <ValidationProvider name="meal" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                        <multiselect\n                            v-model="edit_tour.TourInfo.meal"\n                            :options="meals"\n                            :option-height="25"\n                            placeholder="Выберите питание"\n                            :show-labels="false"\n                            :maxHeight="200"\n                            label="Name"\n                            track-by="Name"\n                            :close-on-select="true" :clear-on-select="true"\n                            @input="chooseEditMeal"\n                            :allow-empty="false"\n                        >\n                            <template slot="singleLabel" slot-scope="props">\n                            <span class="option__desc">\n                                <span class="option__title">{{props.option.Name}}</span>\n                            </span>\n                            </template>\n                            <template slot="option" slot-scope="props">\n                                <div>\n                                    <div class="option__desc">\n                                        <span class="option__title">{{props.option.Name}}</span>\n                                    </div>\n                                    <div class="row align-items-center m-auto" style="width: 100%; height: 100%">\n                                        <p class="" style="font-size: 12px; margin:0px;">{{props.option.desc}}</p>\n                                    </div>\n                                </div>\n                            </template>\n                        </multiselect>\n                        <span class="validate-error">{{ errors[0] }}</span>\n                    </ValidationProvider>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 mx-auto" style="width: 100%;">\n                        <label class="travel-label">Даты тура</label>\n                        <ValidationProvider name="date_range" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <div class="row align-items-center justify-content-center m-auto w-100" style="width: 100%;">\n                                <VueHotelDatepicker\n                                    ref="datepickerId"\n                                    :startDate="edit_tour.TourInfo.start"\n                                    :endDate="edit_tour.TourInfo.end"\n                                    :minDate="minDate"\n                                    :placeholder="\'Даты тура\'"\n                                    :format="\'DD/MM/YYYY\'"\n                                    :weekList="[\'Вс.\', \'Пн.\', \'Вт.\', \'Ср.\', \'Чт.\', \'Пт.\', \'Сб.\']"\n                                    :monthList="[\'Янв.\', \'Фев.\', \'Мар.\', \'Апр.\', \'Май.\', \'Июн.\', \'Июл.\', \'Авг.\', \'Сен.\', \'Окт\', \'Ноя.\', \'Дек.\']"\n                                    :fromText="\'С\'"\n                                    :toText="\'По\'"\n                                    :resetText="\'Очистить\'"\n                                    :confirmText="\'Подтвердить\'"\n                                    :mobile="\'mobile\'"\n                                    class="w-100"\n                                    @update="changeEditDateRange"\n                                />\n                            </div>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 m-auto">\n                        <label class="travel-label">Цена</label>\n                        <ValidationProvider name="price" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <b-form-input type="number" class="travel-input" v-model="edit_tour.TourInfo.price" step="1" min="0" @input="changeEditPrice">\n                            </b-form-input>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-6 col-12">\n                    <div class="row align-items-center w-100 m-auto">\n                        <label class="travel-label">Выплачено</label>\n                        <ValidationProvider name="paid" rules="required" v-slot="{ errors }" style="width: 100%;text-align: center;">\n                            <b-form-input type="number" class="travel-input" v-model="edit_tour.TourInfo.paid" step="1" min="0" @input="changeEditPrice">\n                            </b-form-input>\n                            <span class="validate-error">{{ errors[0] }}</span>\n                        </ValidationProvider>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <div class="row align-items-center w-100 mx-auto mt-3" style="width: 100%;">\n                        <label class="travel-label">Дополнительные услуги</label>\n                        <b-form-textarea rows="4" cols="80"\n                                  class="travel-input"\n                                  placeholder="Дополнительные услуги"\n                                  v-model="edit_tour.TourInfo.services"\n                                  style="padding: 5px 15px; border: 1px solid #f08b23;border-radius: 20px !important;"\n                        >\n                    </b-form-textarea>\n                    </div>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Авиабилеты</label>\n                    <avia-tickets-list :avia_tickets="edit_tour.TourInfo.avia_tickets"></avia-tickets-list>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Пассажиры</label>\n                    <passengers-list :passengers="edit_tour.TourInfo.passengers"></passengers-list>\n                </div>\n                <div class="col-md-12">\n                    <label class="travel-label">Файлы для клиента</label>\n                    <div class="form-group row mt-2">\n                        <div class="col-md-12">\n                            <div class="large-12 medium-12 small-12 filezone">\n                                <input type="file" id="files" ref="edit_tour_files" multiple v-on:change="handleEditFiles()"/>\n                                <p>\n                                    Перетащите файл(ы) сюда<br>или нажмите для поиска\n                                </p>\n                            </div>\n                            <label class="travel-label">Или запишите голосовое сообщение</label>\n                            <div class="d-flex justify-content-center mt-2">\n                                <vue-record-audio :mode="\'press\'" @stream="onStream" @result="onEditResult"/>\n                            </div>\n                            <div class="file-listing">\n                                <div\n                                    class="list-group-item"\n                                    v-for="(file, index) in edit_tour.TourInfo.files"\n                                    :key="file.name"\n                                >\n                                    <div class="row m-auto w-100 align-items-center justify-content-center">\n                                        <div class="col-4 text-center">\n                                            <img class="preview" v-if="/\\.(jpe?g|png|svg)$/i.test(file.name)" :src="file.path"/>\n                                            <img class="preview" v-else src="/images/LOGO-1.png"/>\n                                        </div>\n                                        <div class="col-8">\n                                            <div v-if="file.type==\'file\'">\n                                                <p class="travel-label">{{file.name}}</p>\n                                            </div>\n                                            <div v-if="file.type==\'audio\'">\n                                                <audio-player :audio="file"></audio-player>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div class="remove-container">\n                                        <a class="remove" v-on:click="deleteFile(file, index)" v-if="loading == false">Удалить</a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="file-listing">\n                                <div class="list-group-item" v-for="(file, index) in new_files">\n                                    <div class="row m-auto w-100 align-items-center justify-content-center">\n                                        <div class="col-4 text-center">\n                                            <img class="preview" v-bind:ref="\'preview\'+parseInt(index)"/>\n                                        </div>\n                                        <div class="col-8">\n                                            <div v-if="file.type==\'file\'">\n                                                <p class="travel-label">{{file.data.name}}</p>\n                                            </div>\n                                            <div v-if="file.type==\'audio\'">\n                                                <audio-player :audio="file"></audio-player>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div class="remove-container">\n                                        <a class="remove" v-on:click="removeFile(new_files, index)" v-if="loading == false">Отменить</a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div v-if="!load" class="row w-100 m-auto">\n                <div class="col-6 col-md-6 contact-btn text-center">\n                    <button class="btn btn-travel" style="width: 100%" @click="back">\n                        Отмена\n                    </button>\n                </div>\n                <div class="col-6 col-md-6 contact-btn text-center">\n                    <button type="submit" class="btn btn-travel" style="width: 100%" @click="updateClientTour" :disabled="invalid||loading">\n                        <div class="row align-items-center justify-content-center m-auto w-100 h-100 text-center">\n                            <span v-if="loading" role="status" aria-hidden="true" class="spinner-border spinner-border-sm mx-2"></span>\n                            <span v-if="loading" class="sr-only">Loading...</span>\n                            Сохранить\n                        </div>\n                    </button>\n                </div>\n            </div>\n            <div v-if="load" class="row w-100 m-auto">\n                <div class="text-center text-warning my-2">\n                    <b-spinner variant="warning" class="align-middle"/>\n                    <strong>Загрузка...</strong>\n                </div>\n            </div>\n        </ValidationObserver>\n    </div>\n</template>\n\n<script>\n    import {mask} from \'vue-the-mask\'\n    import moment from \'moment\'\n\n    export default {\n        name: "Edit",\n        data() {\n            return {\n                meals: [\n                    { Id:\'115\', Name:\'AI\', desc:\'завтраки, обеды, ужины, напитки\'},\n                    { Id:\'114\',Name:\'BB\', desc:\'завтраки\'},\n                    { Id:\'112\',Name:\'FB\', desc:\'завтраки, обеды, ужины\'},\n                    { Id:\'121\',Name:\'FB+\', desc:\'завтраки, обеды, ужины - расширенное меню\'},\n                    { Id:\'113\',Name:\'HB\', desc:\'завтраки, ужины\'},\n                    { Id:\'122\',Name:\'HB+\', desc:\'завтраки, ужины - расширенное меню\'},\n                    { Id:\'117\',Name:\'RO\', desc:\'без питания\'},\n                    { Id:\'116\',Name:\'UAI\', desc:\'завтраки, обеды, ужины, напитки - расширенное меню\'},\n                    { Id:\'129\',Name:\'SC\', desc:\'самообслуживание\'},\n                ],\n                loading: false,\n                load: false,\n                start: undefined,\n                end: undefined,\n                new_files:[],\n                seconds:0,\n                interval:\'\',\n                flag:false,\n                edit_tour:\'\',\n                minDate:\'01/01/2000\'\n            }\n        },\n        computed: {\n            menu() {\n                return this.$store.getters.menu\n            },\n            clients() {\n                return this.$store.getters.clients\n            },\n            isAdmin : function(){ return this.$store.getters.isAdmin},\n            isManager : function(){ return this.$store.getters.isManager},\n            tourModule() {\n                return this.$store.getters.tourModule\n            },\n            countries() {\n                return this.$store.getters.countries;\n            },\n            cities() {\n                return this.$store.getters.cities;\n            },\n            hotels() {\n                return this.$store.getters.hotels;\n            },\n            branches(){\n                return this.$store.getters.branches\n            },\n\n            //loadings\n            isCountriesLoading() {\n                return this.$store.getters.isCountriesLoading;\n            },\n            isCitiesLoading() {\n                return this.$store.getters.isCitiesLoading;\n            },\n            isHotelsLoading() {\n                return this.$store.getters.isHotelsLoading;\n            },\n        },\n        created() {\n            if (this.countries.length===0) {\n                this.$store.dispatch(\'getCountries\', {town_id:0});\n            }\n        },\n        mounted() {\n            if (this.clients.length>0) {\n                this.load = true;\n                var current_client = this.clients.find((client) => client.id == this.$route.params.client_id);\n                this.edit_tour = current_client.tours.find((tour) => tour.id == this.$route.params.id);\n                this.loadAdditionalData()\n                this.load = false;\n            } else {\n                this.getClient();\n            }\n        },\n        methods: {\n            back() {\n                if(this.isAdmin){\n                    this.$router.push(\'/admin/client-tours/\'+this.$route.params.client_id)\n                }\n                if(this.isManager){\n                    this.$router.push(\'/manager/client-tours/\'+this.$route.params.client_id)\n                }\n            },\n            loadAdditionalData(){\n                this.$store.dispatch(\'getCities\', this.edit_tour.TourInfo.country.Id);\n                if(this.edit_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n                this.edit_tour.TourInfo.start = moment(this.edit_tour.TourInfo.date_range.start, "DD/MM/YYYY").toDate();\n                this.edit_tour.TourInfo.end = moment(this.edit_tour.TourInfo.date_range.end, "DD/MM/YYYY").toDate();\n                this.edit_tour.TourInfo.delete_files=[];\n                this.edit_tour.TourInfo.new_files=[];\n                this.edit_tour.new_files=[];\n            },\n            async getClient() {\n                this.load = true;\n                await this.$store.dispatch(\'setClients\').then(resp => {\n                    this.$store.commit(\'setClients\', resp.data.users);\n                    this.$store.commit(\'setDeletedClients\', resp.data.deleted_users);\n                    var current_client = this.clients.find((client) => client.id == this.$route.params.client_id);\n                    this.edit_tour = current_client.tours.find((tour) => tour.id == this.$route.params.id);\n                    this.loadAdditionalData()\n                    this.load = false;\n                })\n            },\n            chooseEditResortCountry(value){\n                this.edit_tour.TourInfo.resort={Name:\'Любой\'};\n                this.edit_tour.TourInfo.hotel={Name:\'Любой\'};\n                this.edit_tour.TourInfo.country = value;\n                this.$store.dispatch(\'getCities\', this.edit_tour.TourInfo.country.Id);\n                this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n            },\n            chooseEditResort(value) {\n                this.edit_tour.TourInfo.resort = value;\n                if(this.edit_tour.TourInfo.resort.Name != \'Любой\')\n                {\n                    // this.new_tour.TourInfo.resort = this.tourModule.resorts[0];\n                    var town_id = this.edit_tour.TourInfo.resort.Id;\n                    //поиск отелей по городам-курортам\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:town_id, star_id:\'0\'}).then(() => {\n                        if(this.hotels.findIndex(item=> item.Id == this.edit_tour.TourInfo.hotel.Id) == -1)\n                        {\n                            this.edit_tour.TourInfo.hotel = {Name:\'Любой\'};\n                        }\n                    });\n                }\n                else {\n                    //если городов-курортов не выбрано, то поиск отелей по стране\n                    this.$store.dispatch(\'getHotels\', {country_id:this.edit_tour.TourInfo.country.Id, town_id:\'0\', star_id:\'0\'});\n                }\n            },\n            chooseEditHotel(value) {\n                this.edit_tour.TourInfo.hotel = value;\n            },\n            changeEditDateRange(date_object) {\n                this.edit_tour.TourInfo.date_range=date_object;\n            },\n            chooseEditMeal(value){\n                this.edit_tour.TourInfo.meal = value;\n            },\n            changeEditPrice(){\n                this.edit_tour.TourInfo.left = this.edit_tour.TourInfo.price - this.edit_tour.TourInfo.paid;\n            },\n            handleEditFiles() {\n                let uploadedFiles = this.$refs.edit_tour_files.files;\n                for(var i = 0; i < uploadedFiles.length; i++) {\n                    if (/\\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(uploadedFiles[i].name))\n                    {\n                        var date = new Date();\n                        this.new_files.push({type:\'file\', name:uploadedFiles[i].name, data:uploadedFiles[i], date: date });\n                        this.getImagePreviews(this.new_files);\n                    }\n                    else\n                    {\n                        break;\n                    }\n                }\n            },\n            onEditResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                this.new_files.push({\n                    type: \'audio\',\n                    name: \'record-\'+time+\'.mp3\',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                    seconds: this.seconds\n                })\n                this.countSeconds();\n                this.getImagePreviews(this.new_files);\n            },\n            deleteFile(file, key) {\n                this.edit_tour.TourInfo.delete_files.push(file);\n                this.edit_tour.TourInfo.files.splice( key, 1 );\n            },\n            updateClientTour(){\n                this.loading = true;\n                this.edit_tour.StartAt = moment(this.edit_tour.TourInfo.date_range.start, "DD-MM-YYYY");\n                this.edit_tour.EndAt = moment(this.edit_tour.TourInfo.date_range.end, "DD-MM-YYYY");\n                console.log(this.edit_tour.EndAt)\n                this.edit_tour.new_files = this.new_files;\n                let formData = new FormData();\n                formData.append("UserTour", JSON.stringify(this.edit_tour));\n\n                for (var i = 0; i < this.new_files.length; i++) {\n                    let file = this.new_files[i].data;\n\n                    formData.append(\'new_files[\' + i + \']\', file);\n                }\n\n                this.$store.dispatch(\'updateClientTour\', formData)\n                    .then(response => {\n                        console.log(\'response\', response)\n                        this.edit_tour.TourInfo.delete_files=[];\n                        this.edit_tour.TourInfo.new_files=[];\n                        this.edit_tour.TourInfo.files = response.TourInfo.files;\n                        this.sendMessage(\'Тур клиента успешно обновлён\');\n                        this.loading = false;\n                    });\n            },\n\n            getImagePreviews(arr) {\n                for ( let i = 0; i < arr.length; i++ ) {\n                    if ( /\\.(jpe?g|png|svg)$/i.test(arr[i].name)) {\n                        let reader = new FileReader();\n                        reader.addEventListener("load", function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = reader.result;\n                        }.bind(this), false);\n                        reader.readAsDataURL(arr[i].data);\n                    }\n                    else {\n                        this.$nextTick(function() {\n                            this.$refs[\'preview\'+parseInt(i)][0].src = \'/images/LOGO-1.png\';\n                        });\n                    }\n                }\n            },\n            removeFile( arr, key ) {\n                arr.splice( key, 1 );\n                this.getImagePreviews(arr);\n            },\n            onStream(stream) {\n                this.countSeconds();\n                console.log(\'Got a stream object:\', stream);\n            },\n            countSeconds() {\n                this.flag = !this.flag;\n                if (this.flag == true) {\n                    this.seconds=0;\n                    this.interval = setInterval(this.incrementSeconds, 1000);\n                }\n                else {\n                    clearInterval(this.interval)\n                }\n            },\n            incrementSeconds() {\n                this.seconds += 1;\n            },\n\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Сообщение от TravelClub\',\n                    text: message\n                });\n            },\n        },\n        filters: {\n            pluralizeResorts: function(n) {\n                if(n === 1)\n                {\n                    return \'курорт\'\n                }\n                if (n>1 && n<5) {\n                    return \'курорта\'\n                }\n                if (n>4 && n<20) {\n                    return \'курортов\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'курорт\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'курорта\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'курортов\'\n                    }\n                    return \'курортов\'\n                }\n                return \'курортов\'\n            },\n            pluralizeHotels: function(n) {\n                if(n === 1)\n                {\n                    return \'отель\'\n                }\n                if (n>1 && n<5) {\n                    return \'отеля\'\n                }\n                if (n>4 && n<20) {\n                    return \'отелей\'\n                }\n                if (n>19) {\n                    var last = n%10;\n                    if(last === 1)\n                    {\n                        return \'отель\'\n                    }\n                    if(last>1 && last<5)\n                    {\n                        return \'отеля\'\n                    }\n                    if (last>4 && last<10 && last === 0 ) {\n                        return \'отелей\'\n                    }\n                    return \'отелей\'\n                }\n                return \'отелей\'\n            },\n            pluralizeChoose: function(n) {\n                if(n === 1)\n                {\n                    return \'выбран\'\n                }\n                return \'выбрано\'\n            }\n        },\n        directives: {mask}\n    }\n<\/script>\n\n<style>\n    .btn-travel {\n        color: #fff !important;\n        background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%);\n        background-color: rgba(0, 0, 0, 0);\n        background-color: #f08b23 !important;\n        border-color: #f08b23 !important;\n        box-shadow: 0 2px 2px 0 rgba(156, 39, 176, 0.14), 0 3px 1px -2px rgba(156, 39, 176, 0.2), 0 1px 5px 0 rgba(156, 39, 176, 0.12) !important;\n    }\n    @media only screen and (max-width:767.98px) {\n        .vdp-container:not(.desktop) .vdp-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n        .tour-module .cont .row{\n            width: 100% !important;\n        }\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vdp-input {\n            min-width: 100% !important;\n        }\n        .vdp-container {\n            width: 100% !important;\n        }\n    }\n    @media screen and (max-width: 576px) {\n        .tour-module .cont {\n            height: 100% !important;\n        }\n\n    }\n    .vdp-datepicker__calendar {\n        position: absolute;\n        z-index: 2!important;\n        padding: 18px!important;\n        background: #fff;\n        width: 300px;\n        border: 1px solid #ccc;\n    }\n    .vdp-datepicker input {\n        /*min-width: 300px;*/\n        padding: 8px;\n        border: 1px solid #ffa500 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vdp-datepicker input::placeholder {\n        color: #062348 !important;\n    }\n    .vdp-datepicker__calendar .day-header\n    {\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n    .vdp-datepicker__clear-button\n    {\n        position: absolute;\n        right: 20px;\n        top: -11px;\n        color: #0f213d;\n        font-size: 36px;\n    }\n    .vdp-datepicker__calendar .cell {\n        display: inline-block;\n        padding: 0 5px;\n        width: 14.285714285714286%;\n        height: 30px;\n        line-height: 30px;\n        text-align: center;\n        vertical-align: middle;\n        border: 1px solid transparent;\n    }\n\n    .vdp-datepicker__calendar .day {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #0f213d;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vdp-datepicker__calendar .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vdp-datepicker__calendar .cell {\n        display: inline-block;\n        padding: 0 5px;\n        width: 14.285714285714286%;\n        height: 30px !important;\n        line-height: 30px !important;\n        text-align: center;\n        vertical-align: middle;\n        border: 1px solid transparent;\n    }\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,\n    .vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover {\n        border: 1px solid #ffa500 !important;\n    }\n    .vdp-datepicker__calendar .cell.selected {\n        background: #ffa50070 !important;\n        background-image: none;\n    }\n    .vdp-datepicker__calendar .cell.selected:hover {\n        background: #ffa50070 !important;\n        background-image: none;\n    }\n\n    .vdp-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vdp-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vdp-calendar-footer .confirm, .vdp-calendar-footer .reset {\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .vdp-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vdp-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vdp-calendar .calendar-week-item,  .vdp-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: \'\';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: "Bello Pro";\n        /*font-weight: 700;*/\n    }\n    .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: "";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: "Open Sans";\n        color: #0f213d!important;\n    }\n    .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 30px;\n        height: 30px;\n        font: 30px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n        border: 0;\n    }\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    .qty input{\n        border: 0;\n        width: 60%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style>\n    @media only screen and (max-width:767.98px) {\n        .vhd-container:not(.desktop) .vhd-picker {\n            width: 100% !important;\n            padding: 8px\n        }\n        .tour-module .cont .row{\n            width: 100% !important;\n        }\n        .qty input {\n            border: 0;\n            width: 50%;\n        }\n    }\n    @media screen and (max-width: 477px) {\n        .vhd-input {\n            min-width: 100% !important;\n        }\n        .vhd-container {\n            width: 100% !important;\n        }\n    }\n    @media screen and (max-width: 576px) {\n        .tour-module .cont {\n            height: 100% !important;\n        }\n\n    }\n    .vhd-picker {\n        z-index: 2!important;\n        min-height: 362px!important;\n        padding: 18px!important;\n    }\n    .vhd-input {\n        /*min-width: 300px;*/\n        padding: 8px;\n        border: 1px solid #ffa500 !important;\n        color: #062348!important;\n        font-size: 16px;\n        line-height: 32px;\n        outline: none;\n        border-radius: 20px;\n        min-height: 40px;\n        height: 40px !important;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n        width: 100%;\n    }\n    .vhd-input::placeholder {\n        color: #062348 !important;\n    }\n    .vhd-container:not(.desktop) .vhd-picker {\n        min-height: 362px;\n    }\n    .vhd-calendar .calendar-date .week .day[data-v-0cb4ff92] {\n        font-size: 16px;\n        font-weight: 500;\n        line-height: 30px;\n        color: #505050;\n        text-align: center;\n        cursor: pointer;\n    }\n    .vhd-calendar .calendar-date .week .day{\n        background-image: none!important;\n        height: 30px !important;\n    }\n    .vhd-calendar-header {\n        height: 20px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header {\n        height:60px !important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-header>.info {\n        display:block;\n        width:100%;\n        height:60px;\n        padding-top:32px!important;\n    }\n    .vhd-container:not(.desktop) .vhd-calendar-footer {\n        height: 36px !important;\n    }\n    .vhd-calendar-footer {\n        height: 24px!important;\n    }\n    .vhd-calendar .calendar-date .week {\n        height: 30px !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date::before {\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date::after{\n        background-color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.in-date-range {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.start-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.end-date {\n        background-color: #ffa50070 !important;\n    }\n    .vhd-calendar .calendar-date .week .day.today {\n        border: 1px solid #ffa500 !important;\n    }\n    .vhd-calendar-footer .confirm, .vhd-calendar-footer .reset {\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .vhd-calendar-footer .reset {\n        color: #062348!important;\n    }\n    .vhd-calendar-footer .confirm{\n        color: #ffa500 !important;\n    }\n    .vhd-calendar .calendar-week-item,  .vhd-calendar .calendar-month-title{\n        color: #062348!important;\n        font-family: "Open Sans" !important;\n        font-weight: 900!important;\n    }\n    .values__hotel-rating::after{\n        content: \'\';\n        display: inline-block;\n        margin-left: 2px;\n        width: 13px;\n        height: 12px;\n        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);\n        background-repeat: no-repeat;\n        background-position: center;\n    }\n    .multiselect__tags .price{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900 !important;\n    }\n\n    .multiselect__tags .price:focus{\n        outline: none!important;\n        box-shadow: none !important;\n    }\n\n    .multiselect-title {\n        color: #062348 !important;\n        font-family: "Bello Pro";\n        /*font-weight: 700;*/\n    }\n    .multiselect__tags {\n        border: 1px solid #f08b23;\n        border-radius: 20px;\n        font-size: 1rem;\n        min-height: 40px;\n    }\n    .multiselect__tag {\n        background: #062348;\n    }\n    .multiselect__tag-icon::after {\n        color:#fff;\n    }\n    .multiselect__tag-icon:focus, .multiselect__tag-icon:hover {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight::after {\n        background: #f08b23;\n    }\n    .multiselect__option--highlight{\n        background: #f08b23;\n    }\n    .multiselect{\n        color: #062348;\n        font-family: "Open Sans" !important;\n        font-weight: 900;\n    }\n    .multiselect__placeholder {\n        color: #062348;\n    }\n    .multiselect__input:focus, .multiselect__single:focus {\n        border-color: #062348;\n    }\n    .multiselect__input::placeholder {\n        color: #062348 !important;\n        font-family: Open Sans !important;\n        font-weight: 700;\n    }\n    .multiselect--disabled {\n        background: white;\n    }\n    .multiselect--disabled .multiselect__select {\n        background: transparent;\n    }\n    .multiselect__spinner::after, .multiselect__spinner::before {\n        position: absolute;\n        content: "";\n        top: 50%;\n        left: 50%;\n        margin: -8px 0 0 -8px;\n        width: 16px;\n        height: 16px;\n        border-radius: 100%;\n        border: 3px solid transparent;\n        border-top-color: transparent;\n        border-top-color: #ffa500;\n        box-shadow: 0 0 0 1px transparent;\n        background: transparent;\n    }\n    .multiselect__spinner{\n        border-radius: 50px;\n    }\n\n    .qty .count {\n        display: inline-block;\n        vertical-align: top;\n        font-size: 25px;\n        font-weight: 700;\n        line-height: 30px;\n        padding: 0 2px;\n        min-width: 35px;\n        text-align: center;\n        font-family: "Open Sans";\n        color: #0f213d!important;\n    }\n    .qty button{\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        cursor: pointer;\n        display: inline-block;\n        vertical-align: top;\n        color: white;\n        width: 30px;\n        height: 30px;\n        font: 30px/1 Arial,sans-serif;\n        text-align: center;\n        border-radius: 50%;\n        padding: 0;\n        background: #f08b23;\n    }\n    /*.qty .plus {*/\n    /*    cursor: pointer;*/\n    /*    display: inline-block;*/\n    /*    vertical-align: top;*/\n    /*    color: white;*/\n    /*    width: 30px;*/\n    /*    height: 30px;*/\n    /*    font: 30px/1 Arial,sans-serif;*/\n    /*    text-align: center;*/\n    /*    border-radius: 50%;*/\n    /*}*/\n    /*.qty .minus {*/\n    /*    cursor: pointer;*/\n    /*    display: inline-block;*/\n    /*    vertical-align: top;*/\n    /*    color: white;*/\n    /*    width: 30px;*/\n    /*    height: 30px;*/\n    /*    font: 30px/1 Arial,sans-serif;*/\n    /*    text-align: center;*/\n    /*    border-radius: 50%;*/\n    /*    background-clip: padding-box;*/\n    /*}*/\n    .qty div {\n        text-align: center;\n    }\n    .qty .minus:hover{\n        background: #0f213d!important;\n        color: white;\n    }\n    .qty .plus:hover{\n        background: #0f213d !important;\n        color: white;\n    }\n\n    .qty input{\n        border: 0;\n        width: 60%;\n    }\n    .qty input::-webkit-outer-spin-button,\n    .qty input::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n    }\n    .qty input:disabled{\n        background-color:white;\n    }\n</style>\n<style scoped>\n    input[type="file"]{\n        opacity: 0;\n        width: 100%;\n        height: 200px;\n        position: absolute;\n        cursor: pointer;\n    }\n    .filezone {\n        outline: 2px dashed grey;\n        outline-offset: -10px;\n        background: #ccc;\n        color: dimgray;\n        padding: 10px 10px;\n        min-height: 200px;\n        position: relative;\n        cursor: pointer;\n    }\n    .filezone:hover {\n        background: #c0c0c0;\n    }\n\n    .filezone p {\n        font-size: 1.2em;\n        text-align: center;\n        padding: 50px 50px 50px 50px;\n    }\n    div.file-listing img{\n        max-width: 90%;\n    }\n\n    div.file-listing{\n        margin: auto;\n        padding: 10px;\n        border-bottom: 1px solid #ddd;\n    }\n\n    div.file-listing img{\n        height: 100px;\n    }\n    .preview{\n        height: 100px;\n        max-width: 90%;\n    }\n    div.success-container{\n        text-align: center;\n        color: green;\n    }\n\n    div.remove-container{\n        text-align: center;\n    }\n\n    div.remove-container a{\n        color: red;\n        cursor: pointer;\n    }\n\n    a.submit-button{\n        display: block;\n        margin: auto;\n        text-align: center;\n        width: 200px;\n        padding: 10px;\n        text-transform: uppercase;\n        background-color: green;\n        color: white;\n        font-weight: bold;\n        margin-top: 20px;\n    }\n</style>\n'],sourceRoot:""}]);const s=r},80383:(n,t,e)=>{e.r(t),e.d(t,{default:()=>g});var i=e(29928),o=e(95093),a=e.n(o);function r(n){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function s(){s=function(){return t};var n,t={},e=Object.prototype,i=e.hasOwnProperty,o=Object.defineProperty||function(n,t,e){n[t]=e.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",d=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function p(n,t,e){return Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{p({},"")}catch(n){p=function(n,t,e){return n[t]=e}}function u(n,t,e,i){var a=t&&t.prototype instanceof _?t:_,r=Object.create(a.prototype),s=new N(i||[]);return o(r,"_invoke",{value:z(n,e,s)}),r}function A(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var h="suspendedStart",m="suspendedYield",f="executing",v="completed",g={};function _(){}function b(){}function C(){}var w={};p(w,l,(function(){return this}));var x=Object.getPrototypeOf,y=x&&x(x(S([])));y&&y!==e&&i.call(y,l)&&(w=y);var k=C.prototype=_.prototype=Object.create(w);function D(n){["next","throw","return"].forEach((function(t){p(n,t,(function(n){return this._invoke(t,n)}))}))}function I(n,t){function e(o,a,s,l){var d=A(n[o],n,a);if("throw"!==d.type){var c=d.arg,p=c.value;return p&&"object"==r(p)&&i.call(p,"__await")?t.resolve(p.__await).then((function(n){e("next",n,s,l)}),(function(n){e("throw",n,s,l)})):t.resolve(p).then((function(n){c.value=n,s(c)}),(function(n){return e("throw",n,s,l)}))}l(d.arg)}var a;o(this,"_invoke",{value:function(n,i){function o(){return new t((function(t,o){e(n,i,t,o)}))}return a=a?a.then(o,o):o()}})}function z(t,e,i){var o=h;return function(a,r){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===a)throw r;return{value:n,done:!0}}for(i.method=a,i.arg=r;;){var s=i.delegate;if(s){var l=B(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===h)throw o=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=f;var d=A(t,e,i);if("normal"===d.type){if(o=i.done?v:m,d.arg===g)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(o=v,i.method="throw",i.arg=d.arg)}}}function B(t,e){var i=e.method,o=t.iterator[i];if(o===n)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=n,B(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var a=A(o,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var r=a.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function T(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function E(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function N(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(T,this),this.reset(!0)}function S(t){if(t||""===t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(i.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return b.prototype=C,o(k,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:b,configurable:!0}),b.displayName=p(C,c,"GeneratorFunction"),t.isGeneratorFunction=function(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,C):(n.__proto__=C,p(n,c,"GeneratorFunction")),n.prototype=Object.create(k),n},t.awrap=function(n){return{__await:n}},D(I.prototype),p(I.prototype,d,(function(){return this})),t.AsyncIterator=I,t.async=function(n,e,i,o,a){void 0===a&&(a=Promise);var r=new I(u(n,e,i,o),a);return t.isGeneratorFunction(e)?r:r.next().then((function(n){return n.done?n.value:r.next()}))},D(k),p(k,c,"Generator"),p(k,l,(function(){return this})),p(k,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var t=Object(n),e=[];for(var i in t)e.push(i);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=S,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(i,o){return s.type="throw",s.arg=t,e.next=i,o&&(e.method="next",e.arg=n),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var l=i.call(r,"catchLoc"),d=i.call(r,"finallyLoc");if(l&&d){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===n||"continue"===n)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=n,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(r)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),g},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),E(e),g}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var i=e.completion;if("throw"===i.type){var o=i.arg;E(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:S(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=n),g}},t}function l(n,t,e,i,o,a,r){try{var s=n[a](r),l=s.value}catch(n){return void e(n)}s.done?t(l):Promise.resolve(l).then(i,o)}const d={name:"Edit",data:function(){return{meals:[{Id:"115",Name:"AI",desc:"завтраки, обеды, ужины, напитки"},{Id:"114",Name:"BB",desc:"завтраки"},{Id:"112",Name:"FB",desc:"завтраки, обеды, ужины"},{Id:"121",Name:"FB+",desc:"завтраки, обеды, ужины - расширенное меню"},{Id:"113",Name:"HB",desc:"завтраки, ужины"},{Id:"122",Name:"HB+",desc:"завтраки, ужины - расширенное меню"},{Id:"117",Name:"RO",desc:"без питания"},{Id:"116",Name:"UAI",desc:"завтраки, обеды, ужины, напитки - расширенное меню"},{Id:"129",Name:"SC",desc:"самообслуживание"}],loading:!1,load:!1,start:void 0,end:void 0,new_files:[],seconds:0,interval:"",flag:!1,edit_tour:"",minDate:"01/01/2000"}},computed:{menu:function(){return this.$store.getters.menu},clients:function(){return this.$store.getters.clients},isAdmin:function(){return this.$store.getters.isAdmin},isManager:function(){return this.$store.getters.isManager},tourModule:function(){return this.$store.getters.tourModule},countries:function(){return this.$store.getters.countries},cities:function(){return this.$store.getters.cities},hotels:function(){return this.$store.getters.hotels},branches:function(){return this.$store.getters.branches},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading},isHotelsLoading:function(){return this.$store.getters.isHotelsLoading}},created:function(){0===this.countries.length&&this.$store.dispatch("getCountries",{town_id:0})},mounted:function(){var n=this;if(this.clients.length>0){this.load=!0;var t=this.clients.find((function(t){return t.id==n.$route.params.client_id}));this.edit_tour=t.tours.find((function(t){return t.id==n.$route.params.id})),this.loadAdditionalData(),this.load=!1}else this.getClient()},methods:{back:function(){this.isAdmin&&this.$router.push("/admin/client-tours/"+this.$route.params.client_id),this.isManager&&this.$router.push("/manager/client-tours/"+this.$route.params.client_id)},loadAdditionalData:function(){var n=this;if(this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),"Любой"!=this.edit_tour.TourInfo.resort.Name){var t=this.edit_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:t,star_id:"0"}).then((function(){-1==n.hotels.findIndex((function(t){return t.Id==n.edit_tour.TourInfo.hotel.Id}))&&(n.edit_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"});this.edit_tour.TourInfo.start=a()(this.edit_tour.TourInfo.date_range.start,"DD/MM/YYYY").toDate(),this.edit_tour.TourInfo.end=a()(this.edit_tour.TourInfo.date_range.end,"DD/MM/YYYY").toDate(),this.edit_tour.TourInfo.delete_files=[],this.edit_tour.TourInfo.new_files=[],this.edit_tour.new_files=[]},getClient:function(){var n,t=this;return(n=s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.load=!0,n.next=3,t.$store.dispatch("setClients").then((function(n){t.$store.commit("setClients",n.data.users),t.$store.commit("setDeletedClients",n.data.deleted_users);var e=t.clients.find((function(n){return n.id==t.$route.params.client_id}));t.edit_tour=e.tours.find((function(n){return n.id==t.$route.params.id})),t.loadAdditionalData(),t.load=!1}));case 3:case"end":return n.stop()}}),n)})),function(){var t=this,e=arguments;return new Promise((function(i,o){var a=n.apply(t,e);function r(n){l(a,i,o,r,s,"next",n)}function s(n){l(a,i,o,r,s,"throw",n)}r(void 0)}))})()},chooseEditResortCountry:function(n){this.edit_tour.TourInfo.resort={Name:"Любой"},this.edit_tour.TourInfo.hotel={Name:"Любой"},this.edit_tour.TourInfo.country=n,this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditResort:function(n){var t=this;if(this.edit_tour.TourInfo.resort=n,"Любой"!=this.edit_tour.TourInfo.resort.Name){var e=this.edit_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:e,star_id:"0"}).then((function(){-1==t.hotels.findIndex((function(n){return n.Id==t.edit_tour.TourInfo.hotel.Id}))&&(t.edit_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditHotel:function(n){this.edit_tour.TourInfo.hotel=n},changeEditDateRange:function(n){this.edit_tour.TourInfo.date_range=n},chooseEditMeal:function(n){this.edit_tour.TourInfo.meal=n},changeEditPrice:function(){this.edit_tour.TourInfo.left=this.edit_tour.TourInfo.price-this.edit_tour.TourInfo.paid},handleEditFiles:function(){for(var n=this.$refs.edit_tour_files.files,t=0;t<n.length&&/\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(n[t].name);t++){var e=new Date;this.new_files.push({type:"file",name:n[t].name,data:n[t],date:e}),this.getImagePreviews(this.new_files)}},onEditResult:function(n){var t=Date.now(),e=new Date;this.new_files.push({type:"audio",name:"record-"+t+".mp3",src:window.URL.createObjectURL(n),data:n,date:e,seconds:this.seconds}),this.countSeconds(),this.getImagePreviews(this.new_files)},deleteFile:function(n,t){this.edit_tour.TourInfo.delete_files.push(n),this.edit_tour.TourInfo.files.splice(t,1)},updateClientTour:function(){var n=this;this.loading=!0,this.edit_tour.StartAt=a()(this.edit_tour.TourInfo.date_range.start,"DD-MM-YYYY"),this.edit_tour.EndAt=a()(this.edit_tour.TourInfo.date_range.end,"DD-MM-YYYY"),console.log(this.edit_tour.EndAt),this.edit_tour.new_files=this.new_files;var t=new FormData;t.append("UserTour",JSON.stringify(this.edit_tour));for(var e=0;e<this.new_files.length;e++){var i=this.new_files[e].data;t.append("new_files["+e+"]",i)}this.$store.dispatch("updateClientTour",t).then((function(t){console.log("response",t),n.edit_tour.TourInfo.delete_files=[],n.edit_tour.TourInfo.new_files=[],n.edit_tour.TourInfo.files=t.TourInfo.files,n.sendMessage("Тур клиента успешно обновлён"),n.loading=!1}))},getImagePreviews:function(n){for(var t=this,e=function(e){if(/\.(jpe?g|png|svg)$/i.test(n[e].name)){var i=new FileReader;i.addEventListener("load",function(){this.$refs["preview"+parseInt(e)][0].src=i.result}.bind(t),!1),i.readAsDataURL(n[e].data)}else t.$nextTick((function(){this.$refs["preview"+parseInt(e)][0].src="/images/LOGO-1.png"}))},i=0;i<n.length;i++)e(i)},removeFile:function(n,t){n.splice(t,1),this.getImagePreviews(n)},onStream:function(n){this.countSeconds(),console.log("Got a stream object:",n)},countSeconds:function(){this.flag=!this.flag,1==this.flag?(this.seconds=0,this.interval=setInterval(this.incrementSeconds,1e3)):clearInterval(this.interval)},incrementSeconds:function(){this.seconds+=1},sendMessage:function(n){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:n})}},filters:{pluralizeResorts:function(n){if(1===n)return"курорт";if(n>1&&n<5)return"курорта";if(n>4&&n<20)return"курортов";if(n>19){var t=n%10;return 1===t?"курорт":t>1&&t<5?"курорта":"курортов"}return"курортов"},pluralizeHotels:function(n){if(1===n)return"отель";if(n>1&&n<5)return"отеля";if(n>4&&n<20)return"отелей";if(n>19){var t=n%10;return 1===t?"отель":t>1&&t<5?"отеля":"отелей"}return"отелей"},pluralizeChoose:function(n){return 1===n?"выбран":"выбрано"}},directives:{mask:i.mask}};var c=e(85072),p=e.n(c),u=e(47579),A={insert:"head",singleton:!1};p()(u.A,A);u.A.locals;var h=e(15362),m={insert:"head",singleton:!1};p()(h.A,m);h.A.locals;var f=e(78332),v={insert:"head",singleton:!1};p()(f.A,v);f.A.locals;const g=(0,e(14486).A)(d,(function(){var n=this,t=n._self._c;return t("div",[t("ValidationObserver",{scopedSlots:n._u([{key:"default",fn:function(e){var i=e.invalid;return[n.load?n._e():t("div",{staticClass:"row mb-5 mx-auto"},[t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"travel-label"},[n._v("Куда")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"country",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("multiselect",{attrs:{options:n.countries,"option-height":25,placeholder:"Выберите страну","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name",loading:n.isCountriesLoading,disabled:n.isCountriesLoading,"allow-empty":!1},on:{input:n.chooseEditResortCountry},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}},{key:"option",fn:function(e){return[t("b",{class:"tc-flag-"+e.option.Id}),n._v(" "),t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}}],null,!0),model:{value:n.edit_tour.TourInfo.country,callback:function(t){n.$set(n.edit_tour.TourInfo,"country",t)},expression:"edit_tour.TourInfo.country"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"travel-label"},[n._v("Курорт")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"resort",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("multiselect",{attrs:{value:n.edit_tour.TourInfo.resort,options:n.cities,placeholder:"Введите название курорта","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,loading:n.isCountriesLoading||n.isCitiesLoading,disabled:n.isCountriesLoading||n.isCitiesLoading,"allow-empty":!1,preselectFirst:!0},on:{input:n.chooseEditResort},scopedSlots:n._u([{key:"selection",fn:function(e){var i=e.values,o=(e.search,e.isOpen);return[i.length>3&&!o?t("span",{staticClass:"multiselect__single"},[n._v(n._s(i.length)+" "+n._s(n._f("pluralizeResorts")(i.length))+" "+n._s(n._f("pluralizeChoose")(i.length)))]):n._e()]}}],null,!0)}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"travel-label"},[n._v("Отель")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"hotel",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("multiselect",{attrs:{value:n.edit_tour.TourInfo.hotel,options:n.hotels,placeholder:"Введите название отеля","show-labels":!1,limit:2,maxHeight:200,label:"Name","track-by":"Name","allow-empty":!1,"close-on-select":!0,"clear-on-select":!0,loading:n.isCountriesLoading||n.isHotelsLoading,disabled:n.isCountriesLoading||n.isHotelsLoading},on:{input:n.chooseEditHotel},scopedSlots:n._u([{key:"selection",fn:function(e){var i=e.values,o=(e.search,e.isOpen);return[i.length>3&&!o?t("span",{staticClass:"multiselect__single"},[n._v(n._s(i.length)+" "+n._s(n._f("pluralizeHotels")(i.length))+" "+n._s(n._f("pluralizeChoose")(i.length))+"\n                                ")]):n._e()]}},{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))]),n._v(" "),0!=e.option.CommonRate?t("span",{staticClass:"option__title",staticStyle:{float:"right"}},[n._v(n._s(e.option.CommonRate))]):n._e(),n._v(" "),e.option.StarName?t("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[n._v(n._s(e.option.StarName))]):n._e()])]}},{key:"option",fn:function(e){return[t("div",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))]),n._v(" "),0!=e.option.CommonRate?t("span",{staticClass:"option__title",staticStyle:{float:"right"}},[n._v(n._s(e.option.CommonRate))]):n._e(),n._v(" "),e.option.StarName?t("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[n._v(n._s(e.option.StarName))]):n._e()])]}}],null,!0)}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"travel-label"},[n._v("Категория номера")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"room_type",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.edit_tour.TourInfo.room_type,expression:"edit_tour.TourInfo.room_type"}],staticClass:"multiselect__input price",attrs:{type:"text",placeholder:"Категория номера"},domProps:{value:n.edit_tour.TourInfo.room_type},on:{input:function(t){t.target.composing||n.$set(n.edit_tour.TourInfo,"room_type",t.target.value)}}})]),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("label",{staticClass:"travel-label"},[n._v("Питание")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"meal",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("multiselect",{attrs:{options:n.meals,"option-height":25,placeholder:"Выберите питание","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,"allow-empty":!1},on:{input:n.chooseEditMeal},scopedSlots:n._u([{key:"singleLabel",fn:function(e){return[t("span",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])])]}},{key:"option",fn:function(e){return[t("div",[t("div",{staticClass:"option__desc"},[t("span",{staticClass:"option__title"},[n._v(n._s(e.option.Name))])]),n._v(" "),t("div",{staticClass:"row align-items-center m-auto",staticStyle:{width:"100%",height:"100%"}},[t("p",{staticStyle:{"font-size":"12px",margin:"0px"}},[n._v(n._s(e.option.desc))])])])]}}],null,!0),model:{value:n.edit_tour.TourInfo.meal,callback:function(t){n.$set(n.edit_tour.TourInfo,"meal",t)},expression:"edit_tour.TourInfo.meal"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center w-100 mx-auto",staticStyle:{width:"100%"}},[t("label",{staticClass:"travel-label"},[n._v("Даты тура")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"date_range",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100",staticStyle:{width:"100%"}},[t("VueHotelDatepicker",{ref:"datepickerId",staticClass:"w-100",attrs:{startDate:n.edit_tour.TourInfo.start,endDate:n.edit_tour.TourInfo.end,minDate:n.minDate,placeholder:"Даты тура",format:"DD/MM/YYYY",weekList:["Вс.","Пн.","Вт.","Ср.","Чт.","Пт.","Сб."],monthList:["Янв.","Фев.","Мар.","Апр.","Май.","Июн.","Июл.","Авг.","Сен.","Окт","Ноя.","Дек."],fromText:"С",toText:"По",resetText:"Очистить",confirmText:"Подтвердить",mobile:"mobile"},on:{update:n.changeEditDateRange}})],1),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center w-100 m-auto"},[t("label",{staticClass:"travel-label"},[n._v("Цена")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"price",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("b-form-input",{staticClass:"travel-input",attrs:{type:"number",step:"1",min:"0"},on:{input:n.changeEditPrice},model:{value:n.edit_tour.TourInfo.price,callback:function(t){n.$set(n.edit_tour.TourInfo,"price",t)},expression:"edit_tour.TourInfo.price"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-6 col-12"},[t("div",{staticClass:"row align-items-center w-100 m-auto"},[t("label",{staticClass:"travel-label"},[n._v("Выплачено")]),n._v(" "),t("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"paid",rules:"required"},scopedSlots:n._u([{key:"default",fn:function(e){var i=e.errors;return[t("b-form-input",{staticClass:"travel-input",attrs:{type:"number",step:"1",min:"0"},on:{input:n.changeEditPrice},model:{value:n.edit_tour.TourInfo.paid,callback:function(t){n.$set(n.edit_tour.TourInfo,"paid",t)},expression:"edit_tour.TourInfo.paid"}}),n._v(" "),t("span",{staticClass:"validate-error"},[n._v(n._s(i[0]))])]}}],null,!0)})],1)]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row align-items-center w-100 mx-auto mt-3",staticStyle:{width:"100%"}},[t("label",{staticClass:"travel-label"},[n._v("Дополнительные услуги")]),n._v(" "),t("b-form-textarea",{staticClass:"travel-input",staticStyle:{padding:"5px 15px",border:"1px solid #f08b23","border-radius":"20px !important"},attrs:{rows:"4",cols:"80",placeholder:"Дополнительные услуги"},model:{value:n.edit_tour.TourInfo.services,callback:function(t){n.$set(n.edit_tour.TourInfo,"services",t)},expression:"edit_tour.TourInfo.services"}})],1)]),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"travel-label"},[n._v("Авиабилеты")]),n._v(" "),t("avia-tickets-list",{attrs:{avia_tickets:n.edit_tour.TourInfo.avia_tickets}})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"travel-label"},[n._v("Пассажиры")]),n._v(" "),t("passengers-list",{attrs:{passengers:n.edit_tour.TourInfo.passengers}})],1),n._v(" "),t("div",{staticClass:"col-md-12"},[t("label",{staticClass:"travel-label"},[n._v("Файлы для клиента")]),n._v(" "),t("div",{staticClass:"form-group row mt-2"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"large-12 medium-12 small-12 filezone"},[t("input",{ref:"edit_tour_files",attrs:{type:"file",id:"files",multiple:""},on:{change:function(t){return n.handleEditFiles()}}}),n._v(" "),t("p",[n._v("\n                                Перетащите файл(ы) сюда"),t("br"),n._v("или нажмите для поиска\n                            ")])]),n._v(" "),t("label",{staticClass:"travel-label"},[n._v("Или запишите голосовое сообщение")]),n._v(" "),t("div",{staticClass:"d-flex justify-content-center mt-2"},[t("vue-record-audio",{attrs:{mode:"press"},on:{stream:n.onStream,result:n.onEditResult}})],1),n._v(" "),t("div",{staticClass:"file-listing"},n._l(n.edit_tour.TourInfo.files,(function(e,i){return t("div",{key:e.name,staticClass:"list-group-item"},[t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"col-4 text-center"},[/\.(jpe?g|png|svg)$/i.test(e.name)?t("img",{staticClass:"preview",attrs:{src:e.path}}):t("img",{staticClass:"preview",attrs:{src:"/images/LOGO-1.png"}})]),n._v(" "),t("div",{staticClass:"col-8"},["file"==e.type?t("div",[t("p",{staticClass:"travel-label"},[n._v(n._s(e.name))])]):n._e(),n._v(" "),"audio"==e.type?t("div",[t("audio-player",{attrs:{audio:e}})],1):n._e()])]),n._v(" "),t("div",{staticClass:"remove-container"},[0==n.loading?t("a",{staticClass:"remove",on:{click:function(t){return n.deleteFile(e,i)}}},[n._v("Удалить")]):n._e()])])})),0),n._v(" "),t("div",{staticClass:"file-listing"},n._l(n.new_files,(function(e,i){return t("div",{staticClass:"list-group-item"},[t("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[t("div",{staticClass:"col-4 text-center"},[t("img",{ref:"preview"+parseInt(i),refInFor:!0,staticClass:"preview"})]),n._v(" "),t("div",{staticClass:"col-8"},["file"==e.type?t("div",[t("p",{staticClass:"travel-label"},[n._v(n._s(e.data.name))])]):n._e(),n._v(" "),"audio"==e.type?t("div",[t("audio-player",{attrs:{audio:e}})],1):n._e()])]),n._v(" "),t("div",{staticClass:"remove-container"},[0==n.loading?t("a",{staticClass:"remove",on:{click:function(t){return n.removeFile(n.new_files,i)}}},[n._v("Отменить")]):n._e()])])})),0)])])])]),n._v(" "),n.load?n._e():t("div",{staticClass:"row w-100 m-auto"},[t("div",{staticClass:"col-6 col-md-6 contact-btn text-center"},[t("button",{staticClass:"btn btn-travel",staticStyle:{width:"100%"},on:{click:n.back}},[n._v("\n                    Отмена\n                ")])]),n._v(" "),t("div",{staticClass:"col-6 col-md-6 contact-btn text-center"},[t("button",{staticClass:"btn btn-travel",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:i||n.loading},on:{click:n.updateClientTour}},[t("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[n.loading?t("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):n._e(),n._v(" "),n.loading?t("span",{staticClass:"sr-only"},[n._v("Loading...")]):n._e(),n._v("\n                        Сохранить\n                    ")])])])]),n._v(" "),n.load?t("div",{staticClass:"row w-100 m-auto"},[t("div",{staticClass:"text-center text-warning my-2"},[t("b-spinner",{staticClass:"align-middle",attrs:{variant:"warning"}}),n._v(" "),t("strong",[n._v("Загрузка...")])],1)]):n._e()]}}])})],1)}),[],!1,null,"582ef948",null).exports}}]);
//# sourceMappingURL=383.js.map