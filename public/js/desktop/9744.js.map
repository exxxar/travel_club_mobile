{"version":3,"file":"js/desktop/9744.js","mappings":"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","sources":["webpack:///./resources/js/desktop/pages/Chat.vue?07dd","webpack:///./resources/js/desktop/pages/Chat.vue?3f62","webpack:///resources/js/desktop/pages/Chat.vue","webpack:///./resources/js/desktop/pages/Chat.vue?3bb7","webpack:///./resources/js/desktop/pages/Chat.vue?8fea","webpack:///./resources/js/desktop/pages/Chat.vue?43a6","webpack:///./resources/js/desktop/pages/Chat.vue?2364","webpack:///./resources/js/desktop/pages/Chat.vue"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".form-control[data-v-1deea1f8]:focus{background-color:#fff;border-color:#f08b23;box-shadow:0 0 0 .2rem rgba(240,139,35,.25);color:#495057;outline:0}.last_message[data-v-1deea1f8]{max-height:50px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.active[data-v-1deea1f8]{background:#f08b23!important;border-color:#f08b23!important}.scrollable[data-v-1deea1f8]{max-height:calc(100vh - 6.9rem);overflow-y:auto}.typer[data-v-1deea1f8]{align-items:center;background-color:#fff;border:2px solid #f08b23;border-radius:5px;bottom:0;box-sizing:border-box;display:flex;height:4.9rem;width:100%}.typer input[type=text][data-v-1deea1f8]{background-color:transparent;border:none;font-size:1.25rem;left:2.5rem;outline:none;padding:1rem;position:absolute;width:80%}.chat-container[data-v-1deea1f8]{background-color:#fff;box-sizing:border-box;height:calc(95vh - 9.5rem);overflow-y:auto;padding:10px}.message[data-v-1deea1f8]{margin-bottom:8px}.message.own[data-v-1deea1f8]{text-align:right}.message.own .content[data-v-1deea1f8]{background-color:#ffc890}.chat-container .username[data-v-1deea1f8]{font-size:18px;font-weight:700}.chat-container .content[data-v-1deea1f8]{word-wrap:break-word;background-color:#87cefa;border-radius:10px;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);display:inline-block;max-width:50%;padding:8px}@media (max-width:480px){.chat-container .content[data-v-1deea1f8]{max-width:60%}}@media screen and (max-width:576px){.chat-container[data-v-1deea1f8]{height:calc(95vh - 6.8rem)}}[data-v-1deea1f8]::-webkit-file-upload-button{cursor:pointer}input[type=file][data-v-1deea1f8]{cursor:pointer;height:100%;left:0;opacity:0;position:absolute;top:0;width:100%}.preview[data-v-1deea1f8]{height:100%;max-width:90%}.paperclip-button[data-v-1deea1f8]{background:transparent;height:100%;max-height:45px;max-width:45px;overflow:hidden;position:relative;width:100%}.paperclip-button[data-v-1deea1f8],.paperclip-button[data-v-1deea1f8]:hover{border-color:#f08b23!important;color:#f08b23}.paperclip-button[data-v-1deea1f8]:active,.paperclip-button[data-v-1deea1f8]:focus{background:#f08b23!important;color:#fff!important}.paperclip-button[data-v-1deea1f8]:focus{outline:none!important}.audio-button[data-v-1deea1f8]{background-color:#f08b23;height:100%;max-height:45px;max-width:45px;width:100%}.audio-button[data-v-1deea1f8]:hover{background-color:#f08b23!important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/desktop/pages/Chat.vue\"],\"names\":[],\"mappings\":\"AAw1BA,qCAEA,qBAAA,CACA,oBAAA,CAEA,2CAAA,CAJA,aAAA,CAGA,SAEA,CACA,+BACA,eAAA,CAEA,eAAA,CACA,sBAAA,CAFA,kBAGA,CACA,yBACA,4BAAA,CACA,8BACA,CACA,6BAEA,+BAAA,CADA,eAGA,CACA,wBAGA,kBAAA,CAIA,qBAAA,CAEA,wBAAA,CACA,iBAAA,CANA,QAAA,CAHA,qBAAA,CACA,YAAA,CAGA,aAAA,CACA,UAKA,CACA,yCAKA,4BAAA,CACA,WAAA,CAEA,iBAAA,CANA,WAAA,CAKA,YAAA,CAJA,YAAA,CAFA,iBAAA,CAGA,SAKA,CAYA,iCAMA,qBAAA,CALA,qBAAA,CACA,0BAAA,CACA,eAAA,CACA,YAGA,CACA,0BACA,iBACA,CACA,8BACA,gBACA,CACA,uCACA,wBACA,CACA,2CACA,cAAA,CACA,eACA,CACA,0CAQA,oBAAA,CALA,wBAAA,CACA,kBAAA,CAEA,gGAAA,CADA,oBAAA,CAEA,aAAA,CANA,WAQA,CACA,yBACA,0CACA,aACA,CACA,CACA,oCACA,iCACA,0BACA,CACA,CACA,8CACA,cACA,CACA,kCAUA,cAAA,CAFA,WAAA,CAIA,MAAA,CANA,SAAA,CAGA,iBAAA,CAEA,KAAA,CAJA,UAMA,CACA,0BACA,WAAA,CACA,aACA,CACA,mCAMA,sBAAA,CADA,WAAA,CAFA,eAAA,CADA,cAAA,CAOA,eAAA,CARA,iBAAA,CAGA,UAMA,CACA,4EAHA,8BAAA,CADA,aAOA,CAKA,mFAHA,4BAAA,CACA,oBAMA,CAJA,yCAGA,sBACA,CACA,+BAKA,wBAAA,CAFA,WAAA,CADA,eAAA,CADA,cAAA,CAGA,UAEA,CACA,qCACA,kCACA\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"container-fluid\\\" style=\\\"padding: 0;\\\">\\n        <b-modal id=\\\"new-chat\\\" title=\\\"Создать чат\\\">\\n            <div class=\\\"row w-100 mt-2 mx-auto\\\">\\n                <multiselect\\n                    v-model=\\\"new_chat.user\\\"\\n                    placeholder=\\\"Начать чат с...\\\"\\n                    :optionHeight=29\\n                    :showLabels=false\\n                    :options=\\\"available_users\\\"\\n                    style=\\\"line-height: 1.5; font-size: 0.765625rem; margin:auto;\\\"\\n                    :multiple=\\\"false\\\"\\n                    label=\\\"info.FullName\\\"\\n                    track-by=\\\"id\\\"\\n                    :taggable=\\\"true\\\"\\n                    :searchable=\\\"true\\\"\\n                    :hideSelected=\\\"true\\\"\\n                >\\n                    <template slot=\\\"singleLabel\\\" slot-scope=\\\"props\\\">\\n                        <span class=\\\"option__title\\\">{{ props.option.info.FullName }}</span>\\n                    </template>\\n                    <template slot=\\\"option\\\" slot-scope=\\\"props\\\">\\n                        <span class=\\\"option__title\\\">{{ props.option.info.FullName }}</span>\\n                    </template>\\n                </multiselect>\\n            </div>\\n            <template v-slot:modal-footer>\\n                <div class=\\\"w-100\\\">\\n                    <b-button\\n                        style=\\\"background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%); background-color: rgba(0, 0, 0, 0); background-color: #f08b23 !important; border-color: #f08b23 !important;\\\"\\n                        class=\\\"float-right\\\"\\n                        @click=\\\"createChat\\\"\\n                        :disabled=\\\"new_chat.user==null ||new_chat.user==''||loading\\\"\\n                    >\\n                        <b-spinner small v-if=\\\"loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"loading\\\">Loading...</span>\\n                        Создать\\n                    </b-button>\\n                    <b-button\\n                        style=\\\"background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%); background-color: rgba(0, 0, 0, 0); background-color: #f08b23 !important; border-color: #f08b23 !important;\\\"\\n                        class=\\\"float-right mr-2\\\"\\n                        @click=\\\"cancel\\\"\\n                    >\\n                        Отмена\\n                    </b-button>\\n                </div>\\n            </template>\\n        </b-modal>\\n        <div class=\\\"row w-100 m-auto align-items-start justify-content-center\\\">\\n            <div class=\\\"col-sm-4 desktop scrollable\\\" style=\\\"position: relative\\\">\\n                <div class=\\\"row w-100 m-auto\\\">\\n                    <div class=\\\"col-12 pt-3 px-0\\\">\\n                        <div class=\\\"row w-100 mx-auto\\\" style=\\\"position: sticky; z-index:3; top: 0px\\\">\\n                            <div class=\\\"col-12 p-0\\\">\\n                                <div class=\\\"row w-100 m-auto justify-content-center align-items-center py-2\\\" style=\\\"background: #f08b23; color: white; border-radius: 5px\\\">\\n                                    <div class=\\\"col-6 col-sm-6\\\">\\n                                        <p class=\\\"my-auto\\\">\\n                                            <span class=\\\"chat-name\\\">Чаты</span>\\n                                        </p>\\n                                    </div>\\n                                    <div class=\\\"col-6 col-sm-6\\\">\\n                                <span class=\\\"chat-name ml-auto mr-0\\\" style=\\\"font-size: 25px; float:right\\\" v-if=\\\"available_users.length>0 && user.role != 'client'\\\" @click=\\\"open\\\" >\\n                                        <b-icon icon=\\\"plus-circle-fill\\\"></b-icon>\\n                                </span>\\n                                    </div>\\n                                </div>\\n                            </div>\\n                            <div class=\\\"col-12 p-0\\\">\\n                                <div class=\\\"row w-100 mx-auto mt-2\\\">\\n                                    <b-form-input\\n                                        v-model=\\\"search\\\"\\n                                        :placeholder=\\\"'Поиск чата'\\\"\\n                                        class=\\\"mb-0 travel-input\\\"\\n                                        @input=\\\"runSearch\\\"\\n                                    >\\n                                    </b-form-input>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-12 pt-2 px-0\\\" v-if=\\\"chats.length<=0&&load==false\\\">\\n                        <div class=\\\"row w-100 m-auto\\\">\\n                            <div class=\\\"col-12 skeleton-tr pt-2 px-0\\\" v-for=\\\"n in 5\\\" :key=\\\"n\\\">\\n                                <div class=\\\"list-group\\\">\\n                                    <div class=\\\"list-group-item list-group-item-action flex-column align-items-start\\\">\\n                                        <div class=\\\"d-flex w-100 justify-content-between\\\">\\n                                            <div class=\\\"row m-auto w-100\\\">\\n                                                <div class=\\\"col-8 skeleton-tr p-2 mr-auto\\\">\\n                                                    <tb-skeleton :height=\\\"15\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                                <div class=\\\"col-2 skeleton-tr p-2 ml-auto float-right\\\">\\n                                                    <tb-skeleton :height=\\\"15\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                            </div>\\n                                        </div>\\n                                        <div>\\n                                            <div class=\\\"row m-auto w-100\\\">\\n                                                <div class=\\\"col-4 skeleton-tr p-2\\\">\\n                                                    <tb-skeleton :height=\\\"10\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                            </div>\\n                                            <div class=\\\"row m-auto w-100\\\">\\n                                                <div class=\\\"col-2 skeleton-tr p-2\\\">\\n                                                    <tb-skeleton :height=\\\"5\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                            </div>\\n                                        </div>\\n                                    </div>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-12 pt-2 px-0\\\" v-if=\\\"chats.length<=0&&load==true\\\">\\n                        <div class=\\\"row w-100 mx-auto mb-2\\\">\\n                            <p>Пока у Вас нет никаких чатов</p>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-12 pt-2 px-0\\\" v-for=\\\"chat in filteredChats\\\" :key=\\\"chat.id\\\">\\n                        <div class=\\\"list-group\\\">\\n                            <div class=\\\"list-group-item list-group-item-action flex-column align-items-start\\\" style=\\\"cursor: pointer\\\" :class=\\\"{active: chat.id == $route.params.id}\\\" @click=\\\"toChat(chat.id)\\\">\\n                                <div class=\\\"d-flex w-100 justify-content-between\\\">\\n                                    <h5 class=\\\"mb-1\\\" v-if=\\\"chat.creator_id == user.id\\\">{{chat.manager_title}}</h5>\\n                                    <h5 class=\\\"mb-1\\\" v-else>{{chat.client_title}}</h5>\\n                                    <small v-if=\\\"chat.messages.length>0\\\">{{chat.messages[chat.messages.length-1].created_at | moment(\\\"from\\\", \\\"now\\\") }}</small>\\n                                </div>\\n                                <div v-if=\\\"chat.messages.length>0\\\">\\n                                    <p class=\\\"mb-1 last_message\\\">{{chat.messages[chat.messages.length-1].message_text}}</p>\\n                                    <small>{{chat.messages[chat.messages.length-1].senderInfo.FirstName}}\\n                                        <span v-if=\\\"chat.messages[chat.messages.length-1].senderInfo.MiddleName !='' || chat.messages[chat.messages.length-1].senderInfo.MiddleName != null\\\">\\n                                            {{chat.messages[chat.messages.length-1].senderInfo.MiddleName}}\\n                                        </span>\\n                                    </small>\\n                                </div>\\n                                <div v-else>\\n                                    <p class=\\\"mb-1 last_message\\\">В этой беседе ещё нет сообщений</p>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"col-12 col-md-8\\\" style=\\\"position: relative;\\\">\\n                <div class=\\\"chat-container\\\" v-on:scroll=\\\"onScroll\\\" ref=\\\"chatContainer\\\">\\n                    <!--                    <infinite-loading direction=\\\"top\\\" @infinite=\\\"infiniteHandler\\\" spinner=\\\"waveDots\\\">-->\\n                    <!--                        <span slot=\\\"no-results\\\">-->\\n                    <!--                        </span>-->\\n                    <!--                        <span slot=\\\"no-more\\\">-->\\n                    <!--                        </span>-->\\n                    <!--                    </infinite-loading>-->\\n                    <message :messages=\\\"chatMessages\\\"></message>\\n                </div>\\n                <div class=\\\"typer\\\" v-if=\\\"message_mode=='text'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\">\\n                        <input type=\\\"file\\\" id=\\\"file\\\" ref=\\\"file\\\" v-on:change=\\\"handleFile()\\\"/>\\n                        <b-icon icon=\\\"paperclip\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <b-form-textarea\\n                        id=\\\"textarea\\\"\\n                        class=\\\"mx-1\\\"\\n                        v-model=\\\"message_text\\\"\\n                        size=\\\"sm\\\"\\n                        placeholder=\\\"Напишите сообщение...\\\"\\n                        rows=\\\"1\\\"\\n                        max-rows=\\\"2\\\"\\n                        no-resize\\n                        @keydown.enter.exact.prevent=\\\"sendChatMessage('text')\\\"\\n                    >\\n                    </b-form-textarea>\\n                    <vue-record-audio v-if=\\\"message_text.trim()==''&&message_mode=='text'\\\" :mode=\\\"'press'\\\" @stream=\\\"onStream\\\" @result=\\\"onResult\\\" class=\\\"audio-button mx-1\\\"/>\\n                    <b-button v-else class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('text')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n                <div class=\\\"typer\\\" v-if=\\\"message_mode=='image'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\" @click=\\\"clearMessage\\\">\\n                        <b-icon icon=\\\"x\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <div class=\\\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\\\">\\n                        <div class=\\\"col-4 h-100 text-center\\\">\\n                            <img class=\\\"preview\\\" :src=\\\"preview\\\"/>\\n                        </div>\\n                        <div class=\\\"col-8 p-0 p-sm-1 p-md-2 h-100\\\">\\n                            <div style=\\\"text-overflow: ellipsis;overflow: hidden;width: 100%;height: 100%;\\\">{{image_record.name}}</div>\\n                        </div>\\n                    </div>\\n                    <b-button class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('image')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n                <div class=\\\"typer\\\" v-if=\\\"message_mode=='file'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\" @click=\\\"clearMessage\\\">\\n                        <b-icon icon=\\\"x\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <div class=\\\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\\\">\\n                        <div class=\\\"col-4 h-100 text-center\\\">\\n                            <img class=\\\"preview\\\" :src=\\\"preview\\\"/>\\n                        </div>\\n                        <div class=\\\"col-8 p-0 p-sm-1 p-md-2 h-100\\\">\\n                            <div style=\\\"text-overflow: ellipsis;overflow: hidden;width: 100%;height: 100%;\\\">{{file_record.name}}</div>\\n                        </div>\\n                    </div>\\n                    <b-button class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('file')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n                <div class=\\\"typer justify-content-between\\\" v-if=\\\"message_mode=='audio'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\" @click=\\\"clearMessage\\\">\\n                        <b-icon icon=\\\"x\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <audio-player :audio=\\\"audio_record\\\" :type=\\\"'file'\\\" style=\\\"width:60%\\\"></audio-player>\\n                    <b-button class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('audio')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</template>\\n\\n<script>\\n    export default {\\n        data () {\\n            return {\\n                message_text: '',\\n                audio_record: null,\\n                image_record: null,\\n                file_record: null,\\n                message_mode:'text',\\n                preview:'',\\n                message_loading:false,\\n                flag:false,\\n                seconds:0,\\n                interval:'',\\n                files: [],\\n                currentChat: {},\\n                chatMessages: [],\\n                emojiPanel: false,\\n                currentRef: {},\\n                loading: false,\\n                totalChatHeight: 0,\\n                search:'',\\n                results:[],\\n                options: {\\n                    // minMatchCharLength: 2,\\n                    shouldSort: true,\\n                    threshold: 0.2,\\n                    keys: ['manager_title', 'client_title']\\n                },\\n                new_chat:{\\n                    name:'',\\n                    user:null\\n                },\\n                load:false,\\n            }\\n        },\\n        mounted () {\\n            this.chatMessages=[]\\n            // this.$store.dispatch('loadUserChats').then(()=>{\\n            //     this.loadChat()\\n            // })\\n            this.loadChat()\\n            this.getUser()\\n            console.log('this.chatMessages', this.chatMessages)\\n            console.log('this.currentChat', this.currentChat)\\n        },\\n        computed: {\\n            messages () {\\n                return this.chatMessages\\n            },\\n            chats () {\\n                return this.$store.getters.chats\\n            },\\n            user() {\\n                return this.$store.getters.user\\n            },\\n            available_users() {\\n                return this.$store.getters.available_users\\n            },\\n            filteredChats() {\\n                if(this.search.trim() === '')\\n                {\\n                    return this.chats\\n                }\\n                else {\\n                    return this.results\\n                }\\n            }\\n            // onNewMessageAdded () {\\n            //     const that = this\\n            //     let onNewMessageAdded = function (snapshot, newMessage = true) {\\n            //         let message = {};\\n            //         /*eslint-disable */\\n            //         var urlPattern = /(\\\\b(https?|ftp|file):\\\\/\\\\/[-A-Z0-9+&@#\\\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\\\/%=~_|])/ig\\n            //         /*eslint-enable */\\n            //         message.message_text = message.message_text\\n            //             .replace(/&/g, '&amp;')\\n            //             .replace(/</g, '&lt;')\\n            //             .replace(/>/g, '&gt;')\\n            //             .replace(/\\\"/g, '&quot;')\\n            //             .replace(/'/g, '&#039;')\\n            //         message.message_text = message.message_text.replace(urlPattern, \\\"<a href='$1'>$1</a>\\\")\\n            //         if (!newMessage) {\\n            //             // that.chatMessages.unshift(that.processMessage(message))\\n            //             that.chatMessages.unshift(message)\\n            //             that.scrollTo()\\n            //         } else {\\n            //             that.chatMessages.push(message)\\n            //             that.scrollToEnd()\\n            //         }\\n            //     }\\n            //     return onNewMessageAdded\\n            // }\\n        },\\n        watch: {\\n            '$route.params.id' (newId, oldId) {\\n                // this.currentRef.off('child_added', this.onNewMessageAdded)\\n                console.log('here wattch')\\n                this.loadChat()\\n            }\\n        },\\n        methods: {\\n            toChat(id)\\n            {\\n                this.$router.push('/'+this.user.role+'/chat/'+id)\\n            },\\n            async getUser() {\\n                if (!this.user) {\\n                    await this.$store.dispatch('getUser').then( () => {\\n                    })\\n                }\\n            },\\n            async loadChat () {\\n                if(this.chats.length<=0){\\n\\n                    await this.$store.dispatch('loadUserChats').then(()=>{\\n                        this.totalChatHeight = this.$refs.chatContainer.scrollHeight\\n                        this.loading = false\\n                        this.load=true\\n                        if (this.$route.params.id !== undefined) {\\n                            this.chatMessages = []\\n                            this.currentChat = this.chats.find((chat) => {if(chat.id == this.$route.params.id)\\n                            {\\n                                return true;\\n                            }});\\n                            // this.chatMessages = this.currentChat.messages;\\n                            this.currentChat.messages.forEach((item) => {\\n                                this.onNewMessageAdded(item, false);\\n                            })\\n                            // let chatID = this.id\\n                            // this.currentRef = firebase.database().ref('messages').child(chatID).child('messages').limitToLast(20)\\n                            // this.currentRef.on('child_added', this.onNewMessageAdded)\\n                        }\\n                    })\\n                }\\n                else{\\n                    this.totalChatHeight = this.$refs.chatContainer.scrollHeight\\n                    this.loading = false\\n                    if (this.$route.params.id !== undefined) {\\n                        this.chatMessages = []\\n                        this.currentChat = this.chats.find((chat) => {if(chat.id == this.$route.params.id)\\n                        {\\n                            return true;\\n                        }});\\n                        this.currentChat.messages.forEach((item) => {\\n                            this.onNewMessageAdded(item, false);\\n                        })\\n                    }\\n                }\\n\\n            },\\n            onScroll () {\\n                let scrollValue = this.$refs.chatContainer.scrollTop\\n                const that = this\\n                if (scrollValue < 100 && !this.loading) {\\n                    this.totalChatHeight = this.$refs.chatContainer.scrollHeight\\n                    this.loading = true\\n                    // let chatID = this.id\\n                    let currentTopMessage = this.chatMessages[0]\\n                    if (currentTopMessage === undefined) {\\n                        this.loading = false\\n                        return\\n                    }\\n                    // firebase.database().ref('messages').child(chatID).child('messages').orderByKey().endAt(currentTopMessage.key).limitToLast(20).once('value').then(\\n                    //     function (snapshot) {\\n                    //         let tempArray = []\\n                    //         snapshot.forEach(function (item) {\\n                    //             tempArray.push(item)\\n                    //         })\\n                    //         if (tempArray[0].key === tempArray[1].key) return\\n                    //         tempArray.reverse()\\n                    //         tempArray.forEach(function (child) { that.onNewMessageAdded(child, false) })\\n                    that.loading = false\\n                    //     }\\n                    // )\\n                }\\n            },\\n            processMessage (message) {\\n                /*eslint-disable */\\n                var imageRegex = /([^\\\\s\\\\']+).(?:jpg|jpeg|gif|png)/i\\n                /*eslint-enable */\\n                if (imageRegex.test(message.message_text)) {\\n                    message.image = imageRegex.exec(message.message_text)[0]\\n                }\\n                var emojiRegex = /([\\\\u{1f300}-\\\\u{1f5ff}\\\\u{1f900}-\\\\u{1f9ff}\\\\u{1f600}-\\\\u{1f64f}\\\\u{1f680}-\\\\u{1f6ff}\\\\u{2600}-\\\\u{26ff}\\\\u{2700}-\\\\u{27bf}\\\\u{1f1e6}-\\\\u{1f1ff}\\\\u{1f191}-\\\\u{1f251}\\\\u{2934}-\\\\u{1f18e}])/gu\\n                if (emojiRegex.test(message.message_text)) {\\n                    message.message_text = message.message_text.replace(emojiRegex, '<span class=\\\"emoji\\\">$1</span>')\\n                }\\n                return message\\n            },\\n            onNewMessageAdded (message, newMessage = true) {\\n                /*eslint-disable */\\n                var urlPattern = /(\\\\b(https?|ftp|file):\\\\/\\\\/[-A-Z0-9+&@#\\\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\\\/%=~_|])/ig\\n                /*eslint-enable */\\n                message.message_text = message.message_text\\n                    .replace(/&/g, '&amp;')\\n                    .replace(/</g, '&lt;')\\n                    .replace(/>/g, '&gt;')\\n                    .replace(/\\\"/g, '&quot;')\\n                    .replace(/'/g, '&#039;')\\n                message.message_text = message.message_text.replace(urlPattern, \\\"<a href='$1'>$1</a>\\\")\\n                if (!newMessage) {\\n                    // that.chatMessages.unshift(that.processMessage(message))\\n                    // this.chatMessages.unshift(message)\\n                    this.chatMessages.push(message)\\n                    console.log('!newMessage')\\n                    this.scrollTo()\\n                } else {\\n                    this.chatMessages.push(message)\\n                    console.log('newMessage')\\n                    this.scrollToEnd()\\n                }\\n\\n            },\\n            async sendChatMessage (type) {\\n                this.message_loading = true;\\n                // if (this.message_text !== '') {\\n                if(this.audio_record!=null){\\n                    this.files.push(this.audio_record)\\n                }\\n                if(this.image_record!=null){\\n                    this.files.push(this.image_record)\\n                }\\n                if(this.file_record!=null){\\n                    this.files.push(this.file_record)\\n                }\\n                var message = {\\n                    message_text: this.message_text,\\n                    date: new Date().toString(),\\n                    conversation_id: this.currentChat.id,\\n                    sender_id: this.user.id,\\n                    type: type,\\n                    files: this.files,\\n                    senderInfo: this.user.info,\\n                    selfMessage: true\\n                }\\n                let formData = new FormData();\\n                formData.append(\\\"message\\\", JSON.stringify(message));\\n\\n                for (var i = 0; i < this.files.length; i++) {\\n                    let file = this.files[i].data;\\n\\n                    formData.append('files[' + i + ']', file);\\n                }\\n                await this.$store.dispatch('sendMessage', formData).then(resp=>{\\n                    this.onNewMessageAdded(resp.data.message, true);\\n                    this.$store.commit('addChatMessage', resp.data.message);\\n                    this.message_loading = false;\\n                });\\n                this.clearMessage();\\n                // }\\n            },\\n            scrollToEnd () {\\n                this.$nextTick(() => {\\n                    var container = this.$el.querySelector('.chat-container')\\n                    container.scrollTop = container.scrollHeight\\n                })\\n            },\\n            scrollTo () {\\n                this.$nextTick(() => {\\n                    let currentHeight = this.$refs.chatContainer.scrollHeight\\n                    let difference = currentHeight - this.totalChatHeight\\n                    var container = this.$el.querySelector('.chat-container')\\n                    container.scrollTop = difference\\n                })\\n            },\\n            addEmojiToMessage (emoji) {\\n                this.message_text += emoji.value\\n            },\\n            toggleEmojiPanel () {\\n                this.emojiPanel = !this.emojiPanel\\n            },\\n            onStream(stream) {\\n                console.log('before countSeconds')\\n                this.countSeconds();\\n                console.log('after countSeconds')\\n                console.log('Got a stream object:', stream);\\n                console.log('after stream object')\\n\\n            },\\n            onResult(data) {\\n                var time = Date.now();\\n                var date = new Date();\\n                // this.files.push({\\n                //     type: 'audio',\\n                //     name: 'record-'+time+'.mp3',\\n                //     src: window.URL.createObjectURL(data),\\n                //     data: data,\\n                //     date: date,\\n                // })\\n                this.audio_record = {\\n                    type: 'audio',\\n                    name: 'record-'+time+'.mp3',\\n                    src: window.URL.createObjectURL(data),\\n                    data: data,\\n                    date: date,\\n                    seconds: this.seconds\\n                }\\n                this.countSeconds();\\n                this.message_mode='audio';\\n\\n            },\\n            handleFile() {\\n                var time = Date.now();\\n                var date = new Date();\\n                let uploadedFile = this.$refs.file.files;\\n                if (/\\\\.(jpe?g|png|svg)$/i.test(uploadedFile[0].name))\\n                {\\n                    let reader = new FileReader();\\n                    reader.addEventListener(\\\"load\\\", function() {\\n                        this.preview = reader.result;\\n                    }.bind(this), false);\\n                    reader.readAsDataURL(uploadedFile[0]);\\n                    // this.image_record = uploadedFile[0];\\n                    this.image_record = {\\n                        type: 'image',\\n                        name: uploadedFile[0].name,\\n                        data: uploadedFile[0],\\n                        date: date,\\n                    }\\n                    this.message_mode = 'image';\\n                }\\n                else if(/\\\\.(pdf|txt|docx|doc)$/i.test(uploadedFile[0].name))\\n                {\\n                    // let reader = new FileReader();\\n                    // reader.addEventListener(\\\"load\\\", function() {\\n                    //     this.preview = reader.result;\\n                    // }.bind(this), false);\\n                    // reader.readAsDataURL(uploadedFile[0]);\\n                    // this.file_record = uploadedFile[0];\\n                    this.file_record = {\\n                        type: 'file',\\n                        name: uploadedFile[0].name,\\n                        data: uploadedFile[0],\\n                        date: date,\\n                    }\\n                    this.message_mode = 'file';\\n                    this.$nextTick(function() {\\n                        this.preview = '/images/LOGO-1.png';\\n                    });\\n                }\\n                else\\n                {\\n                    // this.$nextTick(function() {\\n                    //     this.preview = '/images/LOGO-1.png';\\n                    // });\\n                    this.sendMessage('Неверный формат файла')\\n                    this.clearMessage();\\n                }\\n            },\\n            clearMessage() {\\n                this.message_text='';\\n                this.image_record=null;\\n                this.audio_record=null;\\n                this.file_record=null;\\n                this.message_mode='text'\\n            },\\n            countSeconds() {\\n                console.log('this.flag 1', this.flag )\\n                this.flag = !this.flag\\n                console.log('this.flag ', this.flag )\\n                if (this.flag == true) {\\n                    this.seconds=0;\\n                    this.interval = setInterval(this.incrementSeconds, 1000);\\n                }\\n                else {\\n                    clearInterval(this.interval)\\n                    this.audio_record.seconds = this.seconds\\n                }\\n            },\\n            incrementSeconds() {\\n                this.seconds += 1;\\n            },\\n            runSearch () {\\n                if(this.search.trim() === '')\\n                {\\n                    this.results = this.chats\\n                }\\n                else {\\n                    // if(this.search.length > 2){\\n                    //     this.options.minMatchCharLength=this.search.length\\n                    // }\\n                    this.$search(this.search, this.chats, this.options).then(result => {\\n                        this.results = []\\n                        result.forEach(item=>{\\n                            this.results.push(item)\\n                        })\\n                    })\\n                }\\n                console.log(this.results)\\n            },\\n            open(){\\n                this.$bvModal.show(\\\"new-chat\\\");\\n            },\\n            cancel(){\\n                this.$bvModal.hide(\\\"new-chat\\\");\\n            },\\n            async createChat() {\\n                this.loading = true;\\n                var payload = {\\n                    user_id: this.new_chat.user.id,\\n                    name: this.new_chat.user.info.FullName\\n                }\\n                await this.$store.dispatch('createChat', payload).then( resp => {\\n                    this.$store.commit('addChat', resp.data.chat)\\n                    this.$store.commit('removeAvailableUser', this.new_chat.user.id)\\n                    this.loading=false;\\n                    this.new_chat = {\\n                        name:'',\\n                        user:null\\n                    };\\n                    this.cancel();\\n                })\\n            },\\n            sendMessage(message) {\\n                this.$notify({\\n                    group: 'info',\\n                    type: 'travel',\\n                    title: 'Сообщение от TravelClub',\\n                    text: message\\n                });\\n            },\\n        }\\n    }\\n</script>\\n\\n<style scoped>\\n    .form-control:focus {\\n        color: #495057;\\n        background-color: #fff;\\n        border-color: #f08b23;\\n        outline: 0;\\n        box-shadow: 0 0 0 0.2rem rgba(240, 139, 35, 0.25);\\n    }\\n    .last_message{\\n        max-height: 50px;\\n        white-space: nowrap;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n    }\\n    .active {\\n        background: #f08b23 !important;\\n        border-color: #f08b23 !important;\\n    }\\n    .scrollable {\\n        overflow-y: auto;\\n        max-height:calc(100vh - 6.9rem);\\n        /*max-height:70vh;*/\\n    }\\n    .typer{\\n        box-sizing: border-box;\\n        display: flex;\\n        align-items: center;\\n        bottom: 0;\\n        height: 4.9rem;\\n        width: 100%;\\n        background-color: #fff;\\n        /*box-shadow: 0 -5px 10px -5px rgba(0,0,0,.2);*/\\n        border: 2px solid #f08b23;\\n        border-radius: 5px;\\n    }\\n    .typer input[type=text]{\\n        position: absolute;\\n        left: 2.5rem;\\n        padding: 1rem;\\n        width: 80%;\\n        background-color: transparent;\\n        border: none;\\n        outline: none;\\n        font-size: 1.25rem;\\n    }\\n    /*.typer button {*/\\n    /*    color: #fff;*/\\n    /*    background-color: #f8a105;*/\\n    /*    border-color: #f8a105;*/\\n    /*    outline: none !important;*/\\n    /*}*/\\n    /*.typer button:hover{*/\\n    /*    color: #fff;*/\\n    /*    background-color: #063065;*/\\n    /*    border-color: #063065;*/\\n    /*}*/\\n    .chat-container{\\n        box-sizing: border-box;\\n        height: calc(95vh - 9.5rem);\\n        overflow-y: auto;\\n        padding: 10px;\\n        /*background-color: #f2f2f2;*/\\n        background-color: #fff;\\n    }\\n    .message{\\n        margin-bottom: 8px;\\n    }\\n    .message.own{\\n        text-align: right;\\n    }\\n    .message.own .content{\\n        background-color: #ffc890;\\n    }\\n    .chat-container .username{\\n        font-size: 18px;\\n        font-weight: bold;\\n    }\\n    .chat-container .content{\\n        padding: 8px;\\n        /*background-color: lightgreen;*/\\n        background-color: lightskyblue;\\n        border-radius: 10px;\\n        display:inline-block;\\n        box-shadow: 0 1px 3px 0 rgba(0,0,0,0.2), 0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12);\\n        max-width: 50%;\\n        word-wrap: break-word;\\n    }\\n    @media (max-width: 480px) {\\n        .chat-container .content{\\n            max-width: 60%;\\n        }\\n    }\\n    @media screen and (max-width: 576px) {\\n        .chat-container {\\n            height: calc(95vh - 6.8rem);\\n        }\\n    }\\n    ::-webkit-file-upload-button {\\n        cursor:pointer;\\n    }\\n    input[type=\\\"file\\\"]{\\n        /*opacity: 0;*/\\n        /*width: 100%;*/\\n        /*height: 70px;*/\\n        /*position: absolute;*/\\n        /*cursor: pointer;*/\\n        opacity: 0;\\n        width: 100%;\\n        height: 100%;\\n        position: absolute;\\n        cursor: pointer;\\n        top: 0;\\n        left: 0;\\n    }\\n    .preview{\\n        height: 100%;\\n        max-width: 90%;\\n    }\\n    .paperclip-button {\\n        position: relative;\\n        max-width: 45px;\\n        max-height: 45px;\\n        width: 100%;\\n        height: 100%;\\n        background: transparent;\\n        color: #f08b23;\\n        border-color: #f08b23 !important;\\n        overflow: hidden;\\n    }\\n    .paperclip-button:hover {\\n        color: #f08b23;\\n        border-color: #f08b23 !important;\\n    }\\n    .paperclip-button:active {\\n        background: #f08b23 !important;\\n        color: #fff !important;\\n    }\\n    .paperclip-button:focus {\\n        background: #f08b23 !important;\\n        color: #fff !important;\\n        outline: none !important;\\n    }\\n    .audio-button {\\n        max-width: 45px;\\n        max-height: 45px;\\n        height: 100%;\\n        width: 100%;\\n        background-color: #f08b23;\\n    }\\n    .audio-button:hover {\\n        background-color: #f08b23 !important;\\n    }\\n</style>\\n<style>\\n    .loading-wave-dots .wave-item:nth-child(2) {\\n        margin-left: -20px;\\n        -webkit-animation-delay: .14s !important;\\n        animation-delay: .14s !important;\\n    }\\n    .loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(3) {\\n        margin-left: -4px;\\n        -webkit-animation-delay: .28s !important;\\n        animation-delay: .28s !important;\\n    }\\n    .loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(4) {\\n        margin-left: 12px;\\n        -webkit-animation-delay: .42s !important;\\n        animation-delay: .42s !important;\\n    }\\n    .loading-wave-dots[data-v-46b20d22] .wave-item:last-child {\\n        margin-left: 28px;\\n        -webkit-animation-delay: .56s !important;\\n        animation-delay: .56s !important;\\n    }\\n    .loading-wave-dots .wave-item {\\n        -webkit-animation: wave-dots linear 2.8s infinite !important;\\n        animation: wave-dots linear 2.8s infinite !important;\\n    }\\n    @keyframes wave-dots {\\n        0% {\\n            -webkit-transform: translateY(0);\\n            transform: translateY(0);\\n            background: #5b43f3;\\n        }\\n        10% {\\n            -webkit-transform: translateY(-6px);\\n            transform: translateY(-6px);\\n            background: #5b43f3;\\n        }\\n        20% {\\n            -webkit-transform: translateY(0);\\n            transform: translateY(0);\\n            background: #f3434b;\\n        }\\n        100% {\\n            -webkit-transform: translateY(0);\\n            transform: translateY(0);\\n            background: #5b43f3;\\n        }\\n    }\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/laravel-mix/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".loading-wave-dots .wave-item:nth-child(2){animation-delay:.14s!important;margin-left:-20px}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(3){animation-delay:.28s!important;margin-left:-4px}.loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(4){animation-delay:.42s!important;margin-left:12px}.loading-wave-dots[data-v-46b20d22] .wave-item:last-child{animation-delay:.56s!important;margin-left:28px}.loading-wave-dots .wave-item{animation:wave-dots 2.8s linear infinite!important}@keyframes wave-dots{0%{background:#5b43f3;transform:translateY(0)}10%{background:#5b43f3;transform:translateY(-6px)}20%{background:#f3434b;transform:translateY(0)}to{background:#5b43f3;transform:translateY(0)}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./resources/js/desktop/pages/Chat.vue\"],\"names\":[],\"mappings\":\"AAw1BA,2CAGA,8BAAA,CAFA,iBAGA,CACA,4DAGA,8BAAA,CAFA,gBAGA,CACA,4DAGA,8BAAA,CAFA,gBAGA,CACA,0DAGA,8BAAA,CAFA,gBAGA,CACA,8BAEA,kDACA,CACA,qBACA,GAGA,kBAAA,CADA,uBAEA,CACA,IAGA,kBAAA,CADA,0BAEA,CACA,IAGA,kBAAA,CADA,uBAEA,CACA,GAGA,kBAAA,CADA,uBAEA,CACA\",\"sourcesContent\":[\"<template>\\n    <div class=\\\"container-fluid\\\" style=\\\"padding: 0;\\\">\\n        <b-modal id=\\\"new-chat\\\" title=\\\"Создать чат\\\">\\n            <div class=\\\"row w-100 mt-2 mx-auto\\\">\\n                <multiselect\\n                    v-model=\\\"new_chat.user\\\"\\n                    placeholder=\\\"Начать чат с...\\\"\\n                    :optionHeight=29\\n                    :showLabels=false\\n                    :options=\\\"available_users\\\"\\n                    style=\\\"line-height: 1.5; font-size: 0.765625rem; margin:auto;\\\"\\n                    :multiple=\\\"false\\\"\\n                    label=\\\"info.FullName\\\"\\n                    track-by=\\\"id\\\"\\n                    :taggable=\\\"true\\\"\\n                    :searchable=\\\"true\\\"\\n                    :hideSelected=\\\"true\\\"\\n                >\\n                    <template slot=\\\"singleLabel\\\" slot-scope=\\\"props\\\">\\n                        <span class=\\\"option__title\\\">{{ props.option.info.FullName }}</span>\\n                    </template>\\n                    <template slot=\\\"option\\\" slot-scope=\\\"props\\\">\\n                        <span class=\\\"option__title\\\">{{ props.option.info.FullName }}</span>\\n                    </template>\\n                </multiselect>\\n            </div>\\n            <template v-slot:modal-footer>\\n                <div class=\\\"w-100\\\">\\n                    <b-button\\n                        style=\\\"background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%); background-color: rgba(0, 0, 0, 0); background-color: #f08b23 !important; border-color: #f08b23 !important;\\\"\\n                        class=\\\"float-right\\\"\\n                        @click=\\\"createChat\\\"\\n                        :disabled=\\\"new_chat.user==null ||new_chat.user==''||loading\\\"\\n                    >\\n                        <b-spinner small v-if=\\\"loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"loading\\\">Loading...</span>\\n                        Создать\\n                    </b-button>\\n                    <b-button\\n                        style=\\\"background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%); background-color: rgba(0, 0, 0, 0); background-color: #f08b23 !important; border-color: #f08b23 !important;\\\"\\n                        class=\\\"float-right mr-2\\\"\\n                        @click=\\\"cancel\\\"\\n                    >\\n                        Отмена\\n                    </b-button>\\n                </div>\\n            </template>\\n        </b-modal>\\n        <div class=\\\"row w-100 m-auto align-items-start justify-content-center\\\">\\n            <div class=\\\"col-sm-4 desktop scrollable\\\" style=\\\"position: relative\\\">\\n                <div class=\\\"row w-100 m-auto\\\">\\n                    <div class=\\\"col-12 pt-3 px-0\\\">\\n                        <div class=\\\"row w-100 mx-auto\\\" style=\\\"position: sticky; z-index:3; top: 0px\\\">\\n                            <div class=\\\"col-12 p-0\\\">\\n                                <div class=\\\"row w-100 m-auto justify-content-center align-items-center py-2\\\" style=\\\"background: #f08b23; color: white; border-radius: 5px\\\">\\n                                    <div class=\\\"col-6 col-sm-6\\\">\\n                                        <p class=\\\"my-auto\\\">\\n                                            <span class=\\\"chat-name\\\">Чаты</span>\\n                                        </p>\\n                                    </div>\\n                                    <div class=\\\"col-6 col-sm-6\\\">\\n                                <span class=\\\"chat-name ml-auto mr-0\\\" style=\\\"font-size: 25px; float:right\\\" v-if=\\\"available_users.length>0 && user.role != 'client'\\\" @click=\\\"open\\\" >\\n                                        <b-icon icon=\\\"plus-circle-fill\\\"></b-icon>\\n                                </span>\\n                                    </div>\\n                                </div>\\n                            </div>\\n                            <div class=\\\"col-12 p-0\\\">\\n                                <div class=\\\"row w-100 mx-auto mt-2\\\">\\n                                    <b-form-input\\n                                        v-model=\\\"search\\\"\\n                                        :placeholder=\\\"'Поиск чата'\\\"\\n                                        class=\\\"mb-0 travel-input\\\"\\n                                        @input=\\\"runSearch\\\"\\n                                    >\\n                                    </b-form-input>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-12 pt-2 px-0\\\" v-if=\\\"chats.length<=0&&load==false\\\">\\n                        <div class=\\\"row w-100 m-auto\\\">\\n                            <div class=\\\"col-12 skeleton-tr pt-2 px-0\\\" v-for=\\\"n in 5\\\" :key=\\\"n\\\">\\n                                <div class=\\\"list-group\\\">\\n                                    <div class=\\\"list-group-item list-group-item-action flex-column align-items-start\\\">\\n                                        <div class=\\\"d-flex w-100 justify-content-between\\\">\\n                                            <div class=\\\"row m-auto w-100\\\">\\n                                                <div class=\\\"col-8 skeleton-tr p-2 mr-auto\\\">\\n                                                    <tb-skeleton :height=\\\"15\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                                <div class=\\\"col-2 skeleton-tr p-2 ml-auto float-right\\\">\\n                                                    <tb-skeleton :height=\\\"15\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                            </div>\\n                                        </div>\\n                                        <div>\\n                                            <div class=\\\"row m-auto w-100\\\">\\n                                                <div class=\\\"col-4 skeleton-tr p-2\\\">\\n                                                    <tb-skeleton :height=\\\"10\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                            </div>\\n                                            <div class=\\\"row m-auto w-100\\\">\\n                                                <div class=\\\"col-2 skeleton-tr p-2\\\">\\n                                                    <tb-skeleton :height=\\\"5\\\" theme=\\\"opacity\\\" bg-color=\\\"#dcdbdc\\\" shape=\\\"radius\\\" />\\n                                                </div>\\n                                            </div>\\n                                        </div>\\n                                    </div>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-12 pt-2 px-0\\\" v-if=\\\"chats.length<=0&&load==true\\\">\\n                        <div class=\\\"row w-100 mx-auto mb-2\\\">\\n                            <p>Пока у Вас нет никаких чатов</p>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"col-12 pt-2 px-0\\\" v-for=\\\"chat in filteredChats\\\" :key=\\\"chat.id\\\">\\n                        <div class=\\\"list-group\\\">\\n                            <div class=\\\"list-group-item list-group-item-action flex-column align-items-start\\\" style=\\\"cursor: pointer\\\" :class=\\\"{active: chat.id == $route.params.id}\\\" @click=\\\"toChat(chat.id)\\\">\\n                                <div class=\\\"d-flex w-100 justify-content-between\\\">\\n                                    <h5 class=\\\"mb-1\\\" v-if=\\\"chat.creator_id == user.id\\\">{{chat.manager_title}}</h5>\\n                                    <h5 class=\\\"mb-1\\\" v-else>{{chat.client_title}}</h5>\\n                                    <small v-if=\\\"chat.messages.length>0\\\">{{chat.messages[chat.messages.length-1].created_at | moment(\\\"from\\\", \\\"now\\\") }}</small>\\n                                </div>\\n                                <div v-if=\\\"chat.messages.length>0\\\">\\n                                    <p class=\\\"mb-1 last_message\\\">{{chat.messages[chat.messages.length-1].message_text}}</p>\\n                                    <small>{{chat.messages[chat.messages.length-1].senderInfo.FirstName}}\\n                                        <span v-if=\\\"chat.messages[chat.messages.length-1].senderInfo.MiddleName !='' || chat.messages[chat.messages.length-1].senderInfo.MiddleName != null\\\">\\n                                            {{chat.messages[chat.messages.length-1].senderInfo.MiddleName}}\\n                                        </span>\\n                                    </small>\\n                                </div>\\n                                <div v-else>\\n                                    <p class=\\\"mb-1 last_message\\\">В этой беседе ещё нет сообщений</p>\\n                                </div>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"col-12 col-md-8\\\" style=\\\"position: relative;\\\">\\n                <div class=\\\"chat-container\\\" v-on:scroll=\\\"onScroll\\\" ref=\\\"chatContainer\\\">\\n                    <!--                    <infinite-loading direction=\\\"top\\\" @infinite=\\\"infiniteHandler\\\" spinner=\\\"waveDots\\\">-->\\n                    <!--                        <span slot=\\\"no-results\\\">-->\\n                    <!--                        </span>-->\\n                    <!--                        <span slot=\\\"no-more\\\">-->\\n                    <!--                        </span>-->\\n                    <!--                    </infinite-loading>-->\\n                    <message :messages=\\\"chatMessages\\\"></message>\\n                </div>\\n                <div class=\\\"typer\\\" v-if=\\\"message_mode=='text'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\">\\n                        <input type=\\\"file\\\" id=\\\"file\\\" ref=\\\"file\\\" v-on:change=\\\"handleFile()\\\"/>\\n                        <b-icon icon=\\\"paperclip\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <b-form-textarea\\n                        id=\\\"textarea\\\"\\n                        class=\\\"mx-1\\\"\\n                        v-model=\\\"message_text\\\"\\n                        size=\\\"sm\\\"\\n                        placeholder=\\\"Напишите сообщение...\\\"\\n                        rows=\\\"1\\\"\\n                        max-rows=\\\"2\\\"\\n                        no-resize\\n                        @keydown.enter.exact.prevent=\\\"sendChatMessage('text')\\\"\\n                    >\\n                    </b-form-textarea>\\n                    <vue-record-audio v-if=\\\"message_text.trim()==''&&message_mode=='text'\\\" :mode=\\\"'press'\\\" @stream=\\\"onStream\\\" @result=\\\"onResult\\\" class=\\\"audio-button mx-1\\\"/>\\n                    <b-button v-else class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('text')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n                <div class=\\\"typer\\\" v-if=\\\"message_mode=='image'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\" @click=\\\"clearMessage\\\">\\n                        <b-icon icon=\\\"x\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <div class=\\\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\\\">\\n                        <div class=\\\"col-4 h-100 text-center\\\">\\n                            <img class=\\\"preview\\\" :src=\\\"preview\\\"/>\\n                        </div>\\n                        <div class=\\\"col-8 p-0 p-sm-1 p-md-2 h-100\\\">\\n                            <div style=\\\"text-overflow: ellipsis;overflow: hidden;width: 100%;height: 100%;\\\">{{image_record.name}}</div>\\n                        </div>\\n                    </div>\\n                    <b-button class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('image')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n                <div class=\\\"typer\\\" v-if=\\\"message_mode=='file'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\" @click=\\\"clearMessage\\\">\\n                        <b-icon icon=\\\"x\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <div class=\\\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\\\">\\n                        <div class=\\\"col-4 h-100 text-center\\\">\\n                            <img class=\\\"preview\\\" :src=\\\"preview\\\"/>\\n                        </div>\\n                        <div class=\\\"col-8 p-0 p-sm-1 p-md-2 h-100\\\">\\n                            <div style=\\\"text-overflow: ellipsis;overflow: hidden;width: 100%;height: 100%;\\\">{{file_record.name}}</div>\\n                        </div>\\n                    </div>\\n                    <b-button class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('file')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n                <div class=\\\"typer justify-content-between\\\" v-if=\\\"message_mode=='audio'\\\">\\n                    <b-button class=\\\"rounded-circle border p-0 mx-1 paperclip-button\\\" :disabled=\\\"message_loading\\\" @click=\\\"clearMessage\\\">\\n                        <b-icon icon=\\\"x\\\" scale=\\\"2\\\" aria-hidden=\\\"true\\\"></b-icon>\\n                    </b-button>\\n                    <audio-player :audio=\\\"audio_record\\\" :type=\\\"'file'\\\" style=\\\"width:60%\\\"></audio-player>\\n                    <b-button class=\\\"audio-button rounded-circle p-2 mx-1 text-white border-0\\\" :disabled=\\\"message_loading\\\" @click=\\\"sendChatMessage('audio')\\\">\\n                        <i class=\\\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\\\" style=\\\"font-size: 25px;\\\" v-if=\\\"!message_loading\\\"></i>\\n                        <b-spinner small v-if=\\\"message_loading\\\"></b-spinner>\\n                        <span class=\\\"sr-only\\\" v-if=\\\"message_loading\\\">Loading...</span>\\n                    </b-button>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</template>\\n\\n<script>\\n    export default {\\n        data () {\\n            return {\\n                message_text: '',\\n                audio_record: null,\\n                image_record: null,\\n                file_record: null,\\n                message_mode:'text',\\n                preview:'',\\n                message_loading:false,\\n                flag:false,\\n                seconds:0,\\n                interval:'',\\n                files: [],\\n                currentChat: {},\\n                chatMessages: [],\\n                emojiPanel: false,\\n                currentRef: {},\\n                loading: false,\\n                totalChatHeight: 0,\\n                search:'',\\n                results:[],\\n                options: {\\n                    // minMatchCharLength: 2,\\n                    shouldSort: true,\\n                    threshold: 0.2,\\n                    keys: ['manager_title', 'client_title']\\n                },\\n                new_chat:{\\n                    name:'',\\n                    user:null\\n                },\\n                load:false,\\n            }\\n        },\\n        mounted () {\\n            this.chatMessages=[]\\n            // this.$store.dispatch('loadUserChats').then(()=>{\\n            //     this.loadChat()\\n            // })\\n            this.loadChat()\\n            this.getUser()\\n            console.log('this.chatMessages', this.chatMessages)\\n            console.log('this.currentChat', this.currentChat)\\n        },\\n        computed: {\\n            messages () {\\n                return this.chatMessages\\n            },\\n            chats () {\\n                return this.$store.getters.chats\\n            },\\n            user() {\\n                return this.$store.getters.user\\n            },\\n            available_users() {\\n                return this.$store.getters.available_users\\n            },\\n            filteredChats() {\\n                if(this.search.trim() === '')\\n                {\\n                    return this.chats\\n                }\\n                else {\\n                    return this.results\\n                }\\n            }\\n            // onNewMessageAdded () {\\n            //     const that = this\\n            //     let onNewMessageAdded = function (snapshot, newMessage = true) {\\n            //         let message = {};\\n            //         /*eslint-disable */\\n            //         var urlPattern = /(\\\\b(https?|ftp|file):\\\\/\\\\/[-A-Z0-9+&@#\\\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\\\/%=~_|])/ig\\n            //         /*eslint-enable */\\n            //         message.message_text = message.message_text\\n            //             .replace(/&/g, '&amp;')\\n            //             .replace(/</g, '&lt;')\\n            //             .replace(/>/g, '&gt;')\\n            //             .replace(/\\\"/g, '&quot;')\\n            //             .replace(/'/g, '&#039;')\\n            //         message.message_text = message.message_text.replace(urlPattern, \\\"<a href='$1'>$1</a>\\\")\\n            //         if (!newMessage) {\\n            //             // that.chatMessages.unshift(that.processMessage(message))\\n            //             that.chatMessages.unshift(message)\\n            //             that.scrollTo()\\n            //         } else {\\n            //             that.chatMessages.push(message)\\n            //             that.scrollToEnd()\\n            //         }\\n            //     }\\n            //     return onNewMessageAdded\\n            // }\\n        },\\n        watch: {\\n            '$route.params.id' (newId, oldId) {\\n                // this.currentRef.off('child_added', this.onNewMessageAdded)\\n                console.log('here wattch')\\n                this.loadChat()\\n            }\\n        },\\n        methods: {\\n            toChat(id)\\n            {\\n                this.$router.push('/'+this.user.role+'/chat/'+id)\\n            },\\n            async getUser() {\\n                if (!this.user) {\\n                    await this.$store.dispatch('getUser').then( () => {\\n                    })\\n                }\\n            },\\n            async loadChat () {\\n                if(this.chats.length<=0){\\n\\n                    await this.$store.dispatch('loadUserChats').then(()=>{\\n                        this.totalChatHeight = this.$refs.chatContainer.scrollHeight\\n                        this.loading = false\\n                        this.load=true\\n                        if (this.$route.params.id !== undefined) {\\n                            this.chatMessages = []\\n                            this.currentChat = this.chats.find((chat) => {if(chat.id == this.$route.params.id)\\n                            {\\n                                return true;\\n                            }});\\n                            // this.chatMessages = this.currentChat.messages;\\n                            this.currentChat.messages.forEach((item) => {\\n                                this.onNewMessageAdded(item, false);\\n                            })\\n                            // let chatID = this.id\\n                            // this.currentRef = firebase.database().ref('messages').child(chatID).child('messages').limitToLast(20)\\n                            // this.currentRef.on('child_added', this.onNewMessageAdded)\\n                        }\\n                    })\\n                }\\n                else{\\n                    this.totalChatHeight = this.$refs.chatContainer.scrollHeight\\n                    this.loading = false\\n                    if (this.$route.params.id !== undefined) {\\n                        this.chatMessages = []\\n                        this.currentChat = this.chats.find((chat) => {if(chat.id == this.$route.params.id)\\n                        {\\n                            return true;\\n                        }});\\n                        this.currentChat.messages.forEach((item) => {\\n                            this.onNewMessageAdded(item, false);\\n                        })\\n                    }\\n                }\\n\\n            },\\n            onScroll () {\\n                let scrollValue = this.$refs.chatContainer.scrollTop\\n                const that = this\\n                if (scrollValue < 100 && !this.loading) {\\n                    this.totalChatHeight = this.$refs.chatContainer.scrollHeight\\n                    this.loading = true\\n                    // let chatID = this.id\\n                    let currentTopMessage = this.chatMessages[0]\\n                    if (currentTopMessage === undefined) {\\n                        this.loading = false\\n                        return\\n                    }\\n                    // firebase.database().ref('messages').child(chatID).child('messages').orderByKey().endAt(currentTopMessage.key).limitToLast(20).once('value').then(\\n                    //     function (snapshot) {\\n                    //         let tempArray = []\\n                    //         snapshot.forEach(function (item) {\\n                    //             tempArray.push(item)\\n                    //         })\\n                    //         if (tempArray[0].key === tempArray[1].key) return\\n                    //         tempArray.reverse()\\n                    //         tempArray.forEach(function (child) { that.onNewMessageAdded(child, false) })\\n                    that.loading = false\\n                    //     }\\n                    // )\\n                }\\n            },\\n            processMessage (message) {\\n                /*eslint-disable */\\n                var imageRegex = /([^\\\\s\\\\']+).(?:jpg|jpeg|gif|png)/i\\n                /*eslint-enable */\\n                if (imageRegex.test(message.message_text)) {\\n                    message.image = imageRegex.exec(message.message_text)[0]\\n                }\\n                var emojiRegex = /([\\\\u{1f300}-\\\\u{1f5ff}\\\\u{1f900}-\\\\u{1f9ff}\\\\u{1f600}-\\\\u{1f64f}\\\\u{1f680}-\\\\u{1f6ff}\\\\u{2600}-\\\\u{26ff}\\\\u{2700}-\\\\u{27bf}\\\\u{1f1e6}-\\\\u{1f1ff}\\\\u{1f191}-\\\\u{1f251}\\\\u{2934}-\\\\u{1f18e}])/gu\\n                if (emojiRegex.test(message.message_text)) {\\n                    message.message_text = message.message_text.replace(emojiRegex, '<span class=\\\"emoji\\\">$1</span>')\\n                }\\n                return message\\n            },\\n            onNewMessageAdded (message, newMessage = true) {\\n                /*eslint-disable */\\n                var urlPattern = /(\\\\b(https?|ftp|file):\\\\/\\\\/[-A-Z0-9+&@#\\\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\\\/%=~_|])/ig\\n                /*eslint-enable */\\n                message.message_text = message.message_text\\n                    .replace(/&/g, '&amp;')\\n                    .replace(/</g, '&lt;')\\n                    .replace(/>/g, '&gt;')\\n                    .replace(/\\\"/g, '&quot;')\\n                    .replace(/'/g, '&#039;')\\n                message.message_text = message.message_text.replace(urlPattern, \\\"<a href='$1'>$1</a>\\\")\\n                if (!newMessage) {\\n                    // that.chatMessages.unshift(that.processMessage(message))\\n                    // this.chatMessages.unshift(message)\\n                    this.chatMessages.push(message)\\n                    console.log('!newMessage')\\n                    this.scrollTo()\\n                } else {\\n                    this.chatMessages.push(message)\\n                    console.log('newMessage')\\n                    this.scrollToEnd()\\n                }\\n\\n            },\\n            async sendChatMessage (type) {\\n                this.message_loading = true;\\n                // if (this.message_text !== '') {\\n                if(this.audio_record!=null){\\n                    this.files.push(this.audio_record)\\n                }\\n                if(this.image_record!=null){\\n                    this.files.push(this.image_record)\\n                }\\n                if(this.file_record!=null){\\n                    this.files.push(this.file_record)\\n                }\\n                var message = {\\n                    message_text: this.message_text,\\n                    date: new Date().toString(),\\n                    conversation_id: this.currentChat.id,\\n                    sender_id: this.user.id,\\n                    type: type,\\n                    files: this.files,\\n                    senderInfo: this.user.info,\\n                    selfMessage: true\\n                }\\n                let formData = new FormData();\\n                formData.append(\\\"message\\\", JSON.stringify(message));\\n\\n                for (var i = 0; i < this.files.length; i++) {\\n                    let file = this.files[i].data;\\n\\n                    formData.append('files[' + i + ']', file);\\n                }\\n                await this.$store.dispatch('sendMessage', formData).then(resp=>{\\n                    this.onNewMessageAdded(resp.data.message, true);\\n                    this.$store.commit('addChatMessage', resp.data.message);\\n                    this.message_loading = false;\\n                });\\n                this.clearMessage();\\n                // }\\n            },\\n            scrollToEnd () {\\n                this.$nextTick(() => {\\n                    var container = this.$el.querySelector('.chat-container')\\n                    container.scrollTop = container.scrollHeight\\n                })\\n            },\\n            scrollTo () {\\n                this.$nextTick(() => {\\n                    let currentHeight = this.$refs.chatContainer.scrollHeight\\n                    let difference = currentHeight - this.totalChatHeight\\n                    var container = this.$el.querySelector('.chat-container')\\n                    container.scrollTop = difference\\n                })\\n            },\\n            addEmojiToMessage (emoji) {\\n                this.message_text += emoji.value\\n            },\\n            toggleEmojiPanel () {\\n                this.emojiPanel = !this.emojiPanel\\n            },\\n            onStream(stream) {\\n                console.log('before countSeconds')\\n                this.countSeconds();\\n                console.log('after countSeconds')\\n                console.log('Got a stream object:', stream);\\n                console.log('after stream object')\\n\\n            },\\n            onResult(data) {\\n                var time = Date.now();\\n                var date = new Date();\\n                // this.files.push({\\n                //     type: 'audio',\\n                //     name: 'record-'+time+'.mp3',\\n                //     src: window.URL.createObjectURL(data),\\n                //     data: data,\\n                //     date: date,\\n                // })\\n                this.audio_record = {\\n                    type: 'audio',\\n                    name: 'record-'+time+'.mp3',\\n                    src: window.URL.createObjectURL(data),\\n                    data: data,\\n                    date: date,\\n                    seconds: this.seconds\\n                }\\n                this.countSeconds();\\n                this.message_mode='audio';\\n\\n            },\\n            handleFile() {\\n                var time = Date.now();\\n                var date = new Date();\\n                let uploadedFile = this.$refs.file.files;\\n                if (/\\\\.(jpe?g|png|svg)$/i.test(uploadedFile[0].name))\\n                {\\n                    let reader = new FileReader();\\n                    reader.addEventListener(\\\"load\\\", function() {\\n                        this.preview = reader.result;\\n                    }.bind(this), false);\\n                    reader.readAsDataURL(uploadedFile[0]);\\n                    // this.image_record = uploadedFile[0];\\n                    this.image_record = {\\n                        type: 'image',\\n                        name: uploadedFile[0].name,\\n                        data: uploadedFile[0],\\n                        date: date,\\n                    }\\n                    this.message_mode = 'image';\\n                }\\n                else if(/\\\\.(pdf|txt|docx|doc)$/i.test(uploadedFile[0].name))\\n                {\\n                    // let reader = new FileReader();\\n                    // reader.addEventListener(\\\"load\\\", function() {\\n                    //     this.preview = reader.result;\\n                    // }.bind(this), false);\\n                    // reader.readAsDataURL(uploadedFile[0]);\\n                    // this.file_record = uploadedFile[0];\\n                    this.file_record = {\\n                        type: 'file',\\n                        name: uploadedFile[0].name,\\n                        data: uploadedFile[0],\\n                        date: date,\\n                    }\\n                    this.message_mode = 'file';\\n                    this.$nextTick(function() {\\n                        this.preview = '/images/LOGO-1.png';\\n                    });\\n                }\\n                else\\n                {\\n                    // this.$nextTick(function() {\\n                    //     this.preview = '/images/LOGO-1.png';\\n                    // });\\n                    this.sendMessage('Неверный формат файла')\\n                    this.clearMessage();\\n                }\\n            },\\n            clearMessage() {\\n                this.message_text='';\\n                this.image_record=null;\\n                this.audio_record=null;\\n                this.file_record=null;\\n                this.message_mode='text'\\n            },\\n            countSeconds() {\\n                console.log('this.flag 1', this.flag )\\n                this.flag = !this.flag\\n                console.log('this.flag ', this.flag )\\n                if (this.flag == true) {\\n                    this.seconds=0;\\n                    this.interval = setInterval(this.incrementSeconds, 1000);\\n                }\\n                else {\\n                    clearInterval(this.interval)\\n                    this.audio_record.seconds = this.seconds\\n                }\\n            },\\n            incrementSeconds() {\\n                this.seconds += 1;\\n            },\\n            runSearch () {\\n                if(this.search.trim() === '')\\n                {\\n                    this.results = this.chats\\n                }\\n                else {\\n                    // if(this.search.length > 2){\\n                    //     this.options.minMatchCharLength=this.search.length\\n                    // }\\n                    this.$search(this.search, this.chats, this.options).then(result => {\\n                        this.results = []\\n                        result.forEach(item=>{\\n                            this.results.push(item)\\n                        })\\n                    })\\n                }\\n                console.log(this.results)\\n            },\\n            open(){\\n                this.$bvModal.show(\\\"new-chat\\\");\\n            },\\n            cancel(){\\n                this.$bvModal.hide(\\\"new-chat\\\");\\n            },\\n            async createChat() {\\n                this.loading = true;\\n                var payload = {\\n                    user_id: this.new_chat.user.id,\\n                    name: this.new_chat.user.info.FullName\\n                }\\n                await this.$store.dispatch('createChat', payload).then( resp => {\\n                    this.$store.commit('addChat', resp.data.chat)\\n                    this.$store.commit('removeAvailableUser', this.new_chat.user.id)\\n                    this.loading=false;\\n                    this.new_chat = {\\n                        name:'',\\n                        user:null\\n                    };\\n                    this.cancel();\\n                })\\n            },\\n            sendMessage(message) {\\n                this.$notify({\\n                    group: 'info',\\n                    type: 'travel',\\n                    title: 'Сообщение от TravelClub',\\n                    text: message\\n                });\\n            },\\n        }\\n    }\\n</script>\\n\\n<style scoped>\\n    .form-control:focus {\\n        color: #495057;\\n        background-color: #fff;\\n        border-color: #f08b23;\\n        outline: 0;\\n        box-shadow: 0 0 0 0.2rem rgba(240, 139, 35, 0.25);\\n    }\\n    .last_message{\\n        max-height: 50px;\\n        white-space: nowrap;\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n    }\\n    .active {\\n        background: #f08b23 !important;\\n        border-color: #f08b23 !important;\\n    }\\n    .scrollable {\\n        overflow-y: auto;\\n        max-height:calc(100vh - 6.9rem);\\n        /*max-height:70vh;*/\\n    }\\n    .typer{\\n        box-sizing: border-box;\\n        display: flex;\\n        align-items: center;\\n        bottom: 0;\\n        height: 4.9rem;\\n        width: 100%;\\n        background-color: #fff;\\n        /*box-shadow: 0 -5px 10px -5px rgba(0,0,0,.2);*/\\n        border: 2px solid #f08b23;\\n        border-radius: 5px;\\n    }\\n    .typer input[type=text]{\\n        position: absolute;\\n        left: 2.5rem;\\n        padding: 1rem;\\n        width: 80%;\\n        background-color: transparent;\\n        border: none;\\n        outline: none;\\n        font-size: 1.25rem;\\n    }\\n    /*.typer button {*/\\n    /*    color: #fff;*/\\n    /*    background-color: #f8a105;*/\\n    /*    border-color: #f8a105;*/\\n    /*    outline: none !important;*/\\n    /*}*/\\n    /*.typer button:hover{*/\\n    /*    color: #fff;*/\\n    /*    background-color: #063065;*/\\n    /*    border-color: #063065;*/\\n    /*}*/\\n    .chat-container{\\n        box-sizing: border-box;\\n        height: calc(95vh - 9.5rem);\\n        overflow-y: auto;\\n        padding: 10px;\\n        /*background-color: #f2f2f2;*/\\n        background-color: #fff;\\n    }\\n    .message{\\n        margin-bottom: 8px;\\n    }\\n    .message.own{\\n        text-align: right;\\n    }\\n    .message.own .content{\\n        background-color: #ffc890;\\n    }\\n    .chat-container .username{\\n        font-size: 18px;\\n        font-weight: bold;\\n    }\\n    .chat-container .content{\\n        padding: 8px;\\n        /*background-color: lightgreen;*/\\n        background-color: lightskyblue;\\n        border-radius: 10px;\\n        display:inline-block;\\n        box-shadow: 0 1px 3px 0 rgba(0,0,0,0.2), 0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12);\\n        max-width: 50%;\\n        word-wrap: break-word;\\n    }\\n    @media (max-width: 480px) {\\n        .chat-container .content{\\n            max-width: 60%;\\n        }\\n    }\\n    @media screen and (max-width: 576px) {\\n        .chat-container {\\n            height: calc(95vh - 6.8rem);\\n        }\\n    }\\n    ::-webkit-file-upload-button {\\n        cursor:pointer;\\n    }\\n    input[type=\\\"file\\\"]{\\n        /*opacity: 0;*/\\n        /*width: 100%;*/\\n        /*height: 70px;*/\\n        /*position: absolute;*/\\n        /*cursor: pointer;*/\\n        opacity: 0;\\n        width: 100%;\\n        height: 100%;\\n        position: absolute;\\n        cursor: pointer;\\n        top: 0;\\n        left: 0;\\n    }\\n    .preview{\\n        height: 100%;\\n        max-width: 90%;\\n    }\\n    .paperclip-button {\\n        position: relative;\\n        max-width: 45px;\\n        max-height: 45px;\\n        width: 100%;\\n        height: 100%;\\n        background: transparent;\\n        color: #f08b23;\\n        border-color: #f08b23 !important;\\n        overflow: hidden;\\n    }\\n    .paperclip-button:hover {\\n        color: #f08b23;\\n        border-color: #f08b23 !important;\\n    }\\n    .paperclip-button:active {\\n        background: #f08b23 !important;\\n        color: #fff !important;\\n    }\\n    .paperclip-button:focus {\\n        background: #f08b23 !important;\\n        color: #fff !important;\\n        outline: none !important;\\n    }\\n    .audio-button {\\n        max-width: 45px;\\n        max-height: 45px;\\n        height: 100%;\\n        width: 100%;\\n        background-color: #f08b23;\\n    }\\n    .audio-button:hover {\\n        background-color: #f08b23 !important;\\n    }\\n</style>\\n<style>\\n    .loading-wave-dots .wave-item:nth-child(2) {\\n        margin-left: -20px;\\n        -webkit-animation-delay: .14s !important;\\n        animation-delay: .14s !important;\\n    }\\n    .loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(3) {\\n        margin-left: -4px;\\n        -webkit-animation-delay: .28s !important;\\n        animation-delay: .28s !important;\\n    }\\n    .loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(4) {\\n        margin-left: 12px;\\n        -webkit-animation-delay: .42s !important;\\n        animation-delay: .42s !important;\\n    }\\n    .loading-wave-dots[data-v-46b20d22] .wave-item:last-child {\\n        margin-left: 28px;\\n        -webkit-animation-delay: .56s !important;\\n        animation-delay: .56s !important;\\n    }\\n    .loading-wave-dots .wave-item {\\n        -webkit-animation: wave-dots linear 2.8s infinite !important;\\n        animation: wave-dots linear 2.8s infinite !important;\\n    }\\n    @keyframes wave-dots {\\n        0% {\\n            -webkit-transform: translateY(0);\\n            transform: translateY(0);\\n            background: #5b43f3;\\n        }\\n        10% {\\n            -webkit-transform: translateY(-6px);\\n            transform: translateY(-6px);\\n            background: #5b43f3;\\n        }\\n        20% {\\n            -webkit-transform: translateY(0);\\n            transform: translateY(0);\\n            background: #f3434b;\\n        }\\n        100% {\\n            -webkit-transform: translateY(0);\\n            transform: translateY(0);\\n            background: #5b43f3;\\n        }\\n    }\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","<template>\n    <div class=\"container-fluid\" style=\"padding: 0;\">\n        <b-modal id=\"new-chat\" title=\"Создать чат\">\n            <div class=\"row w-100 mt-2 mx-auto\">\n                <multiselect\n                    v-model=\"new_chat.user\"\n                    placeholder=\"Начать чат с...\"\n                    :optionHeight=29\n                    :showLabels=false\n                    :options=\"available_users\"\n                    style=\"line-height: 1.5; font-size: 0.765625rem; margin:auto;\"\n                    :multiple=\"false\"\n                    label=\"info.FullName\"\n                    track-by=\"id\"\n                    :taggable=\"true\"\n                    :searchable=\"true\"\n                    :hideSelected=\"true\"\n                >\n                    <template slot=\"singleLabel\" slot-scope=\"props\">\n                        <span class=\"option__title\">{{ props.option.info.FullName }}</span>\n                    </template>\n                    <template slot=\"option\" slot-scope=\"props\">\n                        <span class=\"option__title\">{{ props.option.info.FullName }}</span>\n                    </template>\n                </multiselect>\n            </div>\n            <template v-slot:modal-footer>\n                <div class=\"w-100\">\n                    <b-button\n                        style=\"background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%); background-color: rgba(0, 0, 0, 0); background-color: #f08b23 !important; border-color: #f08b23 !important;\"\n                        class=\"float-right\"\n                        @click=\"createChat\"\n                        :disabled=\"new_chat.user==null ||new_chat.user==''||loading\"\n                    >\n                        <b-spinner small v-if=\"loading\"></b-spinner>\n                        <span class=\"sr-only\" v-if=\"loading\">Loading...</span>\n                        Создать\n                    </b-button>\n                    <b-button\n                        style=\"background: linear-gradient(0deg, #ffbf00 0%, #f08b23 100%); background-color: rgba(0, 0, 0, 0); background-color: #f08b23 !important; border-color: #f08b23 !important;\"\n                        class=\"float-right mr-2\"\n                        @click=\"cancel\"\n                    >\n                        Отмена\n                    </b-button>\n                </div>\n            </template>\n        </b-modal>\n        <div class=\"row w-100 m-auto align-items-start justify-content-center\">\n            <div class=\"col-sm-4 desktop scrollable\" style=\"position: relative\">\n                <div class=\"row w-100 m-auto\">\n                    <div class=\"col-12 pt-3 px-0\">\n                        <div class=\"row w-100 mx-auto\" style=\"position: sticky; z-index:3; top: 0px\">\n                            <div class=\"col-12 p-0\">\n                                <div class=\"row w-100 m-auto justify-content-center align-items-center py-2\" style=\"background: #f08b23; color: white; border-radius: 5px\">\n                                    <div class=\"col-6 col-sm-6\">\n                                        <p class=\"my-auto\">\n                                            <span class=\"chat-name\">Чаты</span>\n                                        </p>\n                                    </div>\n                                    <div class=\"col-6 col-sm-6\">\n                                <span class=\"chat-name ml-auto mr-0\" style=\"font-size: 25px; float:right\" v-if=\"available_users.length>0 && user.role != 'client'\" @click=\"open\" >\n                                        <b-icon icon=\"plus-circle-fill\"></b-icon>\n                                </span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"col-12 p-0\">\n                                <div class=\"row w-100 mx-auto mt-2\">\n                                    <b-form-input\n                                        v-model=\"search\"\n                                        :placeholder=\"'Поиск чата'\"\n                                        class=\"mb-0 travel-input\"\n                                        @input=\"runSearch\"\n                                    >\n                                    </b-form-input>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-12 pt-2 px-0\" v-if=\"chats.length<=0&&load==false\">\n                        <div class=\"row w-100 m-auto\">\n                            <div class=\"col-12 skeleton-tr pt-2 px-0\" v-for=\"n in 5\" :key=\"n\">\n                                <div class=\"list-group\">\n                                    <div class=\"list-group-item list-group-item-action flex-column align-items-start\">\n                                        <div class=\"d-flex w-100 justify-content-between\">\n                                            <div class=\"row m-auto w-100\">\n                                                <div class=\"col-8 skeleton-tr p-2 mr-auto\">\n                                                    <tb-skeleton :height=\"15\" theme=\"opacity\" bg-color=\"#dcdbdc\" shape=\"radius\" />\n                                                </div>\n                                                <div class=\"col-2 skeleton-tr p-2 ml-auto float-right\">\n                                                    <tb-skeleton :height=\"15\" theme=\"opacity\" bg-color=\"#dcdbdc\" shape=\"radius\" />\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div>\n                                            <div class=\"row m-auto w-100\">\n                                                <div class=\"col-4 skeleton-tr p-2\">\n                                                    <tb-skeleton :height=\"10\" theme=\"opacity\" bg-color=\"#dcdbdc\" shape=\"radius\" />\n                                                </div>\n                                            </div>\n                                            <div class=\"row m-auto w-100\">\n                                                <div class=\"col-2 skeleton-tr p-2\">\n                                                    <tb-skeleton :height=\"5\" theme=\"opacity\" bg-color=\"#dcdbdc\" shape=\"radius\" />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-12 pt-2 px-0\" v-if=\"chats.length<=0&&load==true\">\n                        <div class=\"row w-100 mx-auto mb-2\">\n                            <p>Пока у Вас нет никаких чатов</p>\n                        </div>\n                    </div>\n                    <div class=\"col-12 pt-2 px-0\" v-for=\"chat in filteredChats\" :key=\"chat.id\">\n                        <div class=\"list-group\">\n                            <div class=\"list-group-item list-group-item-action flex-column align-items-start\" style=\"cursor: pointer\" :class=\"{active: chat.id == $route.params.id}\" @click=\"toChat(chat.id)\">\n                                <div class=\"d-flex w-100 justify-content-between\">\n                                    <h5 class=\"mb-1\" v-if=\"chat.creator_id == user.id\">{{chat.manager_title}}</h5>\n                                    <h5 class=\"mb-1\" v-else>{{chat.client_title}}</h5>\n                                    <small v-if=\"chat.messages.length>0\">{{chat.messages[chat.messages.length-1].created_at | moment(\"from\", \"now\") }}</small>\n                                </div>\n                                <div v-if=\"chat.messages.length>0\">\n                                    <p class=\"mb-1 last_message\">{{chat.messages[chat.messages.length-1].message_text}}</p>\n                                    <small>{{chat.messages[chat.messages.length-1].senderInfo.FirstName}}\n                                        <span v-if=\"chat.messages[chat.messages.length-1].senderInfo.MiddleName !='' || chat.messages[chat.messages.length-1].senderInfo.MiddleName != null\">\n                                            {{chat.messages[chat.messages.length-1].senderInfo.MiddleName}}\n                                        </span>\n                                    </small>\n                                </div>\n                                <div v-else>\n                                    <p class=\"mb-1 last_message\">В этой беседе ещё нет сообщений</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"col-12 col-md-8\" style=\"position: relative;\">\n                <div class=\"chat-container\" v-on:scroll=\"onScroll\" ref=\"chatContainer\">\n                    <!--                    <infinite-loading direction=\"top\" @infinite=\"infiniteHandler\" spinner=\"waveDots\">-->\n                    <!--                        <span slot=\"no-results\">-->\n                    <!--                        </span>-->\n                    <!--                        <span slot=\"no-more\">-->\n                    <!--                        </span>-->\n                    <!--                    </infinite-loading>-->\n                    <message :messages=\"chatMessages\"></message>\n                </div>\n                <div class=\"typer\" v-if=\"message_mode=='text'\">\n                    <b-button class=\"rounded-circle border p-0 mx-1 paperclip-button\" :disabled=\"message_loading\">\n                        <input type=\"file\" id=\"file\" ref=\"file\" v-on:change=\"handleFile()\"/>\n                        <b-icon icon=\"paperclip\" scale=\"2\" aria-hidden=\"true\"></b-icon>\n                    </b-button>\n                    <b-form-textarea\n                        id=\"textarea\"\n                        class=\"mx-1\"\n                        v-model=\"message_text\"\n                        size=\"sm\"\n                        placeholder=\"Напишите сообщение...\"\n                        rows=\"1\"\n                        max-rows=\"2\"\n                        no-resize\n                        @keydown.enter.exact.prevent=\"sendChatMessage('text')\"\n                    >\n                    </b-form-textarea>\n                    <vue-record-audio v-if=\"message_text.trim()==''&&message_mode=='text'\" :mode=\"'press'\" @stream=\"onStream\" @result=\"onResult\" class=\"audio-button mx-1\"/>\n                    <b-button v-else class=\"audio-button rounded-circle p-2 mx-1 text-white border-0\" :disabled=\"message_loading\" @click=\"sendChatMessage('text')\">\n                        <i class=\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\" style=\"font-size: 25px;\" v-if=\"!message_loading\"></i>\n                        <b-spinner small v-if=\"message_loading\"></b-spinner>\n                        <span class=\"sr-only\" v-if=\"message_loading\">Loading...</span>\n                    </b-button>\n                </div>\n                <div class=\"typer\" v-if=\"message_mode=='image'\">\n                    <b-button class=\"rounded-circle border p-0 mx-1 paperclip-button\" :disabled=\"message_loading\" @click=\"clearMessage\">\n                        <b-icon icon=\"x\" scale=\"2\" aria-hidden=\"true\"></b-icon>\n                    </b-button>\n                    <div class=\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\">\n                        <div class=\"col-4 h-100 text-center\">\n                            <img class=\"preview\" :src=\"preview\"/>\n                        </div>\n                        <div class=\"col-8 p-0 p-sm-1 p-md-2 h-100\">\n                            <div style=\"text-overflow: ellipsis;overflow: hidden;width: 100%;height: 100%;\">{{image_record.name}}</div>\n                        </div>\n                    </div>\n                    <b-button class=\"audio-button rounded-circle p-2 mx-1 text-white border-0\" :disabled=\"message_loading\" @click=\"sendChatMessage('image')\">\n                        <i class=\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\" style=\"font-size: 25px;\" v-if=\"!message_loading\"></i>\n                        <b-spinner small v-if=\"message_loading\"></b-spinner>\n                        <span class=\"sr-only\" v-if=\"message_loading\">Loading...</span>\n                    </b-button>\n                </div>\n                <div class=\"typer\" v-if=\"message_mode=='file'\">\n                    <b-button class=\"rounded-circle border p-0 mx-1 paperclip-button\" :disabled=\"message_loading\" @click=\"clearMessage\">\n                        <b-icon icon=\"x\" scale=\"2\" aria-hidden=\"true\"></b-icon>\n                    </b-button>\n                    <div class=\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\">\n                        <div class=\"col-4 h-100 text-center\">\n                            <img class=\"preview\" :src=\"preview\"/>\n                        </div>\n                        <div class=\"col-8 p-0 p-sm-1 p-md-2 h-100\">\n                            <div style=\"text-overflow: ellipsis;overflow: hidden;width: 100%;height: 100%;\">{{file_record.name}}</div>\n                        </div>\n                    </div>\n                    <b-button class=\"audio-button rounded-circle p-2 mx-1 text-white border-0\" :disabled=\"message_loading\" @click=\"sendChatMessage('file')\">\n                        <i class=\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\" style=\"font-size: 25px;\" v-if=\"!message_loading\"></i>\n                        <b-spinner small v-if=\"message_loading\"></b-spinner>\n                        <span class=\"sr-only\" v-if=\"message_loading\">Loading...</span>\n                    </b-button>\n                </div>\n                <div class=\"typer justify-content-between\" v-if=\"message_mode=='audio'\">\n                    <b-button class=\"rounded-circle border p-0 mx-1 paperclip-button\" :disabled=\"message_loading\" @click=\"clearMessage\">\n                        <b-icon icon=\"x\" scale=\"2\" aria-hidden=\"true\"></b-icon>\n                    </b-button>\n                    <audio-player :audio=\"audio_record\" :type=\"'file'\" style=\"width:60%\"></audio-player>\n                    <b-button class=\"audio-button rounded-circle p-2 mx-1 text-white border-0\" :disabled=\"message_loading\" @click=\"sendChatMessage('audio')\">\n                        <i class=\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\" style=\"font-size: 25px;\" v-if=\"!message_loading\"></i>\n                        <b-spinner small v-if=\"message_loading\"></b-spinner>\n                        <span class=\"sr-only\" v-if=\"message_loading\">Loading...</span>\n                    </b-button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        data () {\n            return {\n                message_text: '',\n                audio_record: null,\n                image_record: null,\n                file_record: null,\n                message_mode:'text',\n                preview:'',\n                message_loading:false,\n                flag:false,\n                seconds:0,\n                interval:'',\n                files: [],\n                currentChat: {},\n                chatMessages: [],\n                emojiPanel: false,\n                currentRef: {},\n                loading: false,\n                totalChatHeight: 0,\n                search:'',\n                results:[],\n                options: {\n                    // minMatchCharLength: 2,\n                    shouldSort: true,\n                    threshold: 0.2,\n                    keys: ['manager_title', 'client_title']\n                },\n                new_chat:{\n                    name:'',\n                    user:null\n                },\n                load:false,\n            }\n        },\n        mounted () {\n            this.chatMessages=[]\n            // this.$store.dispatch('loadUserChats').then(()=>{\n            //     this.loadChat()\n            // })\n            this.loadChat()\n            this.getUser()\n            console.log('this.chatMessages', this.chatMessages)\n            console.log('this.currentChat', this.currentChat)\n        },\n        computed: {\n            messages () {\n                return this.chatMessages\n            },\n            chats () {\n                return this.$store.getters.chats\n            },\n            user() {\n                return this.$store.getters.user\n            },\n            available_users() {\n                return this.$store.getters.available_users\n            },\n            filteredChats() {\n                if(this.search.trim() === '')\n                {\n                    return this.chats\n                }\n                else {\n                    return this.results\n                }\n            }\n            // onNewMessageAdded () {\n            //     const that = this\n            //     let onNewMessageAdded = function (snapshot, newMessage = true) {\n            //         let message = {};\n            //         /*eslint-disable */\n            //         var urlPattern = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig\n            //         /*eslint-enable */\n            //         message.message_text = message.message_text\n            //             .replace(/&/g, '&amp;')\n            //             .replace(/</g, '&lt;')\n            //             .replace(/>/g, '&gt;')\n            //             .replace(/\"/g, '&quot;')\n            //             .replace(/'/g, '&#039;')\n            //         message.message_text = message.message_text.replace(urlPattern, \"<a href='$1'>$1</a>\")\n            //         if (!newMessage) {\n            //             // that.chatMessages.unshift(that.processMessage(message))\n            //             that.chatMessages.unshift(message)\n            //             that.scrollTo()\n            //         } else {\n            //             that.chatMessages.push(message)\n            //             that.scrollToEnd()\n            //         }\n            //     }\n            //     return onNewMessageAdded\n            // }\n        },\n        watch: {\n            '$route.params.id' (newId, oldId) {\n                // this.currentRef.off('child_added', this.onNewMessageAdded)\n                console.log('here wattch')\n                this.loadChat()\n            }\n        },\n        methods: {\n            toChat(id)\n            {\n                this.$router.push('/'+this.user.role+'/chat/'+id)\n            },\n            async getUser() {\n                if (!this.user) {\n                    await this.$store.dispatch('getUser').then( () => {\n                    })\n                }\n            },\n            async loadChat () {\n                if(this.chats.length<=0){\n\n                    await this.$store.dispatch('loadUserChats').then(()=>{\n                        this.totalChatHeight = this.$refs.chatContainer.scrollHeight\n                        this.loading = false\n                        this.load=true\n                        if (this.$route.params.id !== undefined) {\n                            this.chatMessages = []\n                            this.currentChat = this.chats.find((chat) => {if(chat.id == this.$route.params.id)\n                            {\n                                return true;\n                            }});\n                            // this.chatMessages = this.currentChat.messages;\n                            this.currentChat.messages.forEach((item) => {\n                                this.onNewMessageAdded(item, false);\n                            })\n                            // let chatID = this.id\n                            // this.currentRef = firebase.database().ref('messages').child(chatID).child('messages').limitToLast(20)\n                            // this.currentRef.on('child_added', this.onNewMessageAdded)\n                        }\n                    })\n                }\n                else{\n                    this.totalChatHeight = this.$refs.chatContainer.scrollHeight\n                    this.loading = false\n                    if (this.$route.params.id !== undefined) {\n                        this.chatMessages = []\n                        this.currentChat = this.chats.find((chat) => {if(chat.id == this.$route.params.id)\n                        {\n                            return true;\n                        }});\n                        this.currentChat.messages.forEach((item) => {\n                            this.onNewMessageAdded(item, false);\n                        })\n                    }\n                }\n\n            },\n            onScroll () {\n                let scrollValue = this.$refs.chatContainer.scrollTop\n                const that = this\n                if (scrollValue < 100 && !this.loading) {\n                    this.totalChatHeight = this.$refs.chatContainer.scrollHeight\n                    this.loading = true\n                    // let chatID = this.id\n                    let currentTopMessage = this.chatMessages[0]\n                    if (currentTopMessage === undefined) {\n                        this.loading = false\n                        return\n                    }\n                    // firebase.database().ref('messages').child(chatID).child('messages').orderByKey().endAt(currentTopMessage.key).limitToLast(20).once('value').then(\n                    //     function (snapshot) {\n                    //         let tempArray = []\n                    //         snapshot.forEach(function (item) {\n                    //             tempArray.push(item)\n                    //         })\n                    //         if (tempArray[0].key === tempArray[1].key) return\n                    //         tempArray.reverse()\n                    //         tempArray.forEach(function (child) { that.onNewMessageAdded(child, false) })\n                    that.loading = false\n                    //     }\n                    // )\n                }\n            },\n            processMessage (message) {\n                /*eslint-disable */\n                var imageRegex = /([^\\s\\']+).(?:jpg|jpeg|gif|png)/i\n                /*eslint-enable */\n                if (imageRegex.test(message.message_text)) {\n                    message.image = imageRegex.exec(message.message_text)[0]\n                }\n                var emojiRegex = /([\\u{1f300}-\\u{1f5ff}\\u{1f900}-\\u{1f9ff}\\u{1f600}-\\u{1f64f}\\u{1f680}-\\u{1f6ff}\\u{2600}-\\u{26ff}\\u{2700}-\\u{27bf}\\u{1f1e6}-\\u{1f1ff}\\u{1f191}-\\u{1f251}\\u{2934}-\\u{1f18e}])/gu\n                if (emojiRegex.test(message.message_text)) {\n                    message.message_text = message.message_text.replace(emojiRegex, '<span class=\"emoji\">$1</span>')\n                }\n                return message\n            },\n            onNewMessageAdded (message, newMessage = true) {\n                /*eslint-disable */\n                var urlPattern = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig\n                /*eslint-enable */\n                message.message_text = message.message_text\n                    .replace(/&/g, '&amp;')\n                    .replace(/</g, '&lt;')\n                    .replace(/>/g, '&gt;')\n                    .replace(/\"/g, '&quot;')\n                    .replace(/'/g, '&#039;')\n                message.message_text = message.message_text.replace(urlPattern, \"<a href='$1'>$1</a>\")\n                if (!newMessage) {\n                    // that.chatMessages.unshift(that.processMessage(message))\n                    // this.chatMessages.unshift(message)\n                    this.chatMessages.push(message)\n                    console.log('!newMessage')\n                    this.scrollTo()\n                } else {\n                    this.chatMessages.push(message)\n                    console.log('newMessage')\n                    this.scrollToEnd()\n                }\n\n            },\n            async sendChatMessage (type) {\n                this.message_loading = true;\n                // if (this.message_text !== '') {\n                if(this.audio_record!=null){\n                    this.files.push(this.audio_record)\n                }\n                if(this.image_record!=null){\n                    this.files.push(this.image_record)\n                }\n                if(this.file_record!=null){\n                    this.files.push(this.file_record)\n                }\n                var message = {\n                    message_text: this.message_text,\n                    date: new Date().toString(),\n                    conversation_id: this.currentChat.id,\n                    sender_id: this.user.id,\n                    type: type,\n                    files: this.files,\n                    senderInfo: this.user.info,\n                    selfMessage: true\n                }\n                let formData = new FormData();\n                formData.append(\"message\", JSON.stringify(message));\n\n                for (var i = 0; i < this.files.length; i++) {\n                    let file = this.files[i].data;\n\n                    formData.append('files[' + i + ']', file);\n                }\n                await this.$store.dispatch('sendMessage', formData).then(resp=>{\n                    this.onNewMessageAdded(resp.data.message, true);\n                    this.$store.commit('addChatMessage', resp.data.message);\n                    this.message_loading = false;\n                });\n                this.clearMessage();\n                // }\n            },\n            scrollToEnd () {\n                this.$nextTick(() => {\n                    var container = this.$el.querySelector('.chat-container')\n                    container.scrollTop = container.scrollHeight\n                })\n            },\n            scrollTo () {\n                this.$nextTick(() => {\n                    let currentHeight = this.$refs.chatContainer.scrollHeight\n                    let difference = currentHeight - this.totalChatHeight\n                    var container = this.$el.querySelector('.chat-container')\n                    container.scrollTop = difference\n                })\n            },\n            addEmojiToMessage (emoji) {\n                this.message_text += emoji.value\n            },\n            toggleEmojiPanel () {\n                this.emojiPanel = !this.emojiPanel\n            },\n            onStream(stream) {\n                console.log('before countSeconds')\n                this.countSeconds();\n                console.log('after countSeconds')\n                console.log('Got a stream object:', stream);\n                console.log('after stream object')\n\n            },\n            onResult(data) {\n                var time = Date.now();\n                var date = new Date();\n                // this.files.push({\n                //     type: 'audio',\n                //     name: 'record-'+time+'.mp3',\n                //     src: window.URL.createObjectURL(data),\n                //     data: data,\n                //     date: date,\n                // })\n                this.audio_record = {\n                    type: 'audio',\n                    name: 'record-'+time+'.mp3',\n                    src: window.URL.createObjectURL(data),\n                    data: data,\n                    date: date,\n                    seconds: this.seconds\n                }\n                this.countSeconds();\n                this.message_mode='audio';\n\n            },\n            handleFile() {\n                var time = Date.now();\n                var date = new Date();\n                let uploadedFile = this.$refs.file.files;\n                if (/\\.(jpe?g|png|svg)$/i.test(uploadedFile[0].name))\n                {\n                    let reader = new FileReader();\n                    reader.addEventListener(\"load\", function() {\n                        this.preview = reader.result;\n                    }.bind(this), false);\n                    reader.readAsDataURL(uploadedFile[0]);\n                    // this.image_record = uploadedFile[0];\n                    this.image_record = {\n                        type: 'image',\n                        name: uploadedFile[0].name,\n                        data: uploadedFile[0],\n                        date: date,\n                    }\n                    this.message_mode = 'image';\n                }\n                else if(/\\.(pdf|txt|docx|doc)$/i.test(uploadedFile[0].name))\n                {\n                    // let reader = new FileReader();\n                    // reader.addEventListener(\"load\", function() {\n                    //     this.preview = reader.result;\n                    // }.bind(this), false);\n                    // reader.readAsDataURL(uploadedFile[0]);\n                    // this.file_record = uploadedFile[0];\n                    this.file_record = {\n                        type: 'file',\n                        name: uploadedFile[0].name,\n                        data: uploadedFile[0],\n                        date: date,\n                    }\n                    this.message_mode = 'file';\n                    this.$nextTick(function() {\n                        this.preview = '/images/LOGO-1.png';\n                    });\n                }\n                else\n                {\n                    // this.$nextTick(function() {\n                    //     this.preview = '/images/LOGO-1.png';\n                    // });\n                    this.sendMessage('Неверный формат файла')\n                    this.clearMessage();\n                }\n            },\n            clearMessage() {\n                this.message_text='';\n                this.image_record=null;\n                this.audio_record=null;\n                this.file_record=null;\n                this.message_mode='text'\n            },\n            countSeconds() {\n                console.log('this.flag 1', this.flag )\n                this.flag = !this.flag\n                console.log('this.flag ', this.flag )\n                if (this.flag == true) {\n                    this.seconds=0;\n                    this.interval = setInterval(this.incrementSeconds, 1000);\n                }\n                else {\n                    clearInterval(this.interval)\n                    this.audio_record.seconds = this.seconds\n                }\n            },\n            incrementSeconds() {\n                this.seconds += 1;\n            },\n            runSearch () {\n                if(this.search.trim() === '')\n                {\n                    this.results = this.chats\n                }\n                else {\n                    // if(this.search.length > 2){\n                    //     this.options.minMatchCharLength=this.search.length\n                    // }\n                    this.$search(this.search, this.chats, this.options).then(result => {\n                        this.results = []\n                        result.forEach(item=>{\n                            this.results.push(item)\n                        })\n                    })\n                }\n                console.log(this.results)\n            },\n            open(){\n                this.$bvModal.show(\"new-chat\");\n            },\n            cancel(){\n                this.$bvModal.hide(\"new-chat\");\n            },\n            async createChat() {\n                this.loading = true;\n                var payload = {\n                    user_id: this.new_chat.user.id,\n                    name: this.new_chat.user.info.FullName\n                }\n                await this.$store.dispatch('createChat', payload).then( resp => {\n                    this.$store.commit('addChat', resp.data.chat)\n                    this.$store.commit('removeAvailableUser', this.new_chat.user.id)\n                    this.loading=false;\n                    this.new_chat = {\n                        name:'',\n                        user:null\n                    };\n                    this.cancel();\n                })\n            },\n            sendMessage(message) {\n                this.$notify({\n                    group: 'info',\n                    type: 'travel',\n                    title: 'Сообщение от TravelClub',\n                    text: message\n                });\n            },\n        }\n    }\n</script>\n\n<style scoped>\n    .form-control:focus {\n        color: #495057;\n        background-color: #fff;\n        border-color: #f08b23;\n        outline: 0;\n        box-shadow: 0 0 0 0.2rem rgba(240, 139, 35, 0.25);\n    }\n    .last_message{\n        max-height: 50px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    .active {\n        background: #f08b23 !important;\n        border-color: #f08b23 !important;\n    }\n    .scrollable {\n        overflow-y: auto;\n        max-height:calc(100vh - 6.9rem);\n        /*max-height:70vh;*/\n    }\n    .typer{\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        bottom: 0;\n        height: 4.9rem;\n        width: 100%;\n        background-color: #fff;\n        /*box-shadow: 0 -5px 10px -5px rgba(0,0,0,.2);*/\n        border: 2px solid #f08b23;\n        border-radius: 5px;\n    }\n    .typer input[type=text]{\n        position: absolute;\n        left: 2.5rem;\n        padding: 1rem;\n        width: 80%;\n        background-color: transparent;\n        border: none;\n        outline: none;\n        font-size: 1.25rem;\n    }\n    /*.typer button {*/\n    /*    color: #fff;*/\n    /*    background-color: #f8a105;*/\n    /*    border-color: #f8a105;*/\n    /*    outline: none !important;*/\n    /*}*/\n    /*.typer button:hover{*/\n    /*    color: #fff;*/\n    /*    background-color: #063065;*/\n    /*    border-color: #063065;*/\n    /*}*/\n    .chat-container{\n        box-sizing: border-box;\n        height: calc(95vh - 9.5rem);\n        overflow-y: auto;\n        padding: 10px;\n        /*background-color: #f2f2f2;*/\n        background-color: #fff;\n    }\n    .message{\n        margin-bottom: 8px;\n    }\n    .message.own{\n        text-align: right;\n    }\n    .message.own .content{\n        background-color: #ffc890;\n    }\n    .chat-container .username{\n        font-size: 18px;\n        font-weight: bold;\n    }\n    .chat-container .content{\n        padding: 8px;\n        /*background-color: lightgreen;*/\n        background-color: lightskyblue;\n        border-radius: 10px;\n        display:inline-block;\n        box-shadow: 0 1px 3px 0 rgba(0,0,0,0.2), 0 1px 1px 0 rgba(0,0,0,0.14), 0 2px 1px -1px rgba(0,0,0,0.12);\n        max-width: 50%;\n        word-wrap: break-word;\n    }\n    @media (max-width: 480px) {\n        .chat-container .content{\n            max-width: 60%;\n        }\n    }\n    @media screen and (max-width: 576px) {\n        .chat-container {\n            height: calc(95vh - 6.8rem);\n        }\n    }\n    ::-webkit-file-upload-button {\n        cursor:pointer;\n    }\n    input[type=\"file\"]{\n        /*opacity: 0;*/\n        /*width: 100%;*/\n        /*height: 70px;*/\n        /*position: absolute;*/\n        /*cursor: pointer;*/\n        opacity: 0;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 0;\n    }\n    .preview{\n        height: 100%;\n        max-width: 90%;\n    }\n    .paperclip-button {\n        position: relative;\n        max-width: 45px;\n        max-height: 45px;\n        width: 100%;\n        height: 100%;\n        background: transparent;\n        color: #f08b23;\n        border-color: #f08b23 !important;\n        overflow: hidden;\n    }\n    .paperclip-button:hover {\n        color: #f08b23;\n        border-color: #f08b23 !important;\n    }\n    .paperclip-button:active {\n        background: #f08b23 !important;\n        color: #fff !important;\n    }\n    .paperclip-button:focus {\n        background: #f08b23 !important;\n        color: #fff !important;\n        outline: none !important;\n    }\n    .audio-button {\n        max-width: 45px;\n        max-height: 45px;\n        height: 100%;\n        width: 100%;\n        background-color: #f08b23;\n    }\n    .audio-button:hover {\n        background-color: #f08b23 !important;\n    }\n</style>\n<style>\n    .loading-wave-dots .wave-item:nth-child(2) {\n        margin-left: -20px;\n        -webkit-animation-delay: .14s !important;\n        animation-delay: .14s !important;\n    }\n    .loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(3) {\n        margin-left: -4px;\n        -webkit-animation-delay: .28s !important;\n        animation-delay: .28s !important;\n    }\n    .loading-wave-dots[data-v-46b20d22] .wave-item:nth-child(4) {\n        margin-left: 12px;\n        -webkit-animation-delay: .42s !important;\n        animation-delay: .42s !important;\n    }\n    .loading-wave-dots[data-v-46b20d22] .wave-item:last-child {\n        margin-left: 28px;\n        -webkit-animation-delay: .56s !important;\n        animation-delay: .56s !important;\n    }\n    .loading-wave-dots .wave-item {\n        -webkit-animation: wave-dots linear 2.8s infinite !important;\n        animation: wave-dots linear 2.8s infinite !important;\n    }\n    @keyframes wave-dots {\n        0% {\n            -webkit-transform: translateY(0);\n            transform: translateY(0);\n            background: #5b43f3;\n        }\n        10% {\n            -webkit-transform: translateY(-6px);\n            transform: translateY(-6px);\n            background: #5b43f3;\n        }\n        20% {\n            -webkit-transform: translateY(0);\n            transform: translateY(0);\n            background: #f3434b;\n        }\n        100% {\n            -webkit-transform: translateY(0);\n            transform: translateY(0);\n            background: #5b43f3;\n        }\n    }\n\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5.use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js\"","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-9.use[1]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9.use[2]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&id=1deea1f8&prod&scoped=true&lang=css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../node_modules/laravel-mix/node_modules/css-loader/dist/cjs.js??clonedRuleSet-9.use[1]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-9.use[2]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=1&id=1deea1f8&prod&lang=css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=1deea1f8&scoped=true\"\nimport script from \"./Chat.vue?vue&type=script&lang=js\"\nexport * from \"./Chat.vue?vue&type=script&lang=js\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&id=1deea1f8&prod&scoped=true&lang=css\"\nimport style1 from \"./Chat.vue?vue&type=style&index=1&id=1deea1f8&prod&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1deea1f8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container-fluid\",staticStyle:{\"padding\":\"0\"}},[_c('b-modal',{attrs:{\"id\":\"new-chat\",\"title\":\"Создать чат\"},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(){return [_c('div',{staticClass:\"w-100\"},[_c('b-button',{staticClass:\"float-right\",staticStyle:{\"background\":\"linear-gradient(0deg, #ffbf00 0%, #f08b23 100%)\",\"background-color\":\"#f08b23 !important\",\"border-color\":\"#f08b23 !important\"},attrs:{\"disabled\":_vm.new_chat.user==null ||_vm.new_chat.user==''||_vm.loading},on:{\"click\":_vm.createChat}},[(_vm.loading)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.loading)?_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")]):_vm._e(),_vm._v(\"\\n                    Создать\\n                \")],1),_vm._v(\" \"),_c('b-button',{staticClass:\"float-right mr-2\",staticStyle:{\"background\":\"linear-gradient(0deg, #ffbf00 0%, #f08b23 100%)\",\"background-color\":\"#f08b23 !important\",\"border-color\":\"#f08b23 !important\"},on:{\"click\":_vm.cancel}},[_vm._v(\"\\n                    Отмена\\n                \")])],1)]},proxy:true}])},[_c('div',{staticClass:\"row w-100 mt-2 mx-auto\"},[_c('multiselect',{staticStyle:{\"line-height\":\"1.5\",\"font-size\":\"0.765625rem\",\"margin\":\"auto\"},attrs:{\"placeholder\":\"Начать чат с...\",\"optionHeight\":29,\"showLabels\":false,\"options\":_vm.available_users,\"multiple\":false,\"label\":\"info.FullName\",\"track-by\":\"id\",\"taggable\":true,\"searchable\":true,\"hideSelected\":true},scopedSlots:_vm._u([{key:\"singleLabel\",fn:function(props){return [_c('span',{staticClass:\"option__title\"},[_vm._v(_vm._s(props.option.info.FullName))])]}},{key:\"option\",fn:function(props){return [_c('span',{staticClass:\"option__title\"},[_vm._v(_vm._s(props.option.info.FullName))])]}}]),model:{value:(_vm.new_chat.user),callback:function ($$v) {_vm.$set(_vm.new_chat, \"user\", $$v)},expression:\"new_chat.user\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"row w-100 m-auto align-items-start justify-content-center\"},[_c('div',{staticClass:\"col-sm-4 desktop scrollable\",staticStyle:{\"position\":\"relative\"}},[_c('div',{staticClass:\"row w-100 m-auto\"},[_c('div',{staticClass:\"col-12 pt-3 px-0\"},[_c('div',{staticClass:\"row w-100 mx-auto\",staticStyle:{\"position\":\"sticky\",\"z-index\":\"3\",\"top\":\"0px\"}},[_c('div',{staticClass:\"col-12 p-0\"},[_c('div',{staticClass:\"row w-100 m-auto justify-content-center align-items-center py-2\",staticStyle:{\"background\":\"#f08b23\",\"color\":\"white\",\"border-radius\":\"5px\"}},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"col-6 col-sm-6\"},[(_vm.available_users.length>0 && _vm.user.role != 'client')?_c('span',{staticClass:\"chat-name ml-auto mr-0\",staticStyle:{\"font-size\":\"25px\",\"float\":\"right\"},on:{\"click\":_vm.open}},[_c('b-icon',{attrs:{\"icon\":\"plus-circle-fill\"}})],1):_vm._e()])])]),_vm._v(\" \"),_c('div',{staticClass:\"col-12 p-0\"},[_c('div',{staticClass:\"row w-100 mx-auto mt-2\"},[_c('b-form-input',{staticClass:\"mb-0 travel-input\",attrs:{\"placeholder\":'Поиск чата'},on:{\"input\":_vm.runSearch},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)])])]),_vm._v(\" \"),(_vm.chats.length<=0&&_vm.load==false)?_c('div',{staticClass:\"col-12 pt-2 px-0\"},[_c('div',{staticClass:\"row w-100 m-auto\"},_vm._l((5),function(n){return _c('div',{key:n,staticClass:\"col-12 skeleton-tr pt-2 px-0\"},[_c('div',{staticClass:\"list-group\"},[_c('div',{staticClass:\"list-group-item list-group-item-action flex-column align-items-start\"},[_c('div',{staticClass:\"d-flex w-100 justify-content-between\"},[_c('div',{staticClass:\"row m-auto w-100\"},[_c('div',{staticClass:\"col-8 skeleton-tr p-2 mr-auto\"},[_c('tb-skeleton',{attrs:{\"height\":15,\"theme\":\"opacity\",\"bg-color\":\"#dcdbdc\",\"shape\":\"radius\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"col-2 skeleton-tr p-2 ml-auto float-right\"},[_c('tb-skeleton',{attrs:{\"height\":15,\"theme\":\"opacity\",\"bg-color\":\"#dcdbdc\",\"shape\":\"radius\"}})],1)])]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"row m-auto w-100\"},[_c('div',{staticClass:\"col-4 skeleton-tr p-2\"},[_c('tb-skeleton',{attrs:{\"height\":10,\"theme\":\"opacity\",\"bg-color\":\"#dcdbdc\",\"shape\":\"radius\"}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"row m-auto w-100\"},[_c('div',{staticClass:\"col-2 skeleton-tr p-2\"},[_c('tb-skeleton',{attrs:{\"height\":5,\"theme\":\"opacity\",\"bg-color\":\"#dcdbdc\",\"shape\":\"radius\"}})],1)])])])])])}),0)]):_vm._e(),_vm._v(\" \"),(_vm.chats.length<=0&&_vm.load==true)?_c('div',{staticClass:\"col-12 pt-2 px-0\"},[_vm._m(1)]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.filteredChats),function(chat){return _c('div',{key:chat.id,staticClass:\"col-12 pt-2 px-0\"},[_c('div',{staticClass:\"list-group\"},[_c('div',{staticClass:\"list-group-item list-group-item-action flex-column align-items-start\",class:{active: chat.id == _vm.$route.params.id},staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.toChat(chat.id)}}},[_c('div',{staticClass:\"d-flex w-100 justify-content-between\"},[(chat.creator_id == _vm.user.id)?_c('h5',{staticClass:\"mb-1\"},[_vm._v(_vm._s(chat.manager_title))]):_c('h5',{staticClass:\"mb-1\"},[_vm._v(_vm._s(chat.client_title))]),_vm._v(\" \"),(chat.messages.length>0)?_c('small',[_vm._v(_vm._s(_vm._f(\"moment\")(chat.messages[chat.messages.length-1].created_at,\"from\", \"now\")))]):_vm._e()]),_vm._v(\" \"),(chat.messages.length>0)?_c('div',[_c('p',{staticClass:\"mb-1 last_message\"},[_vm._v(_vm._s(chat.messages[chat.messages.length-1].message_text))]),_vm._v(\" \"),_c('small',[_vm._v(_vm._s(chat.messages[chat.messages.length-1].senderInfo.FirstName)+\"\\n                                    \"),(chat.messages[chat.messages.length-1].senderInfo.MiddleName !='' || chat.messages[chat.messages.length-1].senderInfo.MiddleName != null)?_c('span',[_vm._v(\"\\n                                        \"+_vm._s(chat.messages[chat.messages.length-1].senderInfo.MiddleName)+\"\\n                                    \")]):_vm._e()])]):_c('div',[_c('p',{staticClass:\"mb-1 last_message\"},[_vm._v(\"В этой беседе ещё нет сообщений\")])])])])])})],2)]),_vm._v(\" \"),_c('div',{staticClass:\"col-12 col-md-8\",staticStyle:{\"position\":\"relative\"}},[_c('div',{ref:\"chatContainer\",staticClass:\"chat-container\",on:{\"scroll\":_vm.onScroll}},[_c('message',{attrs:{\"messages\":_vm.chatMessages}})],1),_vm._v(\" \"),(_vm.message_mode=='text')?_c('div',{staticClass:\"typer\"},[_c('b-button',{staticClass:\"rounded-circle border p-0 mx-1 paperclip-button\",attrs:{\"disabled\":_vm.message_loading}},[_c('input',{ref:\"file\",attrs:{\"type\":\"file\",\"id\":\"file\"},on:{\"change\":function($event){return _vm.handleFile()}}}),_vm._v(\" \"),_c('b-icon',{attrs:{\"icon\":\"paperclip\",\"scale\":\"2\",\"aria-hidden\":\"true\"}})],1),_vm._v(\" \"),_c('b-form-textarea',{staticClass:\"mx-1\",attrs:{\"id\":\"textarea\",\"size\":\"sm\",\"placeholder\":\"Напишите сообщение...\",\"rows\":\"1\",\"max-rows\":\"2\",\"no-resize\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if($event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey)return null;$event.preventDefault();return _vm.sendChatMessage('text')}},model:{value:(_vm.message_text),callback:function ($$v) {_vm.message_text=$$v},expression:\"message_text\"}}),_vm._v(\" \"),(_vm.message_text.trim()==''&&_vm.message_mode=='text')?_c('vue-record-audio',{staticClass:\"audio-button mx-1\",attrs:{\"mode\":'press'},on:{\"stream\":_vm.onStream,\"result\":_vm.onResult}}):_c('b-button',{staticClass:\"audio-button rounded-circle p-2 mx-1 text-white border-0\",attrs:{\"disabled\":_vm.message_loading},on:{\"click\":function($event){return _vm.sendChatMessage('text')}}},[(!_vm.message_loading)?_c('i',{staticClass:\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\",staticStyle:{\"font-size\":\"25px\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")]):_vm._e()],1)],1):_vm._e(),_vm._v(\" \"),(_vm.message_mode=='image')?_c('div',{staticClass:\"typer\"},[_c('b-button',{staticClass:\"rounded-circle border p-0 mx-1 paperclip-button\",attrs:{\"disabled\":_vm.message_loading},on:{\"click\":_vm.clearMessage}},[_c('b-icon',{attrs:{\"icon\":\"x\",\"scale\":\"2\",\"aria-hidden\":\"true\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\"},[_c('div',{staticClass:\"col-4 h-100 text-center\"},[_c('img',{staticClass:\"preview\",attrs:{\"src\":_vm.preview}})]),_vm._v(\" \"),_c('div',{staticClass:\"col-8 p-0 p-sm-1 p-md-2 h-100\"},[_c('div',{staticStyle:{\"text-overflow\":\"ellipsis\",\"overflow\":\"hidden\",\"width\":\"100%\",\"height\":\"100%\"}},[_vm._v(_vm._s(_vm.image_record.name))])])]),_vm._v(\" \"),_c('b-button',{staticClass:\"audio-button rounded-circle p-2 mx-1 text-white border-0\",attrs:{\"disabled\":_vm.message_loading},on:{\"click\":function($event){return _vm.sendChatMessage('image')}}},[(!_vm.message_loading)?_c('i',{staticClass:\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\",staticStyle:{\"font-size\":\"25px\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")]):_vm._e()],1)],1):_vm._e(),_vm._v(\" \"),(_vm.message_mode=='file')?_c('div',{staticClass:\"typer\"},[_c('b-button',{staticClass:\"rounded-circle border p-0 mx-1 paperclip-button\",attrs:{\"disabled\":_vm.message_loading},on:{\"click\":_vm.clearMessage}},[_c('b-icon',{attrs:{\"icon\":\"x\",\"scale\":\"2\",\"aria-hidden\":\"true\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"row m-auto p-2 w-100 h-100 align-items-center justify-content-center\"},[_c('div',{staticClass:\"col-4 h-100 text-center\"},[_c('img',{staticClass:\"preview\",attrs:{\"src\":_vm.preview}})]),_vm._v(\" \"),_c('div',{staticClass:\"col-8 p-0 p-sm-1 p-md-2 h-100\"},[_c('div',{staticStyle:{\"text-overflow\":\"ellipsis\",\"overflow\":\"hidden\",\"width\":\"100%\",\"height\":\"100%\"}},[_vm._v(_vm._s(_vm.file_record.name))])])]),_vm._v(\" \"),_c('b-button',{staticClass:\"audio-button rounded-circle p-2 mx-1 text-white border-0\",attrs:{\"disabled\":_vm.message_loading},on:{\"click\":function($event){return _vm.sendChatMessage('file')}}},[(!_vm.message_loading)?_c('i',{staticClass:\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\",staticStyle:{\"font-size\":\"25px\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")]):_vm._e()],1)],1):_vm._e(),_vm._v(\" \"),(_vm.message_mode=='audio')?_c('div',{staticClass:\"typer justify-content-between\"},[_c('b-button',{staticClass:\"rounded-circle border p-0 mx-1 paperclip-button\",attrs:{\"disabled\":_vm.message_loading},on:{\"click\":_vm.clearMessage}},[_c('b-icon',{attrs:{\"icon\":\"x\",\"scale\":\"2\",\"aria-hidden\":\"true\"}})],1),_vm._v(\" \"),_c('audio-player',{staticStyle:{\"width\":\"60%\"},attrs:{\"audio\":_vm.audio_record,\"type\":'file'}}),_vm._v(\" \"),_c('b-button',{staticClass:\"audio-button rounded-circle p-2 mx-1 text-white border-0\",attrs:{\"disabled\":_vm.message_loading},on:{\"click\":function($event){return _vm.sendChatMessage('audio')}}},[(!_vm.message_loading)?_c('i',{staticClass:\"bi-blank icon-send b-icon bi m-0 w-auto h-auto\",staticStyle:{\"font-size\":\"25px\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('b-spinner',{attrs:{\"small\":\"\"}}):_vm._e(),_vm._v(\" \"),(_vm.message_loading)?_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")]):_vm._e()],1)],1):_vm._e()])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"col-6 col-sm-6\"},[_c('p',{staticClass:\"my-auto\"},[_c('span',{staticClass:\"chat-name\"},[_vm._v(\"Чаты\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row w-100 mx-auto mb-2\"},[_c('p',[_vm._v(\"Пока у Вас нет никаких чатов\")])])\n}]\n\nexport { render, staticRenderFns }"],"names":["___CSS_LOADER_EXPORT___","push","module","id","_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","apply","_next","_throw","data","message_text","audio_record","image_record","file_record","message_mode","preview","message_loading","flag","seconds","interval","files","currentChat","chatMessages","emojiPanel","currentRef","loading","totalChatHeight","search","results","options","shouldSort","threshold","new_chat","user","load","mounted","loadChat","getUser","console","log","computed","messages","chats","$store","getters","available_users","filteredChats","trim","watch","newId","oldId","methods","toChat","$router","role","_this","_callee","_context","dispatch","_this2","_callee2","_context2","$refs","chatContainer","scrollHeight","undefined","$route","params","find","chat","item","onNewMessageAdded","onScroll","scrollTop","processMessage","message","imageRegex","test","image","exec","emojiRegex","replace","newMessage","scrollToEnd","scrollTo","sendChatMessage","_this3","_callee3","formData","file","_context3","date","Date","toString","conversation_id","sender_id","senderInfo","info","selfMessage","FormData","append","JSON","stringify","resp","commit","clearMessage","_this4","$nextTick","container","$el","querySelector","_this5","difference","addEmojiToMessage","emoji","toggleEmojiPanel","onStream","stream","countSeconds","onResult","time","now","src","window","URL","createObjectURL","handleFile","uploadedFile","reader","FileReader","addEventListener","result","bind","readAsDataURL","sendMessage","setInterval","incrementSeconds","clearInterval","runSearch","_this6","$search","open","$bvModal","show","cancel","hide","createChat","_this7","_callee4","payload","_context4","user_id","FullName","$notify","group","title","text","locals","_vm","this","_c","_self","staticClass","staticStyle","attrs","scopedSlots","_u","key","fn","on","_e","_v","proxy","props","_s","option","model","callback","$$v","$set","expression","_m","_l","class","active","$event","creator_id","manager_title","client_title","_f","created_at","FirstName","MiddleName","ref","indexOf","_k","keyCode","ctrlKey","shiftKey","altKey","metaKey","preventDefault"],"sourceRoot":""}