"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8674],{98674:(s,t,e)=>{e.r(t),e.d(t,{default:()=>o});const a={name:"Profile",data:function(){return{passwords:{newPassword:"",oldPassword:"",submitNewPassword:""},passwords_types:{newPassword:"password",oldPassword:"password",submitNewPassword:"password"},edit_user:{email:"",middle_name:"",first_name:"",phone:"",last_name:""},edit_user_mode:!1,loading:!1,password_loading:!1,edit_password_mode:!1,grantTypes:[{title:"Email",value:"email"},{title:"Телефон",value:"phone"}]}},mounted:function(){this.isLoggedIn&&(this.edit_user=JSON.parse(JSON.stringify(this.user)))},computed:{user:function(){return this.edit_user=JSON.parse(JSON.stringify(this.$store.getters.user)),this.$store.getters.user},isLoggedIn:function(){return this.$store.getters.isLoggedIn}},methods:{changePassword:function(){var s=this;this.password_loading=!0;var t=this.passwords;this.$store.dispatch("changePassword",t).then((function(t){s.password_loading=!1,s.$store.dispatch("sendNotification",{message:"Пароль успешно изменен"}),requestAnimationFrame((function(){s.$refs.change_password&&s.$refs.change_password.reset()})),s.edit_password_mode=!1,s.edit_user=JSON.parse(JSON.stringify(s.user)),s.passwords={newPassword:"",oldPassword:"",submitNewPassword:""}})).catch((function(t){s.password_loading=!1}))},save:function(){var s=this;this.loading=!0,this.$store.dispatch("updateAuthUser",this.edit_user).then((function(t){s.loading=!1,s.$store.dispatch("sendNotification",{message:"Ваши данные успешно обновлены"}),s.cancel()})).catch((function(t){s.loading=!1}))},cancel:function(){this.edit_user_mode=!1,this.edit_user=JSON.parse(JSON.stringify(this.user))},switchVisibility:function(s){this.passwords_types[s]="password"===this.passwords_types[s]?"text":"password"},editContact:function(s){}}};const o=(0,e(51900).Z)(a,(function(){var s=this,t=s._self._c;return s.user?t("div",{staticClass:"tc-page container"},[t("h1",{staticClass:"tc-page__title"},[s._v("\n        Профиль\n    ")]),s._v(" "),t("div",{staticClass:"tc-row tc-row-medium tc-gap-row-xxlarge"},[t("div",{staticClass:"col-12 col-lg-6"},[t("ValidationObserver",{staticClass:"tc-card tc-wrapper-column tc-gap-column-medium h-100",attrs:{tag:"div"},scopedSlots:s._u([{key:"default",fn:function(e){var a=e.invalid;return[t("h3",{staticClass:"tc-card__title"},[s._v("Ваши данные")]),s._v(" "),t("base-input",{attrs:{name:"last_name",type:"text",rules:"required|alpha|min:2",label:"фамилия",placeholder:"Иванов",disabled:!s.edit_user_mode,no_group_item:""},model:{value:s.edit_user.last_name,callback:function(t){s.$set(s.edit_user,"last_name",t)},expression:"edit_user.last_name"}}),s._v(" "),t("base-input",{attrs:{name:"first_name",type:"text",rules:"required|alpha|min:2",label:"имя",placeholder:"Иван",disabled:!s.edit_user_mode,no_group_item:""},model:{value:s.edit_user.first_name,callback:function(t){s.$set(s.edit_user,"first_name",t)},expression:"edit_user.first_name"}}),s._v(" "),t("base-input",{attrs:{name:"middle_name",type:"text",rules:"alpha|min:2",label:"отчество",placeholder:"Петрович",disabled:!s.edit_user_mode,no_group_item:""},model:{value:s.edit_user.middle_name,callback:function(t){s.$set(s.edit_user,"middle_name",t)},expression:"edit_user.middle_name"}}),s._v(" "),t("div",{staticClass:"tc-wrapper-between"},[s.edit_user_mode?t("button",{staticClass:"tc-button",attrs:{type:"button",disabled:s.loading},on:{click:s.cancel}},[s._v("\n                        Отмена\n                    ")]):s._e(),s._v(" "),s.edit_user_mode?t("button",{staticClass:"tc-button tc-button_save",attrs:{type:"button",disabled:a||s.loading},on:{click:s.save}},[s.loading?t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}}):s._e(),s._v("\n                        Сохранить\n                    ")]):s._e(),s._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!s.edit_user_mode,expression:"!edit_user_mode"}],staticClass:"tc-button ml-auto tc-button_save",attrs:{type:"button",disabled:s.loading},on:{click:function(t){s.edit_user_mode=!0}}},[s._v("\n                        Редактировать\n                    ")])])]}}],null,!1,1785017084)})],1),s._v(" "),t("div",{staticClass:"col-12 col-lg-6"},[t("ValidationObserver",{ref:"change_password",staticClass:"tc-card tc-wrapper-column tc-gap-column-medium h-100",attrs:{tag:"div"},scopedSlots:s._u([{key:"default",fn:function(e){var a=e.invalid;return[t("h3",{staticClass:"tc-card__title"},[s._v("Смена пароля")]),s._v(" "),t("base-input",{attrs:{name:"old_password",type:s.passwords_types.oldPassword,label:"старый пароль",rules:"required|min:8",group_item_action:""},on:{"click-group-item":function(t){return s.switchVisibility("oldPassword")}},scopedSlots:s._u([{key:"icon",fn:function(){return[t("base-icon",{attrs:{name:"password"===s.passwords_types.oldPassword?"Eye":"EyeSlash",color:"secondary"}})]},proxy:!0}],null,!0),model:{value:s.passwords.oldPassword,callback:function(t){s.$set(s.passwords,"oldPassword",t)},expression:"passwords.oldPassword"}}),s._v(" "),t("base-input",{attrs:{name:"password",type:s.passwords_types.newPassword,label:"новый пароль",rules:"required|min:8",group_item_action:""},on:{"click-group-item":function(t){return s.switchVisibility("newPassword")}},scopedSlots:s._u([{key:"icon",fn:function(){return[t("base-icon",{attrs:{name:"password"===s.passwords_types.newPassword?"Eye":"EyeSlash",color:"secondary"}})]},proxy:!0}],null,!0),model:{value:s.passwords.newPassword,callback:function(t){s.$set(s.passwords,"newPassword",t)},expression:"passwords.newPassword"}}),s._v(" "),t("base-input",{attrs:{name:"confirmation",type:s.passwords_types.submitNewPassword,label:"повторите новый пароль",rules:"required|min:8|confirmed:password",group_item_action:""},on:{"click-group-item":function(t){return s.switchVisibility("submitNewPassword")}},scopedSlots:s._u([{key:"icon",fn:function(){return[t("base-icon",{attrs:{name:"password"===s.passwords_types.submitNewPassword?"Eye":"EyeSlash",color:"secondary"}})]},proxy:!0}],null,!0),model:{value:s.passwords.submitNewPassword,callback:function(t){s.$set(s.passwords,"submitNewPassword",t)},expression:"passwords.submitNewPassword"}}),s._v(" "),t("div",{staticClass:"tc-card__footer tc-wrapper-between"},[t("button",{staticClass:"tc-button tc-button_save ml-auto",attrs:{type:"button",disabled:a},on:{click:s.changePassword}},[s._v("\n                        Сохранить\n                    ")])])]}}],null,!1,4050063927)})],1),s._v(" "),t("div",{staticClass:"col-12 col-lg-6"},[t("div",{staticClass:"tc-card tc-gap-row-medium"},[t("h3",{staticClass:"tc-card__title"},[s._v("Ваша электронная почта")]),s._v(" "),t("div",{staticClass:"tc-row tc-gap-down-md-row-medium align-items-end"},[t("div",{staticClass:"col-12 col-md-8 tc-px-down-md-none tc-ps-none"},[t("base-input",{attrs:{name:"email",type:"email",rules:"required|email",placeholder:"pochta@gmail.com",icon_name:"Email",icon_color:"primary",disabled:""},model:{value:s.user.email,callback:function(t){s.$set(s.user,"email",t)},expression:"user.email"}})],1),s._v(" "),t("div",{staticClass:"col-12 col-md-4 tc-px-down-md-none tc-pe-none"},[t("button",{staticClass:"tc-button tc-button_plump float-right tc-w-down-sm-100",on:{click:function(t){return s.editContact("email")}}},[s._v("\n                            "+s._s(s.user.email?"Изменить":"Привязать")+"\n                        ")])])])])]),s._v(" "),t("div",{staticClass:"col-12 col-lg-6"},[t("div",{staticClass:"tc-card tc-gap-row-medium"},[t("h3",{staticClass:"tc-card__title"},[s._v("Ваш номер телефона")]),s._v(" "),t("div",{staticClass:"tc-row tc-gap-down-md-row-medium"},[t("div",{staticClass:"col-12 col-md-8 tc-px-down-md-none tc-ps-none"},[t("base-input",{attrs:{name:"phone",type:"tel",rules:"required|phone",placeholder:"+7 495 000-00-00",icon_name:"Smartphone",icon_color:"primary",mask:["+# ### ### ####","+## ### ### ####","+## ### #### ####"],disabled:""},model:{value:s.user.phone,callback:function(t){s.$set(s.user,"phone",t)},expression:"user.phone"}})],1),s._v(" "),t("div",{staticClass:"col-12 col-md-4 tc-px-down-md-none tc-pe-none"},[t("button",{staticClass:"tc-button tc-button_plump float-right tc-w-down-sm-100",on:{click:function(t){return s.editContact("phone")}}},[s._v("\n                            "+s._s(s.user.phone?"Изменить":"Привязать")+"\n                        ")])])])])])])]):s._e()}),[],!1,null,"7f3ba385",null).exports}}]);