/*! For license information please see 9336.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9336],{33921:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(45627),a=n.n(r),o=n(76798),i=n.n(o)()(a());i.push([t.id,".btn-travel[data-v-e63bbf12]{background:#e17e4e;background-color:#e17e4e;background-image:none;background-image:linear-gradient(to bottom left,#e17e4e,#ffbf00,#e17e4e);background-position:100% 0;background-position-x:0;background-position-y:0;background-size:auto;background-size:210% 210%;border:none;box-shadow:none;color:#fff;max-width:300px;transition:all .15s ease}","",{version:3,sources:["webpack://./resources/js/desktop/pages/admin/Branches/Edit.vue"],names:[],mappings:"AAkLA,6BACA,kBAAA,CASA,wBAAA,CALA,qBAAA,CAEA,wEAAA,CAEA,0BAAA,CANA,uBAAA,CACA,uBAAA,CAEA,oBAAA,CAEA,yBAAA,CAOA,WAAA,CAHA,eAAA,CACA,UAAA,CACA,eAAA,CAHA,wBAKA",sourcesContent:['<template>\n    <div class="p-2">\n        <div class="row m-auto w-100 align-items-center justify-content-center p-3"\n             style="border-radius: 5px; border:1px solid #e8e8e8">\n            <div class="col-12 col-sm-6 col-md-4">\n                <b-form-input\n                    v-model="new_department.address"\n                    placeholder="Адрес"\n                    class="my-1 travel-input"\n                >\n                </b-form-input>\n            </div>\n            <div class="col-12 col-sm-6 col-md-4">\n                <b-form-input\n                    placeholder="Телефон"\n                    v-model="new_department.phone"\n                    v-mask="[\'+# (###) ###-##-##\',\'+## (###) ###-##-##\']"\n                    class="my-1 travel-input"\n                >\n                </b-form-input>\n            </div>\n            <div class="col-12 col-md-4">\n                <b-button variant="primary" class="my-1 mx-auto w-100 btn-travel" style="max-width: 300px" @click="addDepartment">\n                    Добавить\n                </b-button>\n            </div>\n        </div>\n        <div class="row mt-3 mx-auto w-100 align-items-center justify-content-center">\n            <div class="col-12 p-0">\n                <div class="row mt-1 mx-auto w-100 align-items-center justify-content-center p-3"\n                     style="border-radius: 5px; border:1px solid #e8e8e8" v-for="(department, index) in departments">\n                    <div class="col-12 col-sm-6 col-md-4">\n                        <b-form-input\n                            v-model="department.address"\n                            placeholder="Адрес"\n                            class="my-1 travel-input"\n                            @blur="save(departments, branch.id, \'departments\')"\n                        >\n                        </b-form-input>\n                    </div>\n                    <div class="col-12 col-sm-6 col-md-4">\n                        <b-form-input\n                            placeholder="Телефон"\n                            v-model="department.phone"\n                            class="my-1 travel-input"\n                            v-mask="[\'+# (###) ###-##-##\',\'+## (###) ###-##-##\']"\n                            @blur="save(departments, branch.id, \'departments\')"\n                        >\n                        </b-form-input>\n                    </div>\n                    <div class="col-12 col-md-4">\n                        <b-button variant="primary" class="my-1 mx-auto w-100 btn-travel" style="max-width: 300px" @click="removeDepartment(index)">\n                            Удалить\n                        </b-button>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mask} from \'vue-the-mask\'\n    export default {\n        name: "Edit",\n        data() {\n            return {\n                new_department: {\n                    address:\'\',\n                    phone:\'\',\n                    schedule:\'\'\n                },\n                departments:[],\n                branch:null,\n                loading:false\n            }\n        },\n        computed: {\n            branches() {\n                return this.$store.getters.branches;\n            },\n        },\n        mounted() {\n            this.setBranches();\n        },\n        methods: {\n            async setBranches () {\n                this.loading=true;\n                if(this.branches.length<=0){\n\n                    await this.$store.dispatch(\'setBranches\').then(()=>{\n                        if (this.$route.params.id !== undefined) {\n                            this.branch = this.branches.find((branch) => {\n                                if(branch.id == this.$route.params.id)\n                                {\n                                    return true;\n                                }\n                            });\n                            this.departments=this.branch.departments\n                            this.loading=false;\n                        }\n                    })\n                }\n                else{\n                    if (this.$route.params.id !== undefined) {\n                        this.branch = this.branches.find((branch) => {\n                            if(branch.id == this.$route.params.id)\n                            {\n                                return true;\n                            }\n                        });\n                        this.departments=this.branch.departments\n                    }\n                    this.loading=false;\n                }\n\n            },\n            async save(value, id, key) {\n                this.$store.dispatch(\'saveBranch\', {\n                    id: id,\n                    key: key,\n                    value: value\n                }).then(resp => {\n                    this.$store.commit(\'saveBranch\', resp.data.branch);\n                    this.sendMessage(resp.data.message)\n                });\n            },\n            addDepartment(){\n                this.departments.push(this.new_department);\n                this.save(this.departments,this.$route.params.id,\'departments\')\n                this.new_department={\n                    address:\'\',\n                    phone:\'\',\n                    schedule:\'\'\n                }\n            },\n            removeDepartment(index){\n                // let branch = state.branches.findIndex(x => x.id === payload);\n                // if (branch >= 0) {\n                //     state.branches.splice(branch, 1);\n                // }\n                this.departments.splice(index, 1);\n                this.save(this.departments,this.$route.params.id,\'departments\')\n            },\n            sendMessage(message) {\n                this.$notify({\n                    group: \'info\',\n                    type: \'travel\',\n                    title: \'Отделения\',\n                    text: message\n                });\n            },\n        },\n        directives: {mask}\n    }\n<\/script>\n\n<style scoped>\n    .btn-travel{\n        background: #e17e4e;\n        background-color: rgb(225, 126, 78);\n        background-position-x: 0%;\n        background-position-y: 0%;\n        background-image: none;\n        background-size: auto;\n        background-image: linear-gradient(to bottom left, #e17e4e, #ffbf00, #e17e4e);\n        background-size: 210% 210%;\n        background-position: top right;\n        background-color: #e17e4e;\n        transition: all 0.15s ease;\n        box-shadow: none;\n        color: #ffffff;\n        max-width: 300px;\n        border: none;\n    }\n</style>\n'],sourceRoot:""}]);const s=i},9336:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(){a=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function h(t,e,n,r){var a=e&&e.prototype instanceof g?e:g,o=Object.create(a.prototype),s=new O(r||[]);return i(o,"_invoke",{value:$(t,n,s)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var m="suspendedStart",f="suspendedYield",v="executing",b="completed",y={};function g(){}function w(){}function x(){}var A={};d(A,c,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(N([])));_&&_!==n&&o.call(_,c)&&(A=_);var C=x.prototype=g.prototype=Object.create(A);function E(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(a,i,s,c){var u=p(t[a],t,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==r(d)&&o.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)}var a;i(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(o,o):o()}})}function $(e,n,r){var a=m;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===b){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=B(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=v;var u=p(e,n,r);if("normal"===u.type){if(a=r.done?b:f,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=b,r.method="throw",r.arg=u.arg)}}}function B(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,B(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function n(){for(;++a<e.length;)if(o.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=x,i(C,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=d(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},E(L.prototype),d(L.prototype,u,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new L(h(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(C),d(C,l,"Generator"),d(C,c,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function o(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,c,"next",t)}function c(t){o(i,r,a,s,c,"throw",t)}s(void 0)}))}}const s={name:"Edit",data:function(){return{new_department:{address:"",phone:"",schedule:""},departments:[],branch:null,loading:!1}},computed:{branches:function(){return this.$store.getters.branches}},mounted:function(){this.setBranches()},methods:{setBranches:function(){var t=this;return i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,!(t.branches.length<=0)){e.next=6;break}return e.next=4,t.$store.dispatch("setBranches").then((function(){void 0!==t.$route.params.id&&(t.branch=t.branches.find((function(e){if(e.id==t.$route.params.id)return!0})),t.departments=t.branch.departments,t.loading=!1)}));case 4:e.next=8;break;case 6:void 0!==t.$route.params.id&&(t.branch=t.branches.find((function(e){if(e.id==t.$route.params.id)return!0})),t.departments=t.branch.departments),t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},save:function(t,e,n){var r=this;return i(a().mark((function o(){return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r.$store.dispatch("saveBranch",{id:e,key:n,value:t}).then((function(t){r.$store.commit("saveBranch",t.data.branch),r.sendMessage(t.data.message)}));case 1:case"end":return a.stop()}}),o)})))()},addDepartment:function(){this.departments.push(this.new_department),this.save(this.departments,this.$route.params.id,"departments"),this.new_department={address:"",phone:"",schedule:""}},removeDepartment:function(t){this.departments.splice(t,1),this.save(this.departments,this.$route.params.id,"departments")},sendMessage:function(t){this.$notify({group:"info",type:"travel",title:"Отделения",text:t})}},directives:{mask:n(29928).mask}};var c=n(85072),u=n.n(c),l=n(33921),d={insert:"head",singleton:!1};u()(l.A,d);l.A.locals;const h=(0,n(14486).A)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-2"},[e("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center p-3",staticStyle:{"border-radius":"5px",border:"1px solid #e8e8e8"}},[e("div",{staticClass:"col-12 col-sm-6 col-md-4"},[e("b-form-input",{staticClass:"my-1 travel-input",attrs:{placeholder:"Адрес"},model:{value:t.new_department.address,callback:function(e){t.$set(t.new_department,"address",e)},expression:"new_department.address"}})],1),t._v(" "),e("div",{staticClass:"col-12 col-sm-6 col-md-4"},[e("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:["+# (###) ###-##-##","+## (###) ###-##-##"],expression:"['+# (###) ###-##-##','+## (###) ###-##-##']"}],staticClass:"my-1 travel-input",attrs:{placeholder:"Телефон"},model:{value:t.new_department.phone,callback:function(e){t.$set(t.new_department,"phone",e)},expression:"new_department.phone"}})],1),t._v(" "),e("div",{staticClass:"col-12 col-md-4"},[e("b-button",{staticClass:"my-1 mx-auto w-100 btn-travel",staticStyle:{"max-width":"300px"},attrs:{variant:"primary"},on:{click:t.addDepartment}},[t._v("\n                Добавить\n            ")])],1)]),t._v(" "),e("div",{staticClass:"row mt-3 mx-auto w-100 align-items-center justify-content-center"},[e("div",{staticClass:"col-12 p-0"},t._l(t.departments,(function(n,r){return e("div",{staticClass:"row mt-1 mx-auto w-100 align-items-center justify-content-center p-3",staticStyle:{"border-radius":"5px",border:"1px solid #e8e8e8"}},[e("div",{staticClass:"col-12 col-sm-6 col-md-4"},[e("b-form-input",{staticClass:"my-1 travel-input",attrs:{placeholder:"Адрес"},on:{blur:function(e){return t.save(t.departments,t.branch.id,"departments")}},model:{value:n.address,callback:function(e){t.$set(n,"address",e)},expression:"department.address"}})],1),t._v(" "),e("div",{staticClass:"col-12 col-sm-6 col-md-4"},[e("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:["+# (###) ###-##-##","+## (###) ###-##-##"],expression:"['+# (###) ###-##-##','+## (###) ###-##-##']"}],staticClass:"my-1 travel-input",attrs:{placeholder:"Телефон"},on:{blur:function(e){return t.save(t.departments,t.branch.id,"departments")}},model:{value:n.phone,callback:function(e){t.$set(n,"phone",e)},expression:"department.phone"}})],1),t._v(" "),e("div",{staticClass:"col-12 col-md-4"},[e("b-button",{staticClass:"my-1 mx-auto w-100 btn-travel",staticStyle:{"max-width":"300px"},attrs:{variant:"primary"},on:{click:function(e){return t.removeDepartment(r)}}},[t._v("\n                        Удалить\n                    ")])],1)])})),0)])])}),[],!1,null,"e63bbf12",null).exports}}]);
//# sourceMappingURL=9336.js.map