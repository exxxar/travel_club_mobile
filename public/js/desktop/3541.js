"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3541],{92064:(t,e,a)=>{a.d(e,{Z:()=>o});var i=a(1519),n=a.n(i)()((function(t){return t[1]}));n.push([t.id,".section[data-v-03cdcdd4]{padding:0 16px}.modalbox[data-v-03cdcdd4]{overflow:hidden;padding-top:env(safe-area-inset-top)}.modalbox .modal-dialog[data-v-03cdcdd4]{bottom:0;left:0;margin:env(safe-area-inset-top) 0 0;min-width:100%;position:fixed;right:0;top:0;transform:translateY(100%)!important;transition:all .5s!important}.modalbox .modal-dialog .modal-content[data-v-03cdcdd4]{border:0;border-radius:0;bottom:0;left:0;margin:auto;overflow:hidden;padding-top:56px;position:absolute;right:0;top:0}.modalbox .modal-dialog .modal-content .modal-header[data-v-03cdcdd4]{align-items:center;background:#fff;border:0;border-bottom:1px solid #e1e1e1;border-radius:0;display:flex;justify-content:space-between;left:0;margin:0;min-height:56px;padding:10px 16px;position:fixed;right:0;top:0;width:100%;z-index:100}.modalbox .modal-dialog .modal-content .modal-header .modal-title[data-v-03cdcdd4]{color:#063065;font-family:Open Sans;font-size:17px;font-weight:900;margin:0}.modalbox .modal-dialog .modal-content .modal-header a[data-v-03cdcdd4]{color:#063065}.modalbox .modal-dialog .modal-content .modal-body[data-v-03cdcdd4]{overflow:auto;padding:20px 16px}.modalbox.show .modal-dialog[data-v-03cdcdd4]{transform:translate(0)!important}.form-group[data-v-03cdcdd4]{width:100%}.form-group .label[data-v-03cdcdd4]{color:#063065;display:block;font-family:Open Sans;font-size:12px;font-weight:900;line-height:1.2em;margin:0;text-align:left}.form-group textarea[data-v-03cdcdd4]{resize:none}.form-group .input-info[data-v-03cdcdd4]{color:#a1a1a2;font-size:11px}.form-group .clear-input[data-v-03cdcdd4]{align-items:center;bottom:0;color:#4f5050;display:flex;font-size:22px;height:38px;justify-content:center;opacity:.5;position:absolute;right:6px;top:0;width:32px}.form-group .clear-input[data-v-03cdcdd4]:active,.form-group .clear-input[data-v-03cdcdd4]:hover{opacity:.8}.form-group .input-wrapper[data-v-03cdcdd4]{position:relative}.form-group .input-wrapper.not-empty .clear-input[data-v-03cdcdd4]{display:flex}.form-group .input-wrapper.active .label[data-v-03cdcdd4]{color:#f08b23!important}.form-group.basic[data-v-03cdcdd4]{margin:0;padding:8px 0}.form-group.basic .custom-select[data-v-03cdcdd4],.form-group.basic .form-control[data-v-03cdcdd4]{background:transparent;border:none;border-bottom:1px solid #e1e1e1;border-radius:0;color:#141515;font-size:15px;height:40px;padding:0 30px 0 0}.form-group.basic .custom-select[data-v-03cdcdd4]:focus,.form-group.basic .form-control[data-v-03cdcdd4]:focus{border-bottom-color:#f08b23;box-shadow:inset 0 -1px 0 0 #f08b23}.form-group.basic textarea.form-control[data-v-03cdcdd4]{height:auto;padding:7px 40px 7px 0}.form-group.basic.animated .label[data-v-03cdcdd4]{margin-top:20px;opacity:0;position:absolute;top:-3px;transition:all .2s}.form-group.basic.animated .input-wrapper[data-v-03cdcdd4]{padding-top:5px}.form-group.basic.animated .input-wrapper.not-empty .label[data-v-03cdcdd4]{margin-top:0;opacity:1}.form-button-group[data-v-03cdcdd4]{align-items:center;background:#fff;bottom:0;display:flex;justify-content:center;left:0;min-height:84px;padding-bottom:env(safe-area-inset-bottom);padding-left:16px;padding-right:16px;position:fixed;right:0;width:100%}.form-button-group .btn[data-v-03cdcdd4]{background:#f08b23;border:0;border-radius:50px;color:#fff;font-family:Open Sans;font-size:24px;font-weight:900;outline:none;text-transform:uppercase}form-button-group .btn[data-v-03cdcdd4]:focus{box-shadow:none!important;outline:none!important}.modal-title[data-v-03cdcdd4]{color:#062348;font-family:Open Sans;font-weight:900}",""]);const o=n},3541:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});const i={name:"Clients",data:function(){return{columns:[{label:"ID",field:"id"},{label:"Имя",field:"info.FullName"},{label:"Email",field:"email"},{label:"Телефон",field:"info.Phone"}],window:{width:0,height:0},manager:null,countItems:3,newClient:{email:"",role:"client",is_admin:0,is_manager:0,FullName:"",FirstName:"",MiddleName:"",LastName:"",Phone:"",ManagerId:"",City:"",Department:""},load:!0,loading:!1}},created:function(){0===this.managers.length&&this.$store.dispatch("setManagers")},mounted:function(){var t=this;this.load=!0,0===this.clients.length&&this.$store.dispatch("setClients").then((function(e){t.load=!1})),console.log(this.managers)},computed:{menu:function(){return this.$store.getters.menu},clients:function(){return this.$store.getters.clients},managers:function(){return this.$store.getters.managers},preloader:function(){return this.$store.getters.preloader}},methods:{addClient:function(){this.$store.dispatch("openModal","#newClientModalBox")},saveClient:function(){var t=this;this.loading=!0,this.newClient.FullName=this.newClient.LastName+" "+this.newClient.FirstName+" "+this.newClient.MiddleName,this.newClient.ManagerId=this.manager.id,console.log(this.newClient),this.$store.dispatch("newClient",this.newClient).then((function(e){t.sendMessage("Клиент успешно сохранён"),t.loading=!1,t.$store.dispatch("closeModal","#newClientModalBox")}))},editClient:function(t){this.sendMessage("Клиент успешно обнавлён")},deleteClient:function(t){var e=this;t.isLoading=!0,this.$store.dispatch("deleteClient",t.id).then((function(a){t.isLoading=!1,e.sendMessage("Клиент успешно удалён")}))},seeClientProfile:function(t){this.$router.push("/manager/client-profile/"+t)},onRowClick:function(t){this.$router.push("/manager/client-profile/"+t.id)},sendMessage:function(t){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:t})}},directives:{mask:a(32982).mask}};var n=a(93379),o=a.n(n),s=a(92064),l={insert:"head",singleton:!1};o()(s.Z,l);s.Z.locals;const d=(0,a(51900).Z)(i,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"row m-auto mb-4 px-4 justify-content-center align-items-center",staticStyle:{width:"100%",height:"100%"},attrs:{id:"mobile-table"}},[e("div",{staticClass:"modal fade modalbox show",attrs:{id:"newClientModalBox","data-bs-backdrop":"static",tabindex:"-1",role:"dialog","aria-modal":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"start-form",staticStyle:{"margin-bottom":"110px"}},[e("div",{staticClass:"section mx-auto"},[e("div",{staticClass:"row my-3"},[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(a){var i=a.invalid;return[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row w-100 m-auto"},[e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{staticClass:"mb-0",attrs:{label:"Email",placeholder:"Email"},model:{value:t.newClient.email,callback:function(e){t.$set(t.newClient,"email",e)},expression:"newClient.email"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"lastName",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{staticClass:"mb-0",attrs:{label:"Фамилия",placeholder:"Фамилия"},model:{value:t.newClient.LastName,callback:function(e){t.$set(t.newClient,"LastName",e)},expression:"newClient.LastName"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"firstName",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{staticClass:"mb-0",attrs:{label:"Имя",placeholder:"Имя"},model:{value:t.newClient.FirstName,callback:function(e){t.$set(t.newClient,"FirstName",e)},expression:"newClient.FirstName"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("base-input",{staticClass:"mb-0",attrs:{label:"Отчество",placeholder:"Отчество"},model:{value:t.newClient.MiddleName,callback:function(e){t.$set(t.newClient,"MiddleName",e)},expression:"newClient.MiddleName"}})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"phone",rules:"required|phone"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("base-input",{directives:[{name:"mask",rawName:"v-mask",value:["+# (###) ###-##-##","+## (###) ###-##-##"],expression:"['+# (###) ###-##-##','+## (###) ###-##-##']"}],staticClass:"mb-0",attrs:{label:"Телефон",placeholder:"Телефон"},model:{value:t.newClient.Phone,callback:function(e){t.$set(t.newClient,"Phone",e)},expression:"newClient.Phone"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12 pe-md-1"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"City",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("div",{staticClass:"form-group mb-0"},[e("label",{staticClass:"control-label"},[t._v("Город")]),t._v(" "),e("multiselect",{attrs:{options:t.branches,"option-height":25,placeholder:"Выберите город","show-labels":!1,maxHeight:200,loading:0===t.branches.length,disabled:0===t.branches.length,"allow-empty":!1,"track-by":"city",label:"city"},scopedSlots:t._u([{key:"singleLabel",fn:function(a){return[e("span",{staticClass:"option__desc"},[a.option.city?e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.city))]):t._e()])]}},{key:"option",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.city))])])]}}],null,!0),model:{value:t.newClient.City,callback:function(e){t.$set(t.newClient,"City",e)},expression:"newClient.City"}})],1),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12 px-md-1"},[e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"department",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("label",{staticClass:"control-label"},[t._v("Отделение")]),t._v(" "),e("multiselect",{attrs:{options:t.newClient.City.departments,"option-height":25,placeholder:"Выберите отделение","show-labels":!1,maxHeight:200,loading:0===t.newClient.City.departments.length,disabled:0===t.newClient.City.departments.length,"allow-empty":!1,label:"address","track-by":"address"},scopedSlots:t._u([{key:"singleLabel",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.address))])])]}},{key:"option",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title",staticStyle:{"font-size":"0.7500000025rem","line-height":"1.428571"}},[t._v(t._s(a.option.address))])])]}}],null,!0),model:{value:t.newClient.Department,callback:function(e){t.$set(t.newClient,"Department",e)},expression:"newClient.Department"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("label",{staticClass:"control-label"},[t._v("\n                                                        Менеджер\n                                                    ")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%"},attrs:{name:"manager",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("multiselect",{attrs:{options:t.managers,"option-height":25,placeholder:"Выберите менеджера","show-labels":!1,maxHeight:200,label:"info","track-by":"id",loading:t.managers.length<=0,disabled:t.managers.length<=0,"allow-empty":!1},scopedSlots:t._u([{key:"singleLabel",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(a.option.info.FullName))])])]}},{key:"option",fn:function(a){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(a.option.info.FullName))])])]}}],null,!0),model:{value:t.manager,callback:function(e){t.manager=e},expression:"manager"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1)])]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"row w-100 m-auto"},[e("p",[t._v("Пароль для входа в систему созданного пользователя: "),e("span",{staticStyle:{"font-weight":"700",color:"#f8a105"}},[t._v("TravelClub")])])])]),t._v(" "),e("div",{staticClass:"col-12 contact-btn form-button-group"},[e("button",{staticClass:"btn btn-block btn-lg",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:i||t.loading},on:{click:t.saveClient}},[e("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[t.loading?e("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" "),t.loading?e("span",{staticClass:"sr-only"},[t._v("Loading...")]):t._e(),t._v("\n                                                    Сохранить\n                                                ")])])])]}}])})],1)])])])])])]),t._v(" "),e("data-table",{attrs:{title:"Клиенты",columns:t.columns,rows:t.clients,clickable:!0,perPage:[5,10,25,50],expandMode:!1,addButton:!0,addButtonClick:t.addClient,loadingAnimation:t.load},scopedSlots:t._u([{key:"tbody-tr",fn:function(a){return[e("td",{attrs:{"data-title":"Действия"}},[a.row.isLoading?t._e():e("button",{staticClass:"btn waves-effect",staticStyle:{outline:"none"},on:{click:function(e){return t.deleteClient(a.row)}}},[e("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[t._v("delete")])]),t._v(" "),a.row.isLoading?e("div",{staticClass:"d-flex align-items-center float-left",staticStyle:{padding:".375rem .75rem"}},[e("div",{staticClass:"spinner-border text-center",staticStyle:{width:"24px",height:"24px"},attrs:{role:"status"}},[e("span",{staticClass:"sr-only"},[t._v("Loading...")])])]):t._e(),t._v(" "),a.row.isLoading?t._e():e("button",{staticClass:"btn waves-effect",on:{click:function(e){return t.seeClientProfile(a.row.id)}}},[e("i",{staticClass:"material-icons",staticStyle:{color:"#0d274b"}},[t._v("edit")])])])]}}])},[e("th",{staticStyle:{width:"auto"},attrs:{slot:"thead-tr"},slot:"thead-tr"},[t._v("\n               Действия\n            ")])])],1)])}),[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("Создать клиента")]),t._v(" "),e("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"javascript:;","data-bs-dismiss":"modal"}},[t._v("Закрыть")])])}],!1,null,"03cdcdd4",null).exports}}]);