/*! For license information please see 2720.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2720],{64073:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(1519),o=n.n(i)()((function(t){return t[1]}));o.push([t.id,'.btn-travel{background:linear-gradient(0deg,#ffbf00,#f08b23);background-color:transparent;background-color:#f08b23!important;border-color:#f08b23!important;box-shadow:0 2px 2px 0 rgba(156,39,176,.14),0 3px 1px -2px rgba(156,39,176,.2),0 1px 5px 0 rgba(156,39,176,.12)!important;color:#fff!important}@media only screen and (max-width:767.98px){.vdp-container:not(.desktop) .vdp-picker{padding:8px;width:100%!important}.tour-module .cont .row{width:100%!important}.qty input{border:0;width:50%}}@media screen and (max-width:477px){.vdp-input{min-width:100%!important}.vdp-container{width:100%!important}}@media screen and (max-width:576px){.tour-module .cont{height:100%!important}}.vdp-datepicker__calendar{background:#fff;border:1px solid #ccc;padding:18px!important;position:absolute;width:300px;z-index:2!important}.vdp-datepicker input{border:1px solid orange!important;border-radius:20px;color:#062348!important;font-family:Open Sans!important;font-size:16px;font-weight:900;height:40px!important;line-height:32px;min-height:40px;outline:none;padding:8px;width:100%}.vdp-datepicker input::-moz-placeholder{color:#062348!important}.vdp-datepicker input::placeholder{color:#062348!important}.vdp-datepicker__calendar .day-header{color:#062348;font-family:Open Sans!important;font-weight:900!important}.vdp-datepicker__clear-button{color:#0f213d;font-size:36px;position:absolute;right:20px;top:-11px}.vdp-datepicker__calendar .cell{height:30px;line-height:30px}.vdp-datepicker__calendar .day{background-image:none!important;color:#0f213d;cursor:pointer;font-size:16px;font-weight:500;height:30px!important;line-height:30px;text-align:center}.vdp-datepicker__calendar .cell{border:1px solid transparent;display:inline-block;height:30px!important;line-height:30px!important;padding:0 5px;text-align:center;vertical-align:middle;width:14.285714285714286%}.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).day:hover,.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).month:hover,.vdp-datepicker__calendar .cell:not(.blank):not(.disabled).year:hover{border:1px solid orange!important}.vdp-datepicker__calendar .cell.selected,.vdp-datepicker__calendar .cell.selected:hover{background:#ffa50070!important;background-image:none}.vdp-calendar .calendar-date .week .day.end-date:after,.vdp-calendar .calendar-date .week .day.start-date:before{background-color:orange!important}.vdp-calendar .calendar-date .week .day.end-date,.vdp-calendar .calendar-date .week .day.in-date-range,.vdp-calendar .calendar-date .week .day.start-date{background-color:#ffa50070!important}.vdp-calendar .calendar-date .week .day.today{border:1px solid orange!important}.vdp-calendar-footer .confirm,.vdp-calendar-footer .reset{font-family:Open Sans!important;font-weight:900!important}.vdp-calendar-footer .reset{color:#062348!important}.vdp-calendar-footer .confirm{color:orange!important}.vdp-calendar .calendar-month-title,.vdp-calendar .calendar-week-item{color:#062348!important;font-family:Open Sans!important;font-weight:900!important}.values__hotel-rating:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);background-position:50%;background-repeat:no-repeat;content:"";display:inline-block;height:12px;margin-left:2px;width:13px}.multiselect__tags .price{color:#062348;font-family:Open Sans!important;font-weight:900!important}.multiselect__tags .price:focus{box-shadow:none!important;outline:none!important}.multiselect-title{color:#062348!important;font-family:Bello Pro}.multiselect__tags{border:1px solid #f08b23;border-radius:20px;font-size:1rem;min-height:40px}.multiselect__tag{background:#062348}.multiselect__tag-icon:after{color:#fff}.multiselect__option--highlight,.multiselect__option--highlight:after,.multiselect__tag-icon:focus,.multiselect__tag-icon:hover{background:#f08b23}.multiselect{font-family:Open Sans!important;font-weight:900}.multiselect,.multiselect__placeholder{color:#062348}.multiselect__input:focus,.multiselect__single:focus{border-color:#062348}.multiselect__input::-moz-placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect__input::placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect--disabled{background:#fff}.multiselect--disabled .multiselect__select{background:transparent}.multiselect__spinner:after,.multiselect__spinner:before{background:transparent;border:3px solid transparent;border-radius:100%;border-top-color:orange;box-shadow:0 0 0 1px transparent;content:"";height:16px;left:50%;margin:-8px 0 0 -8px;position:absolute;top:50%;width:16px}.multiselect__spinner{border-radius:50px}.qty .count{color:#0f213d!important;font-family:Open Sans;font-size:25px;font-weight:700;line-height:30px;min-width:35px;padding:0 2px}.qty .count,.qty button{display:inline-block;text-align:center;vertical-align:top}.qty button{background:#f08b23;border:0;border-radius:50%;color:#fff;cursor:pointer;font:30px/1 Arial,sans-serif;height:30px;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;width:30px}.qty div{text-align:center}.qty .minus:hover,.qty .plus:hover{background:#0f213d!important;color:#fff}.qty input{border:0;width:60%}.qty input::-webkit-inner-spin-button,.qty input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.qty input:disabled{background-color:#fff}',""]);const r=o},72137:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(1519),o=n.n(i)()((function(t){return t[1]}));o.push([t.id,'@media only screen and (max-width:767.98px){.vhd-container:not(.desktop) .vhd-picker{padding:8px;width:100%!important}.tour-module .cont .row{width:100%!important}.qty input{border:0;width:50%}}@media screen and (max-width:477px){.vhd-input{min-width:100%!important}.vhd-container{width:100%!important}}@media screen and (max-width:576px){.tour-module .cont{height:100%!important}}.vhd-picker{min-height:362px!important;padding:18px!important;z-index:2!important}.vhd-input{border:1px solid orange!important;border-radius:20px;color:#062348!important;font-family:Open Sans!important;font-size:16px;font-weight:900;height:40px!important;line-height:32px;min-height:40px;outline:none;padding:8px;width:100%}.vhd-input::-moz-placeholder{color:#062348!important}.vhd-input::placeholder{color:#062348!important}.vhd-container:not(.desktop) .vhd-picker{min-height:362px}.vhd-calendar .calendar-date .week .day[data-v-0cb4ff92]{color:#505050;cursor:pointer;font-size:16px;font-weight:500;line-height:30px;text-align:center}.vhd-calendar .calendar-date .week .day{background-image:none!important;height:30px!important}.vhd-calendar-header{height:20px!important}.vhd-container:not(.desktop) .vhd-calendar-header{height:60px!important}.vhd-container:not(.desktop) .vhd-calendar-header>.info{display:block;height:60px;padding-top:32px!important;width:100%}.vhd-container:not(.desktop) .vhd-calendar-footer{height:36px!important}.vhd-calendar-footer{height:24px!important}.vhd-calendar .calendar-date .week{height:30px!important}.vhd-calendar .calendar-date .week .day.end-date:after,.vhd-calendar .calendar-date .week .day.start-date:before{background-color:orange!important}.vhd-calendar .calendar-date .week .day.end-date,.vhd-calendar .calendar-date .week .day.in-date-range,.vhd-calendar .calendar-date .week .day.start-date{background-color:#ffa50070!important}.vhd-calendar .calendar-date .week .day.today{border:1px solid orange!important}.vhd-calendar-footer .confirm,.vhd-calendar-footer .reset{font-family:Open Sans!important;font-weight:900!important}.vhd-calendar-footer .reset{color:#062348!important}.vhd-calendar-footer .confirm{color:orange!important}.vhd-calendar .calendar-month-title,.vhd-calendar .calendar-week-item{color:#062348!important;font-family:Open Sans!important;font-weight:900!important}.values__hotel-rating:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAMCAMAAACOacfrAAAAXVBMVEVMaXH3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD3vzD4VMltAAAAHnRSTlMAJsstyPUCQnwB8Pl5osal+yqV2VVFVNp4e/MU8RdBDXhlAAAAV0lEQVR4AUXMNRLAMAADQYU5hjDp/8+Mxyq83TWHaGuQdHnepVrJHZA6O8glqxG0ZcWoKlug6CnsCwDNoBj0HVUnoks1qibyvclJNVv/fN7OKuMQOAPgBw0TBxaiVo4AAAAAAElFTkSuQmCC);background-position:50%;background-repeat:no-repeat;content:"";display:inline-block;height:12px;margin-left:2px;width:13px}.multiselect__tags .price{color:#062348;font-family:Open Sans!important;font-weight:900!important}.multiselect__tags .price:focus{box-shadow:none!important;outline:none!important}.multiselect-title{color:#062348!important;font-family:Bello Pro}.multiselect__tags{border:1px solid #f08b23;border-radius:20px;font-size:1rem;min-height:40px}.multiselect__tag{background:#062348}.multiselect__tag-icon:after{color:#fff}.multiselect__option--highlight,.multiselect__option--highlight:after,.multiselect__tag-icon:focus,.multiselect__tag-icon:hover{background:#f08b23}.multiselect{font-family:Open Sans!important;font-weight:900}.multiselect,.multiselect__placeholder{color:#062348}.multiselect__input:focus,.multiselect__single:focus{border-color:#062348}.multiselect__input::-moz-placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect__input::placeholder{color:#062348!important;font-family:Open Sans!important;font-weight:700}.multiselect--disabled{background:#fff}.multiselect--disabled .multiselect__select{background:transparent}.multiselect__spinner:after,.multiselect__spinner:before{background:transparent;border:3px solid transparent;border-radius:100%;border-top-color:orange;box-shadow:0 0 0 1px transparent;content:"";height:16px;left:50%;margin:-8px 0 0 -8px;position:absolute;top:50%;width:16px}.multiselect__spinner{border-radius:50px}.qty .count{color:#0f213d!important;font-family:Open Sans;font-size:25px;font-weight:700;line-height:30px;min-width:35px;padding:0 2px}.qty .count,.qty button{display:inline-block;text-align:center;vertical-align:top}.qty button{background:#f08b23;border-radius:50%;color:#fff;cursor:pointer;font:30px/1 Arial,sans-serif;height:30px;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;width:30px}.qty div{text-align:center}.qty .minus:hover,.qty .plus:hover{background:#0f213d!important;color:#fff}.qty input{border:0;width:60%}.qty input::-webkit-inner-spin-button,.qty input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.qty input:disabled{background-color:#fff}',""]);const r=o},80223:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(1519),o=n.n(i)()((function(t){return t[1]}));o.push([t.id,"input[type=file][data-v-2250d040]{cursor:pointer;height:200px;opacity:0;position:absolute;width:100%}.filezone[data-v-2250d040]{background:#ccc;color:dimgray;cursor:pointer;min-height:200px;outline:2px dashed grey;outline-offset:-10px;padding:10px;position:relative}.filezone[data-v-2250d040]:hover{background:silver}.filezone p[data-v-2250d040]{font-size:1.2em;padding:50px;text-align:center}div.file-listing img[data-v-2250d040]{max-width:90%}div.file-listing[data-v-2250d040]{border-bottom:1px solid #ddd;margin:auto;padding:10px}.preview[data-v-2250d040],div.file-listing img[data-v-2250d040]{height:100px}.preview[data-v-2250d040]{max-width:90%}div.success-container[data-v-2250d040]{color:green;text-align:center}div.remove-container[data-v-2250d040]{text-align:center}div.remove-container a[data-v-2250d040]{color:red;cursor:pointer}a.submit-button[data-v-2250d040]{background-color:green;color:#fff;display:block;font-weight:700;margin:20px auto auto;padding:10px;text-align:center;text-transform:uppercase;width:200px}",""]);const r=o},32720:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var i=n(32982),o=n(30381),r=n.n(o);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return e};var t,e={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},l=r.iterator||"@@iterator",d=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function p(t,e,n,i){var r=e&&e.prototype instanceof y?e:y,a=Object.create(r.prototype),s=new N(i||[]);return o(a,"_invoke",{value:z(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var h="suspendedStart",v="suspendedYield",m="executing",_="completed",g={};function y(){}function b(){}function w(){}var x={};u(x,l,(function(){return this}));var k=Object.getPrototypeOf,C=k&&k(k(E([])));C&&C!==n&&i.call(C,l)&&(x=C);var I=w.prototype=y.prototype=Object.create(x);function A(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function n(o,r,s,l){var d=f(t[o],t,r);if("throw"!==d.type){var c=d.arg,u=c.value;return u&&"object"==a(u)&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(u).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,l)}))}l(d.arg)}var r;o(this,"_invoke",{value:function(t,i){function o(){return new e((function(e,o){n(t,i,e,o)}))}return r=r?r.then(o,o):o()}})}function z(e,n,i){var o=h;return function(r,a){if(o===m)throw new Error("Generator is already running");if(o===_){if("throw"===r)throw a;return{value:t,done:!0}}for(i.method=r,i.arg=a;;){var s=i.delegate;if(s){var l=T(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===h)throw o=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=m;var d=f(e,n,i);if("normal"===d.type){if(o=i.done?_:v,d.arg===g)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(o=_,i.method="throw",i.arg=d.arg)}}}function T(e,n){var i=n.method,o=e.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var r=f(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function E(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(a(e)+" is not iterable")}return b.prototype=w,o(I,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(I),t},e.awrap=function(t){return{__await:t}},A(D.prototype),u(D.prototype,d,(function(){return this})),e.AsyncIterator=D,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new D(p(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},e.values=E,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(i,o){return s.type="throw",s.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),d=i.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var o=i.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:E(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),g}},e}function l(t,e,n,i,o,r,a){try{var s=t[r](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,o)}const d={name:"Edit",data:function(){return{meals:[{Id:"115",Name:"AI",desc:"завтраки, обеды, ужины, напитки"},{Id:"114",Name:"BB",desc:"завтраки"},{Id:"112",Name:"FB",desc:"завтраки, обеды, ужины"},{Id:"121",Name:"FB+",desc:"завтраки, обеды, ужины - расширенное меню"},{Id:"113",Name:"HB",desc:"завтраки, ужины"},{Id:"122",Name:"HB+",desc:"завтраки, ужины - расширенное меню"},{Id:"117",Name:"RO",desc:"без питания"},{Id:"116",Name:"UAI",desc:"завтраки, обеды, ужины, напитки - расширенное меню"},{Id:"129",Name:"SC",desc:"самообслуживание"}],loading:!1,load:!1,start:void 0,end:void 0,new_files:[],seconds:0,interval:"",flag:!1,edit_tour:"",minDate:"01/01/2000"}},computed:{menu:function(){return this.$store.getters.menu},clients:function(){return this.$store.getters.clients},isAdmin:function(){return this.$store.getters.isAdmin},isManager:function(){return this.$store.getters.isManager},tourModule:function(){return this.$store.getters.tourModule},countries:function(){return this.$store.getters.countries},cities:function(){return this.$store.getters.cities},hotels:function(){return this.$store.getters.hotels},branches:function(){return this.$store.getters.branches},isCountriesLoading:function(){return this.$store.getters.isCountriesLoading},isCitiesLoading:function(){return this.$store.getters.isCitiesLoading},isHotelsLoading:function(){return this.$store.getters.isHotelsLoading}},created:function(){0===this.countries.length&&this.$store.dispatch("getCountries",{town_id:0})},mounted:function(){var t=this;if(this.clients.length>0){this.load=!0;var e=this.clients.find((function(e){return e.id==t.$route.params.client_id}));this.edit_tour=e.tours.find((function(e){return e.id==t.$route.params.id})),this.loadAdditionalData(),this.load=!1}else this.getClient()},methods:{back:function(){this.isAdmin&&this.$router.push("/admin/client-tours/"+this.$route.params.client_id),this.isManager&&this.$router.push("/manager/client-tours/"+this.$route.params.client_id)},loadAdditionalData:function(){var t=this;if(this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),"Любой"!=this.edit_tour.TourInfo.resort.Name){var e=this.edit_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:e,star_id:"0"}).then((function(){-1==t.hotels.findIndex((function(e){return e.Id==t.edit_tour.TourInfo.hotel.Id}))&&(t.edit_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"});this.edit_tour.TourInfo.start=r()(this.edit_tour.TourInfo.date_range.start,"DD/MM/YYYY").toDate(),this.edit_tour.TourInfo.end=r()(this.edit_tour.TourInfo.date_range.end,"DD/MM/YYYY").toDate(),this.edit_tour.TourInfo.delete_files=[],this.edit_tour.TourInfo.new_files=[],this.edit_tour.new_files=[]},getClient:function(){var t,e=this;return(t=s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.load=!0,t.next=3,e.$store.dispatch("setClients").then((function(t){e.$store.commit("setClients",t.data.users),e.$store.commit("setDeletedClients",t.data.deleted_users);var n=e.clients.find((function(t){return t.id==e.$route.params.client_id}));e.edit_tour=n.tours.find((function(t){return t.id==e.$route.params.id})),e.loadAdditionalData(),e.load=!1}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){l(r,i,o,a,s,"next",t)}function s(t){l(r,i,o,a,s,"throw",t)}a(void 0)}))})()},chooseEditResortCountry:function(t){this.edit_tour.TourInfo.resort={Name:"Любой"},this.edit_tour.TourInfo.hotel={Name:"Любой"},this.edit_tour.TourInfo.country=t,this.$store.dispatch("getCities",this.edit_tour.TourInfo.country.Id),this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditResort:function(t){var e=this;if(this.edit_tour.TourInfo.resort=t,"Любой"!=this.edit_tour.TourInfo.resort.Name){var n=this.edit_tour.TourInfo.resort.Id;this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:n,star_id:"0"}).then((function(){-1==e.hotels.findIndex((function(t){return t.Id==e.edit_tour.TourInfo.hotel.Id}))&&(e.edit_tour.TourInfo.hotel={Name:"Любой"})}))}else this.$store.dispatch("getHotels",{country_id:this.edit_tour.TourInfo.country.Id,town_id:"0",star_id:"0"})},chooseEditHotel:function(t){this.edit_tour.TourInfo.hotel=t},changeEditDateRange:function(t){this.edit_tour.TourInfo.date_range=t},chooseEditMeal:function(t){this.edit_tour.TourInfo.meal=t},changeEditPrice:function(){this.edit_tour.TourInfo.left=this.edit_tour.TourInfo.price-this.edit_tour.TourInfo.paid},handleEditFiles:function(){for(var t=this.$refs.edit_tour_files.files,e=0;e<t.length&&/\.(jpe?g|png|svg|pdf|txt|docx|doc)$/i.test(t[e].name);e++){var n=new Date;this.new_files.push({type:"file",name:t[e].name,data:t[e],date:n}),this.getImagePreviews(this.new_files)}},onEditResult:function(t){var e=Date.now(),n=new Date;this.new_files.push({type:"audio",name:"record-"+e+".mp3",src:window.URL.createObjectURL(t),data:t,date:n,seconds:this.seconds}),this.countSeconds(),this.getImagePreviews(this.new_files)},deleteFile:function(t,e){this.edit_tour.TourInfo.delete_files.push(t),this.edit_tour.TourInfo.files.splice(e,1)},updateClientTour:function(){var t=this;this.loading=!0,this.edit_tour.StartAt=r()(this.edit_tour.TourInfo.date_range.start,"DD-MM-YYYY"),this.edit_tour.EndAt=r()(this.edit_tour.TourInfo.date_range.end,"DD-MM-YYYY"),console.log(this.edit_tour.EndAt),this.edit_tour.new_files=this.new_files;var e=new FormData;e.append("UserTour",JSON.stringify(this.edit_tour));for(var n=0;n<this.new_files.length;n++){var i=this.new_files[n].data;e.append("new_files["+n+"]",i)}this.$store.dispatch("updateClientTour",e).then((function(e){console.log("response",e),t.edit_tour.TourInfo.delete_files=[],t.edit_tour.TourInfo.new_files=[],t.edit_tour.TourInfo.files=e.TourInfo.files,t.sendMessage("Тур клиента успешно обновлён"),t.loading=!1}))},getImagePreviews:function(t){for(var e=this,n=function(n){if(/\.(jpe?g|png|svg)$/i.test(t[n].name)){var i=new FileReader;i.addEventListener("load",function(){this.$refs["preview"+parseInt(n)][0].src=i.result}.bind(e),!1),i.readAsDataURL(t[n].data)}else e.$nextTick((function(){this.$refs["preview"+parseInt(n)][0].src="/images/LOGO-1.png"}))},i=0;i<t.length;i++)n(i)},removeFile:function(t,e){t.splice(e,1),this.getImagePreviews(t)},onStream:function(t){this.countSeconds(),console.log("Got a stream object:",t)},countSeconds:function(){this.flag=!this.flag,1==this.flag?(this.seconds=0,this.interval=setInterval(this.incrementSeconds,1e3)):clearInterval(this.interval)},incrementSeconds:function(){this.seconds+=1},sendMessage:function(t){this.$notify({group:"info",type:"travel",title:"Сообщение от TravelClub",text:t})}},filters:{pluralizeResorts:function(t){if(1===t)return"курорт";if(t>1&&t<5)return"курорта";if(t>4&&t<20)return"курортов";if(t>19){var e=t%10;return 1===e?"курорт":e>1&&e<5?"курорта":"курортов"}return"курортов"},pluralizeHotels:function(t){if(1===t)return"отель";if(t>1&&t<5)return"отеля";if(t>4&&t<20)return"отелей";if(t>19){var e=t%10;return 1===e?"отель":e>1&&e<5?"отеля":"отелей"}return"отелей"},pluralizeChoose:function(t){return 1===t?"выбран":"выбрано"}},directives:{mask:i.mask}};var c=n(93379),u=n.n(c),p=n(64073),f={insert:"head",singleton:!1};u()(p.Z,f);p.Z.locals;var h=n(72137),v={insert:"head",singleton:!1};u()(h.Z,v);h.Z.locals;var m=n(80223),_={insert:"head",singleton:!1};u()(m.Z,_);m.Z.locals;const g=(0,n(51900).Z)(d,(function(){var t=this,e=t._self._c;return e("div",[e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(n){var i=n.invalid;return[t.load?t._e():e("div",{staticClass:"row mb-5 mx-auto"},[e("div",{staticClass:"col-md-6 col-12"},[e("label",{staticClass:"travel-label"},[t._v("Куда")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"country",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("multiselect",{attrs:{options:t.countries,"option-height":25,placeholder:"Выберите страну","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name",loading:t.isCountriesLoading,disabled:t.isCountriesLoading,"allow-empty":!1},on:{input:t.chooseEditResortCountry},scopedSlots:t._u([{key:"singleLabel",fn:function(n){return[e("b",{class:"slsf-country-to__select-flag flag-ui_narrowtpl_flags_20x13_"+n.option.Id}),t._v(" "),e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(n.option.Name))])])]}},{key:"option",fn:function(n){return[e("b",{class:"slsf-country-to__select-flag flag-ui_narrowtpl_flags_20x13_"+n.option.Id}),t._v(" "),e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(n.option.Name))])])]}}],null,!0),model:{value:t.edit_tour.TourInfo.country,callback:function(e){t.$set(t.edit_tour.TourInfo,"country",e)},expression:"edit_tour.TourInfo.country"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("label",{staticClass:"travel-label"},[t._v("Курорт")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"resort",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("multiselect",{attrs:{value:t.edit_tour.TourInfo.resort,options:t.cities,placeholder:"Введите название курорта","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,loading:t.isCountriesLoading||t.isCitiesLoading,disabled:t.isCountriesLoading||t.isCitiesLoading,"allow-empty":!1,preselectFirst:!0},on:{input:t.chooseEditResort},scopedSlots:t._u([{key:"selection",fn:function(n){var i=n.values,o=(n.search,n.isOpen);return[i.length>3&&!o?e("span",{staticClass:"multiselect__single"},[t._v(t._s(i.length)+" "+t._s(t._f("pluralizeResorts")(i.length))+" "+t._s(t._f("pluralizeChoose")(i.length)))]):t._e()]}}],null,!0)}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("label",{staticClass:"travel-label"},[t._v("Отель")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"hotel",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("multiselect",{attrs:{value:t.edit_tour.TourInfo.hotel,options:t.hotels,placeholder:"Введите название отеля","show-labels":!1,limit:2,maxHeight:200,label:"Name","track-by":"Name","allow-empty":!1,"close-on-select":!0,"clear-on-select":!0,loading:t.isCountriesLoading||t.isHotelsLoading,disabled:t.isCountriesLoading||t.isHotelsLoading},on:{input:t.chooseEditHotel},scopedSlots:t._u([{key:"selection",fn:function(n){var i=n.values,o=(n.search,n.isOpen);return[i.length>3&&!o?e("span",{staticClass:"multiselect__single"},[t._v(t._s(i.length)+" "+t._s(t._f("pluralizeHotels")(i.length))+" "+t._s(t._f("pluralizeChoose")(i.length))+"\n                                ")]):t._e()]}},{key:"singleLabel",fn:function(n){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(n.option.Name))]),t._v(" "),0!=n.option.CommonRate?e("span",{staticClass:"option__title",staticStyle:{float:"right"}},[t._v(t._s(n.option.CommonRate))]):t._e(),t._v(" "),n.option.StarName?e("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[t._v(t._s(n.option.StarName))]):t._e()])]}},{key:"option",fn:function(n){return[e("div",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(n.option.Name))]),t._v(" "),0!=n.option.CommonRate?e("span",{staticClass:"option__title",staticStyle:{float:"right"}},[t._v(t._s(n.option.CommonRate))]):t._e(),t._v(" "),n.option.StarName?e("span",{staticClass:"values__hotel-rating",staticStyle:{float:"right"}},[t._v(t._s(n.option.StarName))]):t._e()])]}}],null,!0)}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("label",{staticClass:"travel-label"},[t._v("Категория номера")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"room_type",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("div",{staticClass:"row multiselect__tags align-items-center justify-content-center m-auto",staticStyle:{width:"100%"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_tour.TourInfo.room_type,expression:"edit_tour.TourInfo.room_type"}],staticClass:"multiselect__input price",attrs:{type:"text",placeholder:"Категория номера"},domProps:{value:t.edit_tour.TourInfo.room_type},on:{input:function(e){e.target.composing||t.$set(t.edit_tour.TourInfo,"room_type",e.target.value)}}})]),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("label",{staticClass:"travel-label"},[t._v("Питание")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"meal",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("multiselect",{attrs:{options:t.meals,"option-height":25,placeholder:"Выберите питание","show-labels":!1,maxHeight:200,label:"Name","track-by":"Name","close-on-select":!0,"clear-on-select":!0,"allow-empty":!1},on:{input:t.chooseEditMeal},scopedSlots:t._u([{key:"singleLabel",fn:function(n){return[e("span",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(n.option.Name))])])]}},{key:"option",fn:function(n){return[e("div",[e("div",{staticClass:"option__desc"},[e("span",{staticClass:"option__title"},[t._v(t._s(n.option.Name))])]),t._v(" "),e("div",{staticClass:"row align-items-center m-auto",staticStyle:{width:"100%",height:"100%"}},[e("p",{staticStyle:{"font-size":"12px",margin:"0px"}},[t._v(t._s(n.option.desc))])])])]}}],null,!0),model:{value:t.edit_tour.TourInfo.meal,callback:function(e){t.$set(t.edit_tour.TourInfo,"meal",e)},expression:"edit_tour.TourInfo.meal"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("div",{staticClass:"row align-items-center w-100 mx-auto",staticStyle:{width:"100%"}},[e("label",{staticClass:"travel-label"},[t._v("Даты тура")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"date_range",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("div",{staticClass:"row align-items-center justify-content-center m-auto w-100",staticStyle:{width:"100%"}},[e("VueHotelDatepicker",{ref:"datepickerId",staticClass:"w-100",attrs:{startDate:t.edit_tour.TourInfo.start,endDate:t.edit_tour.TourInfo.end,minDate:t.minDate,placeholder:"Даты тура",format:"DD/MM/YYYY",weekList:["Вс.","Пн.","Вт.","Ср.","Чт.","Пт.","Сб."],monthList:["Янв.","Фев.","Мар.","Апр.","Май.","Июн.","Июл.","Авг.","Сен.","Окт","Ноя.","Дек."],fromText:"С",toText:"По",resetText:"Очистить",confirmText:"Подтвердить",mobile:"mobile"},on:{update:t.changeEditDateRange}})],1),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1)]),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("div",{staticClass:"row align-items-center w-100 m-auto"},[e("label",{staticClass:"travel-label"},[t._v("Цена")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"price",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("b-form-input",{staticClass:"travel-input",attrs:{type:"number",step:"1",min:"0"},on:{input:t.changeEditPrice},model:{value:t.edit_tour.TourInfo.price,callback:function(e){t.$set(t.edit_tour.TourInfo,"price",e)},expression:"edit_tour.TourInfo.price"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1)]),t._v(" "),e("div",{staticClass:"col-md-6 col-12"},[e("div",{staticClass:"row align-items-center w-100 m-auto"},[e("label",{staticClass:"travel-label"},[t._v("Выплачено")]),t._v(" "),e("ValidationProvider",{staticStyle:{width:"100%","text-align":"center"},attrs:{name:"paid",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var i=n.errors;return[e("b-form-input",{staticClass:"travel-input",attrs:{type:"number",step:"1",min:"0"},on:{input:t.changeEditPrice},model:{value:t.edit_tour.TourInfo.paid,callback:function(e){t.$set(t.edit_tour.TourInfo,"paid",e)},expression:"edit_tour.TourInfo.paid"}}),t._v(" "),e("span",{staticClass:"validate-error"},[t._v(t._s(i[0]))])]}}],null,!0)})],1)]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"row align-items-center w-100 mx-auto mt-3",staticStyle:{width:"100%"}},[e("label",{staticClass:"travel-label"},[t._v("Дополнительные услуги")]),t._v(" "),e("b-form-textarea",{staticClass:"travel-input",staticStyle:{padding:"5px 15px",border:"1px solid #f08b23","border-radius":"20px !important"},attrs:{rows:"4",cols:"80",placeholder:"Дополнительные услуги"},model:{value:t.edit_tour.TourInfo.services,callback:function(e){t.$set(t.edit_tour.TourInfo,"services",e)},expression:"edit_tour.TourInfo.services"}})],1)]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("label",{staticClass:"travel-label"},[t._v("Авиабилеты")]),t._v(" "),e("avia-tickets-list",{attrs:{avia_tickets:t.edit_tour.TourInfo.avia_tickets}})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("label",{staticClass:"travel-label"},[t._v("Пассажиры")]),t._v(" "),e("passengers-list",{attrs:{passengers:t.edit_tour.TourInfo.passengers}})],1),t._v(" "),e("div",{staticClass:"col-md-12"},[e("label",{staticClass:"travel-label"},[t._v("Файлы для клиента")]),t._v(" "),e("div",{staticClass:"form-group row mt-2"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"large-12 medium-12 small-12 filezone"},[e("input",{ref:"edit_tour_files",attrs:{type:"file",id:"files",multiple:""},on:{change:function(e){return t.handleEditFiles()}}}),t._v(" "),e("p",[t._v("\n                                Перетащите файл(ы) сюда"),e("br"),t._v("или нажмите для поиска\n                            ")])]),t._v(" "),e("label",{staticClass:"travel-label"},[t._v("Или запишите голосовое сообщение")]),t._v(" "),e("div",{staticClass:"d-flex justify-content-center mt-2"},[e("vue-record-audio",{attrs:{mode:"press"},on:{stream:t.onStream,result:t.onEditResult}})],1),t._v(" "),e("div",{staticClass:"file-listing"},t._l(t.edit_tour.TourInfo.files,(function(n,i){return e("div",{key:n.name,staticClass:"list-group-item"},[e("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[e("div",{staticClass:"col-4 text-center"},[/\.(jpe?g|png|svg)$/i.test(n.name)?e("img",{staticClass:"preview",attrs:{src:n.path}}):e("img",{staticClass:"preview",attrs:{src:"/images/LOGO-1.png"}})]),t._v(" "),e("div",{staticClass:"col-8"},["file"==n.type?e("div",[e("p",{staticClass:"travel-label"},[t._v(t._s(n.name))])]):t._e(),t._v(" "),"audio"==n.type?e("div",[e("audio-player",{attrs:{audio:n}})],1):t._e()])]),t._v(" "),e("div",{staticClass:"remove-container"},[0==t.loading?e("a",{staticClass:"remove",on:{click:function(e){return t.deleteFile(n,i)}}},[t._v("Удалить")]):t._e()])])})),0),t._v(" "),e("div",{staticClass:"file-listing"},t._l(t.new_files,(function(n,i){return e("div",{staticClass:"list-group-item"},[e("div",{staticClass:"row m-auto w-100 align-items-center justify-content-center"},[e("div",{staticClass:"col-4 text-center"},[e("img",{ref:"preview"+parseInt(i),refInFor:!0,staticClass:"preview"})]),t._v(" "),e("div",{staticClass:"col-8"},["file"==n.type?e("div",[e("p",{staticClass:"travel-label"},[t._v(t._s(n.data.name))])]):t._e(),t._v(" "),"audio"==n.type?e("div",[e("audio-player",{attrs:{audio:n}})],1):t._e()])]),t._v(" "),e("div",{staticClass:"remove-container"},[0==t.loading?e("a",{staticClass:"remove",on:{click:function(e){return t.removeFile(t.new_files,i)}}},[t._v("Отменить")]):t._e()])])})),0)])])])]),t._v(" "),t.load?t._e():e("div",{staticClass:"row w-100 m-auto"},[e("div",{staticClass:"col-6 col-md-6 contact-btn text-center"},[e("button",{staticClass:"btn btn-travel",staticStyle:{width:"100%"},on:{click:t.back}},[t._v("\n                    Отмена\n                ")])]),t._v(" "),e("div",{staticClass:"col-6 col-md-6 contact-btn text-center"},[e("button",{staticClass:"btn btn-travel",staticStyle:{width:"100%"},attrs:{type:"submit",disabled:i||t.loading},on:{click:t.updateClientTour}},[e("div",{staticClass:"row align-items-center justify-content-center m-auto w-100 h-100 text-center"},[t.loading?e("span",{staticClass:"spinner-border spinner-border-sm mx-2",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" "),t.loading?e("span",{staticClass:"sr-only"},[t._v("Loading...")]):t._e(),t._v("\n                        Сохранить\n                    ")])])])]),t._v(" "),t.load?e("div",{staticClass:"row w-100 m-auto"},[e("div",{staticClass:"text-center text-warning my-2"},[e("b-spinner",{staticClass:"align-middle",attrs:{variant:"warning"}}),t._v(" "),e("strong",[t._v("Загрузка...")])],1)]):t._e()]}}])})],1)}),[],!1,null,"2250d040",null).exports}}]);